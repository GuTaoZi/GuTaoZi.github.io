<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>树德书院2022级新生分班&amp;寝室公示</title>
    <url>/2022/08/10/22%E7%BA%A7%E5%88%86%E7%8F%AD%E4%B8%8E%E5%AF%9D%E5%AE%A4%E5%AE%89%E6%8E%92/</url>
    <content><![CDATA[<h1 id="分班-amp-寝室安排"><a href="#分班-amp-寝室安排" class="headerlink" title="分班&amp;寝室安排"></a>分班&amp;寝室安排</h1><h2 id="2216班"><a href="#2216班" class="headerlink" title="2216班"></a>2216班</h2><p>带班大学长：<strong>陈于思  赵旻炅  朱佑鑫</strong></p>
<p>男生寝室位于二期11栋3楼，女生寝室位于二期11栋13楼</p>
<p>(下表成员顺序不分先后)</p>
<h3 id="女生寝室"><a href="#女生寝室" class="headerlink" title="女生寝室"></a>女生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>1302</td>
<td>朱星颖</td>
<td>付垚</td>
<td>贺雅楠</td>
<td>张宇欣</td>
</tr>
<tr>
<td>1303</td>
<td>于斯瑶</td>
<td>陈瑶</td>
<td>谷雨晴</td>
<td>祖诗淇</td>
</tr>
</tbody>
</table>
</div>
<h3 id="男生寝室"><a href="#男生寝室" class="headerlink" title="男生寝室"></a>男生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>302</td>
<td>魏恺志</td>
<td>刘彬越</td>
<td>王益时</td>
<td>庄熙文</td>
</tr>
<tr>
<td>303</td>
<td>苑长琦</td>
<td>胡恺翔</td>
<td>陈沛安</td>
<td>赵春源</td>
</tr>
<tr>
<td>304</td>
<td>王秉旸</td>
<td>马国恒</td>
<td>陈政</td>
<td>赖海斌</td>
</tr>
<tr>
<td>305</td>
<td>谭鑫</td>
<td>张博钧</td>
<td>徐进哲</td>
<td>刘羽谦</td>
</tr>
<tr>
<td>307</td>
<td>敖恺</td>
<td>杨赛阳</td>
<td>余哲霖</td>
<td>李蔚澄</td>
</tr>
<tr>
<td>308</td>
<td>杨毅</td>
<td>张仁睿</td>
<td>梅笑寒</td>
<td>梁马浴阳</td>
</tr>
<tr>
<td>309</td>
<td>薛钧译</td>
<td>贺宇宸</td>
<td>祝林枫</td>
<td>丛辉煜</td>
</tr>
<tr>
<td>310</td>
<td>干宇昊</td>
<td>方磊</td>
<td>杨熙楠</td>
<td>何昊宸</td>
</tr>
<tr>
<td>311</td>
<td>王泓璋</td>
<td>傅昶玮</td>
<td>肖淇文</td>
<td>单俊杰</td>
</tr>
<tr>
<td>312</td>
<td>黄梓烁</td>
<td>林钤韪</td>
<td>林安森</td>
<td>郭泳铭</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2217班"><a href="#2217班" class="headerlink" title="2217班"></a>2217班</h2><p>带班大学长：<strong>高斯  郭之骐  石晶晶</strong></p>
<p>男生寝室位于二期11栋3楼，女生寝室位于二期11栋13楼</p>
<p>(下表成员顺序不分先后)</p>
<h3 id="女生寝室-1"><a href="#女生寝室-1" class="headerlink" title="女生寝室"></a>女生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>1304</td>
<td>孙点点</td>
<td>李文炅</td>
<td>徐湉苓</td>
<td>张恺桢</td>
</tr>
<tr>
<td>1305</td>
<td>林子奕</td>
<td>姜跃琳</td>
<td>王聪怡</td>
<td>黄楚惟</td>
</tr>
<tr>
<td>1306</td>
<td>吴蔚芷</td>
<td>王子童</td>
<td>林曈</td>
<td>徐欣</td>
</tr>
</tbody>
</table>
</div>
<h3 id="男生寝室-1"><a href="#男生寝室-1" class="headerlink" title="男生寝室"></a>男生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>313</td>
<td>李先旭</td>
<td>王亦煊</td>
<td>张倍诚</td>
<td>肖正昊</td>
</tr>
<tr>
<td>314</td>
<td>黄敬文</td>
<td>张扬</td>
<td>李东博</td>
<td>陶昱霖</td>
</tr>
<tr>
<td>315</td>
<td>李凌宇</td>
<td>刘浩然</td>
<td>符国凯榆</td>
<td>张柬禾</td>
</tr>
<tr>
<td>316</td>
<td>林晖</td>
<td>林绍阳</td>
<td>洪汀渊</td>
<td>陈镇宇</td>
</tr>
<tr>
<td>317</td>
<td>申文琨</td>
<td>邓炫昊</td>
<td>张一丁</td>
<td>高啟坤</td>
</tr>
<tr>
<td>318</td>
<td>刘昕易</td>
<td>陈凯</td>
<td>洪源</td>
<td>徐焓茁</td>
</tr>
<tr>
<td>319</td>
<td>郭家麟</td>
<td>刘语玹</td>
<td>简迅</td>
<td>徐杰</td>
</tr>
<tr>
<td>320</td>
<td>何家兆</td>
<td>陈易航</td>
<td>万博扬</td>
<td>徐璇喆</td>
</tr>
<tr>
<td>321</td>
<td>黄睿轩</td>
<td>胡帅</td>
<td>吴霁阳</td>
<td>白卓奇</td>
</tr>
<tr>
<td>322</td>
<td>司浩宇</td>
<td>王明远</td>
<td>熊星宇</td>
<td>周一鸣</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2218班"><a href="#2218班" class="headerlink" title="2218班"></a>2218班</h2><p>带班大学长：<strong>樊斯特  林雨诗  吴星霖</strong></p>
<p>男生寝室位于荔园4栋6楼，女生寝室位于二期11栋13楼</p>
<p>(下表成员顺序不分先后)</p>
<h3 id="女生寝室-2"><a href="#女生寝室-2" class="headerlink" title="女生寝室"></a>女生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>1307</td>
<td>刘依水</td>
<td>毛郅霖</td>
<td>覃奕颖</td>
<td>张畅洋</td>
</tr>
<tr>
<td>1308</td>
<td>朱家源</td>
<td>林小央</td>
<td>王一茜</td>
<td>李雅婧</td>
</tr>
<tr>
<td>1309</td>
<td>张馨文</td>
<td>赵子宁</td>
<td>李叶欣</td>
<td>朱玉</td>
</tr>
</tbody>
</table>
</div>
<h3 id="男生寝室-2"><a href="#男生寝室-2" class="headerlink" title="男生寝室"></a>男生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>601</td>
<td>王意铭</td>
<td>王扶林</td>
<td>任轩锐</td>
<td>邓子涵</td>
</tr>
<tr>
<td>602</td>
<td>肖泽昊</td>
<td>杨敬毅</td>
<td>舒飏</td>
<td>李轩宇</td>
</tr>
<tr>
<td>603</td>
<td>梁卓均</td>
<td>杜运泽</td>
<td>潘炜</td>
<td>梁瑞健</td>
</tr>
<tr>
<td>604</td>
<td>张皓佳</td>
<td>李宇轩</td>
<td>王伟夷</td>
<td>冯松宇</td>
</tr>
<tr>
<td>605</td>
<td>龚相宇</td>
<td>赵孟飞</td>
<td>许致韬</td>
<td>李济涵</td>
</tr>
<tr>
<td>606</td>
<td>展雨畅</td>
<td>吉俊昌</td>
<td>魏昊阳</td>
<td>郑竣航</td>
</tr>
<tr>
<td>607</td>
<td>周益贤</td>
<td>张育鹏</td>
<td>林宏博</td>
<td>顾博海</td>
</tr>
<tr>
<td>608</td>
<td>陈峙安</td>
<td>欧阳安男</td>
<td>徐剑儒</td>
<td>秦浩洋</td>
</tr>
<tr>
<td>609</td>
<td>潘健辉</td>
<td>邓凯轩</td>
<td>沈博闻</td>
<td>周子涵</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2219班"><a href="#2219班" class="headerlink" title="2219班"></a>2219班</h2><p>带班大学长：<strong>范王卓  沙骏飞  张成杰</strong></p>
<p>男生寝室位于荔园4栋7楼，女生寝室位于二期11栋13楼</p>
<p>(下表成员顺序不分先后)</p>
<h3 id="女生寝室-3"><a href="#女生寝室-3" class="headerlink" title="女生寝室"></a>女生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>1310</td>
<td>付宛昕</td>
<td>乔欣悦</td>
<td>赵珮岑</td>
<td>张夏菲</td>
</tr>
<tr>
<td>1311</td>
<td>林洋帆</td>
<td>孙沐妍</td>
<td>修照瑜</td>
<td>范新齐</td>
</tr>
<tr>
<td>1312</td>
<td>钟林然</td>
<td>黄云歆</td>
<td>韩静仪</td>
<td>王菁仪</td>
</tr>
</tbody>
</table>
</div>
<h3 id="男生寝室-3"><a href="#男生寝室-3" class="headerlink" title="男生寝室"></a>男生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>711</td>
<td>郭权德</td>
<td>王者也</td>
<td>刘梓懿</td>
<td>胡子川</td>
</tr>
<tr>
<td>712</td>
<td>丁昊天</td>
<td>陆逸斯</td>
<td>宋尚恒</td>
<td>张承璧</td>
</tr>
<tr>
<td>713</td>
<td>周靖杰</td>
<td>闫闻智</td>
<td>王语潇</td>
<td>欧赛</td>
</tr>
<tr>
<td>714</td>
<td>张益嘉</td>
<td>马梽钊</td>
<td>叶宇灏</td>
<td>肖鉴珅</td>
</tr>
<tr>
<td>715</td>
<td>刘文烨</td>
<td>张珈烨</td>
<td>黄思源</td>
<td>范修豪</td>
</tr>
<tr>
<td>716</td>
<td>胡泊</td>
<td>刘思畅</td>
<td>洪声杨</td>
<td>周子恒</td>
</tr>
<tr>
<td>717</td>
<td>笃岳霖</td>
<td>李睿康</td>
<td>马博涵</td>
<td>王硕涵</td>
</tr>
<tr>
<td>718</td>
<td>刘祈东</td>
<td>陈世有</td>
<td>朱炫睿</td>
<td>尤湧棋</td>
</tr>
</tbody>
</table>
</div>
<h2 id="2220班"><a href="#2220班" class="headerlink" title="2220班"></a>2220班</h2><p>带班大学长：<strong>丁一轩  王芷馨  易翔</strong></p>
<p>男生寝室位于荔园4栋5楼，女生寝室位于二期11栋13楼</p>
<p>(下表成员顺序不分先后)</p>
<h3 id="女生寝室-4"><a href="#女生寝室-4" class="headerlink" title="女生寝室"></a>女生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>1313</td>
<td>李岳阳</td>
<td>施子涵</td>
<td>张蓓</td>
<td>柳秦璇</td>
</tr>
<tr>
<td>1314</td>
<td>李连馨</td>
<td>王雯琳</td>
<td>李泽坤</td>
<td>吴亚唯</td>
</tr>
</tbody>
</table>
</div>
<h3 id="男生寝室-4"><a href="#男生寝室-4" class="headerlink" title="男生寝室"></a>男生寝室</h3><div class="table-container">
<table>
<thead>
<tr>
<th>寝室号</th>
<th>寝</th>
<th>室</th>
<th>成</th>
<th>员</th>
</tr>
</thead>
<tbody>
<tr>
<td>514</td>
<td>景晓龙</td>
<td>胡睿</td>
<td>刘春晓</td>
<td>邵研</td>
</tr>
<tr>
<td>515</td>
<td>苗桐硕</td>
<td>钟兴华</td>
<td>吴梦轩</td>
<td>于荣焰</td>
</tr>
<tr>
<td>516</td>
<td>翟文韬</td>
<td>苏奕名</td>
<td>刘琼辉</td>
<td>叶航见</td>
</tr>
<tr>
<td>517</td>
<td>刘建乐</td>
<td>刘逸凡</td>
<td>唐泽昆</td>
<td>陈思锦</td>
</tr>
<tr>
<td>518</td>
<td>王佳申</td>
<td>吴文泽</td>
<td>陈罗玥平</td>
<td>万力行</td>
</tr>
<tr>
<td>519</td>
<td>王天源</td>
<td>陈汝聪</td>
<td>奚雨桐</td>
<td>赵彦博</td>
</tr>
</tbody>
</table>
</div>
<h1 id="寝室平面结构图"><a href="#寝室平面结构图" class="headerlink" title="寝室平面结构图"></a>寝室平面结构图</h1><h2 id="二期11栋"><a href="#二期11栋" class="headerlink" title="二期11栋"></a>二期11栋</h2><p>*11栋各层编号方式相同，此处仅展示3楼结构</p>
<p><img src="https://s2.loli.net/2022/08/10/lEmTuGBveryU3DV.jpg" alt=""></p>
<h2 id="荔园4栋6楼"><a href="#荔园4栋6楼" class="headerlink" title="荔园4栋6楼"></a>荔园4栋6楼</h2><p><img src="https://s2.loli.net/2022/08/10/qCNMEpYsj4gOo98.jpg" alt=""></p>
<h2 id="荔园4栋7楼"><a href="#荔园4栋7楼" class="headerlink" title="荔园4栋7楼"></a>荔园4栋7楼</h2><p><img src="https://s2.loli.net/2022/08/10/hB6tRGmUMzfE3q8.jpg" alt="BA4FL_CFL@P6LB56Y___I0F.jpg" style="zoom:50%;" /></p>
<h2 id="荔园4栋5楼"><a href="#荔园4栋5楼" class="headerlink" title="荔园4栋5楼"></a>荔园4栋5楼</h2><p><img src="https://s2.loli.net/2022/08/10/bdOQ4S3aeZJ1WGI.jpg" alt=""></p>
]]></content>
      <categories>
        <category>学长团</category>
      </categories>
      <tags>
        <tag>学长团</tag>
      </tags>
  </entry>
  <entry>
    <title>SUSTech 培养方案指南 by 咕桃</title>
    <url>/2022/08/12/2022%E5%9F%B9%E5%85%BB%E6%96%B9%E6%A1%88%E8%A7%A3%E8%AF%BB%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p><strong>点击下载：</strong><a href="http://tao.sustech.edu.cn/UserFiles/editor/file/20220809/1660027475636002188.zip"><strong>南方科技大学2022级本科人才培养方案</strong></a></p>
<blockquote>
<p><strong>本博客适用于南方科技大学2022级新生，2023年培养方案解读施工中，请耐心等待。</strong></p>
<p>南科大会在每个年级入学前发布对应年级的培养方案，内容包含：</p>
<ul>
<li>通识课程培养方案</li>
<li>各系下设专业情况</li>
<li>所有专业在1+3/2+2进系时对于先修课程的要求</li>
<li>所有专业对于不同课程的推荐修读学期</li>
<li>所有专业在毕业时对于修读课程的要求</li>
</ul>
<p>本文意在简单讲解培养方案该怎么读，培养方案上有哪些东西没写出来，以及如何结合培养方案来进行大一的选课。如果本文能对你有所帮助，在下当不胜荣幸。</p>
<p>——咕桃</p>
</blockquote>
<h1 id="Part-Ⅰ-通识培养方案"><a href="#Part-Ⅰ-通识培养方案" class="headerlink" title="Part Ⅰ. 通识培养方案"></a>Part Ⅰ. 通识培养方案</h1><p>这是对于所有专业都适用的通识课要求，其中需要重点看(各专业培养方案不会重点提)的主要是下面几个部分</p>
<h2 id="思想政治教育模块"><a href="#思想政治教育模块" class="headerlink" title="思想政治教育模块"></a>思想政治教育模块</h2><p>一共九门课16学分，要求全部修读，其中有五门理论课程(姑且这么叫吧)和四门实践课。</p>
<p>理论课程是需要在选课系统里进行积分选课的，需要平时每周去上课。</p>
<p>实践课程则是每个学期末书院会安排实践课论文的提交，以及青马班/寒假母校行/重走长征路这一类的假期实践活动可以算入实践课时长，认证时长后才能提交论文，这个等大一上期末书院会具体讲解。</p>
<p><del>妮可在选上双一流之后，思政课形势稳中向好，期末考查形式可能会逐渐向严发展，建议尽早完成修读</del></p>
<h2 id="基础素质培养模块"><a href="#基础素质培养模块" class="headerlink" title="基础素质培养模块"></a>基础素质培养模块</h2><h3 id="体育类"><a href="#体育类" class="headerlink" title="体育类"></a>体育类</h3><p>一共六门课四学分，需要在选课系统上选择(种类非常丰富建议多选几种体验)，最后两门体育课是没有学分的。</p>
<p>不一定要每学期都选，但毕业需要读完六门体育课，建议跟大家一起大一到大三六学期学完。</p>
<h3 id="军训类"><a href="#军训类" class="headerlink" title="军训类"></a>军训类</h3><p>军训通过则大一上期末会自动加进你的已修课程，无需选课。</p>
<p>军训期间正常表现，不要太皮就能过，以及会有一次开卷军事理论考试，正常做态度不太离谱都能过。总结而言就是军训需要重训的是极个别同学。</p>
<h3 id="综合素质类"><a href="#综合素质类" class="headerlink" title="综合素质类"></a>综合素质类</h3><p>这个不用太在意，无需选课。</p>
<h3 id="美育类"><a href="#美育类" class="headerlink" title="美育类"></a>美育类</h3><p>也叫艺术类，需要在选课系统选课，在选课系统的<strong>开课院系</strong>筛选<strong>艺术中心</strong>即可，选一门两学分的就可以了。</p>
<h2 id="基础能力培养模块"><a href="#基础能力培养模块" class="headerlink" title="基础能力培养模块"></a>基础能力培养模块</h2><h3 id="计算机类"><a href="#计算机类" class="headerlink" title="计算机类"></a>计算机类</h3><p>从2022级开始，<u>CS109计算机程序设计基础</u>将代替原<u>计算机程序设计基础A</u>，而CS110~CS113提供了Java, C, Python, MATLAB四门语言的课程代替原<u>计算机程序设计基础B</u>。</p>
<p>2022级各专业对于计算机课程的先修要求也将按照CS109或其他计算机课程进行调整。</p>
<p>目前选课系统暂未显示有开设计算机导论B课程，因此入学是否有计算机分级考试<u>尚不明确</u>。</p>
<h3 id="写作类"><a href="#写作类" class="headerlink" title="写作类"></a>写作类</h3><p>需要选课系统自选，只有写作与交流一门pf课，<strong><em><u>非常非常非常</u></em></strong>建议大一修读，会教你如何调整论文格式、如何参考文献、如何作报告、如何用好电子图书馆…务必认真学！不要折磨你的队友，让他收你的论文烂摊子熬夜到三点（</p>
<p>虽然只是pf课，但绝对是非常实用的一门课程，你学的越早，折磨队友折磨的越少。</p>
<h3 id="国学类"><a href="#国学类" class="headerlink" title="国学类"></a>国学类</h3><p>需要选课系统自选，选一门两学分的足够，可以考虑在大三大四比较休闲的时候选。</p>
<h3 id="外语类"><a href="#外语类" class="headerlink" title="外语类"></a>外语类</h3><p>需要选课系统自选。可以确定今年仍然会进行英语分级考试，根据考试结果将同学分为三类以安排最合适的课程。</p>
<ul>
<li><p>A类(不到10%)：</p>
<p>仅需修读SUSTech English Ⅲ 和 English for Academic Purposes(EAP) 和至少一门CLE选修课</p>
</li>
<li><p>B类(大部分同学)：</p>
<p>需修读SUSTech English Ⅱ，SUSTech English Ⅲ 和 EAP 和至少一门CLE选修课</p>
</li>
<li><p>C类：</p>
<p>需修读SUSTech English Ⅰ，SUSTech English Ⅱ，SUSTech English Ⅲ 和 EAP</p>
</li>
</ul>
<p>语言中心(CLE)课程有必修有选修，入学分级考试决定你必修上什么，以及需不需要上选修。</p>
<p>SUSTech English一周两节四学分，EAP一周一节两学分，多学和少学各有优势：</p>
<p>多学两门SUSTech English，给分都很漂亮，可以用来提绩点，不用上选修</p>
<p>少学两门SUSTech English，可以腾出更多的时间和学分选其他课，并且提前结束语言课修读</p>
<h3 id="人文社科类"><a href="#人文社科类" class="headerlink" title="人文社科类"></a>人文社科类</h3><p>毕业要求6学分，人文2学分，社科2学分，剩余2学分任选，大一没时间/没学分可以考虑大三大四。</p>
<h3 id="自然科学基础类"><a href="#自然科学基础类" class="headerlink" title="自然科学基础类"></a>自然科学基础类</h3><p>这是毕业要求，在大四前修读完就行，但是其实很多课都是进系的先修，只有个别不要求，大一没时间可以大三大四补上。</p>
<p>以下每一行选一个就可以了(括号内从易到难)：</p>
<p>(高等微积分，高等数学，数学分析)</p>
<p>(线性代数，高等代数)</p>
<p>(大学物理，普通物理学)</p>
<p>基础物理实验</p>
<p>(大学化学，化学原理)</p>
<p>(生命科学概论，生物学原理)</p>
<h3 id="大类专业概论"><a href="#大类专业概论" class="headerlink" title="大类专业概论"></a>大类专业概论</h3><p>随便选两学分就行。</p>
<h1 id="Part-Ⅱ-各系下设专业情况"><a href="#Part-Ⅱ-各系下设专业情况" class="headerlink" title="Part Ⅱ. 各系下设专业情况"></a>Part Ⅱ. 各系下设专业情况</h1><p>这个在通识培养方案里有，可以看看有没有自己感兴趣的专业awa</p>
<p><img src="https://s2.loli.net/2022/08/11/xzEn4XWeq7MP3mY.png" alt="_M_ZC9P1PSVV80H_XV__I_X.png"></p>
<h1 id="Part-Ⅲ-进系先修要求解读"><a href="#Part-Ⅲ-进系先修要求解读" class="headerlink" title="Part Ⅲ. 进系先修要求解读"></a>Part Ⅲ. 进系先修要求解读</h1><p>每个专业培养方案前面都会简单把通识培养方案重复一遍，这里就跳过了，让我们从专业先修开始吧。</p>
<h2 id="进系模式"><a href="#进系模式" class="headerlink" title="进系模式"></a>进系模式</h2><p>南方科技大学专业选择主要有两个模式：1+3进系和2+2进系，两种选择没有本质差别，也有各自的优点。</p>
<h3 id="1-3进系"><a href="#1-3进系" class="headerlink" title="1+3进系"></a>1+3进系</h3><p>这种模式其实是后来添加的，目前暂时是主流。</p>
<ul>
<li>提前进系，选导师比较自由</li>
<li>更早进行专业课学习</li>
<li><del>进系要求先修课更少</del>(似乎从这一届开始1+3和2+2先修要求一样了)</li>
</ul>
<h3 id="2-2进系"><a href="#2-2进系" class="headerlink" title="2+2进系"></a>2+2进系</h3><ul>
<li>有更多的时间了解各个专业</li>
<li>先修课压力较小(平均每学期所需的先修课更少)</li>
<li>可以多一年了解不同专业的吐槽（</li>
</ul>
<h2 id="先修要求"><a href="#先修要求" class="headerlink" title="先修要求"></a>先修要求</h2><h3 id="简单看一眼"><a href="#简单看一眼" class="headerlink" title="简单看一眼"></a>简单看一眼</h3><p>因为作者是计算机科学与工程系-计算机科学与技术专业本科生，因此这里以2022级计算机科学与技术专业培养方案为例解读。</p>
<p><img src="https://s2.loli.net/2022/08/11/Tmjx3VKvHRLrpIn.png" alt="__U6R__@__S0B5~YPDJQMMS.png" style="zoom:50%;" /></p>
<p>这张表其实说的很清楚了，我就不再重复讲一遍，讲点培养方案没说的。</p>
<h3 id="如果你爱某个专业爱得深沉"><a href="#如果你爱某个专业爱得深沉" class="headerlink" title="如果你爱某个专业爱得深沉"></a>如果你爱某个专业爱得深沉</h3><p>别急，大一一年多跟对应专业的教授聊一聊，一定确认自己喜欢这个专业，想做相关的课题再留下来。</p>
<p>如果你已经确定，那么就一定确认进系前按照培养方案修读完了<strong>所有的先修课</strong>，大部分专业<strong>不允许</strong>不满足进系先修的同学进专业，差一门也不行。</p>
<p>一定想清楚自己进系前怎么排课，比如进系需要电路基础，就必须要第一学期学电路基础的先修：线性代数，第二学期再选电路基础</p>
<p>以及，专业先修不要求你读的课，就没有太大必要大一去选，计系这种需要笔试+面试才能进的系是会看你的先修课成绩的，所以能少选就少选(但是要比15学分高，不要为了专精几门课收到学业警示啊你个混蛋)。</p>
<h3 id="如果你还不清楚自己喜欢什么"><a href="#如果你还不清楚自己喜欢什么" class="headerlink" title="如果你还不清楚自己喜欢什么"></a>如果你还不清楚自己喜欢什么</h3><p>高数大物线代，这几乎是每个专业都会要求的课程，所以可以无脑选。</p>
<p>你可以同时<strong>参考多个专业的培养方案</strong>来安排自己的课程，例如选择<strong>计算机程序设计基础</strong>这种很多专业都有要求的课程。作者在大一结束时，由于在计系要求外多修了很多课，其实满足了十多个专业的先修要求（</p>
<p>不过需要注意的是，人类是有极限的，不要为了给自己更多的选择就每学期顶满25学分，那样的课程压力很少有人能承受住。</p>
<p>南科大为你提供了一年或两年的时间来慢慢了解自己喜欢的专业，在这段时间里可以主动联系实验室、联系教授，多聊聊你也许会发现你真正喜欢的兴趣。</p>
<h2 id="进系考查方式"><a href="#进系考查方式" class="headerlink" title="进系考查方式"></a>进系考查方式</h2><p>现在对于22级的进系考查各种解读都有，先来看看培养方案原文：</p>
<blockquote>
<ol>
<li>如本院系所有专业第一学年结束时进专业的学生总人数大于等于该院系教研系列教师（PI）总人数*2*60%，则该院系所有专业可以针对第二学年结束时申请进专业的学生执行所设置的进专业课程要求； </li>
<li>如本院系所有专业第一学年结束时进专业的学生总人数小于该院系教研系列教师（PI）总人数*2*60%，则该院系所有专业针对第二学年结束时申请进专业的学生不执行所设置的进专业课程要求； </li>
<li>如第一学年结束时申请进专业的学生人数超过该院系教研系列教师（PI）总人数的 4 倍，则该院系可以按照事先确定的规则选拔学生。确定规则时原则上考察学生的专业适应性，不以学分绩为依据（具体规则由院系制定并提前公布）。</li>
<li>针对第二学年结束时进专业的学生不执行设置要求的院系，如果第二学年结束时申请进专业的学生人数和第一学年结束时已经进专业的学生人数累计超过该院系教研系列教师（PI）总人数的 4 倍，则该院系可以按照事先确定的规则在申请进专业的学生中进行选拔学生。确定规则时原则上考察学生的专业适应性，不以学分绩为依据（具体规则由院系制定并提前公布）。</li>
</ol>
</blockquote>
<p>$\frac{申请人数}{PI人数}$这个比值是对1+3和2+2两种进系方式能否进行考察的判定标准，以下分几种情况：</p>
<ol>
<li><p>第一年&lt;1.2，第二年累计≤4</p>
<p>PI人数最充裕的情况，第二年申请进系可以不满足先修课要求。</p>
</li>
<li><p>第一年<1.2，第二年累计>4</p>
<p>1+3默默无闻，2+2人数激增，则院系可以对2+2进行选拔(但也没说要满足先修)。</p>
<p>适用于大家第一年全部潜水，都想不读进系先修第二年进系的情况(^^</p>
<p>不过如果不是上百人合谋的话，大约是不可能发生的吧(笑)</p>
</li>
<li><p>第一年≥1.2</p>
<p>2+2需要满足先修课，最正常的情况。</p>
<p>如果第二年累计&gt;4院系还是可以设置选拔的。</p>
</li>
<li><p>第一年&gt;4</p>
<p>某些大系特供的条例，1+3人数爆满是允许院系设置选拔的。</p>
<p>像这种申请人数多到不行的院系果然设置一点门槛才是对的吧喂= =</p>
</li>
</ol>
<h1 id="Part-IV-专业课安排"><a href="#Part-IV-专业课安排" class="headerlink" title="Part IV. 专业课安排"></a>Part IV. 专业课安排</h1><h2 id="专业课程安排一览"><a href="#专业课程安排一览" class="headerlink" title="专业课程安排一览"></a>专业课程安排一览</h2><p>这部分是培养方案最不讲谜语的部分，说的都很清楚，这里主要提几个问题，大家可以带着问题，结合选课系统看培养方案</p>
<ol>
<li>这门课是必修的吗？在什么时候一定要上？</li>
<li>这门课是全英文吗？有哪些老师教？</li>
<li>这门课多少学分？有没有实验课？作业和project占多少总评？</li>
<li>这门课建议什么时间上？春秋都开吗？有没有先修？先修排哪个学期？</li>
</ol>
<p>对着培养方案上的课，一口气把上面的问题全回答出来，你差不多就做好了选专业课的准备了。</p>
<h2 id="课程结构图"><a href="#课程结构图" class="headerlink" title="课程结构图"></a>课程结构图</h2><p>其实想了解一个专业上什么课，最简单的办法是翻到最后看课程结构图，简单明了，排课的时候这张图也很管用。</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>介绍到这里你应该就能完全读懂培养方案了。</p>
<p>毕竟培养方案厚是厚，但是每个专业就那么几页，重复的部分挺多的，去年我无聊的时候把整本书翻了一遍（</p>
<p>比较建议选课前多翻翻，考虑一下自己的选课和意向专业之间的对应关系，规划能力还是很重要的。</p>
]]></content>
      <categories>
        <category>SUSTech</category>
      </categories>
      <tags>
        <tag>妮可指南</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ Quiz题解析</title>
    <url>/2023/01/09/CS205_C&amp;CPP_quiz/</url>
    <content><![CDATA[<h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><h4 id="Q1"><a href="#Q1" class="headerlink" title="Q1"></a>Q1</h4><p>The source code of program is as follows:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The source code has been compiled to program <strong>hello</strong>, when you run it as follows, what <code>argc</code> will be?</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./hello I LOVE CPP</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 4</p>
<p>4个command line arguments分别是: ./hello, I, LOVE, CPP</p>
</blockquote>
<h4 id="Q2"><a href="#Q2" class="headerlink" title="Q2"></a>Q2</h4><p>The following code is the prototype/declaration of function mul.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">mul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>这段代码是定义(definition)而非声明(prototype/declaration)</p>
</blockquote>
<h4 id="Q3"><a href="#Q3" class="headerlink" title="Q3"></a>Q3</h4><p>The data type of the variable <code>PI</code> is <code>double</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>宏不是变量(variable)</p>
</blockquote>
<h4 id="Q4"><a href="#Q4" class="headerlink" title="Q4"></a>Q4</h4><p>When a function prototype is declared in the header file you create, you do NOT need to define it in a CPP file.</p>
<blockquote>
<p>Answer: False</p>
<p>头文件里的声明+CPP文件的定义才能使用函数。</p>
</blockquote>
<h4 id="Q5"><a href="#Q5" class="headerlink" title="Q5"></a>Q5</h4><p> IDE (Integrated development environment) is a powerful compiler with many userful features.</p>
<blockquote>
<p>Answer: False</p>
<p>集成开发环境可不只是编译器啊</p>
</blockquote>
<h4 id="Q6"><a href="#Q6" class="headerlink" title="Q6"></a>Q6</h4><p>If you get 75 for one of your projects, which situation should most likely be?</p>
<blockquote>
<p>Answer: Finish all tasks</p>
<p>为什么要复习这个啊=-=</p>
</blockquote>
<h3 id="Data-Types-and-Arithmetic-Operators"><a href="#Data-Types-and-Arithmetic-Operators" class="headerlink" title="Data Types and Arithmetic Operators"></a>Data Types and Arithmetic Operators</h3><h4 id="Q1-1"><a href="#Q1-1" class="headerlink" title="Q1"></a>Q1</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">signed</span> <span class="type">char</span> c1 = <span class="number">127</span>;</span><br><span class="line"><span class="type">signed</span> <span class="type">char</span> c2 = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> csum = c1 + c2;</span><br><span class="line">cout &lt;&lt; csum;</span><br></pre></td></tr></table></figure>
<p>What’s the output of the source code?</p>
<blockquote>
<p>Answer: 128</p>
<p>为了计算，先转换成了int再做加法，结果储存进int型变量避免了溢出。</p>
<p>整数运算只有int和long long两类运算，所以下面那段代码会输出-2147483648，就是先按int型计算溢出后再储存进long long。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> x = INT_MAX;</span><br><span class="line"><span class="type">int</span> y = <span class="number">1</span>;</span><br><span class="line"><span class="type">long</span> <span class="type">long</span> p = x + y;</span><br><span class="line">cout &lt;&lt; p;</span><br><span class="line"><span class="comment">//output: -2147483648</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="Q2-1"><a href="#Q2-1" class="headerlink" title="Q2"></a>Q2</h4><p><code>sizeof()</code> is a function and can yield the size in bytes of a type.</p>
<blockquote>
<p>Answer: False</p>
<p><code>sizeof</code>是个操作符，不是函数！</p>
</blockquote>
<h4 id="Q3-1"><a href="#Q3-1" class="headerlink" title="Q3"></a>Q3</h4><p><code>size_t</code> is an unsigned integer type.</p>
<blockquote>
<p>Answer: True</p>
<p>size_t 是无符号整数类型, 32 bit or 64 bit</p>
</blockquote>
<h4 id="Q4-1"><a href="#Q4-1" class="headerlink" title="Q4"></a>Q4</h4><p>What’s the value of the variable <code>num</code>?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">23</span> / <span class="number">4</span> * <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 20</p>
<p>(int)23/4=5, (int)5*4=4.</p>
</blockquote>
<h4 id="Q5-1"><a href="#Q5-1" class="headerlink" title="Q5"></a>Q5</h4><p>What’s the value of variable <code>num</code>?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">23</span> / <span class="number">4.</span> * <span class="number">4</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 23</p>
<p>23/(double)4.=5.75, 5.75*4=(double)23.00, (int)23.00=23</p>
</blockquote>
<h4 id="Q6-1"><a href="#Q6-1" class="headerlink" title="Q6"></a>Q6</h4><p>What’s the value of variable <code>num</code>?</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">int num = 23 / 4 * 4.;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 20</p>
<p>(int)23/4=5, 5*(double)4.=(double)20.00, (int)20.00=20</p>
</blockquote>
<h4 id="Q7"><a href="#Q7" class="headerlink" title="Q7"></a>Q7</h4><p> In the following code, since the variable num is not initialized explicitly, it will be initialized to 0 automatically.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num;</span><br><span class="line">std::cout&lt;&lt; num &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>在某些平台，未初始化的变量可能拥有随机值</p>
</blockquote>
<h4 id="Q8"><a href="#Q8" class="headerlink" title="Q8"></a>Q8</h4><p>auto is a placeholder type specifier in C++11. What is the value of the variable <code>val</code> in the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> val = <span class="number">2</span> / <span class="number">3</span>;</span><br><span class="line">val = <span class="number">3.14</span> * <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 6</p>
<p>auto=int</p>
</blockquote>
<h3 id="Branching-and-Looping-Statements"><a href="#Branching-and-Looping-Statements" class="headerlink" title="Branching and Looping Statements"></a>Branching and Looping Statements</h3><h4 id="Q1-2"><a href="#Q1-2" class="headerlink" title="Q1"></a>Q1</h4><p> What’s the output of the following source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> y = <span class="number">30</span>;</span><br><span class="line">x+= (y-=<span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; x;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 120</p>
<p>先执行括号里的，再执行括号外的</p>
</blockquote>
<h4 id="Q2-2"><a href="#Q2-2" class="headerlink" title="Q2"></a>Q2</h4><p>What’s the output of the following source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> y = x++;</span><br><span class="line">cout &lt;&lt; y;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 100</p>
<p>自增在后，先赋值再自增</p>
</blockquote>
<h4 id="Q3-2"><a href="#Q3-2" class="headerlink" title="Q3"></a>Q3</h4><p>What’s the output of the following source code:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">100</span>;</span><br><span class="line"><span class="type">int</span> y = (x = <span class="number">200</span>);</span><br><span class="line">cout &lt;&lt; y;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 200</p>
<p>先执行括号里的，再执行括号外的</p>
</blockquote>
<h4 id="Q4-2"><a href="#Q4-2" class="headerlink" title="Q4"></a>Q4</h4><p> What’s the output of the following source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a = <span class="number">2</span>, b = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (a||b++)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 0</p>
<p>逻辑短路，自增不执行</p>
</blockquote>
<h4 id="Q5-2"><a href="#Q5-2" class="headerlink" title="Q5"></a>Q5</h4><p>What’s the output of the following source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> i = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(i = <span class="number">1</span>; i &lt; <span class="number">100</span>; i+=<span class="number">2</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//something</span></span><br><span class="line">&#125;</span><br><span class="line">cout &lt;&lt; i;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 101</p>
<p>循环结束条件i&lt;100不满足时i=101</p>
</blockquote>
<h4 id="Q6-2"><a href="#Q6-2" class="headerlink" title="Q6"></a>Q6</h4><p>What’s the output of the source code</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> x = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">while</span>( x );</span><br><span class="line">cout &lt;&lt; x;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 0</p>
<p>执行了一次就润了</p>
</blockquote>
<h4 id="Q7-1"><a href="#Q7-1" class="headerlink" title="Q7"></a>Q7</h4><p>The following source code (empty in the parentheses) can be compiled successfully.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>()</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//some lines here</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>for至少要有条件项</p>
</blockquote>
<h4 id="Q8-1"><a href="#Q8-1" class="headerlink" title="Q8"></a>Q8</h4><p>What is the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">switch</span> (num)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Key 4&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;5&#x27;</span>:</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Key 5&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Undefined key.&quot;</span> &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Undefined key.</p>
<p>注意char型的’5’≠int型的5</p>
</blockquote>
<h4 id="Q9"><a href="#Q9" class="headerlink" title="Q9"></a>Q9</h4><p>How many lines will be printed?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="type">size_t</span> i = <span class="number">10</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;Line &quot;</span> &lt;&lt; i &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: $\infty$</p>
<p>size_t 自减到负数之后会“溢出”到最大整数，死循环</p>
</blockquote>
<h3 id="Data-Structures"><a href="#Data-Structures" class="headerlink" title="Data Structures"></a>Data Structures</h3><h4 id="Q1-3"><a href="#Q1-3" class="headerlink" title="Q1"></a>Q1</h4><p>What’s the output of the source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> idx = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> numbers[<span class="number">4</span>] = &#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;;</span><br><span class="line">idx = <span class="number">-1</span>;</span><br><span class="line">cout &lt;&lt; numbers[idx] &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Unpredictable result</p>
<p>负下标越界，编译是能过，运行时要么段错误要么非法访问其他内存</p>
</blockquote>
<h4 id="Q2-3"><a href="#Q2-3" class="headerlink" title="Q2"></a>Q2</h4><p>What’s the output of the source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> idx = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> numbers[<span class="number">4</span>] = &#123;<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>&#125;;</span><br><span class="line">idx = <span class="number">4</span>;</span><br><span class="line">cout &lt;&lt; numbers[idx] &lt;&lt; endl;</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Unpredictable result</p>
<p>下标越界，编译是能过，运行时要么段错误要么非法访问其他内存</p>
</blockquote>
<h4 id="Q3-3"><a href="#Q3-3" class="headerlink" title="Q3"></a>Q3</h4><p>What’s the output if you compile the following source code with C++11 standard?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">string str&#123;<span class="string">&quot;hello&quot;</span>&#125;;</span><br><span class="line">cout &lt;&lt; str[<span class="number">1</span>] &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: e</p>
<p>str[1]是第二个元素</p>
</blockquote>
<h4 id="Q4-3"><a href="#Q4-3" class="headerlink" title="Q4"></a>Q4</h4><p>What’s the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> str[<span class="number">16</span>] = &#123;<span class="string">&quot;C++&quot;</span>&#125;;</span><br><span class="line">cout &lt;&lt; <span class="built_in">strlen</span>(str) &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 3</p>
<p>赋值的时候末尾带了个’\0’，strlen读到’\0’就停了</p>
</blockquote>
<h4 id="Q5-3"><a href="#Q5-3" class="headerlink" title="Q5"></a>Q5</h4><p>What’s the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">char</span> str1[<span class="number">16</span>] = &#123;<span class="string">&quot;C++&quot;</span>&#125;;</span><br><span class="line"><span class="type">char</span> str2[<span class="number">16</span>];</span><br><span class="line">str2 = str1;</span><br><span class="line">cout &lt;&lt; str2 &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Compilation error.</p>
<p>数组相当于常量指针，不能直接对其赋值</p>
</blockquote>
<h4 id="Q6-3"><a href="#Q6-3" class="headerlink" title="Q6"></a>Q6</h4><p>What’s the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">string str1 = &#123;<span class="string">&quot;C++&quot;</span>&#125;;</span><br><span class="line">string str2;</span><br><span class="line">str2 = str1;</span><br><span class="line">cout &lt;&lt; str2 &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: C++</p>
<p>但是string可以直接赋值</p>
</blockquote>
<h4 id="Q7-2"><a href="#Q7-2" class="headerlink" title="Q7"></a>Q7</h4><p>What’s the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">union</span> <span class="title class_">twonumbers</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n[<span class="number">2</span>];</span><br><span class="line">    <span class="type">double</span> d;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    twonumbers tn;</span><br><span class="line">    tn.d = <span class="number">1.23</span>;</span><br><span class="line">    tn.n[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    tn.n[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    cout &lt;&lt; tn.d &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 0</p>
<p>union各成员共用一块内存，所占用的内存长度等于最长的成员的内存长度，通过n修改为0后用d访问也是0</p>
</blockquote>
<h4 id="Q8-2"><a href="#Q8-2" class="headerlink" title="Q8"></a>Q8</h4><p>The output of the following code is:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">bool</span> male;</span><br><span class="line">    <span class="type">int</span> id;</span><br><span class="line">    <span class="type">char</span> label;</span><br><span class="line">&#125;;</span><br><span class="line">std::cout &lt;&lt; <span class="built_in">sizeof</span>(<span class="keyword">struct</span> Person);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 12</p>
<p>虽然bool和char都只占用一字节，但被占用4字节的int分隔开，结构体会为了对齐而给bool和char也分配4字节，总共12字节</p>
</blockquote>
<h3 id="Pointers-and-Dynamic-Memory-Management"><a href="#Pointers-and-Dynamic-Memory-Management" class="headerlink" title="Pointers and Dynamic Memory Management"></a>Pointers and Dynamic Memory Management</h3><h4 id="Q1-4"><a href="#Q1-4" class="headerlink" title="Q1"></a>Q1</h4><p>The following code can be compiled successfuly.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> value = <span class="number">0.0</span>;</span><br><span class="line"><span class="type">double</span> *<span class="type">const</span> p = &amp;value;</span><br><span class="line">p[<span class="number">0</span>] = <span class="number">2.0</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: True</p>
<p>type *const代表指针是常量，但指针所指的数据可以修改</p>
</blockquote>
<h4 id="Q2-4"><a href="#Q2-4" class="headerlink" title="Q2"></a>Q2</h4><p>The following source code is correct and cannot cause bugs.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *pint = (<span class="type">int</span> *)<span class="built_in">malloc</span>(<span class="number">8</span> * <span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"><span class="type">char</span> *pc = (<span class="type">char</span> *)pint;</span><br><span class="line">pc[<span class="number">8</span>] = <span class="string">&#x27;a&#x27;</span>;</span><br><span class="line">*(pc + <span class="number">8</span>) = <span class="string">&#x27;b&#x27;</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: True</p>
<p>指针类型的转换，通过指针操作内存均合法，没有越界等问题</p>
</blockquote>
<h4 id="Q3-4"><a href="#Q3-4" class="headerlink" title="Q3"></a>Q3</h4><p>The following code can be compiled successfuly.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> value = <span class="number">0.0</span>;</span><br><span class="line"><span class="type">const</span> <span class="type">double</span> *p = &amp;value;</span><br><span class="line">value = <span class="number">2.0</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: True</p>
<p>const type <em>p和type const </em>p表示指针所指内容是常量，无法通过指针更改</p>
<p>但可以通过其他方式修改内容</p>
</blockquote>
<h4 id="Q4-4"><a href="#Q4-4" class="headerlink" title="Q4"></a>Q4</h4><p>The following source code is correct.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *ptr;</span><br><span class="line">*ptr = <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>不能对未分配内存的指针进行赋值</p>
</blockquote>
<h4 id="Q5-4"><a href="#Q5-4" class="headerlink" title="Q5"></a>Q5</h4><p>What’s the output of the following code on 64bit OS and CPU?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *numbers = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">8</span>];</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(numbers) &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 8</p>
<p>64位环境下，指针长度为8字节</p>
</blockquote>
<h4 id="Q6-4"><a href="#Q6-4" class="headerlink" title="Q6"></a>Q6</h4><p>What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *numbers = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">8</span>];</span><br><span class="line"><span class="type">char</span> *pc = (<span class="type">char</span> *)numbers;</span><br><span class="line">*numbers = <span class="number">0x0A0B0C0D</span>;</span><br><span class="line">cout &lt;&lt; (<span class="type">int</span>)pc[<span class="number">3</span>] &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 10</p>
<p>第三行给number[0]赋值0x0A0B0C0D，一个int对应四个char，pc[3]代表其中第四个字节，即0x0A，转换后为10</p>
</blockquote>
<h4 id="Q7-3"><a href="#Q7-3" class="headerlink" title="Q7"></a>Q7</h4><p>What’s the output of the following code on 64bit OS and CPU?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> numbers[<span class="number">8</span>];</span><br><span class="line">cout &lt;&lt; <span class="built_in">sizeof</span>(numbers) &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 32</p>
<p>对于数组，sizeof会返回其所指内存的大小</p>
</blockquote>
<h3 id="Basics-of-Functions"><a href="#Basics-of-Functions" class="headerlink" title="Basics of Functions"></a>Basics of Functions</h3><h4 id="Q1-5"><a href="#Q1-5" class="headerlink" title="Q1"></a>Q1</h4><p>What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> <span class="title">foo</span><span class="params">(<span class="type">float</span> *p, <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p[<span class="number">0</span>] = <span class="number">1.0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> values[<span class="number">4</span>] = &#123;<span class="number">3.0f</span>, <span class="number">4.0f</span>, <span class="number">5.0f</span>, <span class="number">6.0f</span>&#125;;</span><br><span class="line">    <span class="built_in">foo</span>(values + <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    cout &lt;&lt; *values &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; *values + <span class="number">2</span> &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; *(values + <span class="number">2</span>) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; values[<span class="number">2</span>] &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 3 5 1 1</p>
<p>四个数分别为 v[0], v[0]+2, v[2], v[2]，注意优先级</p>
</blockquote>
<h4 id="Q2-5"><a href="#Q2-5" class="headerlink" title="Q2"></a>Q2</h4><p>What’s the output of the following source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">people</span></span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(people &amp;p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p.name = <span class="string">&quot;No name&quot;</span>;</span><br><span class="line">    p.age = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    people p;</span><br><span class="line">    p.age = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">init</span>(p);</span><br><span class="line">    cout &lt;&lt; p.age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 0</p>
<p>p作为引用参数传入init，age被修改为0</p>
</blockquote>
<h4 id="Q3-5"><a href="#Q3-5" class="headerlink" title="Q3"></a>Q3</h4><p>What’s the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">area</span><span class="params">(<span class="type">int</span> &amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x *= x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">area</span>(n);</span><br><span class="line">    std::cout &lt;&lt; n &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 100</p>
<p>n作为引用参数传入area，乘方</p>
</blockquote>
<h4 id="Q4-5"><a href="#Q4-5" class="headerlink" title="Q4"></a>Q4</h4><p>What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">people</span></span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(people *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p.name = <span class="string">&quot;No name&quot;</span>;</span><br><span class="line">    p.age = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    people p;</span><br><span class="line">    p.age = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">init</span>(p);</span><br><span class="line">    cout &lt;&lt; p.age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Compilation error</p>
<p>init函数要求传入指针，但传入的是people结构体变量</p>
</blockquote>
<h4 id="Q5-5"><a href="#Q5-5" class="headerlink" title="Q5"></a>Q5</h4><p>What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> <span class="title">area</span><span class="params">(<span class="type">float</span> &amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x * x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> value = <span class="number">3.0f</span>;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">area</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 9</p>
<p>3.0f*3.0f=9.0f</p>
</blockquote>
<h4 id="Q6-5"><a href="#Q6-5" class="headerlink" title="Q6"></a>Q6</h4><p> What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> <span class="title">area</span><span class="params">(<span class="type">float</span> &amp;x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    x = x * x;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> value = <span class="number">3.0f</span>;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">area</span>(value) &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    cout &lt;&lt; value &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 9 9</p>
<p>通过引用修改了x，并返回了修改后的x</p>
</blockquote>
<h4 id="Q7-4"><a href="#Q7-4" class="headerlink" title="Q7"></a>Q7</h4><p>What’s the ouput of function sum()?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> cookies[<span class="number">8</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">8</span>, <span class="number">16</span>, <span class="number">32</span>, <span class="number">64</span>, <span class="number">128</span>&#125;;</span><br><span class="line">    <span class="type">int</span> n = <span class="built_in">sum</span>(cookies, <span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="keyword">sizeof</span> arr;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 4 or 8</p>
<p>传入参数实际上是指针，指针占用字节数可能是4或8</p>
</blockquote>
<h4 id="Q8-3"><a href="#Q8-3" class="headerlink" title="Q8"></a>Q8</h4><p>What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> <span class="title">area</span><span class="params">(<span class="type">float</span> *x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> *x * *x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> value = <span class="number">3.0f</span>;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">area</span>(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Compilation error</p>
<p>要求传入浮点型指针，实际传入浮点型变量</p>
</blockquote>
<h4 id="Q9-1"><a href="#Q9-1" class="headerlink" title="Q9"></a>Q9</h4><p>What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">people</span></span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(people p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p.name = <span class="string">&quot;No name&quot;</span>;</span><br><span class="line">    p.age = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    people p;</span><br><span class="line">    p.age = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">init</span>(p);</span><br><span class="line">    cout &lt;&lt; p.age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: -1</p>
<p>函数参数是结构体变量，在传入后是对变量的拷贝进行操作，不影响变量本身</p>
</blockquote>
<h4 id="Q10"><a href="#Q10" class="headerlink" title="Q10"></a>Q10</h4><p> What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">people</span></span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">init</span><span class="params">(people *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    p-&gt;name = <span class="string">&quot;No name&quot;</span>;</span><br><span class="line">    p-&gt;age = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    people p;</span><br><span class="line">    p.age = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">init</span>(&amp;p);</span><br><span class="line">    cout &lt;&lt; p.age &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 0</p>
<p>传入参数是指针，通过指针对结构体成员变量age进行操作</p>
</blockquote>
<h3 id="Advances-in-Functions"><a href="#Advances-in-Functions" class="headerlink" title="Advances in Functions"></a>Advances in Functions</h3><h4 id="Q1-6"><a href="#Q1-6" class="headerlink" title="Q1"></a>Q1</h4><p> The following declaration correctly defines some default arguments</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">harpo</span><span class="params">(<span class="type">int</span> n = <span class="number">3</span>, <span class="type">int</span> m, <span class="type">int</span> k = <span class="number">3</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>所有默认参数必须集中放在最后</p>
</blockquote>
<h4 id="Q2-6"><a href="#Q2-6" class="headerlink" title="Q2"></a>Q2</h4><p>The functions and a function pointer are declared as follows. Which answers are correct?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> <span class="title">norm</span><span class="params">(<span class="type">float</span> x, <span class="type">float</span> y)</span></span>; <span class="comment">// declaration</span></span><br><span class="line"><span class="built_in">float</span> (*norm_ptr)(<span class="type">float</span> x, <span class="type">float</span> y); <span class="comment">// norm_ptr is a function pointer</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">norm_ptr = &amp;norm;</span><br><span class="line">(*norm_ptr)(<span class="number">-3.0f</span>, <span class="number">4.0f</span>);</span><br><span class="line"><span class="built_in">norm_ptr</span>(<span class="number">-3.0f</span>, <span class="number">4.0f</span>);</span><br><span class="line">norm_ptr = norm;</span><br><span class="line">(*norm_ptr)(<span class="number">-3.0f</span>, <span class="number">4.0f</span>);</span><br><span class="line"><span class="built_in">norm_ptr</span>(<span class="number">-3.0f</span>, <span class="number">4.0f</span>);</span><br></pre></td></tr></table></figure>
<p>大概意思就是函数指针和函数名在使用时可以适当混用</p>
</blockquote>
<h4 id="Q3-6"><a href="#Q3-6" class="headerlink" title="Q3"></a>Q3</h4><p>Function overloading is that multiple functions share the same function name but different signatures as the two functions below:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> <span class="title">foo</span><span class="params">(<span class="type">float</span> arg)</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">foo</span><span class="params">(<span class="type">double</span> arg)</span></span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: True</p>
<p>你说得对</p>
</blockquote>
<h4 id="Q4-6"><a href="#Q4-6" class="headerlink" title="Q4"></a>Q4</h4><p>There is a function template. The specialization is correctly implemented in the following code.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="function">T <span class="title">sum</span><span class="params">(T x, T y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The input type is &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(T).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> x + y;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> x;</span><br><span class="line">    <span class="type">int</span> y;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// Specialization for Point + Point operation</span></span><br><span class="line"><span class="keyword">template</span></span><br><span class="line">Point <span class="built_in">sum</span>&lt;Point&gt;(Point pt1, Point pt2)</span><br><span class="line">&#123;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;The input type is &quot;</span> &lt;&lt; <span class="built_in">typeid</span>(pt1).<span class="built_in">name</span>() &lt;&lt; endl;</span><br><span class="line">    Point pt;</span><br><span class="line">    pt.x = pt1.x + pt2.x;</span><br><span class="line">    pt.y = pt1.y + pt2.y;</span><br><span class="line">    <span class="keyword">return</span> pt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>特例化应该这么写：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;&gt;</span><br><span class="line"><span class="function">Point <span class="title">sum</span><span class="params">(Point pt1, Point pt2)</span></span></span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="Q5-6"><a href="#Q5-6" class="headerlink" title="Q5"></a>Q5</h4><p>The following code correctly defines a function template:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; </span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(T &amp;a, T &amp;b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    T temp; </span><br><span class="line">    temp = a;</span><br><span class="line">    a = b;</span><br><span class="line">    b = temp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: True</p>
<p>你说得对</p>
</blockquote>
<h3 id="Basics-of-Classes"><a href="#Basics-of-Classes" class="headerlink" title="Basics of Classes"></a>Basics of Classes</h3><h4 id="Q1-7"><a href="#Q1-7" class="headerlink" title="Q1"></a>Q1</h4><p>The <strong>this</strong> pointer points to the object and can be used to invoke a member as in the following code.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> num;    </span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">static</span> <span class="type">int</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;num;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//other members</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>静态函数无法调用非静态对象的成员，逻辑上不可行</p>
</blockquote>
<h4 id="Q2-7"><a href="#Q2-7" class="headerlink" title="Q2"></a>Q2</h4><p>What’s the output of the following code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    string name;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Person p;</span><br><span class="line">    p.name = <span class="string">&quot;No name&quot;</span>;</span><br><span class="line">    cout &lt;&lt; p.name;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Compilation error</p>
<p>class成员在未声明为public时默认private，无法被外部直接调用</p>
</blockquote>
<h4 id="Q3-7"><a href="#Q3-7" class="headerlink" title="Q3"></a>Q3</h4><p>What’s the output of the source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> </span>&#123; <span class="keyword">return</span> i + j; &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">setValue</span><span class="params">(<span class="type">int</span> v)</span> </span>&#123; value = v; &#125;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">getValue</span><span class="params">()</span> </span>&#123; <span class="keyword">return</span> value; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Hello h1, h2;</span><br><span class="line">    h1.<span class="built_in">setValue</span>(<span class="number">5</span>);</span><br><span class="line">    cout &lt;&lt; h2.<span class="built_in">getValue</span>() &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Link error</p>
<p>在对类的静态变量做操作前，需要先在类外进行定义。</p>
</blockquote>
<h4 id="Q4-7"><a href="#Q4-7" class="headerlink" title="Q4"></a>Q4</h4><p>A class is declared as follows. Please select correct answers for creating a variable.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stock</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Stock</span>(); </span><br><span class="line">    <span class="built_in">Stock</span>(<span class="type">const</span> std::string &amp;co, <span class="type">long</span> n = <span class="number">0</span>, <span class="type">double</span> pr = <span class="number">0.0</span>);</span><br><span class="line">    ~<span class="built_in">Stock</span>(); </span><br><span class="line">    <span class="comment">//other members</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Stock st1;<span class="comment">//OK</span></span><br><span class="line"><span class="function">Stock <span class="title">st2</span><span class="params">(<span class="string">&quot;A&quot;</span>,<span class="number">3</span>,<span class="number">2.0f</span>)</span></span>;<span class="comment">//OK</span></span><br><span class="line">Stock st3 = <span class="built_in">Stock</span>(<span class="string">&quot;A&quot;</span>,<span class="number">3</span>,<span class="number">2.0f</span>);<span class="comment">//OK</span></span><br><span class="line">Stock st4 = (<span class="string">&quot;A&quot;</span>,,<span class="number">2.0f</span>);<span class="comment">//Error</span></span><br></pre></td></tr></table></figure>
<p>无参构造器，含参构造器，默认参数不能间隔省略</p>
</blockquote>
<h4 id="Q5-7"><a href="#Q5-7" class="headerlink" title="Q5"></a>Q5</h4><p> What’s the output of the following source code?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Hello</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> value;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">sum</span><span class="params">(<span class="type">int</span> i, <span class="type">int</span> j)</span> </span>&#123; <span class="keyword">return</span> i + j; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout &lt;&lt; <span class="built_in">sizeof</span>(Hello) &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 4</p>
<p>用sizeof对类进行操作时，其大小为对齐后的非静态成员数据的类型大小之和</p>
<p>如果是空类，占1字节</p>
<p>如果含有虚函数，则额外占有4字节虚函数表大小</p>
<p>与构造、析构函数等成员函数、静态变量无关</p>
</blockquote>
<h3 id="Advances-in-Classes"><a href="#Advances-in-Classes" class="headerlink" title="Advances in Classes"></a>Advances in Classes</h3><h4 id="Q1-8"><a href="#Q1-8" class="headerlink" title="Q1"></a>Q1</h4><p>Class Stonewt is declared as follows. </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Stonewt</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="comment">//some members</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Stonewt</span>(<span class="type">double</span> lbs);</span><br><span class="line">    <span class="built_in">Stonewt</span>(<span class="type">int</span> stn, <span class="type">double</span> lbs);</span><br><span class="line">    <span class="built_in">Stonewt</span>();</span><br><span class="line">    ~<span class="built_in">Stonewt</span>();</span><br><span class="line">    <span class="function"><span class="keyword">operator</span> <span class="title">int</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">operator</span> <span class="title">double</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Which function will be invoked by the following line of code ?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Stonewt wt = <span class="number">120</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Stonewt(double lbs);</p>
<p>隐式转换后调用上述构造器，决定用哪个构造器发生在编译过程</p>
</blockquote>
<h4 id="Q2-8"><a href="#Q2-8" class="headerlink" title="Q2"></a>Q2</h4><p>Class Stonewt is declared as above. </p>
<p>Which function will be invoked by the following line of code ?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Stonewt <span class="title">wt</span><span class="params">(<span class="number">120</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Stonewt(double lbs);</p>
<p><del>梅开二度</del></p>
</blockquote>
<h4 id="Q3-8"><a href="#Q3-8" class="headerlink" title="Q3"></a>Q3</h4><p>Class Stonewt is declared as above. </p>
<p>Which function will be invoked by the following line of code ?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">wt = <span class="number">120.0</span>; <span class="comment">//wt is an object of type Stonewt</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Stonewt(double lbs);</p>
<p><del>三连加关注，CS不迷路</del></p>
</blockquote>
<h4 id="Q4-8"><a href="#Q4-8" class="headerlink" title="Q4"></a>Q4</h4><p>Class Stonewt is declared as above. </p>
<p>Which function will be invoked by the following line of code ?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">double</span> f = wt; <span class="comment">//wt is an object of type Stonewt</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: operator double() const;</p>
<p>隐式转换再赋值</p>
</blockquote>
<h4 id="Q5-8"><a href="#Q5-8" class="headerlink" title="Q5"></a>Q5</h4><p>We can change operators’ precedence by overloading.</p>
<blockquote>
<p>Answer: False</p>
<p>运算含义可以改，但优先级改不了</p>
</blockquote>
<h4 id="Q6-6"><a href="#Q6-6" class="headerlink" title="Q6"></a>Q6</h4><p>If we define a memeber function as follows for class Time</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Time Time::<span class="keyword">operator</span>*(<span class="type">double</span> mult) <span class="type">const</span></span><br></pre></td></tr></table></figure>
<p>then we can calculate as follows</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">a = <span class="number">3.3</span> * b;<span class="comment">//a and b are objects of type Time</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>重载的乘号，左边Time右边double，反过来不行</p>
</blockquote>
<h4 id="Q7-5"><a href="#Q7-5" class="headerlink" title="Q7"></a>Q7</h4><p>Assignment operator ‘=’ can be overloaded by a non-member function.</p>
<blockquote>
<p>Answer: False</p>
<p>赋值符是一个特例，只能作为成员函数被重载</p>
</blockquote>
<h4 id="Q8-4"><a href="#Q8-4" class="headerlink" title="Q8"></a>Q8</h4><p>If the friend function is defined as in the following source code, it is a member function in the class.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Time</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> hours;</span><br><span class="line">    <span class="type">int</span> minutes;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Time</span>();</span><br><span class="line">    <span class="built_in">Time</span>(<span class="type">int</span> h, <span class="type">int</span> m = <span class="number">0</span>);</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">AddMin</span><span class="params">(<span class="type">int</span> m)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">AddHr</span><span class="params">(<span class="type">int</span> h)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Reset</span><span class="params">(<span class="type">int</span> h = <span class="number">0</span>, <span class="type">int</span> m = <span class="number">0</span>)</span></span>;</span><br><span class="line">    Time <span class="keyword">operator</span>+(<span class="type">const</span> Time &amp;t) <span class="type">const</span>;</span><br><span class="line">    Time <span class="keyword">operator</span>-(<span class="type">const</span> Time &amp;t) <span class="type">const</span>;</span><br><span class="line">    Time <span class="keyword">operator</span>*(<span class="type">double</span> n) <span class="type">const</span>;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">Show</span><span class="params">()</span> <span class="type">const</span></span>;</span><br><span class="line">    <span class="keyword">friend</span> Time <span class="keyword">operator</span>*(<span class="type">double</span> mult, Time in);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>友元函数需要在类内声明，私有公有没区别，也可以在类内定义，但友元终究不是成员</p>
</blockquote>
<h4 id="Q9-2"><a href="#Q9-2" class="headerlink" title="Q9"></a>Q9</h4><p>operator+() overloads the + operator, and it can only be used for mathematical addition.</p>
<blockquote>
<p>Answer: False</p>
<p>你想把加号重载成乘法运算符也没人拦你（</p>
</blockquote>
<h4 id="Q10-1"><a href="#Q10-1" class="headerlink" title="Q10"></a>Q10</h4><p>A conversion function is defined outside of the declaration of class Stonewt as follow.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">Stonewt::<span class="keyword">operator</span> <span class="title">double</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> pounds;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: It’s correctly defined.</p>
<p>冇问题</p>
</blockquote>
<h3 id="Dynamic-Memory-Management-in-Classes"><a href="#Dynamic-Memory-Management-in-Classes" class="headerlink" title="Dynamic Memory Management in Classes"></a>Dynamic Memory Management in Classes</h3><h4 id="Q1-9"><a href="#Q1-9" class="headerlink" title="Q1"></a>Q1</h4><p>Please read the following code and choose correct answers:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> *name;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Person</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        name = <span class="keyword">new</span> <span class="type">char</span>[<span class="number">128</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    ~<span class="built_in">Person</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">delete</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Person p1;</span><br><span class="line">    Person p2;</span><br><span class="line">    p1 = p2;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: </p>
<ul>
<li>The code can be compiled without error.</li>
<li>Runtime error.</li>
<li>It can cause memory double free problem.</li>
<li>It can cause memory leak.</li>
</ul>
<p>编译是能过，但是由于p1和p2的析构函数会对name做两次delete，所以会双重释放运行错误，而且p1原本申请的char[128]会没有指针指向它，所以会有内存泄漏风险</p>
</blockquote>
<h4 id="Q2-9"><a href="#Q2-9" class="headerlink" title="Q2"></a>Q2</h4><p>If you do not define a default constructor for a class explicitly, then no default constructor for that class.</p>
<blockquote>
<p>Answer: False</p>
<p>如果你没有显式定义任何一个构造器，类会隐含一个默认无参构造器</p>
</blockquote>
<h4 id="Q3-9"><a href="#Q3-9" class="headerlink" title="Q3"></a>Q3</h4><p>If assignment operator is not defined in class Person, the following code will invoke default assignment operator.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">p1 = p2 = p3; <span class="comment">//p1, p2 and p3 are objects of type Person</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: True</p>
<p>如果没有重载赋值符，则会调用默认赋值符</p>
</blockquote>
<h4 id="Q4-9"><a href="#Q4-9" class="headerlink" title="Q4"></a>Q4</h4><p>For class Person, which of the constructors is its default constructor?</p>
<blockquote>
<p>Answer: </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Person::<span class="built_in">Person</span>(<span class="type">int</span> n = <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>有参数，但是所有参数都有默认值，就是默认构造器</p>
</blockquote>
<h4 id="Q5-9"><a href="#Q5-9" class="headerlink" title="Q5"></a>Q5</h4><p>You can define two constructors as follows for class Person</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Person</span>()&#123;...&#125;</span><br><span class="line"><span class="built_in">Person</span>(<span class="type">int</span> m = <span class="number">0</span>) &#123;...&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>那么问题来了，猜猜看Person()会调用哪个？</p>
</blockquote>
<h4 id="Q6-7"><a href="#Q6-7" class="headerlink" title="Q6"></a>Q6</h4><p>For class Person, which of the constructors is a copy constructor?</p>
<blockquote>
<p>Answer:</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">Person::<span class="built_in">Person</span>(<span class="type">const</span> Person &amp; p);</span><br></pre></td></tr></table></figure>
<p>将常量引用作为参数的构造器是复制构造器</p>
</blockquote>
<h3 id="Class-Inheritance"><a href="#Class-Inheritance" class="headerlink" title="Class Inheritance"></a>Class Inheritance</h3><h4 id="Q1-10"><a href="#Q1-10" class="headerlink" title="Q1"></a>Q1</h4><p> What’s the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> weight;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Animal</span>(<span class="type">int</span> w = <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        weight = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; weight &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Dog</span>(<span class="type">int</span> w = <span class="number">0</span>) : <span class="built_in">Animal</span>(w) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Dog &quot;</span>;</span><br><span class="line">        Animal::<span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;wangwang&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Dog <span class="title">dog</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    Animal *p = &amp;dog;</span><br><span class="line">    p-&gt;<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Dog 5</p>
<p>由于覆写了虚函数print()，主函数语句调用的是Dog::print()，而Dog::print()再调用了Animal::print()</p>
</blockquote>
<h4 id="Q2-10"><a href="#Q2-10" class="headerlink" title="Q2"></a>Q2</h4><p>What is the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> weight;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Animal</span>(<span class="type">int</span> w = <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        weight = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; weight &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Dog</span>(<span class="type">int</span> w = <span class="number">0</span>) : <span class="built_in">Animal</span>(w) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Dog &quot;</span>;</span><br><span class="line">        Animal::<span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;wangwang&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Dog <span class="title">dog</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    Animal *p = &amp;dog;</span><br><span class="line">    p-&gt;<span class="built_in">print</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: 5</p>
<p>由于p是Animal类，其成员函数均为Animal类中的定义</p>
</blockquote>
<h4 id="Q3-10"><a href="#Q3-10" class="headerlink" title="Q3"></a>Q3</h4><p>What is the output?</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> weight;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Animal</span>(<span class="type">int</span> w = <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        weight = w;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; weight &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> : <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Dog</span>(<span class="type">int</span> w = <span class="number">0</span>) : <span class="built_in">Animal</span>(w) &#123;&#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;Dog &quot;</span>;</span><br><span class="line">        Animal::<span class="built_in">print</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="type">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;wangwang&quot;</span> &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Dog <span class="title">dog</span><span class="params">(<span class="number">5</span>)</span></span>;</span><br><span class="line">    Animal *p = &amp;dog;</span><br><span class="line">    p-&gt;<span class="built_in">speak</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: Compilation error</p>
<p>p是Animal类对象，speak()是其子类的函数，p的成员函数编译时静态绑定至Animal定义，因此p未定义speak()函数。</p>
</blockquote>
<h3 id="Class-Templates-and-std-Library"><a href="#Class-Templates-and-std-Library" class="headerlink" title="Class Templates and std Library"></a>Class Templates and std Library</h3><h4 id="Q1-11"><a href="#Q1-11" class="headerlink" title="Q1"></a>Q1</h4><p>Please choose the right answer(s) for declaring a class template</p>
<blockquote>
<p>Answer: </p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>  &lt;<span class="keyword">class</span> <span class="title class_">Type</span>&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassName</span>&#123;...&#125;</span><br><span class="line"><span class="keyword">template</span>  &lt;<span class="keyword">typename</span> Type&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ClassName</span>&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>本来是class的，在众人要求下添加了typename关键字，于是两个都能用</p>
</blockquote>
<h4 id="Q2-11"><a href="#Q2-11" class="headerlink" title="Q2"></a>Q2</h4><p>Matx and Matx12f are declared in the following figure. Please choose the correct statement(s).</p>
<p><img src="https://s2.loli.net/2023/01/09/yTuULq2IAljWaFz.png" alt="image.png"></p>
<blockquote>
<p>Answer: Matx is a class tempate, Matx12f is a template class.</p>
<p>不准确地来说，模板类是由类模板衍生出的类</p>
</blockquote>
<h3 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h3><h4 id="Q1-12"><a href="#Q1-12" class="headerlink" title="Q1"></a>Q1</h4><p>A try block can be followed by multiple catch blocks.</p>
<blockquote>
<p>Answer: True</p>
<p>你说得对，而且catch括号内的类型不会隐式转换，但是子类可以被父类catch</p>
</blockquote>
<h4 id="Q2-12"><a href="#Q2-12" class="headerlink" title="Q2"></a>Q2</h4><p>The following source code <strong>cannot</strong> be compiled successfully.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">gmean</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; <span class="number">0</span> || b &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">string</span>(<span class="string">&quot;bad arguments&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">sqrt</span>(a*b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">gmean</span>(<span class="number">3</span>, <span class="number">-3</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: True</p>
<p>没有catch的try是不完整的</p>
</blockquote>
<h4 id="Q3-11"><a href="#Q3-11" class="headerlink" title="Q3"></a>Q3</h4><p> The following code <strong>cannot</strong> be compiled successfully since ‘try’ is commented.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">double</span> <span class="title">gmean</span><span class="params">(<span class="type">double</span> a, <span class="type">double</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; <span class="number">0</span> || b &lt; <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> <span class="built_in">string</span>(<span class="string">&quot;bad arguments&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> std::<span class="built_in">sqrt</span>(a*b);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//try</span></span><br><span class="line">    <span class="comment">//&#123;</span></span><br><span class="line">        <span class="built_in">gmean</span>(<span class="number">3</span>, <span class="number">-3</span>);</span><br><span class="line">    <span class="comment">//&#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Answer: False</p>
<p>throw了可以不try-catch，不过一抛就终止运行而已</p>
</blockquote>
<h4 id="Q4-10"><a href="#Q4-10" class="headerlink" title="Q4"></a>Q4</h4><p>When an exception is thrown, the program must be terminated.</p>
<blockquote>
<p>Answer: False</p>
<p>如果抛的异常被catch住了，程序就可以继续运行catch内的内容</p>
</blockquote>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS102 JAVA (A) 项目设计报告 Othello</title>
    <url>/2022/08/08/CS102_%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A_Othello/</url>
    <content><![CDATA[<p><img src="https://s2.loli.net/2022/08/08/jOA9dFGzKCVuMs6.png" alt="恋心组赛高！" style="zoom: 50%;" /></p>
<h2 id="Part-I-团队成员"><a href="#Part-I-团队成员" class="headerlink" title="Part I. 团队成员"></a>Part I. 团队成员</h2><div class="table-container">
<table>
<thead>
<tr>
<th>姓名</th>
<th>学号</th>
<th>最终版分工</th>
<th>贡献率</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/GuTaoZi">咕桃</a></td>
<td>-</td>
<td>前端：美工，音效，联网</td>
<td>200%</td>
</tr>
<tr>
<td><a href="https://github.com/RuixiangJiang">江睿翔</a></td>
<td>-</td>
<td>后端：逻辑，存档，BOT</td>
<td>200%</td>
</tr>
</tbody>
</table>
</div>
<p>两个人本着<strong>不满意就重来</strong>的想法，在四周时间里重构了四版<del>(前三版的分工是反过来的，沟通后交换分工，一周从零搓了一版)</del>，熬了挺多的夜，最终如愿拿满，但是距离预期效果还挺远的<del>以及有一堆锅还没修</del>。</p>
<h2 id="Part-II-启动器"><a href="#Part-II-启动器" class="headerlink" title="Part II. 启动器"></a>Part II. 启动器</h2><p><img src="https://s2.loli.net/2022/08/08/FrTohZVQlHx1fmg.png" alt="VE__YQGD_4TSHD8SS4FN_Q4.png" style="zoom: 33%;" /></p>
<p>启动器界面设计模仿了龙腾猫跃的PCL2 Minecraft启动器，扁平风的设计很Win10。</p>
<p><del>因为美工GUI水平有限，</del>图片上除了两个文本框和背景其他所有的元素都是JButton（太万能了</p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>JAVA</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ Project04设计报告 C语言矩阵乘法</title>
    <url>/2022/11/27/CS205_%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A_Matrix%20Multiplication%20in%20C/</url>
    <content><![CDATA[<h2 id="Part-0-团队成员"><a href="#Part-0-团队成员" class="headerlink" title="Part 0. 团队成员"></a>Part 0. <del>团队</del>成员</h2><div class="table-container">
<table>
<thead>
<tr>
<th>姓名</th>
<th>学号</th>
<th><del>贡献率</del></th>
</tr>
</thead>
<tbody>
<tr>
<td>咕桃</td>
<td>-</td>
<td><del>100%</del></td>
</tr>
</tbody>
</table>
</div>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">CS205_Project04</span><br><span class="line">│  CMakeLists.txt</span><br><span class="line">│  README.md</span><br><span class="line">│</span><br><span class="line">├─build</span><br><span class="line">│	   <span class="comment">//makefile here</span></span><br><span class="line">├─doc</span><br><span class="line">│      Report.pdf</span><br><span class="line">│</span><br><span class="line">├─inc</span><br><span class="line">│      matmul.h</span><br><span class="line">│      matrix.h</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">        benchmark.c</span><br><span class="line">        matmul.c</span><br><span class="line">        matrix.c</span><br></pre></td></tr></table></figure>
<h3 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h3><p>运行本项目前，请预先安装OpenBLAS与OpenMP。您可以使用以下命令下载本项目：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ git clone https://github.com/GuTaoZi/CS205_Project04.git</span><br></pre></td></tr></table></figure>
<p>下载完成后，请在<code>CMakeLists.txt</code>中调整OpenBLAS目录，您也可以根据您的系统架构调整编译选项。</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include_directories</span>(/usr/local/<span class="keyword">include</span> ./inc)</span><br><span class="line"><span class="keyword">link_libraries</span>(/usr/local/lib/libopenblas.a)</span><br></pre></td></tr></table></figure>
<p>使用以下命令编译、运行可执行文件<code>matmul</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd build</span><br><span class="line">cmake ..</span><br><span class="line">make</span><br><span class="line">./matmul</span><br></pre></td></tr></table></figure>
<h2 id="Part-1-Analysis"><a href="#Part-1-Analysis" class="headerlink" title="Part 1 - Analysis"></a>Part 1 - Analysis</h2><h3 id="题目重述-amp-主要思路"><a href="#题目重述-amp-主要思路" class="headerlink" title="题目重述&amp;主要思路"></a>题目重述&amp;主要思路</h3><p>本题目要求<strong>使用C语言</strong>实现正确而尽可能高效的矩阵乘法，使用<code>OpenMP</code>, <code>SIMD</code>等工具提升效率，并与<code>OpenBLAS</code>库中的矩阵乘法在各平台进行效率比较。</p>
<p>根据题目描述，题目要求的矩阵乘法需要支持的主要功能为：</p>
<ol>
<li>实现朴素乘法，用于检验高效矩阵乘法的正确性</li>
<li><code>OpenMP</code>, <code>SIMD</code>等工具实现提升效率的矩阵乘法</li>
<li>测试$16\times16$、$128\times128$、$1k\times1k$、$8k\times8k$、$64k\times64k$等尺寸的矩阵乘法效率</li>
<li>与<code>OpenBLAS</code>进行效率比较</li>
<li>进行<code>ARM</code>等多平台效率测试</li>
</ol>
<p>本项目完成了上述基础要求，并在其中几项进行了拓展，本次报告将侧重于矩阵乘法的优化过程，与上次报告重复处将略讲，详见下文。</p>
<h3 id="模型假设"><a href="#模型假设" class="headerlink" title="模型假设"></a>模型假设</h3><p>本项目按题设要求继承了前一项目的数据类型，在实现矩阵乘法时以效率为主，小幅降低了安全性检查的严格程度。</p>
<ul>
<li>单个元素均为4字节<code>float</code>类型，有效位数默认为6位，数据范围约$-3.4\ast 10^{-38}&lt;val&lt;3.4\ast 10^{38}$</li>
<li>参与运算的矩阵均为<strong>方阵</strong>，且阶数为<strong>8的倍数</strong></li>
<li>可接受<code>&lt;0.01</code>的单精度浮点数计算误差</li>
</ul>
<h2 id="Part-2-Code"><a href="#Part-2-Code" class="headerlink" title="Part 2 - Code"></a>Part 2 - Code</h2><h3 id="宏与结构体"><a href="#宏与结构体" class="headerlink" title="宏与结构体"></a>宏与结构体</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matrix.c</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> float_equal(x, y) ((x-y)&lt;1e-3&amp;&amp;(y-x)&lt;1e-3)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">Matrix_</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">size_t</span> row;</span><br><span class="line">    <span class="type">size_t</span> col;</span><br><span class="line">    <span class="type">float</span> *data;</span><br><span class="line">&#125; Matrix;</span><br></pre></td></tr></table></figure>
<p>在题设条件下，矩阵尺寸默认$row=col$(其实可以存成一个，但部分矩阵乘法函数简单修改后可支持非方阵情况)，使用<code>size_t</code>存储，满足跨平台需求。</p>
<p>使用浮点型指针指向存储数据，采用行优先方式存储，空间由创建函数动态分配，分配后可通过释放函数释放。</p>
<h3 id="创建、释放与合法性检查"><a href="#创建、释放与合法性检查" class="headerlink" title="创建、释放与合法性检查"></a>创建、释放与合法性检查</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matrix.c</span></span><br><span class="line"><span class="function">Matrix *<span class="title">createMatFromArr</span><span class="params">(<span class="type">size_t</span> row, <span class="type">size_t</span> col,<span class="type">float</span> *src)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (row==<span class="number">0</span>||col==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Rows/cols number is 0.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(src==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr,<span class="string">&quot;Source array is NULL.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *pMatrix = <span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(Matrix));</span><br><span class="line">    <span class="keyword">if</span> (pMatrix == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Failed to allocate memory for a matrix.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    pMatrix-&gt;row = row;</span><br><span class="line">    pMatrix-&gt;col = col;</span><br><span class="line">    pMatrix-&gt;data = <span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">float</span>) * row * col);</span><br><span class="line">    <span class="keyword">if</span> (pMatrix-&gt;data == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Failed to allocate memory for the matrix data.\n&quot;</span>);</span><br><span class="line">        <span class="built_in">free</span>(pMatrix);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">memcpy</span>(pMatrix-&gt;data,src,<span class="built_in">sizeof</span>(<span class="type">float</span>)*row*col);</span><br><span class="line">    <span class="keyword">return</span> pMatrix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以从数组创建矩阵为例，本项目该部分与前一项目的差别在于：优化了安全性检查与报错，使用fprintf的stderr报错，使其变得更加合理和规范，同时采用了memcpy()代替手动赋值。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matrix.c</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">releaseMat</span><span class="params">(Matrix **pMatrix)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (pMatrix == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr,<span class="string">&quot;Pointer to the pointer of matrix is NULL.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>((*pMatrix)==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr,<span class="string">&quot;The pointer to the matrix is NULL.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>((*pMatrix)-&gt;data==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr,<span class="string">&quot;The pointer to the matrix data is NULL.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>((*pMatrix)-&gt;data);</span><br><span class="line">    <span class="built_in">free</span>(*pMatrix);</span><br><span class="line">    *pMatrix = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>释放矩阵与此前的差别同样在与报错与安全性的优化。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matmul.c</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">safe_check</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (src1 == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;File %s, Line %d, Function %s(): The 1st parameter is NULL.\n&quot;</span>, __FILE__, __LINE__,</span><br><span class="line">                __FUNCTION__);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (src1-&gt;data == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s(): The 1st parameter has no valid data.\n&quot;</span>, __FUNCTION__);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (src2 == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;File %s, Line %d, Function %s(): The 2nd parameter is NULL.\n&quot;</span>, __FILE__, __LINE__,</span><br><span class="line">                __FUNCTION__);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (src2-&gt;data == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s(): The 2nd parameter has no valid data.\n&quot;</span>, __FUNCTION__);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (dst == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;File %s, Line %d, Function %s(): The 3rd parameter is NULL.\n&quot;</span>, __FILE__, __LINE__,</span><br><span class="line">                __FUNCTION__);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (dst-&gt;data == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;%s(): The 3rd parameter has no valid data.\n&quot;</span>, __FUNCTION__);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (src1-&gt;row != src1-&gt;col || src1-&gt;row != src2-&gt;row || src1-&gt;col != src2-&gt;col || src1-&gt;row != dst-&gt;row || src1-&gt;col != dst-&gt;col)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;The input and the output do not match, they should have the same square size.\n&quot;</span>);</span><br><span class="line">        <span class="built_in">fprintf</span>(stderr, <span class="string">&quot;Their sizes are (%zu,%zu), (%zu,%zu) and (%zu,%zu).\n&quot;</span>,</span><br><span class="line">                src1-&gt;row, src1-&gt;col, src2-&gt;row, src2-&gt;col, dst-&gt;row, dst-&gt;col);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在进行矩阵乘法前，本项目对三个参数矩阵都进行了安全性检查，并用更规范的形式报错和处理。此处的最后一个<code>if</code>限定了三个矩阵应均为方阵，修改条件后可解除方阵要求。</p>
<h3 id="矩阵乘法"><a href="#矩阵乘法" class="headerlink" title="矩阵乘法"></a>矩阵乘法</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matmul.h</span></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">safe_check</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_plain</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_divide</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_omp</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_avx_vec8</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_avx_block8</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_thread</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst, <span class="type">size_t</span> num_threads)</span></span>;</span><br></pre></td></tr></table></figure>
<p>项目实现了6个矩阵乘法函数，依次为：朴素乘法，4×4分块乘法，<code>OpenMP</code>优化朴素乘法，向量点乘级<code>SIMD</code>优化朴素乘法，<code>SIMD</code>优化8×8分块乘法，手动多线程算法(基于<code>pthread.h</code>)。</p>
<p>下文将逐个展开解析优化策略和原理，效率比较部分将在后文体现。</p>
<h3 id="朴素乘法"><a href="#朴素乘法" class="headerlink" title="朴素乘法"></a>朴素乘法</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_plain</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">safe_check</span>(src1, src2, dst))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">size_t</span> n = src1-&gt;row;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">size_t</span> i_n = i * n;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">float</span> t = src1-&gt;data[i_n + k];</span><br><span class="line">            <span class="type">size_t</span> k_n = k * n;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                dst-&gt;data[i_n + j] += t * src2-&gt;data[k_n + j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>说是朴素，但要是为了衬托其他算法把朴素写得太朴素没什么意思，所以这个朴素版其实是小幅优化后的朴素版，继承了上一项目的乘法，时间复杂度$O(N^3)$。</p>
<p>硬件优化：通过交换循环顺序将内存访问的跳跃次数从$n^3+n^2-n$降低到$n^2$次。</p>
<p>软件优化：暂存了$i×n$和$k×n$，小幅减少了乘法的次数。</p>
<h3 id="4×4分块乘法-Tiling"><a href="#4×4分块乘法-Tiling" class="headerlink" title="4×4分块乘法(Tiling)"></a>4×4分块乘法(Tiling)</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_divide</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">safe_check</span>(src1, src2, dst))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">size_t</span> n = src1-&gt;row;</span><br><span class="line">    <span class="type">size_t</span> k, j;</span><br><span class="line">    <span class="type">float</span> *data1 = src1-&gt;data;</span><br><span class="line">    <span class="type">float</span> *data2 = <span class="built_in">transpose</span>(src2-&gt;data, n);</span><br><span class="line">    <span class="type">float</span> *data3 = dst-&gt;data;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">4</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n; j += <span class="number">4</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; n; k += <span class="number">4</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> i2 = <span class="number">0</span>; i2 &lt; <span class="number">4</span>; i2++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">size_t</span> j2 = <span class="number">0</span>; j2 &lt; <span class="number">4</span>; j2++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="type">size_t</span> k2 = <span class="number">0</span>; k2 &lt; <span class="number">4</span>; k2++)</span><br><span class="line">                        &#123;</span><br><span class="line">                            data3[(i + i2) * n + (j + j2)] += data1[(i + i2) * n + (k + k2)] * data2[(k + k2) + (j + j2) * n];</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>硬件优化：在大规模矩阵乘法时，两个元素间隔可能很远，因此CPU往往需要将两个元素都加载进<code>cache</code>，耗费大量访存时间。考虑到小矩阵的数据可以存储进<code>CPU cache</code>中，我们可以将原先的大矩阵按行和列切割成若干4×4的小块再进行运算。同时，通过转置矩阵将内存访问变得连续。</p>
<h3 id="OpenMP优化朴素乘法"><a href="#OpenMP优化朴素乘法" class="headerlink" title="OpenMP优化朴素乘法"></a>OpenMP优化朴素乘法</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_omp</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">safe_check</span>(src1, src2, dst))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">register</span> <span class="type">size_t</span> n = src1-&gt;row;</span><br><span class="line">    <span class="keyword">register</span> <span class="type">size_t</span> k, j;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel</span></span><br><span class="line">    &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp for private(k, j)</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">register</span> <span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">size_t</span> i_n = i * n;</span><br><span class="line">            <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">float</span> t = src1-&gt;data[i_n + k];</span><br><span class="line">                <span class="type">size_t</span> k_n = k * n;</span><br><span class="line">                <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">                &#123;</span><br><span class="line">                    dst-&gt;data[i_n + j] += t * src2-&gt;data[k_n + j];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>硬件优化：将原本串行执行的多次乘法通过<code>OpenMP</code>变为多线程并行，双线程效率较单线程折半，四线程较双线程接近折半，不过在线程数增加的过程中耗时减少的幅度逐渐降低，但总体而言较朴素算法有若干倍的提升，详见下文测试部分。</p>
<h3 id="向量化SIMD优化"><a href="#向量化SIMD优化" class="headerlink" title="向量化SIMD优化"></a>向量化SIMD优化</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_avx_vec8</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">safe_check</span>(src1, src2, dst))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">size_t</span> n = src1-&gt;row;</span><br><span class="line">    <span class="type">size_t</span> k, j;</span><br><span class="line">    <span class="type">float</span> *data1 = src1-&gt;data;</span><br><span class="line">    <span class="type">float</span> *data2 = <span class="built_in">transpose</span>(src2-&gt;data, n);</span><br><span class="line">    <span class="type">float</span> *data3 = dst-&gt;data;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp for private(k, j)</span></span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            __m256 sx = _mm256_setzero_ps();</span><br><span class="line">            <span class="keyword">for</span> (k = <span class="number">0</span>; k &lt; n; k += <span class="number">8</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sx = _mm256_add_ps(sx, _mm256_mul_ps(_mm256_loadu_ps(data1 + i * n + k), _mm256_loadu_ps(data2 + j * n + k)));</span><br><span class="line">            &#125;</span><br><span class="line">            sx = _mm256_add_ps(sx, _mm256_permute2f128_ps(sx, sx, <span class="number">1</span>));</span><br><span class="line">            sx = _mm256_hadd_ps(sx, sx);</span><br><span class="line">            data3[i * n + j] = _mm256_cvtss_f32(_mm256_hadd_ps(sx, sx));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>由于计算对象矩阵默认阶数为8的倍数，因此可以将8个连续的元素使用<code>__m256</code>进行合并，再进行批量乘法。在使用了<code>OpenMP</code>并行优化的基础上，进行维数为8的向量乘法代替8次串行的逐元素运算，将效率再次大幅提高。</p>
<p><img src="https://s2.loli.net/2022/11/26/xqpjyZkn4iAw8R9.png" alt="向量化"></p>
<h3 id="8×8分块SIMD优化"><a href="#8×8分块SIMD优化" class="headerlink" title="8×8分块SIMD优化"></a>8×8分块SIMD优化</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_avx_block8</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">safe_check</span>(src1, src2, dst))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">register</span> <span class="type">size_t</span> n = src1-&gt;row;</span><br><span class="line">    <span class="type">float</span> *data1 = src1-&gt;data;</span><br><span class="line">    <span class="type">float</span> *data2 = src2-&gt;data;</span><br><span class="line">    <span class="type">float</span> *data3 = dst-&gt;data;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel for</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="type">size_t</span> i = <span class="number">0</span>; i &lt; n; i += <span class="number">8</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">register</span> <span class="type">size_t</span> j = <span class="number">0</span>; j &lt; n; j += <span class="number">8</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">register</span> <span class="type">size_t</span> k = <span class="number">0</span>; k &lt; n; k += <span class="number">8</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">register</span> <span class="type">size_t</span> u = i; u &lt; i + <span class="number">8</span>; u++)</span><br><span class="line">                &#123;</span><br><span class="line">                    __m256 a_1 = _mm256_set1_ps(data1[u * n + j]);</span><br><span class="line">                    __m256 a_2 = _mm256_set1_ps(data1[u * n + j + <span class="number">1</span>]);</span><br><span class="line">                    __m256 a_3 = _mm256_set1_ps(data1[u * n + j + <span class="number">2</span>]);</span><br><span class="line">                    __m256 a_4 = _mm256_set1_ps(data1[u * n + j + <span class="number">3</span>]);</span><br><span class="line">                    __m256 a_5 = _mm256_set1_ps(data1[u * n + j + <span class="number">4</span>]);</span><br><span class="line">                    __m256 a_6 = _mm256_set1_ps(data1[u * n + j + <span class="number">5</span>]);</span><br><span class="line">                    __m256 a_7 = _mm256_set1_ps(data1[u * n + j + <span class="number">6</span>]);</span><br><span class="line">                    __m256 a_8 = _mm256_set1_ps(data1[u * n + j + <span class="number">7</span>]);</span><br><span class="line"></span><br><span class="line">                    __m256 b_1 = _mm256_loadu_ps(data2 + j * n + k);</span><br><span class="line">                    __m256 b_2 = _mm256_loadu_ps(data2 + (j + <span class="number">1</span>) * n + k);</span><br><span class="line">                    __m256 b_3 = _mm256_loadu_ps(data2 + (j + <span class="number">2</span>) * n + k);</span><br><span class="line">                    __m256 b_4 = _mm256_loadu_ps(data2 + (j + <span class="number">3</span>) * n + k);</span><br><span class="line">                    __m256 b_5 = _mm256_loadu_ps(data2 + (j + <span class="number">4</span>) * n + k);</span><br><span class="line">                    __m256 b_6 = _mm256_loadu_ps(data2 + (j + <span class="number">5</span>) * n + k);</span><br><span class="line">                    __m256 b_7 = _mm256_loadu_ps(data2 + (j + <span class="number">6</span>) * n + k);</span><br><span class="line">                    __m256 b_8 = _mm256_loadu_ps(data2 + (j + <span class="number">7</span>) * n + k);</span><br><span class="line"></span><br><span class="line">                    b_1 = _mm256_mul_ps(b_1, a_1);</span><br><span class="line">                    b_2 = _mm256_mul_ps(b_2, a_2);</span><br><span class="line">                    b_3 = _mm256_mul_ps(b_3, a_3);</span><br><span class="line">                    b_4 = _mm256_mul_ps(b_4, a_4);</span><br><span class="line">                    b_5 = _mm256_mul_ps(b_5, a_5);</span><br><span class="line">                    b_6 = _mm256_mul_ps(b_6, a_6);</span><br><span class="line">                    b_7 = _mm256_mul_ps(b_7, a_7);</span><br><span class="line">                    b_8 = _mm256_mul_ps(b_8, a_8);</span><br><span class="line"></span><br><span class="line">                    __m256 t_1 = _mm256_add_ps(b_1, b_2);</span><br><span class="line">                    __m256 t_2 = _mm256_add_ps(b_3, b_4);</span><br><span class="line">                    __m256 t_3 = _mm256_add_ps(b_5, b_6);</span><br><span class="line">                    __m256 t_4 = _mm256_add_ps(b_7, b_8);</span><br><span class="line"></span><br><span class="line">                    __m256 t_5 = _mm256_add_ps(t_1, t_2);</span><br><span class="line">                    __m256 t_6 = _mm256_add_ps(t_3, t_4);</span><br><span class="line">                    __m256 t_7 = _mm256_add_ps(t_5, t_6);</span><br><span class="line"></span><br><span class="line">                    __m256 t_c = _mm256_loadu_ps(data3 + u * n + k);</span><br><span class="line">                    __m256 t_8 = _mm256_add_ps(t_7, t_c);</span><br><span class="line"></span><br><span class="line">                    _mm256_storeu_ps(data3 + u * n + k, t_8);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/11/26/GlN51cUPIfbYRAj.png" alt="image.png"></p>
<p>这是上述计算过程的图像解释，我们每次将$B$中的8个元素合并载入<code>__mm256</code>，再将$A$中的单个元素广播载入<code>__mm256</code>，二者批量相乘后再累加至对应8个元素中，通过u的循环就可以得到8×8分块的值。</p>
<p>为了便于说明，我们以4×4的例子入手讲解，以下是计算<code>C[0][0..3]</code>的式子</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">C0[<span class="number">0</span>]+=A0[<span class="number">0</span>]+B0[<span class="number">0</span>]	C0[<span class="number">0</span>]+=A0[<span class="number">1</span>]+B1[<span class="number">0</span>]	C0[<span class="number">0</span>]+=A0[<span class="number">2</span>]+B2[<span class="number">0</span>]	C0[<span class="number">0</span>]+=A0[<span class="number">3</span>]+B3[<span class="number">0</span>]</span><br><span class="line">C0[<span class="number">1</span>]+=A0[<span class="number">0</span>]+B0[<span class="number">1</span>]	C0[<span class="number">1</span>]+=A0[<span class="number">1</span>]+B1[<span class="number">1</span>]	C0[<span class="number">1</span>]+=A0[<span class="number">2</span>]+B2[<span class="number">1</span>]	C0[<span class="number">1</span>]+=A0[<span class="number">3</span>]+B3[<span class="number">1</span>]</span><br><span class="line">C0[<span class="number">2</span>]+=A0[<span class="number">0</span>]+B0[<span class="number">2</span>]	C0[<span class="number">2</span>]+=A0[<span class="number">1</span>]+B1[<span class="number">2</span>]	C0[<span class="number">2</span>]+=A0[<span class="number">2</span>]+B2[<span class="number">2</span>]	C0[<span class="number">2</span>]+=A0[<span class="number">3</span>]+B3[<span class="number">2</span>]</span><br><span class="line">C0[<span class="number">3</span>]+=A0[<span class="number">0</span>]+B0[<span class="number">3</span>]	C0[<span class="number">3</span>]+=A0[<span class="number">1</span>]+B1[<span class="number">3</span>]	C0[<span class="number">3</span>]+=A0[<span class="number">2</span>]+B2[<span class="number">3</span>]	C0[<span class="number">3</span>]+=A0[<span class="number">3</span>]+B3[<span class="number">3</span>]</span><br></pre></td></tr></table></figure>
<p>对于朴素乘法，我们对上述16个式子是“行优先”执行的，但如果按“列优先”的视角重排后，我们发现A可以一次性载入用作输出的计算，对于B则逐行拆分使用。利用AVX指令集，我们将四个元素的访存与计算向量化，则能达到提高效率的目的。</p>
<p><img src="https://s2.loli.net/2022/11/27/sv3hRyKUmHkXWZS.png" alt="image.png"></p>
<h3 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a><pthread.h>多线程</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;pthread.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PartialMatMulParams</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">size_t</span> fromColumn, toColum, n;</span><br><span class="line">    <span class="type">float</span> *a, *b, *c;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> *<span class="title">partialMatMul</span><span class="params">(<span class="type">void</span> *params)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">PartialMatMulParams</span> *p = (<span class="keyword">struct</span> PartialMatMulParams *)params;</span><br><span class="line">    <span class="type">size_t</span> n = p-&gt;n;</span><br><span class="line">    <span class="type">float</span> *a = p-&gt;a;</span><br><span class="line">    <span class="type">float</span> *b = p-&gt;b;</span><br><span class="line">    <span class="type">float</span> *c = p-&gt;c;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> omp parallel for</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = p-&gt;fromColumn; i &lt; p-&gt;toColum; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; n; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                c[j * n + i] += a[j * n + k] * b[k * n + i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">matmul_thread</span><span class="params">(Matrix *src1, Matrix *src2, Matrix *dst, <span class="type">size_t</span> num_threads)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">safe_check</span>(src1, src2, dst))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">register</span> <span class="type">size_t</span> n = src1-&gt;row;</span><br><span class="line">    <span class="type">float</span> *data1 = src1-&gt;data;</span><br><span class="line">    <span class="type">float</span> *data2 = src2-&gt;data;</span><br><span class="line">    <span class="type">float</span> *data3 = dst-&gt;data;</span><br><span class="line">    <span class="type">pthread_t</span> *threads = <span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">pthread_t</span>) * num_threads);</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">PartialMatMulParams</span> *params = <span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="keyword">struct</span> PartialMatMulParams) * num_threads);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; num_threads; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        params[i].a = data1;</span><br><span class="line">        params[i].b = data2;</span><br><span class="line">        params[i].c = data3;</span><br><span class="line">        params[i].n = n;</span><br><span class="line"></span><br><span class="line">        params[i].fromColumn = i * (n / num_threads);</span><br><span class="line">        params[i].toColum = (i + <span class="number">1</span>) * (n / num_threads);</span><br><span class="line">        <span class="built_in">pthread_create</span>(&amp;threads[i], <span class="literal">NULL</span>, partialMatMul, &amp;params[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; num_threads; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">pthread_join</span>(threads[i], <span class="literal">NULL</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>(threads);</span><br><span class="line">    <span class="built_in">free</span>(params);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上函数是笔者对于<code>&lt;pthread.h&gt;</code>库的实验品，在浅略阅读相关讲解与教程后所写，在实际运行测试中，虽然能正确得到结果，但以16线程运行的效率甚至低于无优化的朴素算法，且笔者对于该库的线程安全问题并不了解，因此仅作为学习过程的副产品，不参与后续效率比较。</p>
<h2 id="Part-3-Test-amp-Comparison"><a href="#Part-3-Test-amp-Comparison" class="headerlink" title="Part 3 - Test &amp; Comparison"></a>Part 3 - Test &amp; Comparison</h2><h3 id="测试说明"><a href="#测试说明" class="headerlink" title="测试说明"></a>测试说明</h3><p><code>benchmark.c</code>为本项目测试用代码，其中依次测试了矩阵乘法的各类实现的正确性与耗时。</p>
<p>矩阵尺寸由调试者输入，矩阵元素为随机生成的$[0,1]$的单精度浮点数。</p>
<p>乘法标准答案由<code>cblas.h</code>的<code>cblas_sgemm()</code>函数输出至矩阵$C$，其余函数输出至$D$并与之比较，会打印出首次误差情况。</p>
<p>考虑到使用了<code>OpenMP</code>提高效率，此处使用<code>double omp_get_wtime()</code>计算运行时间，单位为秒。</p>
<p>在运行一个函数前，程序会“预热”两次，即预先运行2次再计时。</p>
<p>下面是以<code>matmul_avx_block8()</code>为例的测试片段。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">matmul_avx_block8</span>(A, B, D);</span><br><span class="line"><span class="built_in">matmul_avx_block8</span>(A, B, D);</span><br><span class="line"><span class="built_in">memset</span>(D-&gt;data, <span class="number">0</span>, <span class="built_in">sizeof</span>(<span class="type">float</span>) * nn);</span><br><span class="line">time1 = <span class="built_in">omp_get_wtime</span>();</span><br><span class="line"><span class="built_in">matmul_avx_block8</span>(A, B, D);</span><br><span class="line">time2 = <span class="built_in">omp_get_wtime</span>();</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;[AVX_block+OpenMP] %ld ms used\n&quot;</span>, (<span class="type">long</span> <span class="type">int</span>)(<span class="number">1000</span> * (time2 - time1)));</span><br><span class="line"><span class="built_in">printf</span>(<span class="built_in">equals</span>(C, D) ? <span class="string">&quot;Result Accepted.\n&quot;</span> : <span class="string">&quot;Wrong Result.\n&quot;</span>);</span><br><span class="line"><span class="built_in">memset</span>(D-&gt;data, <span class="number">0</span>, <span class="built_in">sizeof</span>(<span class="type">float</span>) * nn);</span><br></pre></td></tr></table></figure>
<h3 id="x64平台测试结果"><a href="#x64平台测试结果" class="headerlink" title="x64平台测试结果"></a>x64平台测试结果</h3><p>笔记本型号：Surface Pro7 <del>孱弱的主动散热</del>+外置风扇</p>
<p>系统：Linux version 5.10.16.3(WSL2)，64位系统，基于x64处理器</p>
<p>处理器：Intel(R) Core(TM) i7-1065G7 CPU @ 1.30GHz   1.50 GHz</p>
<p>时间单位:毫秒(ms)，<code>0</code>代表1ms内完成，<code>/</code>表示等待时间在作者的耐心之外(超过5分钟)</p>
<p><del>由于要预热，超出5分钟的函数笔者要等15分钟以上</del></p>
<h4 id="Without-addition-compilation-option"><a href="#Without-addition-compilation-option" class="headerlink" title="Without addition compilation option"></a>Without addition compilation option</h4><div class="table-container">
<table>
<thead>
<tr>
<th>阶数/函数</th>
<th>plain</th>
<th>divide</th>
<th>plain+omp</th>
<th>avx_vec8</th>
<th>avx_block8</th>
<th>OpenBLAS</th>
</tr>
</thead>
<tbody>
<tr>
<td>16</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>128</td>
<td>7</td>
<td>7</td>
<td>1</td>
<td>0</td>
<td>30</td>
<td>0</td>
</tr>
<tr>
<td>1024</td>
<td>3657</td>
<td>1366</td>
<td>792</td>
<td>194</td>
<td>257</td>
<td>7</td>
</tr>
<tr>
<td>2048</td>
<td>27677</td>
<td>11123</td>
<td>6783</td>
<td>1835</td>
<td>1496</td>
<td>43</td>
</tr>
<tr>
<td>4096</td>
<td>205834</td>
<td>116130</td>
<td>61203</td>
<td>12968</td>
<td>11397</td>
<td>395</td>
</tr>
<tr>
<td>8192</td>
<td>/</td>
<td>/</td>
<td>543397</td>
<td>124802</td>
<td>107255</td>
<td>2940</td>
</tr>
<tr>
<td>16384</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>24763</td>
</tr>
</tbody>
</table>
</div>
<h4 id="With-O2"><a href="#With-O2" class="headerlink" title="With -O2"></a>With -O2</h4><div class="table-container">
<table>
<thead>
<tr>
<th>阶数/函数</th>
<th>plain</th>
<th>divide</th>
<th>plain+omp</th>
<th>avx_vec8</th>
<th>avx_block8</th>
<th>OpenBLAS</th>
</tr>
</thead>
<tbody>
<tr>
<td>16</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
</tr>
<tr>
<td>128</td>
<td>2</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>28</td>
<td>0</td>
</tr>
<tr>
<td>1024</td>
<td>515</td>
<td>165</td>
<td>110</td>
<td>32</td>
<td>52</td>
<td>6</td>
</tr>
<tr>
<td>2048</td>
<td>4746</td>
<td>1727</td>
<td>933</td>
<td>623</td>
<td>232</td>
<td>46</td>
</tr>
<tr>
<td>4096</td>
<td>34098</td>
<td>15463</td>
<td>11363</td>
<td>5395</td>
<td>1765</td>
<td>395</td>
</tr>
<tr>
<td>8192</td>
<td>270939</td>
<td>139216</td>
<td>89797</td>
<td>46394</td>
<td>14359</td>
<td>3015</td>
</tr>
<tr>
<td>16384</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>196830^</td>
<td>24433</td>
</tr>
</tbody>
</table>
</div>
<p>^: 在测试16384×16384矩阵的avx_block8函数时，即便笔者使用了外置散热手段，还是无法避免CPU长期高负荷计算过热导致的降频，因此该数据效率有明显下降。</p>
<h4 id="With-O3"><a href="#With-O3" class="headerlink" title="With -O3"></a>With -O3</h4><div class="table-container">
<table>
<thead>
<tr>
<th>阶数/函数</th>
<th>plain</th>
<th>divide</th>
<th>plain+omp</th>
<th>avx_vec8</th>
<th>avx_block8</th>
<th>OpenBLAS</th>
</tr>
</thead>
<tbody>
<tr>
<td>16</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>6</td>
<td>0</td>
</tr>
<tr>
<td>128</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>115</td>
<td>59</td>
<td>2</td>
</tr>
<tr>
<td>1024</td>
<td>134</td>
<td>131</td>
<td>47</td>
<td>112</td>
<td>89</td>
<td>7</td>
</tr>
<tr>
<td>2048</td>
<td>1648</td>
<td>975</td>
<td>357</td>
<td>607</td>
<td>299</td>
<td>48</td>
</tr>
<tr>
<td>4096</td>
<td>13601</td>
<td>7905</td>
<td>3099</td>
<td>5386</td>
<td>1837</td>
<td>388</td>
</tr>
<tr>
<td>8192</td>
<td>112437</td>
<td>74809</td>
<td>41208</td>
<td>44041</td>
<td>14188</td>
<td>3069</td>
</tr>
<tr>
<td>16384</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>188428^</td>
<td>24325</td>
</tr>
</tbody>
</table>
</div>
<p>笔者将电脑关闭冷却后，使用-O3编译，发现如下现象：</p>
<ul>
<li>对于阶数在2048以下的矩阵，自行实现的<code>SIMD</code>优化函数效率有所下降，而对于较大矩阵，自行实现的<code>SIMD</code>优化函数效率基本不变。</li>
<li>未引入手动<code>SIMD</code>优化的函数效率有较大提高，但在大规模计算时效率低于<code>SIMD</code>优化</li>
<li>又降频了，说明效率门槛从访存速度转移至算力。</li>
</ul>
<p>随后尝试了-Ofast编译，效果在误差允许范围内与-O3几乎相同。</p>
<p>经过查询</p>
<h3 id="图表比较"><a href="#图表比较" class="headerlink" title="图表比较"></a>图表比较</h3><p>下图是矩阵乘法的不同实现对于各规模矩阵的用时柱状图，单位ms，超时部分未画出。</p>
<p>为了方便观察比较，此处对时间取<code>log2</code>对数，得到右侧各图。</p>
<p>自行实现的各算法中，开启<code>-O2</code>时耗时比约为：</p>
<script type="math/tex; mode=display">T_{plain}≈1.95T_{divide}≈3.01T_{plain+omp}≈5.83T_{avx\_vec8}≈18.87T_{avx\_block8}≈89.86T_{OpenBLAS}</script><p>由上述原因，只看n=16384时，自行实现的最快算法<code>avx_block8</code>耗时也达到了OpenBLAS的8倍左右，但在其他规模下，<code>avx__block8</code>可以达到OpenBLAS的4~5倍。</p>
<p>由右侧各图可以观察到，在开启<code>-O2</code>编译后，<code>avx_block8</code>的<code>log2(time)</code>与<code>OpenBLAS</code>相差只有2左右，即达到了约1/4的效率。</p>
<p><img src="https://s2.loli.net/2022/11/27/ABndj2HIe15kpzU.png" alt="Plain"></p>
<p><img src="https://s2.loli.net/2022/11/27/RpjzcnNgLvCIUwH.png" alt="with O2"></p>
<p><img src="https://s2.loli.net/2022/11/27/Fv2xEQBUVMs5g4m.png" alt="O3"></p>
<h3 id="ARM平台测试结果"><a href="#ARM平台测试结果" class="headerlink" title="ARM平台测试结果"></a>ARM平台测试结果</h3><p>除在本机运行外，笔者在EAIDK310开发板上运行了基于<code>&lt;arm_neon.h&gt;</code>的版本。</p>
<p>开发板运行内存1GB，内置存储8GB。</p>
<p>CPU为ARM 4核 64位处理器，四核Cortex-A53，最高1.3GHz。</p>
<p>理论上，开发板可以为16k×16k的矩阵分配空间，但实际运行时，进程则被系统killed掉了，说明EAIDK310可能实际上无法支持申请这么大的空间。同时，由于更大规模的矩阵乘法运行时间过长，此处仅测试了16~4096规模的矩阵。</p>
<h4 id="Without-addition-compilation-option-1"><a href="#Without-addition-compilation-option-1" class="headerlink" title="Without addition compilation option"></a>Without addition compilation option</h4><div class="table-container">
<table>
<thead>
<tr>
<th>阶数/函数</th>
<th>plain</th>
<th>divide</th>
<th>plain+omp</th>
<th>neon_vec4</th>
<th>neon_block4</th>
<th>OpenBLAS</th>
</tr>
</thead>
<tbody>
<tr>
<td>16</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>1</td>
<td>0</td>
</tr>
<tr>
<td>128</td>
<td>87</td>
<td>48</td>
<td>31</td>
<td>44</td>
<td>48</td>
<td>0</td>
</tr>
<tr>
<td>1024</td>
<td>44629</td>
<td>20449</td>
<td>11230</td>
<td>4749</td>
<td>5536</td>
<td>156</td>
</tr>
<tr>
<td>2048</td>
<td>/</td>
<td>/</td>
<td>89900</td>
<td>30015</td>
<td>59238</td>
<td>1226</td>
</tr>
<tr>
<td>4096</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td>9659</td>
</tr>
</tbody>
</table>
</div>
<h4 id="With-O2-1"><a href="#With-O2-1" class="headerlink" title="With -O2"></a>With -O2</h4><div class="table-container">
<table>
<thead>
<tr>
<th>阶数/函数</th>
<th>plain</th>
<th>divide</th>
<th>plain+omp</th>
<th>neon_vec4</th>
<th>neon_block4</th>
<th>OpenBLAS</th>
</tr>
</thead>
<tbody>
<tr>
<td>16</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>128</td>
<td>20</td>
<td>9</td>
<td>5</td>
<td>76</td>
<td>11</td>
<td>0</td>
</tr>
<tr>
<td>1024</td>
<td>10283</td>
<td>3930</td>
<td>2611</td>
<td>1196</td>
<td>1473</td>
<td>167</td>
</tr>
<tr>
<td>2048</td>
<td>82239</td>
<td>32929</td>
<td>20859</td>
<td>9483</td>
<td>30989</td>
<td>1228</td>
</tr>
<tr>
<td>4096</td>
<td>/</td>
<td>/</td>
<td>169994</td>
<td>75110</td>
<td>/</td>
<td>9670</td>
</tr>
</tbody>
</table>
</div>
<h4 id="With-O3-1"><a href="#With-O3-1" class="headerlink" title="With -O3"></a>With -O3</h4><div class="table-container">
<table>
<thead>
<tr>
<th>阶数/函数</th>
<th>plain</th>
<th>divide</th>
<th>plain+omp</th>
<th>neon_vec4</th>
<th>neon_block4</th>
<th>OpenBLAS</th>
</tr>
</thead>
<tbody>
<tr>
<td>16</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>0</td>
<td>3</td>
<td>0</td>
</tr>
<tr>
<td>128</td>
<td>6</td>
<td>2</td>
<td>1</td>
<td>75</td>
<td>12</td>
<td>0</td>
</tr>
<tr>
<td>1024</td>
<td>3021</td>
<td>1781</td>
<td>893</td>
<td>1221</td>
<td>1098</td>
<td>159</td>
</tr>
<tr>
<td>2048</td>
<td>24062</td>
<td>16943</td>
<td>7828</td>
<td>9495</td>
<td>34779</td>
<td>1223</td>
</tr>
<tr>
<td>4096</td>
<td>/</td>
<td>136914</td>
<td>82110</td>
<td>74115</td>
<td>/</td>
<td>10050</td>
</tr>
</tbody>
</table>
</div>
<p>让人比较郁闷的是NEON仅有4个一组绑定的float，而没有<code>__mm256</code>的代替品，因此笔者将分块步长从8变成4，牺牲了效率，分块效率变得不如向量化效率，可能也有开发板算力弱于电脑的原因。上述三种编译下的耗时比例关系与上文类似，故此不做赘述。</p>
<h3 id="跨平台的比较"><a href="#跨平台的比较" class="headerlink" title="跨平台的比较"></a>跨平台的比较</h3><p>本项目分别在x64和ARM架构的平台进行了测试，从结果可以大致算出x64平台的效率大约是ARM平台的16倍，在下图中表现为：相同算法下左柱(ARM)比相邻的右柱(x64)高出大约4。</p>
<p>随着矩阵阶数的按2倍乘，各算法耗时也大致呈8倍增长，符合$O(N^3)$算法的特征，由此可见，OpenBLAS底层似乎也采用的是$O(N^3)$的算法，但对许多细节进行了展开和优化来降低常数。</p>
<p><img src="https://s2.loli.net/2022/11/27/2mTCa3kMiZybIA8.png" alt="compare.png"></p>
<h2 id="Part-4-Difficulties-amp-Solutions"><a href="#Part-4-Difficulties-amp-Solutions" class="headerlink" title="Part 4 - Difficulties &amp; Solutions"></a>Part 4 - Difficulties &amp; Solutions</h2><h4 id="Difficulty-I-误差处理"><a href="#Difficulty-I-误差处理" class="headerlink" title="Difficulty I. 误差处理"></a>Difficulty I. 误差处理</h4><p>笔者在测试时发现，对于规模在2048以上的矩阵乘法，很容易产生<code>0.001</code>的误差，(通常是OpenBLAS与自己实现的不同，而自己实现的几个往往成对相同)。下图是某个凌晨一点钟，没开风扇降频跑16k规模矩阵时得到的结果。</p>
<p><img src="https://s2.loli.net/2022/11/27/c2mNhHgYivPzoEk.png" alt="image-20221127014002130.png" style="zoom: 50%;" /></p>
<h4 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h4><p>经同学提醒，可以将误差设置为数据的1‰而非0.001，这样的误差要求对于进行了很多次加、乘法得到的结果也都是可以接受的。</p>
<p>不过为了比较时的效率，<code>benchmark.c</code>依然采用旧版比较，适当放宽误差到<code>0.01</code>时可以验证乘法的正确性，既然保证了正确性，精确到哪一位才算正确似乎也没有那么重要了。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> float_equal(x, y) ((x - y) &lt; 1e-3 &amp;&amp; (y - x) &lt; 1e-3) <span class="comment">//old</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> mx(x, y) ((x) &gt; (y) ? (x) : (y))</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> float_equal2(x, y) (x &gt; y ? (x - y &lt; mx(x, 1) * 1e-3) : (y - x &lt; mx(y, 1) * 1e-3)) <span class="comment">// new</span></span></span><br></pre></td></tr></table></figure>
<h4 id="Difficulty-II-Strassen"><a href="#Difficulty-II-Strassen" class="headerlink" title="Difficulty II. Strassen"></a>Difficulty II. Strassen</h4><p>与同学讨论的过程中，笔者了解到$O(N^{lg7})≈O(N^{2.81})$复杂度的<code>Strassen</code>算法，并且尝试自己写了一下，通过了正确性测试，但效率非常悲观，仅比朴素略快一筹。</p>
<h4 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h4><p>随后笔者分析了原因：<code>Strassen</code>算法将矩阵运算中的8次子矩阵乘法与4次子矩阵加法，分别变为了7次和18次，即以额外的14次加法为代价减少一次乘法，在阶数很高时才能体现差距，且笔者在实现Strassen时并未使用<code>SIMD</code>进行加速，导致加法运算并未得到很好的优化，而分治的截取、合并等操作导致内存访问的跳跃数较高，虽然从软件层面降低了复杂度，但在硬件层面增大了操作复杂性。</p>
<p>另外，该算法的优化幅度为$O(N^{0.19})$，而当$N=16384$时，也只有理论上限6.32倍的提升，矩阵规模越小优化越不明显。加上访问不连续、矩阵分块等操作带来的额外复杂度，总体呈现负优化。也许加上合适的<code>SIMD</code>优化能提高其效率。</p>
<h4 id="Difficulty-III-Segmentation-Fault"><a href="#Difficulty-III-Segmentation-Fault" class="headerlink" title="Difficulty III. Segmentation Fault"></a>Difficulty III. Segmentation Fault</h4><p><code>SIMD</code>优化过程中屡次出现段错误，笔者试图使用<code>memalign</code>函数在创建矩阵时将<code>data</code>对齐，粒度设置为32，以便后续的load等操作，但发现写入数据时会导致段错误。</p>
<h4 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h4><p>查询<code>memalign</code>的用法后发现并无异常，但就是无法对申请的内存进行正常读写，于是笔者推测可能是申请的空间过大，无法通过该函数申请到一块连续、对齐的内存用于存储数据，导致并未将data指向一段合法内存，因此读写时会段错误。考虑到申请如此大块的内存的确不太现实，笔者选择在载入时牺牲一定效率，换用<code>loadu_ps</code>来对未对齐的数据进行载入，效率还算不错，借此实现了本项目最快的函数，对齐后也许还能更快。</p>
<h4 id="Difficulty-IV-64k×64k"><a href="#Difficulty-IV-64k×64k" class="headerlink" title="Difficulty IV. 64k×64k"></a>Difficulty IV. 64k×64k</h4><p>一个float四字节，$64k×64k=2^{32}=4,294,967,296$个元素，也就是对于仅一个64k阶矩阵，就要为<code>data</code>指针分配$2^{32}×4/1024^3=16GB$内存，实在是有点难为渣机了。而对于运行内存1GB，内置存储8GB的EAIDK310而言，条件会更加苛刻。</p>
<h4 id="Solution-3"><a href="#Solution-3" class="headerlink" title="Solution"></a>Solution</h4><p>办法总比问题多，但效果不一定好。对于如此巨大的矩阵，我们可以将其写入文件，在访问某块元素时再读取载入进行运算，运算后写回文件。笔者不得不承认这是一个办法，但对于能存下的矩阵，运算耗时也已经到了难以等待的程度，如果在每次读写元素时再加上文件操作时间，恐怕要等到天荒地老、海枯石烂了，因此虽然能这样解决，但并没有必要。</p>
<h2 id="Part-5-Summary-amp-Blooper"><a href="#Part-5-Summary-amp-Blooper" class="headerlink" title="Part 5 - Summary &amp; Blooper"></a>Part 5 - Summary &amp; Blooper</h2><p>首先，感谢您能读到这里，该部分是对项目开发过程的总结与花絮的分享。</p>
<p>本项目在尝试了若干种优化方法后，结合<code>OpenMP</code>、<code>SIMD</code>和分块等方法对矩阵乘法进行了不同程度的优化，将耗时门槛从访存转移到了计算，效率达到了<code>OpenBLAS</code>的1/4左右。</p>
<p>由于笔者的电脑只有一块<code>Intel Iris Plus Graphics</code>核显，且本次项目的大致重心在于如何最大限度利用CPU进行矩阵乘法的运算，笔者几乎用尽解数才写出了本项目最快的函数，然而与<code>OpenBLAS</code>依然相差甚远，大约可以理解于老师当年与完备的库相比时感受到的“绝望”的感觉了。不过想想那个项目无论从开发周期还是开发团队都远超这个用时二十余小时的单人项目，内心倒也释然许多。</p>
<p><img src="https://s2.loli.net/2022/11/27/iXV5fbZHFLzBm71.png" alt="image-20221127012543083.png" style="zoom: 25%;" /></p>
<p>11.27凌晨一点，笔者在测试16k矩阵乘法时，CPU八核顶着高温降频运转，为了等待自己最快的一个函数的运行结果，守在电脑前近二十分钟(预热两次真的很慢)，得到了下面的结果：</p>
<p><img src="https://s2.loli.net/2022/11/27/c2mNhHgYivPzoEk.png" alt="image-20221127014002130.png" style="zoom: 50%;" /></p>
<p>本来已经完全不抱希望了，但就在快要没耐心的时候程序给出了答案，虽然有一点误差，但当时还是挺感动的。然而第二天在加上外置风扇、酒精喷雾等外置散热的帮助下，效率得到了很大的提升，令人感慨好硬件的重要性。</p>
<p>本次项目兼具技术性和挑战性，还是非常有趣的，<del>也让人深刻意识到自己和行业标准的差距</del>，此后这门课仅剩一次project，且做且珍惜啦。</p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ 期末复习</title>
    <url>/2023/01/10/CS205_C&amp;CPP_final/</url>
    <content><![CDATA[<h3 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h3><p><strong>编译与运行</strong></p>
<p>g++ hello.cpp —std=c++11 -o hello</p>
<p>./hello</p>
<p><strong>优点</strong></p>
<p>大部分基础计算机系统的开发语言：Linux, MySQL, OpenCV, TensorFlow后端，PyTorch……</p>
<p>高效率：高强度优化编译器，直接访问内存，高效计算，AI算法实现</p>
<p><strong>函数的声明与定义</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//prototype/declaration (*.h; *.hpp)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">mul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span>;</span><br><span class="line"><span class="comment">//definition (*.c; *.cpp)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">mul</span><span class="params">(<span class="type">int</span> a, <span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a * b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>编译与链接</strong></p>
<p><img src="https://s2.loli.net/2023/01/09/2CXFo9DnY3ltHcA.png" alt="_4N280_VDA_DNQD57N2KQO3.png"></p>
<p><strong>编译错误，链接错误，运行错误</strong></p>
<p>语法错误，找不到.o文件中所指的内容，运行时发生的异常</p>
<p><strong>预处理器和宏</strong></p>
<p>预处理器会处理#开头的指令</p>
<p>预处理指令：define, undef, include, if, ifdef, ifndef, else, elif, endif, line, error, pragma</p>
<p><strong>输入输出</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">std::ostream cout;</span><br><span class="line">std::istream cin;</span><br><span class="line">printf, scanf</span><br></pre></td></tr></table></figure>
<p><strong>命令行参数</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;...&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> *argv[])</span></span>&#123;...&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span>&#123;...&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">g++ hello.cpp -o hello</span><br></pre></td></tr></table></figure>
<p>这个命令有三个命令行参数(g++不算在内)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">./a.out arg1 arg2 arg3</span><br><span class="line"><span class="number">0</span>: ./a.out</span><br><span class="line"><span class="number">1</span>: arg1</span><br><span class="line"><span class="number">2</span>: arg2</span><br><span class="line"><span class="number">3</span>: arg3</span><br></pre></td></tr></table></figure>
<p>上面这个例子就有四个命令行参数</p>
<h3 id="Data-Types-and-Arithmetic-Operators"><a href="#Data-Types-and-Arithmetic-Operators" class="headerlink" title="Data Types and Arithmetic Operators"></a>Data Types and Arithmetic Operators</h3><p><strong>变量初始化</strong></p>
<p>未初始化的变量可能会拥有随机值，因平台而异</p>
<p><strong>溢出</strong></p>
<p>数字过大导致溢出至符号位，正变负</p>
<p><img src="https://s2.loli.net/2023/01/09/TU3ZivgrGMYXQKP.png" alt="D8S8MWQQ73_T~BS_CS___5S.png" style="zoom: 67%;" /></p>
<p><strong>整数类型</strong></p>
<p><code>sizeof</code>操作符可以返回数据类型的位宽，单位字节(byte)</p>
<p><code>char</code>是8-bit integer类型</p>
<p><code>bool</code>是8-bit integer类型</p>
<p><code>typedef</code>创建类型</p>
<p><code>size_t</code>是unsigned integer类型，是<code>sizeof</code>的结果类型，32-bit或64-bit</p>
<p><strong>浮点类型</strong></p>
<p><code>float</code>：单精度浮点类型，32-bit</p>
<p><img src="https://s2.loli.net/2023/01/09/vnVwCapglWHYui2.png" alt="G~CML_WB__YGOO__V1XH0_Y.png"></p>
<p><code>double</code>：双精度浮点型，64-bit</p>
<p><code>long double</code>：扩展精度浮点型，如果支持则128-bit，否则64-bit</p>
<p>运算速度：double&lt;float&lt;integers</p>
<p><code>float</code>变量用<code>==</code>比较可能带来意料外的结果</p>
<p><code>±inf</code>： Exponent=11111111, fraction=0</p>
<p><code>nan</code>： Exponent=11111111, fraction!=0</p>
<p><strong>常数</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="number">95</span> <span class="comment">// decimal </span></span><br><span class="line"><span class="number">0137</span><span class="comment">// octal </span></span><br><span class="line"><span class="number">0x5F</span> <span class="comment">// hexadecimal </span></span><br><span class="line"></span><br><span class="line"><span class="number">95</span> <span class="comment">// int </span></span><br><span class="line"><span class="number">95u</span> <span class="comment">// unsigned int </span></span><br><span class="line"><span class="number">95l</span> <span class="comment">// long </span></span><br><span class="line"><span class="number">95ul</span> <span class="comment">// unsigned long </span></span><br><span class="line"><span class="number">95lu</span> <span class="comment">// unsigned long </span></span><br><span class="line"></span><br><span class="line"><span class="number">6.02e23</span>L <span class="comment">// long double </span></span><br><span class="line"><span class="number">6.02e23</span>f <span class="comment">// float </span></span><br><span class="line"><span class="number">6.02e23</span> <span class="comment">// double</span></span><br></pre></td></tr></table></figure>
<p><code>const</code>：类型修饰符</p>
<p><code>auto</code>：类型占位符，由初始化赋值决定其类型，确定后不再改变</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">auto</span> c; <span class="comment">//valid in C, error in C++</span></span><br></pre></td></tr></table></figure>
<p><strong>运算符优先级</strong></p>
<p>ysq：考试考这个就没意思了</p>
<p><strong>类型转换</strong></p>
<p>有显式有隐式，隐式转换可能导致编译通过，产生意料之外的结果，尽可能用显式转换</p>
<p><strong>数据损失</strong></p>
<p><code>long double-&gt;double-&gt;float-&gt;long-&gt;int-&gt;short-&gt;char</code></p>
<p><strong>运算</strong></p>
<p>当除号左右都是整数类型时，进行整型除法(下取整)，有一边是浮点型就按浮点型运算</p>
<p>操作数不属于<code>int, long, float, double</code>四者之一时，先无损转换至这四者再运算</p>
<h3 id="Branching-and-Looping-Statements"><a href="#Branching-and-Looping-Statements" class="headerlink" title="Branching and Looping Statements"></a>Branching and Looping Statements</h3><p><strong>就近配对</strong></p>
<p>if-else在模糊语义下是就近配对</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="number">1</span>)</span><br><span class="line"><span class="keyword">if</span> (<span class="number">0</span>)</span><br><span class="line"><span class="keyword">else</span> cout &lt;&lt; <span class="string">&quot;w&quot;</span>;</span><br><span class="line"><span class="comment">//output: w</span></span><br></pre></td></tr></table></figure>
<p><strong>三目运算符</strong></p>
<p><code>sign=a&lt;0?-1:1</code></p>
<p><strong>条件</strong></p>
<p><code>bool, chat, int, float</code>都可以直接塞进if()，如果可以隐式转换为<code>bool</code>就行，指针也行(用来判断是否为NULL)</p>
<p><strong>关系语句</strong></p>
<p>大于，小于，等于，不等于</p>
<p><strong>逻辑表达式</strong></p>
<p>优先级：!&gt;&amp;&amp;&gt;||</p>
<p><strong>循环</strong></p>
<p>while, do-while, for; break, continue</p>
<p>for(;;)是可以的，但for()是不可以的</p>
<p>goto: 依托答辩，降低可读性</p>
<p><strong>选择支</strong></p>
<p>switch，别忘了break！</p>
<h3 id="Data-Structures"><a href="#Data-Structures" class="headerlink" title="Data Structures"></a>Data Structures</h3><p><strong>数组</strong></p>
<p>C99及以后，数组可以根据变量开长度</p>
<p>数组在C/C++中并不是对象，而可以当作“地址”</p>
<p>数组之间不支持直接赋值，可视作常量指针：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> a[<span class="number">4</span>]=&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;;</span><br><span class="line"><span class="type">int</span> b[<span class="number">4</span>];</span><br><span class="line">b=a;<span class="comment">//error!</span></span><br></pre></td></tr></table></figure>
<p>未知后n-1维尺寸的n维数组不能作为函数参数</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span> mat[][])</span></span>;<span class="comment">//error!</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">(<span class="type">int</span> mat[][<span class="number">3</span>])</span></span>;<span class="comment">//ok</span></span><br></pre></td></tr></table></figure>
<p>常量数组可以作为函数参数使用，避免修改数组内容</p>
<p><strong>字符串</strong></p>
<p>长度为n的char数组，最好只存n-1个字符，最后一个存<code>&#39;\0&#39;</code></p>
<p>若char数组中间出现了<code>&#39;\0&#39;</code>，则strlen只会统计其前的字符数，但sizeof会忠诚地记录下所有字符，包括<code>&#39;\0&#39;</code></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strcpy</span><span class="params">( <span class="type">char</span>* dest, <span class="type">const</span> <span class="type">char</span>* src )</span></span>;</span><br><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strncpy</span><span class="params">(<span class="type">char</span> *dest, <span class="type">const</span> <span class="type">char</span> *src, <span class="type">size_t</span> count)</span></span>;</span><br><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strcat</span><span class="params">( <span class="type">char</span> *dest, <span class="type">const</span> <span class="type">char</span> *src )</span></span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">strcmp</span><span class="params">( <span class="type">const</span> <span class="type">char</span> *lhs, <span class="type">const</span> <span class="type">char</span> *rhs )</span></span>;</span><br></pre></td></tr></table></figure>
<p>string class相对而言不那么容易导致问题</p>
<p><strong>结构体<code>struct</code></strong></p>
<p>成员变量的序列，内存安排在连续的内存序列中，变量顺序可能导致结构体大小变化，为了对齐会按照最大的成员为单位申请内存</p>
<p><img src="https://s2.loli.net/2023/01/09/dOaAPIQuVFe1sKi.png" alt="UN~`HI@_K~34BZDL12_GOJ7.png" style="zoom:50%;" /></p>
<p>C语言中，为结构体生成对象需要<code>struct name var</code>，使用typedef可以省点力。而C++中则可以<code>name var</code></p>
<p><strong>联合体<code>union</code></strong></p>
<p>类似于结构体，但成员共享内存。</p>
<p>由<a href="https://github.com/NeumoNeumo">@NeumoNeumo</a>提供的<code>union</code>的使用场景：</p>
<ol>
<li><p>在 linux 0.11 的 kernel/sched.c 中，Linus 大大将进程的描述符及其用户栈放在同一页中，于是可以使用位运算很方便地由栈定位进程的描述符，反之亦然。</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">task_union</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">task_struct</span> <span class="title">task</span>;</span></span><br><span class="line">	<span class="type">char</span> <span class="built_in">stack</span>[PAGE_SIZE];</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Small String Optimization 短字符串优化(可以参考下面大致理解，但实际并非如此)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">string</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">size_t</span> capacity;</span><br><span class="line">  <span class="keyword">union</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">struct</span> </span><br><span class="line">    &#123;</span><br><span class="line">      <span class="type">char</span> *ptr;</span><br><span class="line">      <span class="type">size_t</span> size;</span><br><span class="line">    &#125; heapbuf;</span><br><span class="line">    <span class="type">char</span> stackbuf[<span class="built_in">sizeof</span>(heapbuf)];</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>题外话：SSO是个不错的机制，不过也会导致一些诸如<a href="https://github.com/Yaossg">@Yaossg</a>的<a href="https://yaossg.com/blog/sso/">SSO?SOS!</a>中描述的问题。</p>
</li>
</ol>
<p><strong>枚举类<code>enum</code></strong></p>
<p>const的代替品，成员是整数，但不能参与表达式的运算，不过可以赋值给整型变量</p>
<p>默认从0开始，定义时可以指定对应的整数</p>
<p><strong>typedef</strong></p>
<p>用于代替复杂类型名称，对C结构体特攻，也可以结合预处理语句根据编译选项将不同类型对接给指定类型名</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">if</span> defined(_LP64) </span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> <span class="type">wchar_t</span>; </span><br><span class="line"><span class="meta">#<span class="keyword">else</span> </span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">wchar_t</span>; </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<h3 id="Pointers-and-Dynamic-Memory-Management"><a href="#Pointers-and-Dynamic-Memory-Management" class="headerlink" title="Pointers and Dynamic Memory Management"></a>Pointers and Dynamic Memory Management</h3><p><strong>指针</strong></p>
<p>32-bit/64-bit整数，用<code>type *</code>定义，用<code>&amp;</code>取址，用<code>*</code>取值</p>
<p><code>p-&gt;member</code>等价于<code>(*p).member</code></p>
<p><strong>常量与指针</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">1</span>;</span><br><span class="line"><span class="type">int</span> another = <span class="number">2</span>;</span><br><span class="line"><span class="comment">// 不能通过p1修改值</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> *p1 = &amp;num;</span><br><span class="line"><span class="comment">// int const * p1 = &amp;num</span></span><br><span class="line">*p1 = <span class="number">3</span>; <span class="comment">// error</span></span><br><span class="line">num = <span class="number">3</span>; <span class="comment">// okay</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能修改p2的指向</span></span><br><span class="line"><span class="type">int</span> *<span class="type">const</span> p2 = &amp;num;</span><br><span class="line">*p2 = <span class="number">3</span>;       <span class="comment">// okay</span></span><br><span class="line">p2 = &amp;another; <span class="comment">// error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 都不能修改</span></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> *<span class="type">const</span> p3 = &amp;num;</span><br><span class="line"></span><br><span class="line"><span class="comment">//不能将常指针赋值给指针变量</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">foo</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> *p2=p;<span class="comment">//syntax error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>指针与数组</strong></p>
<p>数组是常指针，用sizeof可以得到数组所有元素的内存大小和，用sizeof只能得到指针变量的大小：4/8</p>
<p>指针也可以用中括号访问对应内存</p>
<p>指针的运算是按对应元素的下标进行的，p+1代表下一个元素，跳跃字节数是对应类型的字节数</p>
<p>小心越界</p>
<p><strong>申请内存: C style</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> len;</span><br><span class="line"><span class="type">int</span> *p=(<span class="type">int</span> *)<span class="built_in">malloc</span>(len*<span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line"><span class="comment">//void *malloc(size_t size)</span></span><br><span class="line"><span class="comment">//申请size字节的未初始化内存</span></span><br></pre></td></tr></table></figure>
<p>如果为一个int型指针malloc(1)，只分配了1字节，系统则会授予4字节的访问权限，导致可能的越界，非常危险。</p>
<p><strong>内存释放: C style</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">foo</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span>* p = (<span class="type">int</span> *) <span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125; <span class="comment">//memory leak</span></span><br></pre></td></tr></table></figure>
<p>函数结束时只有临时指针变量p被释放，申请的那块内存却没有free，导致内存泄漏，应该在return前加个free(p)</p>
<p><strong>申请内存: C++ style</strong></p>
<p>new 和 new[]</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//allocate an int, default initializer (do nothing)</span></span><br><span class="line"><span class="type">int</span> * p1 = <span class="keyword">new</span> <span class="type">int</span>; </span><br><span class="line"><span class="comment">//allocate an int, initialized to 0</span></span><br><span class="line"><span class="type">int</span> * p2 = <span class="keyword">new</span> <span class="built_in">int</span>();</span><br><span class="line"><span class="comment">//allocate an int, initialized to 5</span></span><br><span class="line"><span class="type">int</span> * p3 = <span class="keyword">new</span> <span class="built_in">int</span>(<span class="number">5</span>); </span><br><span class="line"><span class="comment">//allocate an int, initialized to 0</span></span><br><span class="line"><span class="type">int</span> * p4 = <span class="keyword">new</span> <span class="type">int</span>&#123;&#125;;<span class="comment">//C++11 </span></span><br><span class="line"><span class="comment">//allocate an int, initialized to 5</span></span><br><span class="line"><span class="type">int</span> * p5 = <span class="keyword">new</span> <span class="type">int</span> &#123;<span class="number">5</span>&#125;;<span class="comment">//C++11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//allocate a Student object, default initializer</span></span><br><span class="line">Student * ps1 = <span class="keyword">new</span> Student;</span><br><span class="line"><span class="comment">//allocate a Student object, initialize the members</span></span><br><span class="line">Student * ps2 = <span class="keyword">new</span> Student &#123;<span class="string">&quot;Yu&quot;</span>, <span class="number">2020</span>, <span class="number">1</span>&#125;; <span class="comment">//C++11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//allocate 16 int, default initializer (do nothing) </span></span><br><span class="line"><span class="type">int</span> * pa1 = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">16</span>];</span><br><span class="line"><span class="comment">//allocate 16 int, zero initialized </span></span><br><span class="line"><span class="type">int</span> * pa2 = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">16</span>]();</span><br><span class="line"><span class="comment">//allocate 16 int, zero initialized </span></span><br><span class="line"><span class="type">int</span> * pa3 = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">16</span>]&#123;&#125;; <span class="comment">//C++11</span></span><br><span class="line"><span class="comment">//allocate 16 int, the first 3 element are initialized to 1,2,3, the rest 0</span></span><br><span class="line"><span class="type">int</span> * pa4 = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">16</span>]&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;; <span class="comment">//C++11</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//allocate memory for 16 Student objects, default initializer</span></span><br><span class="line">Student * psa1 = <span class="keyword">new</span> Student[<span class="number">16</span>];</span><br><span class="line"><span class="comment">//allocate memory for 16 Student objects, the first two are explicitly initialized</span></span><br><span class="line">Student * psa2 = <span class="keyword">new</span> Student[<span class="number">16</span>]&#123;&#123;<span class="string">&quot;Li&quot;</span>, <span class="number">2000</span>,<span class="number">1</span>&#125;, &#123;<span class="string">&quot;Yu&quot;</span>, <span class="number">2001</span>,<span class="number">1</span>&#125;&#125;; <span class="comment">//C++11</span></span><br></pre></td></tr></table></figure>
<p><strong>释放内存: C++ style</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//deallocate memory</span></span><br><span class="line"><span class="keyword">delete</span> p1;</span><br><span class="line"><span class="comment">//deallocate memory</span></span><br><span class="line"><span class="keyword">delete</span> ps1;</span><br><span class="line"></span><br><span class="line"><span class="comment">//deallocate the memory of the array</span></span><br><span class="line"><span class="keyword">delete</span> pa1;</span><br><span class="line"><span class="comment">//deallocate the memory of the array</span></span><br><span class="line"><span class="keyword">delete</span> []pa2;</span><br><span class="line"></span><br><span class="line"><span class="comment">//deallocate the memory of the array, and call the destructor of the first element</span></span><br><span class="line"><span class="keyword">delete</span> psa1;</span><br><span class="line"><span class="comment">//deallocate the memory of the array, and call the destructors of all the elements</span></span><br><span class="line"><span class="keyword">delete</span> []psa2;</span><br></pre></td></tr></table></figure>
<h3 id="Basics-of-Functions"><a href="#Basics-of-Functions" class="headerlink" title="Basics of Functions"></a>Basics of Functions</h3><p>函数的声明、定义在跨文件之间的顺序</p>
<p>调用函数是有代价的：调用栈存储返回值地址，存储寄存器变量，存储临时变量</p>
<p><strong>参数</strong></p>
<p>值传递，指针的值传递，引用传递(C++)</p>
<p><strong>引用(C++)</strong></p>
<p>引用必须在声明时初始化，相比指针更安全</p>
<p>传递引用会导致对函数参数的修改会影响到被传入的变量，为防止其修改，可将传入参数用const修饰</p>
<p><strong>内联</strong></p>
<p>编译时，编译器会试图将内联函数展开，增加编译用时但减少运行用时</p>
<p>在极短情况下，宏是个不错的选择</p>
<h3 id="Advances-in-Functions"><a href="#Advances-in-Functions" class="headerlink" title="Advances in Functions"></a>Advances in Functions</h3><p><strong>默认参数(C++)</strong></p>
<p>默认参数只能集中放在最后几个参数位</p>
<p><strong>函数的重载(C++)</strong></p>
<p>同名，不同参数类型/个数，不同返回类型</p>
<p><strong>函数模板</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span></span><br><span class="line"><span class="function">T <span class="title">sum</span><span class="params">(T x, T y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ...;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//显式实例化</span></span><br><span class="line"><span class="keyword">template</span> <span class="type">double</span> <span class="built_in">sum</span>&lt;<span class="type">double</span>&gt;(<span class="type">double</span>, <span class="type">double</span>);</span><br><span class="line"><span class="comment">//隐式实例化</span></span><br><span class="line"><span class="type">int</span> p1=<span class="built_in">sum</span>&lt;<span class="type">int</span>&gt;(<span class="number">1.0f</span>,<span class="number">2.0f</span>);</span><br><span class="line"><span class="type">float</span> p2=<span class="built_in">sum</span>(<span class="number">1.0f</span>,<span class="number">2.0f</span>);</span><br><span class="line"><span class="comment">//特例化</span></span><br><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">sum</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>函数指针</strong></p>
<p>可以和函数名混用，加<code>*</code>加<code>&amp;</code>无所谓，可以当作参数传入函数：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">qsort</span><span class="params">( <span class="type">void</span> *ptr, <span class="type">size_t</span> count, <span class="type">size_t</span> size, <span class="type">int</span> (*comp)(<span class="type">const</span> <span class="type">void</span> *, <span class="type">const</span> <span class="type">void</span> *) )</span></span>;</span><br></pre></td></tr></table></figure>
<p>需要给定函数的返回类型和参数列表、参数类型</p>
<p><strong>函数引用</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> <span class="title">norm_l1</span><span class="params">(<span class="type">float</span> x, <span class="type">float</span> y)</span></span>; <span class="comment">//declaration</span></span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">norm_l2</span><span class="params">(<span class="type">float</span> x, <span class="type">float</span> y)</span></span>; <span class="comment">//declaration</span></span><br><span class="line"><span class="built_in">float</span> (&amp;norm_ref)(<span class="type">float</span> x, <span class="type">float</span> y) = norm_l1; <span class="comment">//norm_ref is a function reference</span></span><br></pre></td></tr></table></figure>
<p>存在意义不明</p>
<p><strong>递归函数</strong></p>
<p>适用树形遍历等场景，短小精悍</p>
<p>占用栈内存，慢，难实现/debug</p>
<h3 id="Speedup-Your-Program"><a href="#Speedup-Your-Program" class="headerlink" title="Speedup Your Program"></a>Speedup Your Program</h3><p>ARM is a family of reduced instruction set computing (RISC) architectures for computer processors.</p>
<p>ARM是一个用于计算机处理器的精简指令集计算（RISC）架构系列。</p>
<p>ARM is the most widely used instruction set architecture (ISA) and the ISA produced in the largest quantity.</p>
<p>ARM是使用最广泛的指令集架构（ISA），也是生产数量最多的ISA。</p>
<p>Simple is beautiful.</p>
<p><strong>SIMD: Single instruction, multiple data</strong></p>
<p>将多个数据合并为一个变量，同时进行运算</p>
<p><strong>OpenMP</strong></p>
<p>循环展开进行多线程并行，但展开也需要耗时，每层都展开可能反而会慢</p>
<p>一般而言，若外层循环次数远小于内层，则#pragma放内层，否则放外层</p>
<h3 id="Basics-of-Classes"><a href="#Basics-of-Classes" class="headerlink" title="Basics of Classes"></a>Basics of Classes</h3><p><strong>访问权限指定</strong></p>
<p>private, public, protected, default</p>
<p><strong>成员函数</strong></p>
<p>可以在类内外定义，加inline相当于就在类内，甚至可以跨文件</p>
<p><strong>构造函数</strong></p>
<p>创建对象时：</p>
<p>结构体：申请内存</p>
<p>类：申请内存，调用构造器</p>
<p>构造器名字和类名一样，无返回值</p>
<p><strong>析构函数</strong></p>
<p>销毁对象时调用，用<code>~</code>加类名表示，无参数无返回值</p>
<p>delete[]时会调用对象数组中每个对象的析构函数，delete则只会调用第一个对象的析构函数</p>
<p><strong>this指针</strong></p>
<p>指向调用当前函数的对象</p>
<p><strong>常量成员</strong></p>
<p>常量成员变量和常变量一样，不能修改</p>
<p>const放在函数参数列表后修饰成员函数，保证该函数不会修改成员变量</p>
<p><strong>静态成员</strong></p>
<p>静态成员与实例不绑定，所有实例共享</p>
<h3 id="Advances-in-Classes"><a href="#Advances-in-Classes" class="headerlink" title="Advances in Classes"></a>Advances in Classes</h3><p><strong>重载操作符</strong></p>
<p>通过成员函数重载：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//类内</span></span><br><span class="line">return_type <span class="keyword">operator</span>+(<span class="type">const</span> operand2_type &amp;t) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//return something of return_type</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//类外</span></span><br><span class="line">return_type operand1_type::<span class="keyword">operator</span>+(<span class="type">const</span> operand2_type &amp;t) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//return something of return_type</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样重载的符号左右顺序不能反，<code>a+b</code>相当于<code>a.operator+(b)</code></p>
<p><strong>友元函数</strong></p>
<p>部分操作符可以通过友元函数重载，但赋值操作符<code>=</code>不行</p>
<p>友元函数需要在类中声明，可以在类内外定义，可以访问类的成员(含私有)，但说到底也只是友元，不是成员。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//类内定义</span></span><br><span class="line"><span class="keyword">friend</span> return_type <span class="keyword">operator</span>+(<span class="type">const</span> operand1_type&amp;a, <span class="type">const</span> operand2_type &amp;b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//return something of return_type</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//类内声明+类外定义，不需要加operand1_type::</span></span><br><span class="line"><span class="keyword">friend</span> return_type <span class="keyword">operator</span>+(<span class="type">const</span> operand1_type&amp;a, <span class="type">const</span> operand2_type &amp;b);</span><br><span class="line"></span><br><span class="line">return_type <span class="keyword">operator</span>+(<span class="type">const</span> operand1_type&amp;a, <span class="type">const</span> operand2_type &amp;b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//return something of return_type</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>标准输入输出流重载</strong></p>
<p>由于重载的是std命名空间中的输入输出流操作符，所以是std::而不是MyTime::</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">friend</span> std::ostream &amp; <span class="keyword">operator</span>&lt;&lt;(std::ostream &amp; os, <span class="type">const</span> MyTime &amp; t)</span><br><span class="line">&#123;</span><br><span class="line">    std::string str = std::<span class="built_in">to_string</span>(t.hours) + <span class="string">&quot; hours and &quot;</span> + std::<span class="built_in">to_string</span>(t.minutes) + <span class="string">&quot; minutes.&quot;</span>;</span><br><span class="line">    os &lt;&lt; str;</span><br><span class="line">    <span class="keyword">return</span> os;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>类型转换</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//隐式转换</span></span><br><span class="line"><span class="function"><span class="keyword">operator</span> <span class="title">int</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;hours * <span class="number">60</span> + <span class="keyword">this</span>-&gt;minutes;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//显式转换</span></span><br><span class="line"><span class="function"><span class="keyword">explicit</span> <span class="keyword">operator</span> <span class="title">float</span><span class="params">()</span> <span class="type">const</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">float</span>(<span class="keyword">this</span>-&gt;hours * <span class="number">60</span> + <span class="keyword">this</span>-&gt;minutes);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可通过转换构造器完成</p>
<p><strong>重载赋值操作符</strong></p>
<p>只能通过成员函数重载</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">class_type &amp; <span class="keyword">operator</span>=(rhs_type &amp;rhs)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//对this进行修改</span></span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>重载自增自减操作符</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">// prefix increment</span></span><br><span class="line">MyTime&amp; <span class="keyword">operator</span>++()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;minutes++;</span><br><span class="line">    <span class="keyword">this</span>-&gt;hours += <span class="keyword">this</span>-&gt;minutes / <span class="number">60</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;minutes = <span class="keyword">this</span>-&gt;minutes % <span class="number">60</span>;</span><br><span class="line">    <span class="keyword">return</span> *<span class="keyword">this</span>; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// postfix increment</span></span><br><span class="line">MyTime <span class="keyword">operator</span>++(<span class="type">int</span>)</span><br><span class="line">&#123;</span><br><span class="line">    MyTime old = *<span class="keyword">this</span>; <span class="comment">// keep the old value</span></span><br><span class="line">    <span class="keyword">operator</span>++(); <span class="comment">// prefix increment</span></span><br><span class="line">    <span class="keyword">return</span> old; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>可重载操作符列表</strong></p>
<p><img src="https://s2.loli.net/2023/01/09/GaWTF7jNyBOclK6.png" alt="TFSB_@~S__OR_C7M_GU0M6G.png" style="zoom:50%;" /></p>
<p>重载操作符不会更改其优先级！</p>
<h3 id="Dynamic-Memory-Management-in-Classes"><a href="#Dynamic-Memory-Management-in-Classes" class="headerlink" title="Dynamic Memory Management in Classes"></a>Dynamic Memory Management in Classes</h3><p><strong>默认构造函数</strong></p>
<p>没定义任何构造器时会有个默认的，啥也不干</p>
<p>定义构造器后默认的构造器会消失，因此可能会没有默认构造器</p>
<p>所有参数都有默认值的构造器就是默认构造器，只能有一个</p>
<p><strong>默认析构函数</strong></p>
<p>没定义析构函数时会有个默认的，啥也不干</p>
<p><strong>默认复制函数</strong></p>
<p>只有一个参数，或者其他参数都有默认值</p>
<p>默认复制所有非静态的数据成员</p>
<p><strong>复制赋值操作符</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">class_type &amp; class_type::<span class="keyword">operator</span>=(class_type &amp;rhs)&#123;...&#125;</span><br></pre></td></tr></table></figure>
<p>参数和返回值以及当前类是同一类型</p>
<p>默认复制所有非静态的数据成员</p>
<p><strong>硬拷贝 vs. 软拷贝</strong></p>
<p>硬拷贝把所有内容，以及指向的内容全部单独复制过来</p>
<p>软拷贝对于指针只会复制指针的值，使得多个对象的指针成员指向同一块内存</p>
<p><strong>共享指针</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::shared_ptr&lt;MyTime&gt; <span class="title">mt1</span><span class="params">(<span class="keyword">new</span> MyTime(<span class="number">10</span>))</span></span>;</span><br><span class="line">std::shared_ptr&lt;MyTime&gt; mt2 = mt1;</span><br><span class="line"><span class="keyword">auto</span> mt1 = std::<span class="built_in">make_shared</span>&lt;MyTime&gt;(<span class="number">1</span>, <span class="number">70</span>);</span><br></pre></td></tr></table></figure>
<p>能保证对象在没有指针指向它的时候能删掉</p>
<p><strong>独有指针</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">std::unique_ptr&lt;MyTime&gt; <span class="title">mt1</span><span class="params">(<span class="keyword">new</span> MyTime(<span class="number">10</span>))</span></span>;</span><br><span class="line">std::unique_ptr&lt;MyTime&gt; mt2 = std::<span class="built_in">make_unique</span>&lt;MyTime&gt;(<span class="number">80</span>); <span class="comment">//c++17</span></span><br><span class="line">std::unique_ptr&lt;MyTime&gt; mt3 = std::<span class="built_in">move</span>(mt1);</span><br></pre></td></tr></table></figure>
<p>一个独有指针能阻止其他指针指向它的对象，但可以通过move转移给别的指针</p>
<h3 id="Class-Inheritance"><a href="#Class-Inheritance" class="headerlink" title="Class Inheritance"></a>Class Inheritance</h3><p><strong>基类 vs. 派生类</strong></p>
<p>派生类从基类继承属性与函数，C++支持多基类继承和多层继承</p>
<p><strong>派生类的构造函数</strong></p>
<p>实例化一个派生类对象时，分配内存，派生类构造器被调用，必须首先调用基类构造器(会默认调用无参构造器，一般通过初始化列表将基类信息传给基类构造器)，然后再执行派生类构造器的其他内容，初始化派生类独占成员。</p>
<p><strong>派生类的析构函数</strong></p>
<p>与构造函数相反，首先调用派生类的析构函数，然后调用基类的析构函数</p>
<p><strong>访问控制</strong></p>
<p>protected：类似private，成员、友元和派生类可以访问</p>
<p>protected inheritance：基类中的public和protected成员在派生类中成为protected，只能被各级派生类访问</p>
<p>private inheritance：基类中的public和protected成员在派生类中成为private，只能被一级派生类访问</p>
<p><strong>虚函数</strong></p>
<p>如果使用语句<code>base *p=derived_object</code>，且派生类和基类拥有相同函数头的函数，则会绑定基类函数。</p>
<p>但如果基类函数设置为virtual，则会使这个函数在基类和所有派生类中均虚拟，动态绑定到派生类函数</p>
<p><strong>虚析构器</strong></p>
<p>如果基类构造器未设置为virtual，则上述例子<code>delete p</code>时只会调用基类析构函数，不会调用派生类析构函数！</p>
<p><strong>动态内存分配</strong></p>
<p>如果基类使用了动态内存分配，并且重载了复制操作符和赋值操作符：</p>
<ol>
<li>如果派生类没有动态内存分配，就无所谓</li>
<li>如果派生类有动态内存分配，则应该重定义复制操作符和赋值操作符</li>
</ol>
<h3 id="Class-Templates-and-std-Library"><a href="#Class-Templates-and-std-Library" class="headerlink" title="Class Templates and std Library"></a>Class Templates and std Library</h3><p><strong>类模板</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">class_name</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//members and friends</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Explicitly instantiate </span></span><br><span class="line"><span class="keyword">template</span> <span class="keyword">class</span> <span class="title class_">class_name</span>&lt;<span class="type">int</span>&gt;;</span><br><span class="line"><span class="comment">//Implicitly instantiate</span></span><br><span class="line">class_name&lt;&gt;</span><br></pre></td></tr></table></figure>
<p><strong>非类型参数</strong></p>
<p>参数可以有：类型模板参数，模板模板参数，非类型模板参数(整数、浮点、指针、左值引用…)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T, <span class="type">size_t</span> rows, <span class="type">size_t</span> cols&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Mat</span></span><br><span class="line">&#123;</span><br><span class="line">    T data[rows][cols];</span><br><span class="line">  <span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Mat</span>()&#123;&#125;</span><br><span class="line">    <span class="function">T <span class="title">getElement</span><span class="params">(<span class="type">size_t</span> r, <span class="type">size_t</span> c)</span></span>;</span><br><span class="line">    <span class="function"><span class="type">bool</span> <span class="title">setElement</span><span class="params">(<span class="type">size_t</span> r, <span class="type">size_t</span> c, T value)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>特例化</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span> &lt;&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">class_name</span>&lt;<span class="type">int</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//members and friends</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>std类</strong></p>
<p>一些基于模板类的，封装好的容器</p>
<h3 id="Error-Handling"><a href="#Error-Handling" class="headerlink" title="Error Handling"></a>Error Handling</h3><p>stdin,stdout,stderr</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">fprintf</span>(stdout,<span class="string">&quot;info&quot;</span>,...);<span class="comment">//C</span></span><br><span class="line">std::cerr&lt;&lt;<span class="string">&quot;info&quot;</span>;<span class="comment">//C++</span></span><br></pre></td></tr></table></figure>
<p><strong>重定向</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./a.out &lt;1.in  &gt;1.out 2&gt;1.err</span><br><span class="line">2&gt;&amp;1相当于将错误输出流重定向到标准输出流</span><br></pre></td></tr></table></figure>
<p><strong>assert</strong></p>
<p>如果条件句为true则不做处理，否则输出诊断信息并调用abort()中止程序。</p>
<p><strong>异常</strong></p>
<p>throw了可以不catch，只不过抛到main里还不捉就会中止运行。</p>
<p>一个try可以被多个catch跟着，但不能没有，如果没有被catch就会继续抛到调用函数的函数</p>
<p>catch(…)可以捉住所有异常</p>
<p>catch(const Base &amp;base)可以捉住子类异常</p>
<p>noexcept关键字保证函数不会抛任何异常</p>
<p>nothrow在new的时候会使用一个不抛异常的申请函数</p>
<h3 id="Nested-Classes-and-RTTI"><a href="#Nested-Classes-and-RTTI" class="headerlink" title="Nested Classes and RTTI"></a>Nested Classes and RTTI</h3><p><strong>友元类</strong></p>
<p>友元类可以在任何权限域声明，可以访问所有成员</p>
<p>一个类成员函数可以声明为他类友元函数，不过要注意声明顺序问题</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Sniper</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="type">int</span> bullets;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="built_in">Sniper</span>(<span class="type">int</span> bullets = <span class="number">0</span>): <span class="built_in">bullets</span>(bullets)&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">friend</span> <span class="type">bool</span> <span class="title">Supplier::provide</span><span class="params">(Sniper &amp;)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>嵌套类</strong></p>
<p>也有三个scope，private， protected， public</p>
<p><strong>RTTI</strong></p>
<p>dynamic_cast：多态类型间转换</p>
<p>typeid：鉴别两个类是否相同</p>
<p>type_info：typeid操作符返回一个该类型引用，可以用重载比较符比较是否为同类</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">derived_object=<span class="built_in">dynamic_cast</span>&lt;Base&gt;(&amp;base_object);</span><br></pre></td></tr></table></figure>
<p>const_cast：常数转换</p>
<p>static_cast：只有能隐式转换的时候才有效，不然返回错误</p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ Project05设计报告 矩阵类</title>
    <url>/2023/01/02/CS205_%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A_Matrix_Class/</url>
    <content><![CDATA[<h2 id="Part-0-团队成员"><a href="#Part-0-团队成员" class="headerlink" title="Part 0. 团队成员"></a>Part 0. <del>团队</del>成员</h2><div class="table-container">
<table>
<thead>
<tr>
<th>姓名</th>
<th>学号</th>
<th><del>贡献率</del></th>
</tr>
</thead>
<tbody>
<tr>
<td>咕桃</td>
<td>-</td>
<td><del>100%</del></td>
</tr>
</tbody>
</table>
</div>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">E:\CPP\PROJECT05</span><br><span class="line">│  CMakeLists.txt</span><br><span class="line">│  README.md</span><br><span class="line">│</span><br><span class="line">├─build</span><br><span class="line">│      <span class="comment">//makefile here</span></span><br><span class="line">│</span><br><span class="line">├─doc</span><br><span class="line">│      Report.pdf</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">        benchmark.cpp</span><br><span class="line">        data.hpp</span><br><span class="line">        matrix.hpp</span><br></pre></td></tr></table></figure>
<p>*编译时添加选项 -DSAFE 可以调用严格版函数实现。</p>
<h2 id="Part-1-Analysis"><a href="#Part-1-Analysis" class="headerlink" title="Part 1 - Analysis"></a>Part 1 - Analysis</h2><h3 id="题目重述-amp-主要思路"><a href="#题目重述-amp-主要思路" class="headerlink" title="题目重述&amp;主要思路"></a>题目重述&amp;主要思路</h3><p>本题目要求使用C++语言实现一个具有一定功能的矩阵类。</p>
<p>根据题目描述，题目要求的矩阵乘法需要支持的主要功能为：</p>
<ol>
<li>支持多通道存储数据</li>
<li>支持多种数据类型</li>
<li>赋值时避免深拷贝(Hard Copy)，安全管理内存</li>
<li>重载基本运算符</li>
<li>不使用深拷贝实现ROI</li>
</ol>
<p>本项目除完成上述基础要求外，支持以下内容：</p>
<ol>
<li><strong>支持任意合理重载运算符的数据类型</strong></li>
<li><strong>跨数据类型运算、转换、赋值</strong>(提供转换函数接口)</li>
<li><strong>异常处理机制</strong>(另提供严格版函数)</li>
<li><strong>子矩阵/掩膜提取两类ROI实现</strong></li>
<li><strong>逐元素一元/二元自定义运算</strong>(提供运算函数接口)</li>
<li><strong>默认重载软拷贝(Shallow Copy)，提供硬拷贝函数</strong></li>
<li><strong>更多易用重载运算符</strong></li>
<li><strong><del>用户友好的足量注释</del></strong></li>
</ol>
<h3 id="模型假设"><a href="#模型假设" class="headerlink" title="模型假设"></a>模型假设</h3><p>项目要求矩阵类需要适用于不同数据类型，因此本项目主体使用类模板完成，笔者考虑该库所可能使用的数据范围作为本项目支持的数据规模，如下：</p>
<ul>
<li>可适用的矩阵尺寸因元素类型而异，因此未设置<code>rows</code>和<code>cols</code>上限(不抛出<code>bad alloc exception</code>即可)。</li>
<li>通道数上限<code>MAX_CHANNEL</code>通过宏默认设置为4(适用于ARGB存储图像)，有更大需求修改宏即可</li>
<li>矩阵元素的数据兼容基本数据类型，适用于满足前置条件的自定义类型：<ul>
<li>无参数构造器，重载<code>=</code>，<code>==(!=)</code></li>
<li>与其他类型的隐式转换/显式的转换函数</li>
<li>与不同类型进行运算的结果类型推导</li>
</ul>
</li>
<li>多通道矩阵连续访问同一通道不同元素次数&gt;同一元素不同通道值次数，因此选择对通道进行稀疏存储，即同一通道内行优先存储。</li>
</ul>
<h2 id="Part-2-Code"><a href="#Part-2-Code" class="headerlink" title="Part 2 - Code"></a>Part 2 - Code</h2><p>本项目实现了严格版和普通版两版实现，安全性均可保证，但严格版的异常抛出信息更为具体，便于调试，此处展示严格版实现。</p>
<h3 id="矩阵数据类"><a href="#矩阵数据类" class="headerlink" title="矩阵数据类"></a>矩阵数据类</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//data.hpp</span></span><br><span class="line"><span class="comment">//data class</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">data</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    Tp *value;</span><br><span class="line">    <span class="type">size_t</span> length;</span><br><span class="line">    <span class="type">size_t</span> *ref_count;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>本项目根据尽可能避免Hard Copy的要求，参考课上所述的形式将矩阵内数据以私有成员的形式安全封装为类模板，在以<code>Tp *</code>指针<code>value</code>存储数据头外，附加存储了<code>size_t</code>类型的数据长度<code>length</code>，以及<code>size_t *</code>类型的“数据复用次数”统计变量<code>ref_count</code>，表示该数据可被多少个对象调用，便于析构矩阵时安全地释放内存。</p>
<h3 id="矩阵类"><a href="#矩阵类" class="headerlink" title="矩阵类"></a>矩阵类</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matrix.hpp</span></span><br><span class="line"><span class="comment">//matrix class</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_CHANNEL (4)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MAX_CHANNEL (4)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">matrix</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="keyword">typedef</span> matrix&lt;<span class="type">bool</span>&gt; mask;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="type">char</span> channel_number;</span><br><span class="line"></span><br><span class="line">    <span class="type">size_t</span> rows;</span><br><span class="line">    <span class="type">size_t</span> cols;</span><br><span class="line">    <span class="comment">//number of channels should be [1,MAX_CHANNEL]</span></span><br><span class="line">    channel_number channels;</span><br><span class="line">    <span class="comment">//padding of relative position</span></span><br><span class="line">    <span class="type">size_t</span> channel_pad;</span><br><span class="line">    <span class="type">size_t</span> step;</span><br><span class="line">    <span class="type">size_t</span> shift;</span><br><span class="line">    data&lt;Tp&gt; *dat;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">	...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>本项目的矩阵类实现为类模板，以私有成员的形式存储了包括行数、列数、通道数、内部数据的基本信息，其中行列数使用<code>size_t</code>存储，通道数限定在<code>[1, MAX_CHANNEL]</code>间，使用<code>char(channel_number)</code>存储，最大通道数默认为4，数据使用<code>data</code>类以行优先、通道稀疏存储，下图是一个<code>5*5</code>的RGB三通道矩阵在类中的存储方式：</p>
<p><img src="https://s2.loli.net/2022/12/18/21tVGCweI3EmWMk.png" alt="P0~QOP3BOMINV6PH_J@9YEU.png" style="zoom:50%;" /></p>
<p>根据题目对<code>Non-Hard-Copy ROI</code>的要求，为了复用同一<code>dat</code>，矩阵类多存了三个<code>size_t</code>类型变量：<code>shift</code>，<code>step</code>，<code>channel_pad</code>。</p>
<ul>
<li><code>shift</code>：存储当前矩阵相对<code>dat-&gt;value</code>的数据起始位置</li>
<li><code>step</code>：存储该数据原本的列数</li>
<li><code>channel_pad</code>：跳转到下一通道该元素所需加的数，即单个通道的尺寸</li>
</ul>
<h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><h4 id="data"><a href="#data" class="headerlink" title="data"></a>data</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//data.hpp</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">data</span></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//! constructor using the given source data</span></span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">data</span><span class="params">(Tp *dat, <span class="type">size_t</span> length)</span></span>;</span><br><span class="line">    <span class="comment">//! constructor that malloc new memory of the given length</span></span><br><span class="line">    <span class="function"><span class="keyword">explicit</span> <span class="title">data</span><span class="params">(<span class="type">size_t</span> length)</span></span>;</span><br><span class="line">    <span class="comment">//! soft copy constructor</span></span><br><span class="line">    <span class="built_in">data</span>(<span class="type">const</span> data &amp;p);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于<code>data</code>类，项目支持源数据指针+数据长和仅传入数据长两种构造器以及软拷贝构造器(直接传递<code>value</code>指针)，此处展示<strong>仅传入数据长的构造器</strong>。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! constructor that malloc new memory of the given length</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">data&lt;Tp&gt;::<span class="built_in">data</span>(<span class="type">size_t</span> length):<span class="built_in">length</span>(length)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        value = <span class="keyword">new</span> Tp[length];</span><br><span class="line">        ref_count = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">1</span>]&#123;<span class="number">1</span>&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (std::bad_alloc &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Bad Alloc Exception: Failed to allocate memory of the given length &quot;</span> &lt;&lt; length &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">bad_alloc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>仅传入数据长的构造器要求<code>Tp</code>类型需要有无参构造器，在为<code>value</code>申请空间时能捕获异常，通过错误流输出报错信息。</p>
<h4 id="matrix"><a href="#matrix" class="headerlink" title="matrix"></a>matrix</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matrix.hpp</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">matrix</span></span><br><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//! constructor that sets matrix elements to given source data</span></span><br><span class="line">    <span class="built_in">matrix</span>(<span class="type">size_t</span> rows, <span class="type">size_t</span> cols, Tp *src, channel_number channels = <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//! constructor that sets each matrix element to specified value</span></span><br><span class="line">    <span class="built_in">matrix</span>(<span class="type">size_t</span> rows, <span class="type">size_t</span> cols, <span class="type">const</span> Tp &amp;value, channel_number channels = <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//! submatrix constructor(ROI)</span></span><br><span class="line">    <span class="built_in">matrix</span>(matrix &amp;src, <span class="type">size_t</span> row1, <span class="type">size_t</span> col1, <span class="type">size_t</span> row2, <span class="type">size_t</span> col2);</span><br><span class="line">    <span class="comment">//! copy constructor (soft copy)</span></span><br><span class="line">    <span class="built_in">matrix</span>(<span class="type">const</span> matrix &amp;p);</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>matrix</code>严格意义上的构造器有4个，分别是尺寸+数据源、尺寸+单个值、子矩阵、软拷贝构造器，此处展示<strong>尺寸+数据源构造器</strong>和<strong>软拷贝构造器</strong>，子矩阵构造器会在ROI部分详讲。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! constructor that sets matrix elements to given source data</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">matrix&lt;Tp&gt;::<span class="built_in">matrix</span>(<span class="type">size_t</span> rows, <span class="type">size_t</span> cols, Tp *src, channel_number channels):<span class="built_in">rows</span>(rows), <span class="built_in">cols</span>(cols), <span class="built_in">channels</span>(channels)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (rows * cols == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(<span class="string">&quot;Invalid Argument Exception: row number and column number should be positive.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (channels &gt; MAX_CHANNEL || channels &lt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(<span class="string">&quot;Invalid Argument Exception: channel number should be in [1,MAX_CHANNEL].\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>-&gt;shift = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;step = cols;</span><br><span class="line">    <span class="keyword">this</span>-&gt;channel_pad = rows * cols;</span><br><span class="line">    <span class="keyword">this</span>-&gt;dat = <span class="keyword">new</span> <span class="built_in">data</span>&lt;Tp&gt;(src, <span class="built_in">size</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在生成与其他矩阵不存在包含关系的新矩阵时，将<code>shift</code>置零，<code>step</code>设为<code>cols</code>，<code>channel_pad</code>设为<code>rows*cols</code>，使用数据源创建<code>data</code>即可，过程中对矩阵的尺寸也做了检查和异常处理。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! copy constructor (soft copy)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">matrix&lt;Tp&gt;::<span class="built_in">matrix</span>(<span class="type">const</span> matrix &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (p.<span class="built_in">get_dat</span>() == <span class="literal">nullptr</span> || p.<span class="built_in">get_dat</span>() == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(<span class="string">&quot;Null Pointer Exception: The data of source matrix is null.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    rows = p.<span class="built_in">get_rows</span>();</span><br><span class="line">    cols = p.<span class="built_in">get_cols</span>();</span><br><span class="line">    channels = p.<span class="built_in">get_channels</span>();</span><br><span class="line">    step = p.<span class="built_in">get_step</span>();</span><br><span class="line">    shift = p.<span class="built_in">get_shift</span>();</span><br><span class="line">    dat = p.<span class="built_in">get_dat</span>();</span><br><span class="line">    dat-&gt;<span class="built_in">inc_ref_count</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>软拷贝构造器，直接传递成员即可，同时将被引用的数据的<code>ref_count</code>自增。使用getter是因为原计划再包一个template，支持不同模板类之间的拷贝(不同模板类之间私有成员互不可见)，但转换过程是硬拷贝的，因此未在此函数实现跨类复制。</p>
<h3 id="内存管理"><a href="#内存管理" class="headerlink" title="内存管理"></a>内存管理</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! increase refcount</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="type">void</span> data&lt;Tp&gt;::<span class="built_in">inc_ref_count</span>()</span><br><span class="line">&#123;</span><br><span class="line">    (*ref_count)++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//! decrease refcount</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="type">void</span> data&lt;Tp&gt;::<span class="built_in">dec_ref_count</span>()</span><br><span class="line">&#123;</span><br><span class="line">    (*ref_count)--;</span><br><span class="line">    <span class="keyword">if</span> (!(*ref_count))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;~<span class="built_in">data</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为避免硬拷贝，同一块数据可能同时被若干个矩阵中的<code>data *</code>指向。在创建/复制矩阵时，若使用了已经存在的data，则调用<code>inc_ref_count</code>，在删除矩阵时，不能直接释放数据，而是调用<code>dec_ref_count</code>，待<code>ref_count</code>归零，即这块数据没有被任何地方调用时才能释放。</p>
<p>这里的<code>ref_count</code>也使用指针的原因是当data被引用时，加入一个新的引用对象调用的<code>inc_ref_count</code>需要作用于所有指向<code>value</code>这块内存的data上，即便数据头有所不同。</p>
<h3 id="类型转换函数"><a href="#类型转换函数" class="headerlink" title="类型转换函数"></a>类型转换函数</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1, <span class="keyword">typename</span> T2&gt;</span></span><br><span class="line"><span class="function">T1 <span class="title">default_convert</span><span class="params">(T2 src)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (T1) src;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//customized type conversion</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> target_type&gt;</span><br><span class="line">matrix&lt;target_type&gt; matrix&lt;Tp&gt;::<span class="built_in">convert_to</span>(<span class="built_in">target_type</span> (*convert_function)(Tp src)) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        target_type *NewArr = <span class="keyword">new</span> target_type[<span class="built_in">size</span>()]&#123;&#125;;</span><br><span class="line">        <span class="type">size_t</span> it = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (matrix::channel_number ch = <span class="number">1</span>; ch &lt;= channels; ch++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> r = <span class="number">1</span>; r &lt;= rows; r++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> c = <span class="number">1</span>; c &lt;= cols; c++)</span><br><span class="line">                &#123;</span><br><span class="line">                    NewArr[it++] = <span class="built_in">convert_function</span>(<span class="built_in">at</span>(r, c, ch));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">matrix</span>&lt;target_type&gt;(rows, cols, NewArr, channels);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (std::bad_alloc &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Bad Alloc Exception: Failed to allocate memory of the given length &quot;</span> &lt;&lt; <span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">bad_alloc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此处展示类型转换函数的实现，此函数可根据传入的<strong>转换函数指针</strong><code>convert_function</code>将<code>matrix&lt;Tp&gt;</code>转换为<code>matrix&lt;target_type&gt;</code>，过程由于产生了类型转换而无法避免硬拷贝。</p>
<p>在类模板声明中，函数参数的默认值为显式转换函数<code>default_convert</code>，因此只要使用支持显式转换的基础类型(int, float…)，或是用户所给的类型间重载了显式转换，则可以不用传参数直接使用转换函数。</p>
<p>当然，如果用户希望使用自己的转换方式，例如手写<code>int round(float)</code>、<code>double ln(int)</code>等，也可以将自己的转换传入提供的参数接口即可：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">my_round</span><span class="params">(<span class="type">float</span> x)</span></span>;</span><br><span class="line"><span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">mat</span><span class="params">(<span class="number">4</span>,<span class="number">4</span>,src,<span class="number">3</span>)</span></span>;</span><br><span class="line">mat=mat.<span class="built_in">convert_to</span>(myround);</span><br><span class="line"><span class="comment">//这里右值是matrix&lt;int&gt;，左值是matrix&lt;float&gt;，赋值过程隐式调用了convert_to&lt;float&gt;(default_convert)</span></span><br></pre></td></tr></table></figure>
<p>实际上用这个接口就能实现<strong>任意逐元素一元运算操作</strong>，上面提的两个例子就是逐元素四舍五入和逐元素取对数，一切交给用户的想象力！</p>
<h3 id="重载赋值符"><a href="#重载赋值符" class="headerlink" title="重载赋值符"></a>重载赋值符</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! override same type assign operator(soft copy)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">matrix&lt;Tp&gt; &amp;matrix&lt;Tp&gt;::<span class="keyword">operator</span>=(<span class="type">const</span> matrix&lt;Tp&gt; &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == &amp;p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">return</span> (*<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (p.dat == <span class="literal">nullptr</span> || p.dat == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(<span class="string">&quot;Null Pointer Exception: The data of source matrix is null.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    rows = p.rows;</span><br><span class="line">    cols = p.cols;</span><br><span class="line">    channels = p.channels;</span><br><span class="line">    step = p.step;</span><br><span class="line">    shift = p.shift;</span><br><span class="line">    channel_pad = p.channel_pad;</span><br><span class="line">    <span class="keyword">if</span> (dat != p.dat)</span><br><span class="line">    &#123;</span><br><span class="line">        dat-&gt;<span class="built_in">dec_ref_count</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    dat = p.dat;</span><br><span class="line">    dat-&gt;<span class="built_in">inc_ref_count</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>首先是同类型的赋值，彼此可以访问私有成员，在检查右值合法性后，将左值数据的引用数自减，将右值逐成员复制即可。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! override implicit type transform assign operator(convert &amp; hard copy)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> rhs&gt;</span><br><span class="line">matrix&lt;Tp&gt; &amp;matrix&lt;Tp&gt;::<span class="keyword">operator</span>=(<span class="type">const</span> matrix&lt;rhs&gt; &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (p.<span class="built_in">get_dat</span>() == <span class="literal">nullptr</span> || p.<span class="built_in">get_dat</span>() == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(<span class="string">&quot;Null Pointer Exception: The data of source matrix is null.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    dat-&gt;<span class="built_in">dec_ref_count</span>();</span><br><span class="line">    (*<span class="keyword">this</span>) = p.<span class="keyword">template</span> <span class="built_in">convert_to</span>&lt;Tp&gt;();<span class="comment">//调用默认转换器</span></span><br><span class="line">    <span class="keyword">return</span> (*<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其次是跨类型的赋值，彼此的私有成员不可见，因此使用getter，在检查右值合法性后，将左值数据的引用数自减，将右值逐成员复制即可。</p>
<p>由于等式左右类型不同，函数会调用默认转换器，如果用户此时定义好了显式类型转换，赋值时就会<strong>隐式调用显式转换</strong>来达成赋值的目的。左右类型一定是不同的，因此左值的数据需要释放，引用数自减，根据转换后的右值新建一块数据。</p>
<h3 id="ROI"><a href="#ROI" class="headerlink" title="ROI"></a>ROI</h3><p>本部分在参观<code>OpenCV::mat</code>后实现，借鉴了课程所述的方式实现了<code>ROI</code>。</p>
<p>由于时间和技术力有限，笔者在参观<code>OpenCV::mat</code>的多边形、圆形ROI后并未能成功复现仅传入<code>vector&lt;point&gt;</code>即可根据凸包生成<code>ROI</code>的高超函数，但此处实现了基础的<strong>矩形ROI</strong>和<strong>掩膜ROI</strong>两种形式，后者的可拓展性很强，只要配合一个能根据<code>vector&lt;point&gt;</code>输出某个元素是否在凸包内的函数即可实现任意形状的ROI的效果。</p>
<h4 id="矩形ROI"><a href="#矩形ROI" class="headerlink" title="矩形ROI"></a>矩形ROI</h4><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! submatrix constructor(ROI)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">matrix&lt;Tp&gt;::<span class="built_in">matrix</span>(matrix &amp;src, <span class="type">size_t</span> row1, <span class="type">size_t</span> col1, <span class="type">size_t</span> row2, <span class="type">size_t</span> col2)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (row1 &gt; row2 || col1 &gt; col2)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">out_of_range</span>(<span class="string">&quot;Out Of Range Exception: row2 and col2 should be greater than row1 and col1.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (row2 &gt; src.rows || col2 &gt; src.cols)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">out_of_range</span>(<span class="string">&quot;Out Of Range Exception: row2 and col2 exceed the size of source matrix.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (row1 * col1 == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">out_of_range</span>(<span class="string">&quot;Invalid Argument Exception: row number and column number should be positive.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (src.<span class="built_in">get_dat</span>() == <span class="literal">nullptr</span> || src.<span class="built_in">get_dat</span>() == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(<span class="string">&quot;Null Pointer Exception: The data of source matrix is null.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    rows = row2 - row1 + <span class="number">1</span>;</span><br><span class="line">    cols = col2 - col1 + <span class="number">1</span>;</span><br><span class="line">    channels = src.channels;</span><br><span class="line">    step = src.step;</span><br><span class="line">    channel_pad = src.channel_pad;</span><br><span class="line">    shift = (row1 - <span class="number">1</span>) * step + col1 - <span class="number">1</span>;</span><br><span class="line">    dat = src.get_dat;</span><br><span class="line">    dat-&gt;<span class="built_in">inc_ref_count</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实现原理说起来也很简单，构造时推导出<code>shift</code>，<code>step</code>以及<code>channel_pad</code>并存储，在取出矩阵元素时再加上行数、列数、通道数总共六个参数即可算出<code>mat[i][j][channel]</code>在一维数组<code>value[]</code>中的位置，此处用<strong>重载括号</strong>的方式实现：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! get element reference from matrix</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">Tp &amp;matrix&lt;Tp&gt;::<span class="built_in">operator</span>()(<span class="type">size_t</span> row, <span class="type">size_t</span> col, channel_number channel) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (row &gt; rows || col &gt; cols || channel &gt; channels)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">out_of_range</span>(</span><br><span class="line">                <span class="string">&quot;Out Of Range Exception: arguments should be in the range of source matrix.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (*dat)[shift + (channel - <span class="number">1</span>) * channel_pad + (row - <span class="number">1</span>) * step + col - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/12/18/21tVGCweI3EmWMk.png" alt="P0~QOP3BOMINV6PH_J@9YEU.png" style="zoom:50%;" /></p>
<p>上图所示的例子是从<code>5*5</code>三通道矩阵中取出一个<code>2*2</code>三通道ROI，图中的38对应的是ROI的<strong>第二通道第二行第二列</strong>的元素，经计算<code>roi(2,2,2)==dat[37]=38</code>，取出即可。</p>
<p>重载括号的传回值为引用类型，用户可以直接访问和修改矩阵元素。为了防止用户犯傻和便于部分声明为const的函数，项目还提供了只读版：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! get element from matrix (read only)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">Tp matrix&lt;Tp&gt;::<span class="built_in">at</span>(<span class="type">size_t</span> row, <span class="type">size_t</span> col, channel_number channel) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (row &gt; rows || col &gt; cols || channel &gt; channels)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">out_of_range</span>(</span><br><span class="line">                <span class="string">&quot;Out Of Range Exception: arguments should be in the range of source matrix.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> (*dat)[shift + (channel - <span class="number">1</span>) * channel_pad + (row - <span class="number">1</span>) * step + col - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="掩膜ROI"><a href="#掩膜ROI" class="headerlink" title="掩膜ROI"></a>掩膜ROI</h4><p>不知道读者有没有注意到matrix类中的<code>typedef matrix&lt;bool&gt; mask</code>，重命名了零一矩阵，实际上<code>OpenCV::mat</code>中也有类似的实现，即将零一矩阵作为<strong>掩膜</strong>，其中为1的部分即为ROI。</p>
<p>这里笔者模仿OpenCV实现了<code>copy_to</code>函数，根据当前矩阵和掩膜填充目标矩阵。出于对原数据的负责态度，此处未使用软拷贝(因为这样会修改原数据导致引用该数据的所有矩阵内容变化，而我们只是希望取出一块我们感兴趣的数据进行操作而已)。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! ROI using mask(matrix&lt;bool&gt;)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="type">bool</span> matrix&lt;Tp&gt;::<span class="built_in">copy_to</span>(matrix&lt;Tp&gt; &amp;dst, <span class="type">const</span> matrix::mask &amp;mask)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        dst.~<span class="built_in">matrix</span>();</span><br><span class="line">        Tp *NewArr = <span class="keyword">new</span> Tp[<span class="built_in">size</span>()]&#123;&#125;;</span><br><span class="line">        <span class="type">size_t</span> it = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (channel_number ch = <span class="number">1</span>; ch &lt;= channels; ch++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> r = <span class="number">1</span>; r &lt;= rows; r++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> c = <span class="number">1</span>; c &lt;= cols; c++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span> (<span class="built_in">mask</span>(r, c, ch))</span><br><span class="line">                    &#123;</span><br><span class="line">                        NewArr[it] = <span class="built_in">at</span>(r, c, ch);</span><br><span class="line">                    &#125;</span><br><span class="line">                    it++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        dst = <span class="built_in">matrix</span>&lt;Tp&gt;(rows, cols, NewArr, channels);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (std::bad_alloc &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Bad Alloc Exception: Failed to allocate memory of the given length &quot;</span> &lt;&lt; <span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">bad_alloc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>所以只要知道如何根据需求生成零一矩阵，就能通过调用copy_to函数取出ROI了。</p>
<p><img src="https://s2.loli.net/2022/12/18/pyFZHVbaCPJK5rO.png" alt="IZ_G_@H1C5F_44_`1M46_F0.png" style="zoom:50%;" /></p>
<h4 id="通道提取"><a href="#通道提取" class="headerlink" title="通道提取"></a>通道提取</h4><p>掩膜也是多通道的，所以只想要某个通道的内容可以遮住其他通道，但是有时候我们真的只关心其中的某个通道，比如透明度，本项目为此实现了<code>Channel Of Interest</code>效果的函数：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! split out a single channel</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line">matrix&lt;Tp&gt; matrix&lt;Tp&gt;::<span class="built_in">split_channel</span>(matrix::channel_number channel_id)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (channel_id &gt; channels || channel_id &lt;= <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">out_of_range</span>(</span><br><span class="line">                <span class="string">&quot;Out Of Range Exception: channel id should be within the channel number of source matrix.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">matrix&lt;Tp&gt; <span class="title">New</span><span class="params">(*<span class="keyword">this</span>)</span></span>;</span><br><span class="line">    New.channels = <span class="number">1</span>;</span><br><span class="line">    New.shift += channel_pad * (channel_id - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> New;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在这里，我们通过将<code>shift</code>后推若干个<code>channel_pad</code>，让数据头起点到达目标通道，再将通道数置一，即剥离出了对应通道，然后我们就可以对多个通道间进行各种各样的运算和变换了。</p>
<p>考虑到剥离通道后通常需要进行不影响原数据的操作，因此此处选择使用硬拷贝取出数据。若希望对原数据进行操作就更简单了，直接对原矩阵的<code>shift</code>后推，<code>channels</code>置一即可，不过在操作后需要调整回原值。如果真的要为软拷贝做到这么复杂，为什么不用重载的括号，指定行列通道后直接进行操作呢？</p>
<h3 id="重载-与比较"><a href="#重载-与比较" class="headerlink" title="重载==与比较"></a>重载==与比较</h3><p>项目重载了<code>==</code>，用于严格地比较两个矩阵的各元素是否相同，实现非常简单：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! override equation(strict equal)</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="type">bool</span> matrix&lt;Tp&gt;::<span class="keyword">operator</span>==(<span class="type">const</span> matrix &amp;p) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == &amp;p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (rows != p.<span class="built_in">get_rows</span>() || cols != p.<span class="built_in">get_cols</span>() || channels != p.<span class="built_in">get_channels</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (channel_number ch = <span class="number">1</span>; ch &lt;= channels; ch++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> r = <span class="number">1</span>; r &lt;= rows; r++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> c = <span class="number">1</span>; c &lt;= cols; c++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="built_in">at</span>(r, c, ch) != p.<span class="built_in">at</span>(r, c, ch))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>但众所周知，数据类型的比较向来不那么简单。例如，对于基础数据类型<code>float</code>，直接使用<code>==</code>经常会因为误差而错判相等。但是用户又不想或是不能为此将一整个类型的<code>==</code>重载为更弱的比较条件，此时就要用到<code>equals</code>函数了：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//! equal with customized compare function</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="type">bool</span> matrix&lt;Tp&gt;::<span class="built_in">equals</span>(<span class="type">const</span> matrix&lt;Tp&gt; &amp;p, <span class="built_in">bool</span> (*equal)(Tp, Tp)) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> == &amp;p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (rows != p.<span class="built_in">get_rows</span>() || cols != p.<span class="built_in">get_cols</span>() || channels != p.<span class="built_in">get_channels</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (channel_number ch = <span class="number">1</span>; ch &lt;= channels; ch++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> r = <span class="number">1</span>; r &lt;= rows; r++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> c = <span class="number">1</span>; c &lt;= cols; c++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (!<span class="built_in">equal</span>(<span class="built_in">at</span>(r, c, ch), p.<span class="built_in">at</span>(r, c, ch)))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>本项目的<code>equals</code>函数支持用户自行传入函数，例如<code>float</code>的例子就可以：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">float_eq</span><span class="params">(<span class="type">float</span> x, <span class="type">float</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (x-y&lt;<span class="number">1e-3</span>)&amp;&amp;(y-x&lt;<span class="number">1e-3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">mat1</span><span class="params">(<span class="number">3</span>,<span class="number">3</span>,<span class="number">1.0001f</span>)</span></span>;</span><br><span class="line"><span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">mat2</span><span class="params">(<span class="number">3</span>,<span class="number">3</span>,<span class="number">1.0f</span>)</span></span>;</span><br><span class="line"><span class="type">bool</span> eq=mat1.<span class="built_in">equals</span>(mat2,float_eq);</span><br></pre></td></tr></table></figure>
<p>可拓展性很强：哪怕用户传入的函数说0和1是相等的，<code>equals</code>也会忠诚地认为0和1是相等的！</p>
<h3 id="重载加减乘"><a href="#重载加减乘" class="headerlink" title="重载加减乘"></a>重载加减乘</h3><p>如果说实现稳健的运算是Project03的亮点，高效率是Project04的亮点，那本项目的亮点则在于：类模板让跨类型成为可能，因此本项目中重载的运算均支持不同类型矩阵的运算，此处仅展示朴素乘法。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T1&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> T2&gt;</span><br><span class="line">matrix&lt;<span class="keyword">decltype</span>(<span class="built_in">T1</span>() * <span class="built_in">T2</span>())&gt; matrix&lt;T1&gt;::<span class="keyword">operator</span>*(matrix&lt;T2&gt; &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (cols != p.<span class="built_in">get_rows</span>() )</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(</span><br><span class="line">                <span class="string">&quot;Invalid Argument Exception: The col number of left matrix should equal the row number of right matrix.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(channels != p.<span class="built_in">get_channels</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(</span><br><span class="line">                <span class="string">&quot;Invalid Argument Exception: The channel number of two matrix should be the same.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">typedef</span> <span class="title">decltype</span><span class="params">(T1() * T2())</span> result_type</span>;</span><br><span class="line">        <span class="keyword">auto</span> *NewArr = <span class="keyword">new</span> result_type[rows * p.<span class="built_in">get_cols</span>() * channels]&#123;&#125;;</span><br><span class="line">        <span class="function">matrix&lt;result_type&gt; <span class="title">New</span><span class="params">(rows, p.get_cols(), NewArr, channels)</span></span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> ch = <span class="number">1</span>; ch &lt;= channels; ch++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">1</span>; i &lt;= rows; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">1</span>; k &lt;= cols; k++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">1</span>; j &lt;= p.<span class="built_in">get_cols</span>(); j++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">New</span>(i, j, ch) = New.<span class="built_in">at</span>(i, j, ch) + <span class="built_in">at</span>(i, k, ch) * p.<span class="built_in">at</span>(k, j, ch);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> New;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (std::bad_alloc &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Bad Alloc Exception: Failed to allocate memory of the given length &quot;</span> &lt;&lt; <span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">bad_alloc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此处在赋值时调用了隐式类型转换，若用户提供的类型已重载好类型转换则可以直接使用。</p>
<p><code>decltype</code>是C++ 11加入的特性之一，可以根据表达式推导数据类型，有如此方便的自动类型推导，完成跨类型运算也算是信手拈来，不过需要注意的是用户提供的类型需要是可以推导的。</p>
<p>其实这里有想过要不要特例化<code>int*int</code>、<code>float*float</code>、<code>double*double</code>等，使用OpenBLAS进行运算，但思索了一下似乎有点跑题，而且需要用户安装OpenBLAS，徒然提升了使用门槛，就未作实现。</p>
<h3 id="想自己动手？没问题！"><a href="#想自己动手？没问题！" class="headerlink" title="想自己动手？没问题！"></a>想自己动手？没问题！</h3><p>本项目延续了一贯的高拓展性，实现了自定义一元/二元运算的框架，用户传入函数指针即可，而且二元运算也支持跨类型运算，即支持传入形如<code>T3 foo(T1, T2)</code>的函数指针。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//customized element-wise calculation</span></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> result_type&gt;</span><br><span class="line">matrix&lt;result_type&gt; matrix&lt;Tp&gt;::<span class="built_in">unary_calc</span>(<span class="built_in">result_type</span> (*unary_function)(Tp)) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        result_type *NewArr = <span class="keyword">new</span> result_type[<span class="built_in">size</span>()]&#123;&#125;;</span><br><span class="line">        <span class="type">size_t</span> it = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (matrix::channel_number ch = <span class="number">1</span>; ch &lt;= channels; ch++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> r = <span class="number">1</span>; r &lt;= rows; r++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> c = <span class="number">1</span>; c &lt;= cols; c++)</span><br><span class="line">                &#123;</span><br><span class="line">                    NewArr[it++] = <span class="built_in">unary_function</span>(<span class="built_in">at</span>(r, c, ch));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">matrix</span>&lt;result_type&gt;(rows, cols, NewArr, channels);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (std::bad_alloc &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Bad Alloc Exception: Failed to allocate memory of the given length &quot;</span> &lt;&lt; <span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">bad_alloc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> Tp&gt;</span><br><span class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> result_type, <span class="keyword">typename</span> T2&gt;</span><br><span class="line">matrix&lt;result_type&gt; matrix&lt;Tp&gt;::<span class="built_in">binary_calc</span>(<span class="type">const</span> matrix&lt;T2&gt; &amp;p, <span class="built_in">result_type</span> (*binary_function)(Tp, T2)) <span class="type">const</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(cols!=p.<span class="built_in">get_cols</span>()||rows!=p.<span class="built_in">get_rows</span>()||channels!=p.<span class="built_in">get_channels</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">invalid_argument</span>(</span><br><span class="line">                <span class="string">&quot;Invalid Argument Exception: The size and channel number of two matrix should be the same.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        result_type *NewArr = <span class="keyword">new</span> result_type[<span class="built_in">size</span>()]&#123;&#125;;</span><br><span class="line">        <span class="type">size_t</span> it = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (matrix::channel_number ch = <span class="number">1</span>; ch &lt;= channels; ch++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> r = <span class="number">1</span>; r &lt;= rows; r++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">size_t</span> c = <span class="number">1</span>; c &lt;= cols; c++)</span><br><span class="line">                &#123;</span><br><span class="line">                    NewArr[it++] = <span class="built_in">binary_function</span>(<span class="built_in">at</span>(r, c, ch), p.<span class="built_in">at</span>(r, c, ch));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">matrix</span>&lt;result_type&gt;(rows, cols, NewArr, channels);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">catch</span> (std::bad_alloc &amp;e)</span><br><span class="line">    &#123;</span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;Bad Alloc Exception: Failed to allocate memory of the given length &quot;</span> &lt;&lt; <span class="built_in">size</span>() &lt;&lt; <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">        <span class="keyword">throw</span> std::<span class="built_in">bad_alloc</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="其他功能"><a href="#其他功能" class="headerlink" title="其他功能"></a>其他功能</h3><p>没有太多技术含量，包含了开发过程中为了方便而实现的中间产物等。</p>
<ul>
<li>data和matrix的硬拷贝：copy_to以及clone，总归是有用到它们的一天（</li>
<li>data的重构中括号，==以及equals</li>
<li>矩阵的getters，因为不同模板类间私有成员不可见</li>
<li>矩阵的单个元素赋值set以及区域赋值fill，都可以轻易通过重载后的括号手动实现</li>
<li>矩阵输出流<code>&lt;&lt;</code>的重载</li>
<li>矩阵的转置</li>
</ul>
<h2 id="Part-3-Result-amp-Verification"><a href="#Part-3-Result-amp-Verification" class="headerlink" title="Part 3 - Result &amp; Verification"></a>Part 3 - Result &amp; Verification</h2><p>本项目的测试用程序为<code>./src/benchmark.cpp</code>，以下测试结果均由矩阵计算器验证正确。</p>
<p>由于本项目并未使用跨平台时存在差异的内容，各组测试在开发板上运行结果一致，此处不做重复展示。</p>
<h3 id="Testcase-1-创建矩阵，跨类型的乘法"><a href="#Testcase-1-创建矩阵，跨类型的乘法" class="headerlink" title="Testcase #1 创建矩阵，跨类型的乘法"></a>Testcase #1 创建矩阵，跨类型的乘法</h3><p>三个通道的<code>4*4</code>整型矩阵<code>i_4_4_3</code>和三通道的<code>4*1 char</code>向量相乘</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *i_4_4_3 = <span class="keyword">new</span> <span class="type">int</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,</span><br><span class="line">                <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>,</span><br><span class="line">                <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>,</span><br><span class="line"></span><br><span class="line">                <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>,</span><br><span class="line">                <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>,</span><br><span class="line">                <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>,</span><br><span class="line">                <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>,</span><br><span class="line"></span><br><span class="line">                <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>,</span><br><span class="line">                <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>,</span><br><span class="line">                <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>,</span><br><span class="line">                <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>,</span><br><span class="line">                <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="type">char</span> *uc_4_1_3 = <span class="keyword">new</span> <span class="type">char</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="number">48</span>, <span class="number">49</span>, <span class="number">48</span>, <span class="number">49</span>,</span><br><span class="line">                <span class="number">49</span>, <span class="number">48</span>, <span class="number">49</span>, <span class="number">48</span>,</span><br><span class="line">                <span class="number">48</span>, <span class="number">48</span>, <span class="number">48</span>, <span class="number">48</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">int</span>&gt; <span class="title">i443</span><span class="params">(<span class="number">4</span>, <span class="number">4</span>, i_4_4_3, <span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">char</span>&gt; <span class="title">uc413</span><span class="params">(<span class="number">4</span>, <span class="number">1</span>, uc_4_1_3, <span class="number">3</span>)</span></span>;</span><br><span class="line">    cout &lt;&lt; i443 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; uc413 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; i443 * uc413 &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/12/18/Fwjtcd83zkGHAgR.png" alt="image.png" style="zoom:50%;" /></p>
<h3 id="Testcase-2-矩形ROI，软拷贝与内存管理"><a href="#Testcase-2-矩形ROI，软拷贝与内存管理" class="headerlink" title="Testcase #2 矩形ROI，软拷贝与内存管理"></a>Testcase #2 矩形ROI，软拷贝与内存管理</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> *f = <span class="keyword">new</span> <span class="type">float</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,</span><br><span class="line">                <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>,</span><br><span class="line">                <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>,</span><br><span class="line">                <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>,</span><br><span class="line">                <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">f55</span><span class="params">(<span class="number">5</span>, <span class="number">5</span>, f)</span></span>;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">sub</span><span class="params">(f55,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>)</span></span>;</span><br><span class="line">    <span class="comment">//submatrix</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">sub</span>(<span class="number">2</span>,<span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line">    <span class="comment">//modify the data shared by two matrices</span></span><br><span class="line">    <span class="built_in">f55</span>(<span class="number">3</span>,<span class="number">3</span>)=<span class="number">1.2</span>;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">sub</span>(<span class="number">2</span>,<span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line">    <span class="comment">//delete the paraent matrix</span></span><br><span class="line">    f55.~<span class="built_in">matrix</span>();</span><br><span class="line">    cout&lt;&lt;<span class="built_in">sub</span>(<span class="number">2</span>,<span class="number">2</span>)&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/12/18/j4zUN8Z2ESCveI5.png" alt="image.png" style="zoom:50%;" /></p>
<p>可以看到两个矩阵的确共用一块数据，并且在析构其中一个之后不影响另一个访问这块数据。</p>
<p>且经过在析构函数中输出ref_count检查，确认该项目不会存在内存的多次释放或是内存泄漏问题。</p>
<h3 id="Testcase-3-掩膜ROI"><a href="#Testcase-3-掩膜ROI" class="headerlink" title="Testcase #3 掩膜ROI"></a>Testcase #3 掩膜ROI</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">float</span> *f = <span class="keyword">new</span> <span class="type">float</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>,</span><br><span class="line">                <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>,</span><br><span class="line">                <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>,</span><br><span class="line">                <span class="number">15</span>, <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>,</span><br><span class="line">                <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>, <span class="number">24</span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">f55</span><span class="params">(<span class="number">5</span>, <span class="number">5</span>, f)</span></span>;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">bool</span>&gt; <span class="title">b55</span><span class="params">(<span class="number">5</span>,<span class="number">5</span>,<span class="literal">true</span>)</span></span>;</span><br><span class="line">    b55.<span class="built_in">fill</span>(<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">4</span>, <span class="literal">false</span>);</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">sub</span><span class="params">(<span class="number">5</span>,<span class="number">5</span>,<span class="number">6.6f</span>)</span></span>;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;before:\n&quot;</span>&lt;&lt;sub&lt;&lt;endl;</span><br><span class="line">    f55.<span class="built_in">copy_to</span>(sub,b55);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;after:\n&quot;</span>&lt;&lt;sub&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/12/18/pSGhUAc7Fy2IlZ5.png" alt="image.png" style="zoom:50%;" /></p>
<h3 id="Testcase-4-通道拆分与自定义运算"><a href="#Testcase-4-通道拆分与自定义运算" class="headerlink" title="Testcase #4 通道拆分与自定义运算"></a>Testcase #4 通道拆分与自定义运算</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *i_4_4_3 = <span class="keyword">new</span> <span class="type">int</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,</span><br><span class="line">                <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>,</span><br><span class="line">                <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>,</span><br><span class="line"></span><br><span class="line">                <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>,</span><br><span class="line">                <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>,</span><br><span class="line">                <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>,</span><br><span class="line">                <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>,</span><br><span class="line"></span><br><span class="line">                <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>,</span><br><span class="line">                <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>,</span><br><span class="line">                <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>,</span><br><span class="line">                <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>,</span><br><span class="line">                <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span></span><br><span class="line">        &#125;;</span><br><span class="line"><span class="function"><span class="type">double</span> <span class="title">HALF</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p/<span class="number">2.0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">float</span> <span class="title">DOUBLE</span><span class="params">(<span class="type">int</span> p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p*<span class="number">2.0f</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    matrix&lt;<span class="type">int</span>&gt;<span class="built_in">main</span>(<span class="number">4</span>,<span class="number">4</span>,i_4_4_3,<span class="number">3</span>);</span><br><span class="line">    matrix&lt;<span class="type">float</span>&gt;double_red=main.<span class="built_in">split_channel</span>(<span class="number">1</span>).<span class="built_in">unary_calc</span>(DOUBLE);</span><br><span class="line">    matrix&lt;<span class="type">int</span>&gt;green=main.<span class="built_in">split_channel</span>(<span class="number">2</span>);</span><br><span class="line">    matrix&lt;<span class="type">double</span>&gt;half_blue=main.<span class="built_in">split_channel</span>(<span class="number">3</span>).<span class="built_in">unary_calc</span>(HALF);</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;double_red\n&quot;</span>&lt;&lt;double_red&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;green\n&quot;</span>&lt;&lt;green&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;half_blue\n&quot;</span>&lt;&lt;half_blue&lt;&lt;endl;</span><br><span class="line">    matrix&lt;<span class="type">double</span>&gt;sum=double_red+green+half_blue;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;sum\n&quot;</span>&lt;&lt;sum&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/12/18/ktnxOPo5Tqcymaf.png" alt="image.png" style="zoom:50%;" /></p>
<p>三种类型存储，红色加倍，绿色不变，蓝色减半，三者相加。</p>
<h3 id="Testcase-5-自定义二元运算生成矩阵"><a href="#Testcase-5-自定义二元运算生成矩阵" class="headerlink" title="Testcase #5 自定义二元运算生成矩阵"></a>Testcase #5 自定义二元运算生成矩阵</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> *i_4_4_3 = <span class="keyword">new</span> <span class="type">int</span>[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>,</span><br><span class="line">                <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>,</span><br><span class="line">                <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>,</span><br><span class="line"></span><br><span class="line">                <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>,</span><br><span class="line">                <span class="number">16</span>, <span class="number">17</span>, <span class="number">18</span>, <span class="number">19</span>,</span><br><span class="line">                <span class="number">20</span>, <span class="number">21</span>, <span class="number">22</span>, <span class="number">23</span>,</span><br><span class="line">                <span class="number">24</span>, <span class="number">25</span>, <span class="number">26</span>, <span class="number">27</span>,</span><br><span class="line"></span><br><span class="line">                <span class="number">28</span>, <span class="number">29</span>, <span class="number">30</span>, <span class="number">31</span>,</span><br><span class="line">                <span class="number">32</span>, <span class="number">33</span>, <span class="number">34</span>, <span class="number">35</span>,</span><br><span class="line">                <span class="number">36</span>, <span class="number">37</span>, <span class="number">38</span>, <span class="number">39</span>,</span><br><span class="line">                <span class="number">40</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">43</span>,</span><br><span class="line">                <span class="number">44</span>, <span class="number">45</span>, <span class="number">46</span>, <span class="number">47</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">greater_than</span><span class="params">(<span class="type">int</span> x, <span class="type">float</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ((<span class="type">float</span>) x) &gt; y;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> *f=<span class="keyword">new</span> <span class="type">float</span>[<span class="number">48</span>]&#123;&#125;;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">48</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        f[i]=i%<span class="number">2</span>?<span class="number">48.0</span>:<span class="number">-1.0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">int</span>&gt; <span class="title">X</span><span class="params">(<span class="number">4</span>, <span class="number">4</span>, i_4_4_3, <span class="number">3</span>)</span></span>;</span><br><span class="line">    <span class="function">matrix&lt;<span class="type">float</span>&gt; <span class="title">Y</span><span class="params">(<span class="number">4</span>, <span class="number">4</span>, f,<span class="number">3</span>)</span></span>;</span><br><span class="line">    matrix&lt;<span class="type">bool</span>&gt; R=X.<span class="built_in">binary_calc</span>(Y, greater_than);</span><br><span class="line">    cout&lt;&lt;R&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/12/18/K3TdByV8M9bIJ4k.png" alt="image.png" style="zoom:50%;" /></p>
<p>有两列Y&gt;=X，其他X&gt;Y</p>
<h3 id="Testcase-Bonus-🎁"><a href="#Testcase-Bonus-🎁" class="headerlink" title="Testcase Bonus: 🎁"></a>Testcase Bonus: 🎁</h3><p>不知道从谁那里学来的方法(？)测试时去除了输出流的逗号和制表符:)</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">string *explore = <span class="keyword">new</span> string[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="string">&quot;Th&quot;</span>, <span class="string">&quot;mor&quot;</span>, <span class="string">&quot;earn &quot;</span>, <span class="string">&quot;t C&quot;</span>, <span class="string">&quot;th&quot;</span>, <span class="string">&quot;re ig&quot;</span>, <span class="string">&quot;t I f&quot;</span>,</span><br><span class="line">                <span class="string">&quot;Th&quot;</span>, <span class="string">&quot; you v&quot;</span>, <span class="string">&quot;muc&quot;</span>, <span class="string">&quot;for &quot;</span>, <span class="string">&quot;r dedic&quot;</span>, <span class="string">&quot;eachin&quot;</span>, <span class="string">&quot;is cou&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">string *perseverance = <span class="keyword">new</span> string[]</span><br><span class="line">        &#123;</span><br><span class="line">                <span class="string">&quot;e &quot;</span>, <span class="string">&quot;e I l&quot;</span>, <span class="string">&quot;abou&quot;</span>, <span class="string">&quot;++, &quot;</span>, <span class="string">&quot;e mo&quot;</span>, <span class="string">&quot;noran&quot;</span>, <span class="string">&quot;eel&quot;</span>,</span><br><span class="line">                <span class="string">&quot;ank&quot;</span>, <span class="string">&quot;ery &quot;</span>, <span class="string">&quot;h &quot;</span>, <span class="string">&quot;you&quot;</span>, <span class="string">&quot;ation in t&quot;</span>, <span class="string">&quot;g th&quot;</span>, <span class="string">&quot;rse&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> CS_205 (CS + _205)</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">matrix&lt;string&gt; <span class="title">CS</span><span class="params">(<span class="number">2</span>, <span class="number">7</span>, explore)</span></span>;</span><br><span class="line">    matrix&lt;string&gt; _205(<span class="number">2</span>, <span class="number">7</span>, perseverance);</span><br><span class="line">    cout &lt;&lt; CS_205;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2022/12/18/oDMiHWk8xXLcfJG.png" alt="image.png"></p>
<h2 id="Part-4-Difficulties-amp-Solutions"><a href="#Part-4-Difficulties-amp-Solutions" class="headerlink" title="Part 4 - Difficulties &amp; Solutions"></a>Part 4 - Difficulties &amp; Solutions</h2><h3 id="Difficulty-I-内存管理"><a href="#Difficulty-I-内存管理" class="headerlink" title="Difficulty I 内存管理"></a>Difficulty I 内存管理</h3><p>题目要求避免硬拷贝，而且要做好内存管理，避免内存泄漏和多重删除。</p>
<h3 id="Solution"><a href="#Solution" class="headerlink" title="Solution"></a>Solution</h3><p>本项目根据上课所述，使用了<code>ref_count</code>，<code>Step</code>等措施辅助内存管理，实现了上述目标，但根据实际应用场景，仍然实现了部分常用的硬拷贝函数，以避免对原数据进行修改导致多个矩阵的数据受到牵连。</p>
<h3 id="Difficulty-II-可拓展性"><a href="#Difficulty-II-可拓展性" class="headerlink" title="Difficulty II 可拓展性"></a>Difficulty II 可拓展性</h3><p>既然用了类模板，那么各种各样的跨类别、重载等问题就会如潮水一样涌来。</p>
<h3 id="Solution-1"><a href="#Solution-1" class="headerlink" title="Solution"></a>Solution</h3><p>实际上我很清楚要完全做到这个库让人使用舒适，肯定是十分困难的事，因为用户可能的调用方法太多，有些难以用概括性(拓展性强)的写法容纳，所以只能尽可能地为用户提供自由度了，深切感谢<code>decltype</code>这一C++ 11的新特性，简直救人于水火之中。</p>
<p>比如项目中的跨类别赋值、运算、自定义比较与运算，都是经过反复调试和思考可能的调用方式后打补丁而成的。</p>
<h3 id="Difficulty-III-OpenCV-mat"><a href="#Difficulty-III-OpenCV-mat" class="headerlink" title="Difficulty III OpenCV::mat?"></a>Difficulty III OpenCV::mat?</h3><p>前人的脚步已经走出太远，光是理解<code>mat.h</code>头文件的一部分就非常消耗时间和精力，而当实现ROI时，那种用户只需要给好参数，库会帮你解决一切的全能和自己写出来的完全是天壤之别。</p>
<h3 id="Solution-2"><a href="#Solution-2" class="headerlink" title="Solution"></a>Solution</h3><p>这貌似不是一个短期内看上去可以解决的问题，要实现那样的效果，还缺少包括但不限于图论、几何等的前置知识，只能日后慢慢勤以补拙了，这次的可扩展性倒是让自己还算满意，非常自由。</p>
<p>希望以后也能加入到这样的一个项目里，为高楼大厦做一点微小的工作吧。</p>
<h2 id="Part-5-Summary"><a href="#Part-5-Summary" class="headerlink" title="Part 5 - Summary"></a>Part 5 - Summary</h2><p>感谢您能读到这里。</p>
<p>关于本次项目的总结，言简意赅来讲就是把类模板<strong>弄明白了又弄糊涂了</strong>。</p>
<p>学了一学期C/C++，和上于老师的数据库一样，真的是越学越不会了(悲)，真的很喜欢这种上课风格。</p>
<p>一学期5个单人Projects，确实比大一感觉要繁忙许多，和朋友调侃的时候也总会提起自己这学期似乎一直“泡在Project里”。查了很多，翻了很多，熬了很多，但其实，学得还不够多。</p>
<p>在做Project的时候经常性地会把自己的项目和其他人的作比较，再进行完善，有时候会觉得好像没有必要做到这一步，但看到程序正常运行的时候还是会非常欣慰的，希望这样的感觉能稍微浸润到生活的其他方面吧。</p>
<p>最后的最后，诚挚感谢于老师、廖老师以及助教等为课程开展付出努力的人们！辛苦了！</p>
<p><img src="https://s2.loli.net/2022/12/18/oDMiHWk8xXLcfJG.png" alt="image.png"></p>
<h1 id="完结撒花-○´∀-ﾉ🌺"><a href="#完结撒花-○´∀-ﾉ🌺" class="headerlink" title="完结撒花 (○´∀`)ﾉ🌺"></a>完结撒花 (○´∀`)ﾉ🌺</h1>]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ Project02设计报告 简易计算器</title>
    <url>/2022/11/05/CS205_%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A_Simple_Calculator/</url>
    <content><![CDATA[<h2 id="Part-0-团队成员"><a href="#Part-0-团队成员" class="headerlink" title="Part 0. 团队成员"></a>Part 0. <del>团队</del>成员</h2><div class="table-container">
<table>
<thead>
<tr>
<th>姓名</th>
<th>学号</th>
<th><del>贡献率</del></th>
</tr>
</thead>
<tbody>
<tr>
<td>咕桃</td>
<td>-</td>
<td><del>100%</del></td>
</tr>
</tbody>
</table>
</div>
<h2 id="Part-1-Analysis"><a href="#Part-1-Analysis" class="headerlink" title="Part 1 - Analysis"></a>Part 1 - Analysis</h2><h3 id="题目重述-amp-主要思路"><a href="#题目重述-amp-主要思路" class="headerlink" title="题目重述&amp;主要思路"></a>题目重述&amp;主要思路</h3><p>本题目要求实现一个带有变量存储功能，支持基本运算和部分函数的计算器。</p>
<p>根据题目描述，本题的主要要求为：</p>
<ol>
<li>带括号的复合算式的计算</li>
<li>可以设置并代入用户自定义变量</li>
<li>部分数学常用函数</li>
<li>高精度</li>
<li>使用Cmake管理项目</li>
</ol>
<p>本项目使用了Project1中实现的<code>BigNum</code>高精度浮点数结构体进行数据的存储和运算，除完成上述全部基础要求外，本项目支持以下内容：</p>
<ol>
<li>交互式输入输出</li>
<li>sqrt(), exp(), ln(), sin(), cos() 五种常用函数（可轻易扩展更多）</li>
<li>支持多种形式的输入数据</li>
<li>INF/NaN结果反馈</li>
<li>设定运算结果精度</li>
<li>查看/编辑变量列表</li>
<li>用户友好的帮助菜单</li>
</ol>
<h3 id="模型假设"><a href="#模型假设" class="headerlink" title="模型假设"></a>模型假设</h3><p>由于题目所给信息较少，笔者对输入的数据范围等进行了假设，并根据假设设计程序。</p>
<p>以下是本程序适配的数据范围：</p>
<p>对于一个科学计数法浮点数，格式记为$A.BeC$</p>
<p>整数部分$A$与小数部分$B$位数之和记为$len$，$1\leq n \leq 10^{4}$，即存储一万位有效数字</p>
<p>10的幂指数$C$记为$exp$，$-10^{18}\leq exp \leq 10^{18}$，即存储上限为$10^{10^{18}}$量级</p>
<h3 id="二元运算"><a href="#二元运算" class="headerlink" title="二元运算"></a>二元运算</h3><p>本项目沿用了用高精度浮点数的存储方式，为了良好的扩展性采用了重载运算符的写法，较函数写法更为简洁，且基本运算的实现也和传统方式有所不同。</p>
<p><strong>加法/减法</strong></p>
<p>此种存储数据的好处在于可以将末尾0全部存储在$exp$变量中而非占用数组长度，但在进行加减法时需要进行对齐，对齐的思路为：</p>
<p>结果沿用两数中较小的$exp$，通过<strong>补0</strong>的方式对齐两数，避免了展开全部末尾0再运算带来的不必要时间和空间浪费，并在加减法完成后即时回收末尾0至$exp$中，最大地减少了空间开销。</p>
<p>加减法的具体逻辑较为常见，仅作简述：</p>
<ol>
<li>较短数补0对齐</li>
<li>从低位起逐位加/减，并用carry/borrow标签模拟进位/借位</li>
<li>回收末尾0，规范化结果</li>
</ol>
<p><strong>乘法</strong></p>
<p>沿用此前实现的$O(n^2)$高精度乘法，不作赘述。</p>
<p><strong>除法</strong></p>
<p>由于除法在绝大多数情况下会出现“除不尽”的无限循环小数的情况，本项目对输出结果进行了精度预设，当结果总长度达到200时停止运算（该参数可以通过<code>big_num.h</code>中的<code>DIVIDE_PRECISION</code>常量进行更改）。</p>
<p>以下是除法的具体逻辑，对于除法运算$A/B=C$：</p>
<ol>
<li>将$A$和$B$调整至$B\leq A&lt;10*B$</li>
</ol>
<p>​        由于特殊的数据存储方式，10的次方间的除法可以直接通过$exp$降次为<code>long long</code>类型的加减法，作差后存储于结果。</p>
<ol>
<li>迭代计算后续位数</li>
</ol>
<p>​        重复执行以下操作：从$A$中减去若干次$B$并计数，直到$A&lt;B$，得到$floor(A/B)$，将其存入结果中，将$A$扩增10倍，再次从中减去若干次$B$…理论而言，如此循环可以得到任意多位数的结果。</p>
<ol>
<li>将结果倒序</li>
</ol>
<p>​        由于除法计算时，是从高位到低位产生结果，因此在结束运算后需要根据位数进行结果的倒序。</p>
<p><strong>整数幂</strong></p>
<p>实现了乘法和除法，就少不了快速幂。</p>
<p>快速幂的思路如下，对于乘方运算$A^B$：</p>
<p>将$B$用二进制表示，从低到高第i位为1代表$B$做拆解为2的次幂和之后有$2^{i-1}$的一项，该项在总运算中是一个因子：$A^{2^{i-1}}$，因此可以通过不断将底数$A$做平方，在$B$的二进制对应位为1时将此时的$A^{2^{i-1}}$乘进结果中，将乘法由$n$级别降为$logn$级别。</p>
<p>然而本项目中高精度数据十进制下就有$1e4$位，转成二进制将会更加痛苦，且丧失了原有的空间复杂度优势。考虑到我们每次计算时，暂时并<strong>不关心除了最低位以外的数</strong>，此处采用了将<strong>个位数和1做按位与</strong>的操作：若一个大整数$exp=0$且最低位为奇数，说明其<strong>二进制表达下最低位为1</strong>，单次判断操作时空复杂度都是<strong>O(1)</strong>。</p>
<p><strong>小数幂</strong></p>
<p>经过若干次不同的尝试，小数幂最终使用Math库中的<code>pow</code>，以下是大致的尝试过程：</p>
<ul>
<li><p><strong>思路一</strong>：完全手动重构</p>
<ol>
<li><p>先实现$e^x$和$ln(x)$！</p>
<p>在不使用小数幂的前提下，实现这两个函数听上去有点天方夜谭，但<strong>只能用整数幂</strong>意味着可以使用泰勒级数近似计算这两个函数，所需要的运算恰好是目前已经是实现的加、减、乘、除、整数幂。</p>
<p>以下是两个函数的展开结果：</p>
<p>$e^x=\sum_{i=0}^{\infty} \frac{x^i}{i!}=1+\frac{x}{1!}+\frac{x^2}{2!}+ \frac{x^3}{3!}+…$</p>
<p>$ln(x+1)=\sum_{i=1}^{\infty}(-1)^{i-1}\frac{x^i}{i}=x-\frac{x^2}{2}+\frac{x^3}{3}-\frac{x^4}{4}+…$</p>
<p>上机跑了一下，发现计算<code>ln(1.5)</code>还算快速和精确，但计算<code>ln(2)</code>时非常慢，并且计算出的<code>ln(3)</code>大出天际，经验证发现，使用麦克劳林级数计算，越远离0结果越不精确，且在<code>ln(2)</code>之后增量不收敛，因此会得出错误的结果。</p>
</li>
<li><p>调整收敛式</p>
<p>$t=\frac{x-1}{x+1},ln(x)=ln(1+t)-ln(1-t)=2\sum_{i=0}^{\infty}\frac{t^{2i+1}}{2i+1}$</p>
<p>通过引入$t$间接计算，将ln中的数字控制在了0~2之间，一定程度上提高了精确度，但此时程序为了计算函数，运行的时间已经不可忽略：乘法是$O(n^2)$，整数幂和除法都要多次调用乘法，为了结果的精度，级数的项数也需要设置在较高的水平。</p>
</li>
<li><p>曲折地实现小数幂</p>
<p>既然不能直接算小数幂，我们可以将问题归纳为现有运算可以解决的形式：$A^B=e^{B*ln(A)}$</p>
<p>即先对底数$A$求对数，与指数$B$相乘后再求自然指数。理论而言，由此可以只通过级数运算得到任意小数幂。</p>
</li>
<li><p>实际情况</p>
<p>太慢，牺牲精度了还是太慢。在实现运算后，我尝试着运行了<code>2^0.5</code>，并经过多番痛截精度后，程序很忠诚地在15s左右给出了答案，经比对，精确到小数点后10位。</p>
<p>原来的算法对于越大的数，计算起来的耗时是高次幂多项式增长的，因此程序<strong>几乎无法</strong>对大数进行小数幂运算。</p>
<p>经过慎重考虑，我认为对于题设所需的计算器而言，具有一定精度而<strong>非常高效</strong>的Math库内置<code>pow</code>应该更加适合，因此有了以下的思路二。</p>
</li>
</ol>
</li>
<li><p><strong>思路二</strong>：使用Math库内置<code>pow</code></p>
<ol>
<li><p>double？</p>
<p>库函数预设的参数类型为<code>double</code>类，虽然不是无限精度，但$[-1.7E308,1.7E308]$和小数点后15位的精度对于题设的绝大多数情况而言还是较为充足的，均衡时间和空间成本不失为一个优解。</p>
<p>然而使用库函数需要将<code>BigNum</code>类转化为<code>double</code>类，利用库函数得出<code>double</code>类结果后仍要转化回<code>BigNum</code>以便后续的高精度计算。此处就涉及到两种类型的转换：</p>
<ol>
<li><p>BigNum→double</p>
<p>这种情况，对于超出double范围的大数而言并不可行，但$[-1.7E308,1.7E308]$范围内，将BigNum中逐位存储的数取出，再根据exp改变double的小数点位置即可，此时小数点后的精度会有一定损失。</p>
</li>
<li><p>double→BigNum</p>
<p>本项目由于先前实现了良好的string转BigNum构造器，此处利用stringstream将double直接转为string型，再利用构造器即可无精度损失地将double转换为BigNum类。</p>
</li>
</ol>
</li>
<li><p>效果？</p>
<p>经验证，调用Math库函数进行运算后，运算时间又回到了肉眼可以忽略的量级，精度达到小数点后15位，说明优于原先完全重构的实现方法。</p>
</li>
<li><p>后续</p>
<p>由此，吸取了上述颠沛流离过程的经验，本项目在后续引入函数的过程中，涉及到手动实现函数的时间/空间不可接受的情况时，采用了Math库的内置函数，更加简洁高效，也避免了使用自己造出来的方轮子带来的不便。</p>
</li>
</ol>
</li>
</ul>
<h3 id="后缀表达式"><a href="#后缀表达式" class="headerlink" title="后缀表达式"></a>后缀表达式</h3><p>又称逆波兰表达式，通过引入栈和队列改变操作数和操作符的顺序，得到后缀表达式辅助运算，常用于多种优先级的运算符同时存在的算式的求值，由于该算法普及性较好，<del>老师想必也看了几十篇类似的讲解了</del>，此处仅作简单的阐述：</p>
<ol>
<li><p>确定符号优先级</p>
<p>此处，参与运算需要区分先后顺序的有：括号，5种二元算符，函数。</p>
<p>运算优先级如下：括号&gt;函数&gt;乘方&gt;乘除&gt;加减</p>
</li>
<li><p>中缀表达式→后缀表达式</p>
<p>根据符号，将一整行字符串split成若干子串，从左到右读入中缀表达式：</p>
<ul>
<li>读入数字，直接加入队列</li>
<li>读入操作符<ul>
<li>当前操作符为<code>(</code>，直接入栈</li>
<li>当前操作符为<code>)</code>，持续出栈至队列中，直到将一个<code>(</code>出栈后停止</li>
<li>当前操作符优先级高于栈顶，直接入栈</li>
<li>当前操作符优先级不高于栈顶，持续出栈至队列中，直到当前操作符优先级高于栈顶后再入栈</li>
</ul>
</li>
</ul>
<p>中缀表达式读入完毕后，若栈非空，则依次出栈加入队列中。</p>
</li>
<li><p>计算后缀表达式</p>
<p>从后缀表达式队列中依次取出元素：</p>
<ul>
<li>读入数字，直接入栈</li>
<li>读入操作符，取出栈顶两个元素进行二元运算(两个元素需要倒序)，运算结果再次入栈</li>
<li>读入函数，取出栈顶单个元素代入运算，结果再次入栈</li>
</ul>
<p>后缀表达式运算完毕后，将栈中唯一元素出栈，即所求结果</p>
</li>
</ol>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>本项目使用STL::map简洁地实现了变量功能，读入命令后利用正则表达式匹配等式格式，检查合法后将左式作为变量名以字符串形式存储，右式依然是支持多种输入格式的高精度数字。</p>
<p>对于有一定精度要求的$\pi$和$e$，程序也预先将其内置在变量表中。</p>
<p>查看当前变量列表时，活用<code>auto</code>型迭代器遍历map；编辑变量时，对map删除再建立映射即可。</p>
<p>参与运算时，变量在中缀转后缀的过程中会被自动替换为其<code>BigNum</code>类键值参与运算，对于变量名相互包含的情况，本项目会取匹配的最长的变量名进行运算。</p>
<h2 id="Part-2-Code"><a href="#Part-2-Code" class="headerlink" title="Part 2 - Code"></a>Part 2 - Code</h2><h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CPP\PROJ02</span><br><span class="line">│  better_calc</span><br><span class="line">│  CMakeLists.txt</span><br><span class="line">│  report.pdf</span><br><span class="line">│</span><br><span class="line">├─inc</span><br><span class="line">│      big_num.h</span><br><span class="line">│      functions.h</span><br><span class="line">│      varia.h</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">        func.cpp</span><br><span class="line">        main.cpp</span><br><span class="line">        operators.cpp</span><br><span class="line">        RPN.cpp</span><br><span class="line">        utils.cpp</span><br><span class="line">        variables.cpp</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/main.cpp"><code>main.cpp</code></a>为运行主函数，可执行文件为：<code>./better_calc</code>，为实现交互式输入输出，本项目未使用命令行输入。</p>
<p><a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/big_num.h"><code>big_num.h</code></a>为高精度浮点数头文件，其操作符重载实现位于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/operators.cpp"><code>operators.cpp</code></a>，过程中使用的函数实现位于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/utils.cpp"><code>utils.cpp</code></a>，逆波兰表达式的处理和求值位于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/RPN.cpp"><code>RPN.cpp</code></a>。</p>
<p><a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/functions.h"><code>functions.h</code></a>为数学函数头文件，其实现位于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/func.cpp"><code>func.cpp</code></a>。</p>
<p><a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/varia.h"><code>varia.h</code></a>为变量头文件，其实现和常用函数位于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/variables.cpp"><code>variables.cpp</code></a>。</p>
<h3 id="二元运算的重载"><a href="#二元运算的重载" class="headerlink" title="二元运算的重载"></a>二元运算的重载</h3><p>本节实现于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/operators.cpp">operators.cpp</a>，实现了加减乘除乘方五种二元运算的重载。</p>
<h4 id="减法"><a href="#减法" class="headerlink" title="减法"></a>减法</h4><p>加法与之类似，因此只放减法。</p>
<p>Step1. 通过讨论a,b的符号，将问题简化为a&gt;b&gt;0时的情况。</p>
<p>Step2. 排除其一为INF/NaN的情况，防止其影响计算</p>
<p>Step3. 对位数较少者进行补0</p>
<p>Step4. 逐位相减，模拟借位</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">BigNum <span class="keyword">operator</span>-(BigNum a, BigNum b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (a.type == NaN || b.type == NaN)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a.type == NaN ? a : b;</span><br><span class="line">    &#125;</span><br><span class="line">    a = <span class="built_in">standardize_exp</span>(a);</span><br><span class="line">    b = <span class="built_in">standardize_exp</span>(b);</span><br><span class="line">    BigNum c = <span class="built_in">BigNum</span>();</span><br><span class="line">    <span class="keyword">if</span> (a.sign)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (b.sign)</span><br><span class="line">        &#123;</span><br><span class="line">            c.sign = b &lt; a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            b.sign = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (b.sign)</span><br><span class="line">        &#123;</span><br><span class="line">            b.sign = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span> a + b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            a.sign = <span class="literal">true</span>;</span><br><span class="line">            b.sign = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">return</span> b - a;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> -(b - a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (a == b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.type == INF || b.type == INF)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> a.type == INF ? a : b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">BigNum</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.type == INF)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> a;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (b.type == INF)</span><br><span class="line">        &#123;</span><br><span class="line">            b.sign = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span> b;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (a.exp &gt;= b.exp)<span class="comment">//a后补0</span></span><br><span class="line">        &#123;</span><br><span class="line">            c.sign = <span class="literal">true</span>;</span><br><span class="line">            c.exp = b.exp;</span><br><span class="line">            c.len = a.len + a.exp - b.exp;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= a.len; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                c.val[i + a.exp - b.exp] = a.val[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> borrow = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= c.len; i++)<span class="comment">//给a补0</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (c.val[i] &lt; borrow + b.val[i])</span><br><span class="line">                &#123;</span><br><span class="line">                    c.val[i] = c.val[i] + <span class="number">10</span> - borrow - b.val[i];</span><br><span class="line">                    borrow = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    c.val[i] -= borrow + b.val[i];</span><br><span class="line">                    borrow = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            c = <span class="built_in">standardize_exp</span>(c);</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span><span class="comment">//b后补0</span></span><br><span class="line">        &#123;</span><br><span class="line">            c.sign = <span class="literal">true</span>;</span><br><span class="line">            c.exp = a.exp;</span><br><span class="line">            c.len = a.len+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= c.len; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                c.val[i] = a.val[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> borrow = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= b.len+<span class="number">1</span>; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (c.val[i + b.exp - a.exp] &lt; borrow + b.val[i])</span><br><span class="line">                &#123;</span><br><span class="line">                    c.val[i + b.exp - a.exp] = c.val[i + b.exp - a.exp] + <span class="number">10</span> - borrow - b.val[i];</span><br><span class="line">                    borrow = <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    c.val[i + b.exp - a.exp] -= borrow + b.val[i];</span><br><span class="line">                    borrow = <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            c = <span class="built_in">standardize_exp</span>(c);</span><br><span class="line">            <span class="keyword">return</span> c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="除法"><a href="#除法" class="headerlink" title="除法"></a>除法</h4><p>Step1. 预处理INF/NaN的情况</p>
<p>Step2. exp作差，调整至b&lt;a&lt;10b</p>
<p>Step3. 在达到预设精度前不断扩增a得到更低位</p>
<p>Step4. 翻转数组，得到结果</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">BigNum <span class="keyword">operator</span>/(BigNum a, BigNum b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">is_zero</span>(b))</span><br><span class="line">    &#123;</span><br><span class="line">        BigNum err = <span class="built_in">BigNum</span>();</span><br><span class="line">        err.sign = !(a.sign <span class="keyword">xor</span> b.sign);</span><br><span class="line">        err.type = <span class="built_in">is_zero</span>(a) ? NaN : INF;</span><br><span class="line">        <span class="keyword">return</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    BigNum c = <span class="built_in">BigNum</span>();</span><br><span class="line">    c.sign = !(a.sign <span class="keyword">xor</span> b.sign);</span><br><span class="line">    a.sign = b.sign = <span class="literal">true</span>;</span><br><span class="line">    c.exp = a.exp - b.exp;</span><br><span class="line">    c.len = <span class="number">0</span>;</span><br><span class="line">    a.exp = <span class="number">0</span>;</span><br><span class="line">    b.exp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; b)<span class="comment">//扩大a直到a&gt;b</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (a &lt; b)</span><br><span class="line">        &#123;</span><br><span class="line">            a.exp++;</span><br><span class="line">            c.exp--;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        b.exp++;</span><br><span class="line">        <span class="keyword">if</span> (b &lt; a)<span class="comment">//缩小a直到a&lt;10b;</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (b &lt; a)</span><br><span class="line">            &#123;</span><br><span class="line">                a.exp--;</span><br><span class="line">                c.exp++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        b.exp--;</span><br><span class="line">    &#125;<span class="comment">//现在是10b&gt;a&gt;b的情况</span></span><br><span class="line">    <span class="keyword">while</span> (c.len &lt; DIVIDE_PRECISION)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">int</span> q = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span> (!(a &lt; b))</span><br><span class="line">        &#123;</span><br><span class="line">            a = a - b;</span><br><span class="line">            q++;</span><br><span class="line">            a = <span class="built_in">standardize_exp</span>(a);</span><br><span class="line">        &#125;</span><br><span class="line">        c.val[++c.len] = q;</span><br><span class="line">        a.exp++;</span><br><span class="line">        a = <span class="built_in">standardize_exp</span>(a);</span><br><span class="line">        c.exp--;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">is_zero</span>(a))</span><br><span class="line">        &#123; <span class="keyword">break</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    c.exp++;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= (c.len &gt;&gt; <span class="number">1</span>); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">swap</span>(c.val[i], c.val[c.len - i + <span class="number">1</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="乘方"><a href="#乘方" class="headerlink" title="乘方"></a>乘方</h4><p>Step1. 预处理</p>
<p>Step2. 若为整数幂，使用高精度快速幂</p>
<p>Step3. 若为小数幂，使用<code>pow()</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line">BigNum <span class="keyword">operator</span>^(BigNum a, BigNum b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">bool</span> nega_pow = b.sign;</span><br><span class="line">    b.sign=<span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">is_zero</span>(a))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">BigNum</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">is_zero</span>(b))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">BigNum</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a.type == INF)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    a = <span class="built_in">standardize_exp</span>(a);</span><br><span class="line">    b= <span class="built_in">standardize_exp</span>(b);</span><br><span class="line">    <span class="keyword">if</span>(b.exp&gt;=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        BigNum res = <span class="built_in">BigNum</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span>(!<span class="built_in">is_zero</span>(b))</span><br><span class="line">        &#123;</span><br><span class="line">            res=<span class="built_in">shorten</span>(res,<span class="number">1000</span>);</span><br><span class="line">            <span class="keyword">if</span>((b.val[<span class="number">1</span>]&amp;<span class="number">1</span>)&amp;&amp;(!b.exp))</span><br><span class="line">            &#123;</span><br><span class="line">                res=res*a;</span><br><span class="line">            &#125;</span><br><span class="line">            a=a*a;</span><br><span class="line">            a=<span class="built_in">shorten</span>(a,<span class="number">1000</span>);</span><br><span class="line">            b=b/<span class="built_in">BigNum</span>(<span class="number">2</span>);</span><br><span class="line">            b= <span class="built_in">shorten</span>(b,b.len+b.exp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nega_pow?res:(<span class="built_in">BigNum</span>(<span class="number">1</span>)/res);</span><br><span class="line">    &#125;<span class="comment">//整数，使用快速幂</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//cout&lt;&lt;&quot;float power&quot;&lt;&lt;endl;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">to_BigNum</span>(<span class="built_in">exp</span>(<span class="built_in">to_double</span>(b)* <span class="built_in">log</span>(<span class="built_in">to_double</span>(a))));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="后缀表达式的转化和计算"><a href="#后缀表达式的转化和计算" class="headerlink" title="后缀表达式的转化和计算"></a>后缀表达式的转化和计算</h3><p>本节实现于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/RPN.cpp">RPN.cpp</a>，主要实现了两个功能，具体原理上文已述：</p>
<ol>
<li>将中缀表达式转化为后缀表达式</li>
<li>计算后缀表达式</li>
</ol>
<p>由于队列和栈中元素可能是操作符/函数/数字，因此开玩笑式的建立了aUtO结构体，作为栈和队列的类型，以实现不同类型的数据可以用同一个数据结构存储的效果。</p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">aUtO</span><span class="comment">//just kidding :)</span></span><br><span class="line">&#123;</span><br><span class="line">    BigNum v;</span><br><span class="line">    string s;</span><br><span class="line">    <span class="type">bool</span> is_num;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">aUtO</span>(BigNum v)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;v = v;</span><br><span class="line">        is_num = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">aUtO</span>(string s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;s = s;</span><br><span class="line">        is_num = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">aUtO</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;s = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        is_num = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function">BigNum <span class="title">calculate</span><span class="params">(string s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">trim</span>(s);</span><br><span class="line">    vector&lt;string&gt; sub;</span><br><span class="line">    string it = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">char</span> i: s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">is_operator</span>(i)&amp;&amp;!(it[it.<span class="built_in">length</span>()<span class="number">-1</span>]==<span class="string">&#x27;e&#x27;</span>&amp;&amp;i==<span class="string">&#x27;-&#x27;</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (it != <span class="string">&quot;&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                sub.<span class="built_in">push_back</span>(it);</span><br><span class="line">                it=<span class="string">&quot;&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            sub.<span class="built_in">push_back</span>(<span class="built_in">string</span>(<span class="number">1</span>,i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            it += <span class="built_in">string</span>(<span class="number">1</span>,i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(it!=<span class="string">&quot;&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        sub.<span class="built_in">push_back</span>(it);</span><br><span class="line">        it=<span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    queue&lt;aUtO&gt; q;</span><br><span class="line">    stack&lt;aUtO&gt; stk;</span><br><span class="line">    <span class="keyword">for</span> (string i: sub)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.<span class="built_in">length</span>() == <span class="number">1</span> &amp;&amp; <span class="built_in">is_operator</span>(i[<span class="number">0</span>]))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == <span class="string">&quot;(&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(i));</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (i == <span class="string">&quot;)&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span> (stk.<span class="built_in">top</span>().s != <span class="string">&quot;(&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">                    stk.<span class="built_in">pop</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                stk.<span class="built_in">pop</span>();</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>() &amp;&amp; <span class="built_in">priority</span>(i) &lt;= <span class="built_in">priority</span>(stk.<span class="built_in">top</span>().s))</span><br><span class="line">                &#123;</span><br><span class="line">                    q.<span class="built_in">push</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">                    stk.<span class="built_in">pop</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(i));</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">is_func</span>(i))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>() &amp;&amp; <span class="built_in">priority</span>(i) &lt;= <span class="built_in">priority</span>(stk.<span class="built_in">top</span>().s))</span><br><span class="line">            &#123;</span><br><span class="line">                q.<span class="built_in">push</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">                stk.<span class="built_in">pop</span>();</span><br><span class="line">            &#125;</span><br><span class="line">            stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(i));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">classifier</span>(i) != NaN)</span><br><span class="line">        &#123;</span><br><span class="line">            q.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(<span class="built_in">BigNum</span>(i)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">contains</span>(i))</span><br><span class="line">        &#123;</span><br><span class="line">            q.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(<span class="built_in">value_of</span>(i)));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            BigNum err = <span class="built_in">BigNum</span>();</span><br><span class="line">            err.type = NaN;</span><br><span class="line">            <span class="keyword">return</span> err;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!stk.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        q.<span class="built_in">push</span>(stk.<span class="built_in">top</span>());</span><br><span class="line">        stk.<span class="built_in">pop</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    BigNum x, y;</span><br><span class="line">    aUtO cur, tmp;</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        cur = q.<span class="built_in">front</span>();</span><br><span class="line">        q.<span class="built_in">pop</span>();</span><br><span class="line">        <span class="keyword">if</span> (cur.is_num)</span><br><span class="line">        &#123;</span><br><span class="line">            stk.<span class="built_in">push</span>(cur);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            x = stk.<span class="built_in">top</span>().v;</span><br><span class="line">            stk.<span class="built_in">pop</span>();</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">is_operator</span>(cur.s[<span class="number">0</span>]))</span><br><span class="line">            &#123;</span><br><span class="line">                y = stk.<span class="built_in">top</span>().v;</span><br><span class="line">                stk.<span class="built_in">pop</span>();</span><br><span class="line">                stk.<span class="built_in">push</span>(<span class="built_in">calc</span>(y, x, cur.s[<span class="number">0</span>]));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">is_func</span>(cur.s))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(cur.s==<span class="string">&quot;exp&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(<span class="built_in">to_BigNum</span>(<span class="built_in">exp</span>(<span class="built_in">to_double</span>(x)))));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(cur.s==<span class="string">&quot;ln&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(<span class="built_in">to_BigNum</span>(<span class="built_in">log</span>(<span class="built_in">to_double</span>(x)))));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(cur.s==<span class="string">&quot;cos&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(<span class="built_in">to_BigNum</span>(<span class="built_in">cos</span>(<span class="built_in">to_double</span>(x)))));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(cur.s==<span class="string">&quot;sin&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(<span class="built_in">to_BigNum</span>(<span class="built_in">sin</span>(<span class="built_in">to_double</span>(x)))));</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(cur.s==<span class="string">&quot;sqrt&quot;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    stk.<span class="built_in">push</span>(<span class="built_in">aUtO</span>(<span class="built_in">to_BigNum</span>(<span class="built_in">sqrt</span>(<span class="built_in">to_double</span>(x)))));</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> stk.<span class="built_in">top</span>().v;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="级数近似计算函数"><a href="#级数近似计算函数" class="headerlink" title="级数近似计算函数"></a>级数近似计算函数</h3><p>本节代码位于<a href="https://github.com/GuTaoZi/CS205_Project02/blob/master/src/func.cpp">func.cpp</a>，由于中途易辙，此处实现了自然指数和自然对数两个函数。</p>
<p>虽然最后决定弃用，但此处仍展示其思路。</p>
<p>大致流程为：预处理→计算级数求和→得到结果。</p>
<p>从运算复杂度而言，这两个函数的实现对于时间的耗费过大，并不适用于题设环境。</p>
<h4 id="e-x"><a href="#e-x" class="headerlink" title="$e^x$"></a>$e^x$</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">BigNum <span class="title">exp</span><span class="params">(BigNum a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">is_zero</span>(a))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">BigNum</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a.type == INF || a.type == NaN)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    BigNum res = <span class="built_in">BigNum</span>(<span class="number">1</span>);</span><br><span class="line">    BigNum fac = <span class="built_in">BigNum</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= PRECISION; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        BigNum it = <span class="built_in">BigNum</span>(i);</span><br><span class="line">        fac = fac * it;</span><br><span class="line">        res = res + ((a ^ it) / fac);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ln-x"><a href="#ln-x" class="headerlink" title="$ln(x)$"></a>$ln(x)$</h4><figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function">BigNum <span class="title">ln</span><span class="params">(BigNum a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (a == <span class="built_in">BigNum</span>(<span class="number">1</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">BigNum</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!a.sign || <span class="built_in">is_zero</span>(a))</span><br><span class="line">    &#123;</span><br><span class="line">        BigNum err = <span class="built_in">BigNum</span>();</span><br><span class="line">        err.type = NaN;</span><br><span class="line">        <span class="keyword">return</span> err;</span><br><span class="line">    &#125;</span><br><span class="line">    BigNum res = <span class="built_in">BigNum</span>();</span><br><span class="line">    BigNum t = (a - <span class="built_in">BigNum</span>(<span class="number">1</span>)) / (a + <span class="built_in">BigNum</span>(<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">2</span> * PRECISION; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &amp; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            BigNum it = <span class="built_in">BigNum</span>(i);</span><br><span class="line">            res = res + <span class="built_in">BigNum</span>(<span class="number">2</span>) / it * t ^ it;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>因此，本项目的五个函数均取自Math库。</p>
<h3 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h3><p>以下是在<code>varia.h</code>头文件中的函数，基于<code>STL::map</code>实现，因此功能简洁明了，实现位于<code>variables.cpp</code></p>
<figure class="highlight c++"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">trim</span><span class="params">(string &amp;s)</span></span>;<span class="comment">//去除空格</span></span><br><span class="line"></span><br><span class="line"><span class="function">BigNum <span class="title">value_of</span><span class="params">(string name)</span></span>;<span class="comment">//取值</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string name, string val)</span></span>;<span class="comment">//插入(输入参数为字符串)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">insert</span><span class="params">(string name, BigNum val)</span></span>;<span class="comment">//插入(输入参数为BigNum)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">remove</span><span class="params">(string name)</span></span>;<span class="comment">//删除</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">modify</span><span class="params">(string name, BigNum val)</span></span>;<span class="comment">//修改</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">contains</span><span class="params">(string name)</span></span>;<span class="comment">//查询是否存在</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">add</span><span class="params">(string s)</span></span>;<span class="comment">//添加/编辑映射</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">value_list</span><span class="params">(<span class="type">int</span> precision)</span></span>;<span class="comment">//打印变量列表</span></span><br></pre></td></tr></table></figure>
<h3 id="用户友好设计"><a href="#用户友好设计" class="headerlink" title="用户友好设计"></a>用户友好设计</h3><p>本程序设计了用户友好的交互命令，命令列表如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#h help</span><br><span class="line">#p [num] set precision(-1 for as accurate as possible)</span><br><span class="line">#n number format</span><br><span class="line">#f function list</span><br><span class="line">#v variable list</span><br><span class="line">[variable_name]=[num] set/modify variable</span><br><span class="line">#q quit</span><br></pre></td></tr></table></figure>
<p>分别实现了：帮助菜单、设置输出精度、显示支持的输入格式列表、显示支持的函数列表、当前变量列表、创建/编辑变量、退出功能，本项目使用交互式输入输出，在收到#q指令前可持续输入，并会对不同错误进行报错提示，<del>并且使用了&gt;&gt;&gt;来让计算器看起来比较像某种语言的交互式界面。</del></p>
<h2 id="Part-3-Result-amp-Verification"><a href="#Part-3-Result-amp-Verification" class="headerlink" title="Part 3 - Result &amp; Verification"></a>Part 3 - Result &amp; Verification</h2><p>经与计算器对照确认，下列结果均正确</p>
<p>Bunched Test case #1: 基础五则运算</p>
<p><img src="https://s2.loli.net/2022/10/16/hgA8YTn1KLy6lrw.png" alt="image-20221016015749671.png" style="zoom:50%;" /></p>
<p>Bunched Test case #2: 高精度五则运算</p>
<p><img src="https://s2.loli.net/2022/10/16/Xh5PFVf3Z24WDtx.png" alt="image-20221016020050214.png"></p>
<p>Bunched Test case #3: 变量赋值与运算</p>
<p><img src="https://s2.loli.net/2022/10/16/3V6ZWpIDQM7z8m4.png" alt="image-20221016020446449.png"></p>
<p>Bunched Test case #4: 小数幂与函数</p>
<p><img src="https://s2.loli.net/2022/10/16/zMZekKmqWVUT8Qv.png" alt="image-20221016021351071.png" style="zoom:50%;" /></p>
<p>Bunched Test case #5: 用户友好设计</p>
<p><img src="https://s2.loli.net/2022/10/16/lR7HhZjQI2sozcf.png" alt="image-20221016021628241.png" style="zoom:50%;" /></p>
<h2 id="Part-4-Difficulties-amp-Solutions"><a href="#Part-4-Difficulties-amp-Solutions" class="headerlink" title="Part 4 - Difficulties &amp; Solutions"></a>Part 4 - Difficulties &amp; Solutions</h2><h3 id="重载运算符"><a href="#重载运算符" class="headerlink" title="重载运算符"></a>重载运算符</h3><p><strong>Difficulty: </strong>新形式存储在对齐小数点时需要新的方法，和传统写法有一定差异</p>
<p><strong>Solution:</strong> 充分利用存了exp的优势，将按位运算简化为对exp的运算，补零对齐即可按常规思路模拟计算。</p>
<h3 id="运算顺序"><a href="#运算顺序" class="headerlink" title="运算顺序"></a>运算顺序</h3><p><strong>Difficulty:</strong> 含有括号、函数、五种二元运算的中缀表达式运算顺序难以用计算机模拟计算</p>
<p><strong>Solution:</strong> 确定优先级，利用栈和队列辅助，转换成后缀表达式再使用固定流程循环计算。</p>
<h3 id="变量-2"><a href="#变量-2" class="headerlink" title="变量"></a>变量</h3><p><strong>Difficulty1:</strong> 如何防止用户起奇怪的变量名？</p>
<p><strong>Solution1:</strong> 用正则表达式进行诸如“第一位不能是数字”这样的限制，若不符条件报错即可。</p>
<p><strong>Difficulty2:</strong> 在变量名相互包含的情况下如何代入？</p>
<p><strong>Solution2:</strong> 根据运算符进行split，若算式合法，则分出来的一定是完整变量名，选整个完整变量名带入计算即可，若不存在该变量则说明变量列表没有。</p>
<h3 id="小数次幂-amp-函数"><a href="#小数次幂-amp-函数" class="headerlink" title="小数次幂&amp;函数"></a>小数次幂&amp;函数</h3><p><strong>Difficulty:</strong> 对于以$O(n^2)$实现的模拟乘法作为基础编写的整数幂和除法时间复杂度只会比$O(n^2)$高出更多，如遇计算级数这样高频调用乘法的情景，这样的时间复杂度将显得过高。</p>
<p><strong>Solution:</strong> 本项目选择引用Math库内置的函数进行计算，高效简洁，避免重复造轮子<del>(其实还是造了，只是技不如人，甘拜下风)</del>。</p>
<p><strong>Possible Solution:</strong> 其实后来有考虑过一个解决方案，就是将小数次幂的整数部分剥离，只计算小数部分，这样直观感觉上会极大降低计算耗时，但对自己的乘法没什么信心，于是没有再造方轮子。</p>
<h2 id="Part-5-Difficulties-amp-Solutions"><a href="#Part-5-Difficulties-amp-Solutions" class="headerlink" title="Part 5 - Difficulties &amp; Solutions"></a>Part 5 - Difficulties &amp; Solutions</h2><p>本次项目让我深刻的认识到了自己能力的有限：当可以做的事远大于自己所能做的事的时候。</p>
<p>重载完加减乘除的时候感觉还非常良好，写整数次幂的时候就开始纠结小数次幂该怎么写，想到级数展开的解法后怀着对时间复杂度的忐忑实现了，也非常不让人失望地耗时过长了。</p>
<p>回过头一想：double的精度其实挺够用的(如果把整数部分也用来存小数)，才发现自己走远了。</p>
<p>虽然完成了项目要求，但我认为仅仅是高精度这一个算法就还有无数值得我去了解的内容，何况是C++这一整门课呢？</p>
<p><del>个人很喜欢这种能够用10~20小时左右做一个小项目的形式，耐心、心性和debug能力都有了显著的磨练和提升。</del></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ Project01设计报告 乘法计算器</title>
    <url>/2022/11/05/CS205_%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A_Multiplication_Calculator/</url>
    <content><![CDATA[<h2 id="Part-0-团队成员"><a href="#Part-0-团队成员" class="headerlink" title="Part 0. 团队成员"></a>Part 0. <del>团队</del>成员</h2><div class="table-container">
<table>
<thead>
<tr>
<th>姓名</th>
<th>学号</th>
<th><del>贡献率</del></th>
</tr>
</thead>
<tbody>
<tr>
<td>咕桃</td>
<td>-</td>
<td><del>100%</del></td>
</tr>
</tbody>
</table>
</div>
<h2 id="Part-1-Analysis"><a href="#Part-1-Analysis" class="headerlink" title="Part 1 - Analysis"></a>Part 1 - Analysis</h2><h3 id="题目重述-amp-主要思路"><a href="#题目重述-amp-主要思路" class="headerlink" title="题目重述&amp;主要思路"></a>题目重述&amp;主要思路</h3><p>本题目要求实现一个能将若干格式下的两个数进行乘法运算的简单计算器。</p>
<p>根据题目所给样例，可以分析出题目基础要求的数据类型：</p>
<ol>
<li>整数</li>
<li>浮点数</li>
<li>大整数</li>
<li>浮点数(科学计数法)</li>
</ol>
<p>其中对于程序设计要求最高的为<strong>大整数</strong>和<strong>浮点数(科学计数法格式)</strong>的运算，因此笔者在设计程序时选择实现<strong>大整数(科学计数法格式)</strong>以便一次性适配题目要求的所有格式，除基础要求外，本项目支持以下功能：</p>
<ol>
<li>大整数(科学计数法)</li>
<li>带有K/M/G/T后缀的大整数</li>
<li>大浮点数</li>
<li>大浮点数(科学计数法)</li>
<li>带有K/M/G/T后缀的大浮点数</li>
<li>简写形式大浮点数</li>
<li>自定义精度计算</li>
<li>显示数据类型</li>
<li>显示科学计数法格式转换过程</li>
<li>交互式输入输出</li>
</ol>
<h3 id="模型假设"><a href="#模型假设" class="headerlink" title="模型假设"></a>模型假设</h3><p>由于题目所给信息较少，笔者对输入的数据范围等进行了假设，并根据假设设计程序。</p>
<p>以下是本程序适配的数据范围：</p>
<p>对于一个科学计数法浮点数，格式记为$A.BeC$</p>
<p>整数部分$A$与小数部分$B$位数之和记为$n$，$1\leq n \leq 10^{4}$，即存储一万位有效数字</p>
<p>10的幂指数记为$C$，$-10^{18}\leq C \leq 10^{18}$，即存储上限为$10^{10^{18}}$量级</p>
<h3 id="高精度乘法"><a href="#高精度乘法" class="headerlink" title="高精度乘法"></a>高精度乘法</h3><p>对于<code>__int128</code>也无法存下的大数，此处使用了高精度乘法的算法进行运算。</p>
<p>模拟竖式计算的基础高精度乘法算法复杂度为$O(n^2)$，对于10000位有效数字，一般能在秒级时间内得出运算结果，因此使用该算法解决问题是可以接受的，<del>就不劳压位乃至FFT和NTT牛刀杀鸡了</del>。</p>
<p>高精度乘法作为广为人知的入门算法，此处不再过多赘述细节，仅简述其思路：</p>
<p>以$A*B=C$为例，$A$和$B$位数记为$n_A,n_B$</p>
<ol>
<li><p>调整$A&gt;B$。</p>
</li>
<li><p>采用<code>short</code>数组，按位存储$A$和$B$的有效数字。</p>
</li>
<li><p>模拟竖式计算，先遍历两个乘数每一位相乘的值，加到结果数的对应位。</p>
<p>$C[p]=\sum^{p-1}_{i=1}\sum^{p-i}_{j=1}A[i]*B[j]$</p>
</li>
<li><p>从低位到高位取模进位。</p>
</li>
<li><p>调整结果数位数，加和幂指数，输出结果。</p>
</li>
</ol>
<h3 id="多类型数据的输入、互化、交叉运算"><a href="#多类型数据的输入、互化、交叉运算" class="headerlink" title="多类型数据的输入、互化、交叉运算"></a>多类型数据的输入、互化、交叉运算</h3><p>对于合法输入的多类型数据，程序将其分为7类，并使用简洁的正则表达式进行类型识别，识别不同类型后，再通过分支使用不同构造方法进行拆分存储。</p>
<p>本题中的运算涉及科学计数法，因此笔者采用了向上兼容，将所有数字预处理为科学计数法整数格式，即通过将位数存储于幂指数中的方式，保证次幂前数字在$(1,10)$之间，免去了传统高精度浮点运算中对齐小数点的繁杂，同时规避了不同类型数据之间的互化问题。</p>
<p>由于上述处理，程序仅需满足同一类型的乘法，笔者采用简洁的重载运算符写法，具有优秀的普适性和拓展性。</p>
<h2 id="Part-2-Code"><a href="#Part-2-Code" class="headerlink" title="Part 2 - Code"></a>Part 2 - Code</h2><h3 id="正则表达式与数据类型"><a href="#正则表达式与数据类型" class="headerlink" title="正则表达式与数据类型"></a>正则表达式与数据类型</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">const</span> regex <span class="title">pure_int</span><span class="params">(<span class="string">&quot;^[+-]?[0-9]+$&quot;</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">const</span> regex <span class="title">int_with_e</span><span class="params">(<span class="string">&quot;^[+-]?[0-9]+e[+-]?[0-9]+$&quot;</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">const</span> regex <span class="title">int_with_suffix</span><span class="params">(<span class="string">&quot;^[+-]?[0-9]+[kKmMgGtT]$&quot;</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">const</span> regex <span class="title">pure_float</span><span class="params">(<span class="string">&quot;^[+-]?[0-9]+.[0-9]+$&quot;</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">const</span> regex <span class="title">float_with_e</span><span class="params">(<span class="string">&quot;^[+-]?[0-9]+.[0-9]+e[+-]?[0-9]+$&quot;</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">const</span> regex <span class="title">float_with_suffix</span><span class="params">(<span class="string">&quot;^[+-]?[0-9]+.[0-9]+[kKmMgGtT]$&quot;</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="type">const</span> regex <span class="title">abbreviated_float</span><span class="params">(<span class="string">&quot;^[+-]?.[0-9]+$&quot;</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">data_type</span></span><br><span class="line">&#123;</span><br><span class="line">    NaN, PURE_INT, INT_WITH_E, INT_WITH_SUFFIX, PURE_FLOAT, FLOAT_WITH_E, FLOAT_WITH_SUFFIX, ABBR_FLOAT</span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">const</span> string type_name[] = &#123;<span class="string">&quot;NaN&quot;</span>, <span class="string">&quot;PURE_INT&quot;</span>, <span class="string">&quot;INT_WITH_E&quot;</span>, <span class="string">&quot;INT_WITH_SUFFIX&quot;</span>, <span class="string">&quot;PURE_FLOAT&quot;</span>, <span class="string">&quot;FLOAT_WITH_E&quot;</span>, <span class="string">&quot;FLOAT_WITH_SUFFIX&quot;</span>, <span class="string">&quot;ABBR_FLOAT&quot;</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>上文提到，程序将合法输入数据分为7类，分别为：纯整数、带有幂指数的整数、带有后缀的整数(kmgt)、纯浮点数、带有幂指数的浮点数、带有后缀的浮点数、简写浮点数。</p>
<p>此处使用enum进行记录，<code>classifier()</code>函数中集成正则表达式进行识别分类。在本程序中，以下样例所示格式的输入均合法：</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">PURE_INT : <span class="number">-19260817</span></span><br><span class="line">INT_WITH_E : <span class="number">-1926e-0817</span></span><br><span class="line">INT_WITH_SUFFIX : <span class="number">-19260817</span>k</span><br><span class="line">PURE_FLOAT : <span class="number">-1926.0817</span></span><br><span class="line">FLOAT_WITH_E : <span class="number">-1926.08e-17</span></span><br><span class="line">FLOAT_WITH_SUFFIX : <span class="number">-1926.0817</span>k</span><br><span class="line">ABBR_FLOAT : <span class="number">-.19260817</span></span><br></pre></td></tr></table></figure>
<h3 id="存储结构"><a href="#存储结构" class="headerlink" title="存储结构"></a>存储结构</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">BigNum</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> len;</span><br><span class="line">    <span class="type">short</span> val[<span class="number">10005</span>];<span class="comment">//1e4 digits, from low to high</span></span><br><span class="line">    <span class="type">bool</span> sign;<span class="comment">//true: +</span></span><br><span class="line">    ll exp;</span><br><span class="line">    data_type type;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>对于数据，此处使用结构体进行统一存储，$len$存储有效位数、$val[]$从低位到高位存储各位数字，$sign$存储符号，$exp$存储幂指数，$type$则存储数据类型(其实最后几乎都会变成<code>INT_WITH_E</code>)。使用结构体为后续的构造器、重载运算符带来便利。</p>
<h3 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h3><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">BigNum</span>(string s)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">transform</span>(s.<span class="built_in">begin</span>(), s.<span class="built_in">end</span>(), s.<span class="built_in">begin</span>(), ::tolower);</span><br><span class="line">        <span class="keyword">this</span>-&gt;type = <span class="built_in">classifier</span>(s);</span><br><span class="line">        <span class="keyword">switch</span> (type)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> PURE_INT:...</span><br><span class="line">            <span class="keyword">case</span> INT_WITH_E:...</span><br><span class="line">            <span class="keyword">case</span> INT_WITH_SUFFIX:...</span><br><span class="line">            <span class="keyword">case</span> PURE_FLOAT:...</span><br><span class="line">            <span class="keyword">case</span> FLOAT_WITH_E:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> dot_pos = s.<span class="built_in">find</span>(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">                <span class="keyword">this</span>-&gt;sign = <span class="literal">true</span>;</span><br><span class="line">                <span class="type">int</span> e_pos = s.<span class="built_in">find</span>(<span class="string">&#x27;e&#x27;</span>);</span><br><span class="line">                ll base_exp = -(e_pos - dot_pos - <span class="number">1</span>);</span><br><span class="line">                s.<span class="built_in">erase</span>(dot_pos, <span class="number">1</span>);</span><br><span class="line">                e_pos--;</span><br><span class="line">                <span class="keyword">if</span> (s[e_pos + <span class="number">1</span>] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    e_pos++;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = e_pos + <span class="number">1</span>; i &lt; s.<span class="built_in">size</span>(); i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    exp *= <span class="number">10</span>;</span><br><span class="line">                    exp += s[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (s[e_pos] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    exp = -exp;</span><br><span class="line">                    e_pos--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (s[<span class="number">0</span>] == <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">this</span>-&gt;sign = <span class="literal">false</span>;</span><br><span class="line">                    s.<span class="built_in">erase</span>(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">                    e_pos--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= e_pos; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">this</span>-&gt;val[i] = s[e_pos - i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">this</span>-&gt;exp += base_exp;</span><br><span class="line">                <span class="keyword">this</span>-&gt;len = e_pos;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> FLOAT_WITH_SUFFIX:...</span><br><span class="line">            <span class="keyword">case</span> ABBR_FLOAT:...</span><br><span class="line">            <span class="keyword">default</span>:...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>在<code>classifier()</code>识别类别后，构造器针对不同类别数据，传入字符串，生成新结构体。</p>
<p>各类型思路类似，此处仅展示相对复杂的<code>FLOAT_WITH_E</code>类型的构造过程，主要分为以下三步:</p>
<ol>
<li>记录小数点对$exp$的贡献，抹除小数点，加和原有$exp$。</li>
<li>记录符号并抹除。</li>
<li>按位取模存储，记录$len$。</li>
</ol>
<h3 id="规范化格式"><a href="#规范化格式" class="headerlink" title="规范化格式"></a>规范化格式</h3><p>在运算前，首先进行格式规范化，将末位0全部纳入幂指数后抹除，降低计算复杂度。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function">BigNum <span class="title">standardize_exp</span><span class="params">(BigNum a)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    BigNum c;</span><br><span class="line">    c.type = PURE_INT;</span><br><span class="line">    c.len = <span class="number">0</span>;</span><br><span class="line">    c.sign = a.sign;</span><br><span class="line">    c.exp = a.exp;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= a.len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.val[i] == <span class="number">0</span> &amp;&amp; c.len == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            c.exp++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            c.val[++c.len] = a.val[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (c.exp)</span><br><span class="line">    &#123;</span><br><span class="line">        c.type = INT_WITH_E;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="重载运算符"><a href="#重载运算符" class="headerlink" title="重载运算符"></a>重载运算符</h3><p>此处重载了比较符<code>&lt;</code>和乘法符<code>*</code>。</p>
<p>比较符的主要作用是将较大的数放在竖式上方，因此不考虑符号。思路简单：规范化→比幂指数→从高到低逐位比较。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="keyword">operator</span>&lt;(BigNum a, BigNum b)<span class="comment">//抛开符号比大小</span></span><br><span class="line">&#123;</span><br><span class="line">    a = <span class="built_in">standardize_exp</span>(a);</span><br><span class="line">    b = <span class="built_in">standardize_exp</span>(b);</span><br><span class="line">    <span class="keyword">if</span> (a.exp == b.exp)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = a.len; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (a.val[i] != b.val[i])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> a.val[i] &lt; b.val[i];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;<span class="comment">//a==b</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a.exp &lt; b.exp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>乘法重载原理已在上文提过，此处模拟竖式计算就好。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">BigNum <span class="keyword">operator</span>*(BigNum a, BigNum b)</span><br><span class="line">&#123;</span><br><span class="line">    a = <span class="built_in">standardize_exp</span>(a);</span><br><span class="line">    b = <span class="built_in">standardize_exp</span>(b);</span><br><span class="line">    BigNum c, t;</span><br><span class="line">    c.exp = a.exp + b.exp;</span><br><span class="line">    c.sign = !(a.sign <span class="keyword">xor</span> b.sign);</span><br><span class="line">    c.len = a.len + b.len + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; b)</span><br><span class="line">    &#123;</span><br><span class="line">        t = a;</span><br><span class="line">        a = b;</span><br><span class="line">        b = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= a.len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= b.len; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            c.val[i + j - <span class="number">1</span>] += a.val[i] * b.val[j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= c.len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (c.val[i] &gt;= <span class="number">10</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            c.val[i + <span class="number">1</span>] += c.val[i] / <span class="number">10</span>;</span><br><span class="line">            c.val[i] %= <span class="number">10</span>;</span><br><span class="line">            c.len = <span class="built_in">max</span>(c.len, i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    c = <span class="built_in">standardize_exp</span>(c);</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="输出结果"><a href="#输出结果" class="headerlink" title="输出结果"></a>输出结果</h3><p>输出函数<code>print_BigNum(BigNum a, ll constraint)</code>初始默认以科学计数法格式，输出无精度损失的结果。</p>
<p>但有时候我们并不关心小数点后第10位是什么，因此该函数的<code>constraint</code>参数限定了小数点后的位数，通过四舍五入的方式，使得输出结果不会过于冗长。</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">print_BigNum</span><span class="params">(BigNum a, ll constraint)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    string res = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    a = <span class="built_in">standardize_exp</span>(a);</span><br><span class="line">    <span class="type">bool</span> flg = <span class="literal">false</span>;</span><br><span class="line">    ll cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = a.len; i &gt;= <span class="number">1</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.val[i] != <span class="number">0</span> || flg)</span><br><span class="line">        &#123;</span><br><span class="line">            cnt++;</span><br><span class="line">            <span class="keyword">if</span> (constraint != <span class="number">-1</span> &amp;&amp; cnt &lt;= constraint + <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                flg = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">if</span>(cnt==constraint+<span class="number">1</span>&amp;&amp;(i&gt;<span class="number">1</span>&amp;&amp;a.val[i<span class="number">-1</span>]&gt;=<span class="number">5</span>))<span class="comment">//四舍五入</span></span><br><span class="line">                &#123;</span><br><span class="line">                    res = res + (<span class="type">char</span>) (a.val[i] + <span class="string">&#x27;1&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    res = res + (<span class="type">char</span>) (a.val[i] + <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (constraint == <span class="number">-1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                res = res + (<span class="type">char</span>) (a.val[i] + <span class="string">&#x27;0&#x27;</span>);</span><br><span class="line">                flg = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!flg)</span><br><span class="line">    &#123;</span><br><span class="line">        res = res + <span class="string">&quot;0&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (res.<span class="built_in">size</span>() &gt; <span class="number">1</span> || a.exp)</span><br><span class="line">    &#123;</span><br><span class="line">        ll new_exp = a.exp + cnt - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="built_in">size</span>() &gt; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            res.<span class="built_in">insert</span>(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (new_exp)</span><br><span class="line">        &#123;</span><br><span class="line">            res += <span class="string">&quot;e&quot;</span>;</span><br><span class="line">            stringstream ss;</span><br><span class="line">            string tmp_s;</span><br><span class="line">            ss.<span class="built_in">clear</span>();</span><br><span class="line">            ss &lt;&lt; new_exp;</span><br><span class="line">            res = res + ss.<span class="built_in">str</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!a.sign)</span><br><span class="line">    &#123;</span><br><span class="line">        res = <span class="string">&quot;-&quot;</span> + res;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="用户交互"><a href="#用户交互" class="headerlink" title="用户交互"></a>用户交互</h3><p>本程序设计了用户友好的交互命令，命令列表如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-h help</span><br><span class="line">-t type_list</span><br><span class="line">-p [num] set precision</span><br><span class="line">-s show datatype</span><br><span class="line">-c show data convert</span><br><span class="line">-q quit</span><br></pre></td></tr></table></figure>
<p>分别实现了：帮助列表、支持的数据类型列表、设置小数点后保留位数、展示输入数据类型、展示转换后数据类型、退出功能，且本程序除了支持命令行参数输入单次计算外，在收到<code>-q</code>指令前也支持多次输入计算，并对错误输入进行报错。<del>并且使用了&gt;&gt;&gt;来让计算器看起来比较像某种语言的交互式界面。</del></p>
<h2 id="Part-3-Result-amp-Verification"><a href="#Part-3-Result-amp-Verification" class="headerlink" title="Part 3 - Result &amp; Verification"></a>Part 3 - Result &amp; Verification</h2><h3 id="基础要求"><a href="#基础要求" class="headerlink" title="基础要求"></a>基础要求</h3><p>Test case #1: 整数乘法</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925015232703.png" alt="image-20220925015232703" style="zoom:67%;" /></p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925083649225.png" alt="image-20220925083649225" style="zoom: 33%;" /></p>
<p>Test case #2: 浮点数乘法</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925015341290.png" alt="image-20220925015341290" style="zoom:67%;" /></p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925083735712.png" alt="image-20220925083735712" style="zoom:50%;" /></p>
<p>Test case #3: 大整数乘法</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925015438229.png" alt="image-20220925015438229"></p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925083840850.png" alt="image-20220925083840850"></p>
<p>Test case #4: 大浮点数乘法</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925015645989.png" alt="image-20220925015645989" style="zoom:67%;" /></p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925084538204.png" alt="image-20220925084538204"></p>
<p>(windows的科学计算器到这里精度就不够了)</p>
<p>Test case #5: 错误输入</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925015809404.png" alt="image-20220925015809404" style="zoom: 67%;" /></p>
<h3 id="进阶测试"><a href="#进阶测试" class="headerlink" title="进阶测试"></a>进阶测试</h3><p>Bunched test cases : 混合格式多组输入、鲁棒性…</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925021142752.png" alt="image-20220925021142752"></p>
<h3 id="拓展测试"><a href="#拓展测试" class="headerlink" title="拓展测试"></a>拓展测试</h3><p>Bunched test cases : 用户交互、精度设置、数据类型、数据转换、鲁棒性…</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925022112312.png" alt="image-20220925022112312"></p>
<p>Big number test case : 1000位*1000位，运行耗时52ms(含IO时间)，用户态CPU耗时11ms，系统态CPU耗时12ms。</p>
<p>输入：</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925083224925.png" alt="image-20220925083224925"></p>
<p>输出：</p>
<p><img src="C:\Users\first_fan\AppData\Roaming\Typora\typora-user-images\image-20220925083249101.png" alt="image-20220925083249101"></p>
<h2 id="Part-4-Difficulties-amp-Solutions"><a href="#Part-4-Difficulties-amp-Solutions" class="headerlink" title="Part 4 - Difficulties &amp; Solutions"></a>Part 4 - Difficulties &amp; Solutions</h2><h3 id="读入与存储"><a href="#读入与存储" class="headerlink" title="读入与存储"></a>读入与存储</h3><p><strong>Difficulty</strong>：本次项目的一大难题在于输入数据的格式多样且未知，因此如何将各种格式的字符串转化为数字，以何种形式存储再进行计算是项目的核心所在。</p>
<p><strong>Solution</strong>：通过自己可能的输入格式进行设计，利用正则表达式处理字符串，向上兼容全部以<code>INT_WITH_E</code>格式存储，减少了对齐小数点等繁杂过程。</p>
<h3 id="高精度"><a href="#高精度" class="headerlink" title="高精度"></a>高精度</h3><p><strong>Difficulty</strong>：对于大数的运算，无法使用原生的数据类型进行存储。</p>
<p><strong>Solution</strong>：利用结构体按位存储，重载高精度乘法运算，计算时直接使用即可。</p>
<h3 id="输出格式"><a href="#输出格式" class="headerlink" title="输出格式"></a>输出格式</h3><p><strong>Difficulty</strong>：对于不同的输入，应该采用怎样的输出格式？</p>
<p><strong>Solution</strong>：本项目定位是科学计算器，且采用了归一化的数据存储，因此结果只要不是-9~9的<code>PURE_INT</code>，那么就会采用科学计数法格式进行输出，统一且优雅。</p>
<h3 id="用户友好设计"><a href="#用户友好设计" class="headerlink" title="用户友好设计"></a>用户友好设计</h3><p><strong>Difficulty</strong>：用户不知道本项目支持的输入格式，需要查看数据类型、科学计数法转换结果等调试信息，有不同精度需求，有多次计算需求…</p>
<p><strong>Solution</strong>：<del>为了调试的时候更舒服，</del>实现了帮助菜单，显示调试信息命令，自定义保留位数命令，交互式输入输出…</p>
<h2 id="Part-5-Summary"><a href="#Part-5-Summary" class="headerlink" title="Part 5 - Summary"></a>Part 5 - Summary</h2><p>​        初见题目时，一眼高精，觉得相对简单；仔细一看样例，没说输入格式，样例中包含题目要求，被不同类型数据的交叉运算困扰许久；回过头一想，不管什么输入，干脆都用科学计数法存就好了，遂切。</p>
<p>​        <strong>Simple is beautiful.</strong> 写项目时，笔者也在不断删改：</p>
<ul>
<li>自学了简单的正则表达式用法，代替了原有冗长缓慢的条件语句判断。</li>
<li>使用重构运算符写法，而非函数。</li>
<li>利用构造器对输入数据进行归一化，避免了不同结构体的交叉运算。</li>
<li>对于实际需求选择了合适的算法，而非小题大做。</li>
<li>……</li>
</ul>
<p>​        笔者经过本次项目，也对WSL环境下使用命令行进行编译、调试、运行等操作有了一定的熟悉，在使用一些陌生语法时对输入输出、结构体、字符串处理有了更深的理解。</p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ Project03设计报告 C语言矩阵库</title>
    <url>/2022/11/05/CS205_%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A_Matrix_Library/</url>
    <content><![CDATA[<h2 id="Part-0-团队成员"><a href="#Part-0-团队成员" class="headerlink" title="Part 0. 团队成员"></a>Part 0. <del>团队</del>成员</h2><div class="table-container">
<table>
<thead>
<tr>
<th>姓名</th>
<th>学号</th>
<th><del>贡献率</del></th>
</tr>
</thead>
<tbody>
<tr>
<td>咕桃</td>
<td>-</td>
<td><del>100%</del></td>
</tr>
</tbody>
</table>
</div>
<h3 id="项目结构"><a href="#项目结构" class="headerlink" title="项目结构"></a>项目结构</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CS205_Project03</span><br><span class="line">│  CMakeLists.txt</span><br><span class="line">│  README.md</span><br><span class="line">│</span><br><span class="line">├─doc</span><br><span class="line">│  Report.pdf</span><br><span class="line">│</span><br><span class="line">├─inc</span><br><span class="line">│  MatrixC.h</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">   Benchmark.c</span><br><span class="line">   MatrixC.c</span><br></pre></td></tr></table></figure>
<h2 id="Part-1-Analysis"><a href="#Part-1-Analysis" class="headerlink" title="Part 1 - Analysis"></a>Part 1 - Analysis</h2><h3 id="题目重述-amp-主要思路"><a href="#题目重述-amp-主要思路" class="headerlink" title="题目重述&amp;主要思路"></a>题目重述&amp;主要思路</h3><p>本题目要求<strong>使用C语言</strong>实现一个矩阵操作库，利用结构体存储矩阵，支持<code>float</code>矩阵的函数和基本运算，并对便捷性、鲁棒性、安全性、可扩展性有较高要求。</p>
<p>根据题目描述，题目要求的矩阵运算库需要支持的主要功能为：</p>
<ol>
<li>仅使用C语言，使用CMake管理项目</li>
<li>结构体存储<code>float</code>类型矩阵</li>
<li>矩阵操作：创建、删除、复制</li>
<li>矩阵运算：矩阵加减乘，矩阵与标量四则运算，查询最值</li>
<li>矩阵函数(安全性、易用性&gt;效率)</li>
</ol>
<p>本项目除完成上述全部基础要求外，支持以下内容：</p>
<ol>
<li><strong>安全、用户友好</strong>：使用指针操作时的安全性检查，严格明确的报错和警告判定，精确、安全的内存申请与释放。</li>
<li><strong>创建函数</strong>：空矩阵、单位阵、对角阵、全赋值矩阵、随机矩阵、由数组创建矩阵、由字符串创建、由文件创建、由矩阵创建、提取子矩阵…较为丰富，可以覆盖相当程度的创建矩阵需求。</li>
<li><strong>矩阵操作</strong>：安全删除矩阵并释放内存、值复制/引用复制、交换矩阵、矩阵变形、矩阵按行/列拼接、元素修改…安全易用。</li>
<li><strong>矩阵查询</strong>：容量查询、自定义“最值”查询、单点查询、矩阵求秩、矩阵比较…安全易用易拓展。</li>
<li><strong>逐元素运算</strong>：对单个矩阵进行一元运算、对两个矩阵进行二元运算、对单个矩阵与标量进行二元运算。极易拓展，支持自定义运算函数或使用库内置函数。</li>
<li><strong>矩阵运算</strong>：矩阵加减乘、矩阵快速幂、求行列式…有两类实现：将结果存储于传入参数矩阵、将结果作为返回参数，前者节省内存，后者不影响传入矩阵。</li>
<li><strong>常用变换</strong>：矩阵上三角化、高斯消元法矩阵求逆、转置矩阵、截取矩阵…安全易用且对无法计算的情况有强鲁棒性。</li>
<li><strong>文件操作</strong>：从文件创建矩阵、输出结果到文件</li>
<li><strong>项目管理</strong>：使用CMake和GitHub管理项目。</li>
</ol>
<h3 id="模型假设"><a href="#模型假设" class="headerlink" title="模型假设"></a>模型假设</h3><p>项目要求关于应用场景仅给出了数据类型为<code>float</code>的要求，笔者考虑理工科计算所可能使用的数据范围作为本项目支持的数据规模，如下：</p>
<ul>
<li><p>单个元素均为4字节<code>float</code>类型，有效位数默认为6位，数据范围约$-3.4 \cdot 10^{-38}&lt;val&lt;3.4 \cdot 10^{38}$</p>
</li>
<li><p>矩阵行数$row$与列数$col$之积，即矩阵容量满足$size=row*col\leq10^8$</p>
</li>
<li><p>项目对安全性要求&gt;计算效率，因此尽可能使用浅显稳定的算法，细节处有对效率的提升。</p>
</li>
</ul>
<h2 id="Part-2-Code"><a href="#Part-2-Code" class="headerlink" title="Part 2 - Code"></a>Part 2 - Code</h2><h3 id="宏与结构体"><a href="#宏与结构体" class="headerlink" title="宏与结构体"></a>宏与结构体</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">define</span> TYPE float</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> float_equal(x, y) ((x-y)&lt;1e-5&amp;&amp;(y-x)&lt;1e-5)</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> MATRIX_MAX_CAPACITY 100000000</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">MatrixC</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">size_t</span> row;</span><br><span class="line">    <span class="type">size_t</span> col;</span><br><span class="line">    TYPE *data;</span><br><span class="line">&#125; Matrix;</span><br></pre></td></tr></table></figure>
<p>本项目中，所有涉及矩阵元素下标的迭代变量均使用标准库常用的<code>size_t</code>类型，提高库在不同平台间的可移植性。</p>
<p>项目默认类型为<code>float</code>，笔者挺想做成类模板一样的可拓展形式，但由于C结构体不能像C++类一样使用模板，因而此处以宏进行丐版替代，有需求时可以调整<code>TYPE</code>，并对一些运算细节做微调就能适用不同数据类型。</p>
<p>经课程提醒，<code>float</code>类型的精度损失常导致<code>==</code>不能按预期判断相等，因此以宏的形式实现了浮点判等，误差在$10^{-5}$以内的数判断为相等。</p>
<p>矩阵容量上限为$10^8$个浮点元素，满足大部分情景的需求。</p>
<p>矩阵元素均存储于浮点指针<code>data</code>所指向的“一维浮点数组”中，data的容量由创建时赋为$row*col$后不作改变，更改方式仅有释放内存后重定向指针，从而避免了正常使用下段错误的发生。</p>
<hr>
<p><strong>在<a href="https://github.com/GuTaoZi/CS205_Project03/blob/master/inc/MatrixC.h">MatrixC.h</a>头文件中，记录了本项目实现的矩阵相关的函数，经整理分为以下若干类：</strong></p>
<h3 id="创建矩阵"><a href="#创建矩阵" class="headerlink" title="创建矩阵"></a>创建矩阵</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Functions For Creating Matrices</span></span><br><span class="line">Matrix *<span class="title function_">create_empty</span><span class="params">(<span class="type">size_t</span> row, <span class="type">size_t</span> col)</span>;<span class="comment">//空矩阵</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_full</span><span class="params">(<span class="type">size_t</span> row, <span class="type">size_t</span> col, TYPE value)</span>;<span class="comment">//全部赋相同值</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_from_array</span><span class="params">(TYPE *src, <span class="type">size_t</span> row, <span class="type">size_t</span> col)</span>;<span class="comment">//由数组赋值</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_from_string</span><span class="params">(<span class="type">char</span> *src, <span class="type">size_t</span> row, <span class="type">size_t</span> col)</span>;<span class="comment">//由字符串赋值</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_from_file</span><span class="params">(<span class="type">char</span> *f_path, <span class="type">size_t</span> row, <span class="type">size_t</span> col)</span>;<span class="comment">//由文件赋值</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_copy</span><span class="params">(Matrix *src)</span>;<span class="comment">//创建浅拷贝</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_identity</span><span class="params">(<span class="type">size_t</span> order)</span>;<span class="comment">//单位阵</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_diagonal</span><span class="params">(TYPE *src, <span class="type">size_t</span> order)</span>;<span class="comment">//传入数组→对角阵</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">create_random</span><span class="params">(<span class="type">size_t</span> row, <span class="type">size_t</span> col)</span>;<span class="comment">//随机阵</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">sub_matrix</span><span class="params">(Matrix *src, <span class="type">size_t</span> row_begin, <span class="type">size_t</span> col_begin, <span class="type">size_t</span> row_end, <span class="type">size_t</span> col_end)</span>;<span class="comment">//子矩阵截取</span></span><br></pre></td></tr></table></figure>
<p>命名一目了然，简洁易懂，功能齐全，此处以创建空矩阵为例浅谈安全的实现：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">create_empty</span><span class="params">(<span class="type">size_t</span> row, <span class="type">size_t</span> col)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (row * col == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal matrix size&quot;</span>, <span class="string">&quot;Row and Col should be positive integers.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (row * col &gt; MATRIX_MAX_CAPACITY)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal matrix size&quot;</span>, <span class="string">&quot;The maximum size of matrix is row*col=1e8.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Matrix));</span><br><span class="line">    new-&gt;row = row;</span><br><span class="line">    new-&gt;col = col;</span><br><span class="line">    new-&gt;data = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(TYPE) * row * col);</span><br><span class="line">    <span class="keyword">return</span> new;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>传入参数为两个<code>size_t</code>类型变量(unsigned)，首先检查尺寸的合法性：$0&lt;row*col\leq10^8$，不对就报错返空(返回的<code>NULL</code>指针在后续的使用中也会严格检查)</li>
<li>使用<code>malloc</code>为新矩阵指针<code>new</code>分配一个<code>Matrix</code>类型的内存，其中包含结构体的两个<code>size_t</code>类型变量，即刻为其赋值。</li>
<li>对分配的一个<code>float *</code>浮点数指针变量申请$row*col$大小的内存。</li>
<li>返回矩阵指针，创建完毕。</li>
</ol>
<p>其他矩阵的创建均有调用该函数，实现简单，并检查了返回<code>NULL</code>等情况，此处不做赘述。</p>
<hr>
<h3 id="矩阵级别操作"><a href="#矩阵级别操作" class="headerlink" title="矩阵级别操作"></a>矩阵级别操作</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Functions For Matrix Operations</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">delete_matrix</span><span class="params">(Matrix **pmat)</span>;<span class="comment">//安全删除</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">reshape_matrix</span><span class="params">(Matrix *src, <span class="type">size_t</span> row, <span class="type">size_t</span> col)</span>;<span class="comment">//不变尺寸的矩阵变形</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">copy_matrix</span><span class="params">(Matrix *dest, Matrix *src)</span>;<span class="comment">//值复制</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ref_matrix</span><span class="params">(Matrix *dest, Matrix *src)</span>;<span class="comment">//引用复制</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">swap_matrix</span><span class="params">(Matrix *first, Matrix *second)</span>;<span class="comment">//交换矩阵</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">col_concat</span><span class="params">(Matrix *first, Matrix *second)</span>;<span class="comment">//按列拼接</span></span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">row_concat</span><span class="params">(Matrix *first, Matrix *second)</span>;<span class="comment">//按行拼接</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">set_value</span><span class="params">(Matrix *pmat, <span class="type">size_t</span> row, <span class="type">size_t</span> col, TYPE value)</span>;<span class="comment">//单点修改</span></span><br></pre></td></tr></table></figure>
<p>上述函数分别为：删除、变形、浅拷贝、深拷贝、交换、按列拼接、按行拼接。</p>
<p>原本前五个是无返回函数，笔者觉得返回值不能就这么浪费了，因此传回布尔型，代表该操作是否成功进行(若发生异常会输出报错/警告信息，并返回false)。</p>
<p>以下是部分函数的展开讲解（其他的实现原理简单且类似，故不做赘述）：</p>
<h3 id="删除矩阵"><a href="#删除矩阵" class="headerlink" title="删除矩阵"></a>删除矩阵</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">delete_matrix</span><span class="params">(Matrix **pmat)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (pmat == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The address of the pointer to the matrix is null, delete process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((*pmat) == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>, <span class="string">&quot;The pointer to the matrix is null, delete process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">free</span>((*pmat)-&gt;data);</span><br><span class="line">    <span class="built_in">free</span>(*pmat);</span><br><span class="line">    *pmat = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>矩阵的删除函数步骤如下：</p>
<ol>
<li>判断空指针并报错</li>
<li>释放结构体内浮点指针所指内存</li>
<li>释放结构体内存</li>
<li>置空指针</li>
</ol>
<p>本项目将指针指针(指针的地址)作为传入参数，这是由于C在处理空指针时有良好的鲁棒性(如<code>free(NULL)</code>将不进行操作)，在释放结构体内存后将指向结构体的<strong>指针本身置空</strong>，可以避免<strong>对野指针进行操作</strong>的高危行为。</p>
<p>然而将指针本身作为传入参数进行值传递后，在函数内将传入参数置空并不耽误原指针还是野指针，C也没有引用，故传入指针的指针对原指针进行置空。</p>
<p>值得一提，虽然C对于“释放空指针的内存”有所提防，但本函数依然对传入指针为空的情况做了报错，让用户清楚地知道可能进行了<strong>释放空指针所指内存</strong>这样的行为。</p>
<h3 id="复制矩阵"><a href="#复制矩阵" class="headerlink" title="复制矩阵"></a>复制矩阵</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">copy_matrix</span><span class="params">(Matrix **dest, Matrix *src)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (src == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The pointer to source matrix is null, copy process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (*dest == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        *dest = create_copy(src);</span><br><span class="line">        <span class="keyword">if</span> (*dest == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        print_warning(<span class="string">&quot;Copy into null matrix&quot;</span>,</span><br><span class="line">                      <span class="string">&quot;The pointer to destination matrix is null, the pointer will point to a copy matrix of source matrix.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (((*dest)-&gt;row != src-&gt;row) || ((*dest)-&gt;col != src-&gt;col))</span><br><span class="line">        &#123;</span><br><span class="line">            print_warning(<span class="string">&quot;Copy into matrix of different sizes&quot;</span>,</span><br><span class="line">                          <span class="string">&quot;The sizes of two matrices are different, the data of destination matrix will be covered by source matrix.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        delete_matrix(dest);</span><br><span class="line">        *dest = create_copy(src);</span><br><span class="line">        <span class="keyword">if</span> (*dest == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">ref_matrix</span><span class="params">(Matrix **dest, Matrix *src)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (src == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The pointer to source matrix is null, copy process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(*dest!=<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        delete_matrix(dest);</span><br><span class="line">    &#125;</span><br><span class="line">    *dest = src;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>两种复制的实现都很简洁安全：若目标矩阵为空则会为其申请空间并复制，若目标矩阵与源矩阵尺寸不同会警告用户复制将覆盖目标矩阵原有信息，且对可能出现的错误进行报错处理。</p>
<h3 id="拼接矩阵"><a href="#拼接矩阵" class="headerlink" title="拼接矩阵"></a>拼接矩阵</h3><p>由于高斯消元求逆过程用到了按行拼接，此处对其进行简单讲解：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">row_concat</span><span class="params">(Matrix *first, Matrix *second)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">NULL</span> || second == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>, <span class="string">&quot;The pointer to source matrix is null, concat process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (first-&gt;row != second-&gt;row)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal matrix shape&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The number of row of source matrices should be the same, concat process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new = create_empty(first-&gt;row, first-&gt;col + second-&gt;col);</span><br><span class="line">    <span class="keyword">if</span> (new == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; first-&gt;row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; first-&gt;col; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            new-&gt;data[i * new-&gt;col + j] = first-&gt;data[i * first-&gt;col + j];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; second-&gt;col; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            new-&gt;data[i * new-&gt;col + j + first-&gt;col] = second-&gt;data[i * second-&gt;col + j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> new;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>按行拼接的步骤如下：</p>
<ol>
<li>检查空指针，检查两个矩阵行数是否相等并报错</li>
<li>新建合并大小的空矩阵指针<code>new</code>，检查大小是否在合法范围内</li>
<li>逐行将两个矩阵的值传入<code>new</code></li>
<li>返回<code>new</code></li>
</ol>
<p>拼接原理即按行赋值，左边<code>first</code>，右边<code>second</code>。容易忽视的漏洞是拼接前两个大小合适的矩阵可能在拼接后超限，此时不应对空指针<code>new</code>进行赋值，而应报错。</p>
<hr>
<h3 id="查询操作"><a href="#查询操作" class="headerlink" title="查询操作"></a>查询操作</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Functions For Querying In Matrices</span></span><br><span class="line"><span class="type">size_t</span> <span class="title function_">size_of</span><span class="params">(Matrix *pmat)</span>;<span class="comment">//查询容量</span></span><br><span class="line"></span><br><span class="line"><span class="type">size_t</span> <span class="title function_">rank</span><span class="params">(Matrix *pmat)</span>;<span class="comment">//矩阵求秩</span></span><br><span class="line"></span><br><span class="line">TYPE <span class="title function_">get_value</span><span class="params">(Matrix *src, <span class="type">size_t</span> row, <span class="type">size_t</span> col)</span>;<span class="comment">//单点查询</span></span><br><span class="line"></span><br><span class="line">TYPE <span class="title function_">max</span><span class="params">(Matrix *src)</span>;<span class="comment">//矩阵最大值</span></span><br><span class="line"></span><br><span class="line">TYPE <span class="title function_">min</span><span class="params">(Matrix *src)</span>;<span class="comment">//矩阵最小值</span></span><br><span class="line"></span><br><span class="line">TYPE <span class="title function_">extreme_value</span><span class="params">(Matrix *src, <span class="type">bool</span> (*fun)(TYPE, TYPE))</span>;<span class="comment">//矩阵自定义“最值”</span></span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">equal</span><span class="params">(Matrix *first, Matrix *second)</span>;<span class="comment">//矩阵判等</span></span><br></pre></td></tr></table></figure>
<p>矩阵求秩主要依靠上三角化实现，矩阵的秩即上三角化后非零行的数量，详见下文上三角化函数。</p>
<h3 id="自定义最值"><a href="#自定义最值" class="headerlink" title="自定义最值"></a>自定义最值</h3><p>求最值的思路是遍历<code>data</code>数组并逐个比较，方法朴素但安全，易于维护，下面简述可扩展的<code>extreme_value</code>函数：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">TYPE <span class="title function_">extreme_value</span><span class="params">(Matrix *src, <span class="type">bool</span> (*cmp)(TYPE, TYPE))</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (src == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The pointer to source matrix is null, return NaN.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> nanf(<span class="string">&quot;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    TYPE ans = src-&gt;data[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">1</span>; i &lt; size_of(src); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (cmp(src-&gt;data[i], ans))</span><br><span class="line">        &#123;</span><br><span class="line">            ans = src-&gt;data[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>矩阵自定义最值的步骤如下：</p>
<ol>
<li>判断空指针并报错，返回<code>NaN</code></li>
<li>根据<code>cmp</code>函数逐个比较矩阵元素</li>
<li>返回答案</li>
</ol>
<p>此处将函数指针作为第三参数传入，实现了“比较”过程的自定义可拓展，对于<code>TYPE</code>类型的数据，比较规则可以通过自定义<code>cmp</code>函数进行调整，灵感来自于<code>sort</code>的自定义比较函数。</p>
<hr>
<h3 id="自定义矩阵运算"><a href="#自定义矩阵运算" class="headerlink" title="自定义矩阵运算"></a>自定义矩阵运算</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Functions For Customized Calculation</span></span><br><span class="line">TYPE <span class="title function_">plus</span><span class="params">(TYPE first, TYPE second)</span>;</span><br><span class="line"></span><br><span class="line">TYPE <span class="title function_">minus</span><span class="params">(TYPE first, TYPE second)</span>;</span><br><span class="line"></span><br><span class="line">TYPE <span class="title function_">mul</span><span class="params">(TYPE first, TYPE second)</span>;</span><br><span class="line"></span><br><span class="line">TYPE <span class="title function_">divide</span><span class="params">(TYPE first, TYPE second)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Functions For Matrix Calculation</span></span><br><span class="line">Matrix *<span class="title function_">unary_calc</span><span class="params">(Matrix *pmat, TYPE(*fun)(TYPE))</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">binary_calc</span><span class="params">(Matrix *first, Matrix *second, TYPE (*fun)(TYPE, TYPE))</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">scalar_calc</span><span class="params">(Matrix *pmat, TYPE scalar, TYPE(*fun)(TYPE, TYPE))</span>;</span><br></pre></td></tr></table></figure>
<p>考虑到我们经常要对矩阵进行逐元素的运算，例如矩阵统一求相反数是逐元素一元运算，矩阵加减法是逐元素二元运算…为了减轻用户为了不同的运算而自行实现多个函数的压力，本项目将<strong>一元、二元、矩阵与标量的运算</strong>整合为<strong>拓展性极强的函数</strong>，用户只需要自定义好运算函数，传入即可对矩阵进行<strong>逐元素的自定义运算</strong>。例如用户要对矩阵中的每个元素求正弦，那么只需要传入<code>Math.h</code>内置的<code>sinf(float x)</code>即可：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *sin_matrix = unary_calc(Matrix *pmat, sinf);</span><br></pre></td></tr></table></figure>
<p>代码部分选择二元运算进行展示：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">binary_calc</span><span class="params">(Matrix *first, Matrix *second, TYPE (*fun)(TYPE, TYPE))</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (first == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>, <span class="string">&quot;The pointer to the first matrix is null, calculation interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (second == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>, <span class="string">&quot;The pointer to the second matrix is null, calculation interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (first-&gt;row != second-&gt;row || first-&gt;col != second-&gt;col)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal matrix shape&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The shape of two matrices are different, calculation process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new = create_copy(first);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; size_of(new); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        new-&gt;data[i] = fun(new-&gt;data[i], second-&gt;data[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> new;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>步骤也很简单，检查报错→申请空间→代入运算→存入结果，简洁高效易懂。</p>
<p>也因此，题目要求的四种标量运算只用向<code>scalar_calc</code>传入<code>plus</code>, <code>minus</code>, <code>mul</code>, <code>divide</code>四个自定义函数即可。</p>
<hr>
<h3 id="矩阵计算"><a href="#矩阵计算" class="headerlink" title="矩阵计算"></a>矩阵计算</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Functions For Matrix Calculation</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">add_by</span><span class="params">(Matrix *augend, Matrix *addend)</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">matrix_add</span><span class="params">(Matrix *augend, Matrix *addend)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">subtract_by</span><span class="params">(Matrix *minuend, Matrix *subtrahend)</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">matrix_subtract</span><span class="params">(Matrix *minuend, Matrix *subtrahend)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">multiply_by</span><span class="params">(Matrix **multiplicand, Matrix *multiplier)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">multiply_to</span><span class="params">(Matrix *multiplicand, Matrix **multiplier)</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">matrix_multiply</span><span class="params">(Matrix *multiplicand, Matrix *multiplier)</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">matrix_pow</span><span class="params">(Matrix *base, <span class="type">int</span> power)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">add_scalar</span><span class="params">(Matrix *pmat, TYPE scalar)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">subtract_scalar</span><span class="params">(Matrix *pmat, TYPE scalar)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">multiply_scalar</span><span class="params">(Matrix *pmat, TYPE scalar)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">bool</span> <span class="title function_">divide_scalar</span><span class="params">(Matrix *pmat, TYPE scalar)</span>;</span><br></pre></td></tr></table></figure>
<p>矩阵运算的实际应用场景中经常会有类似<strong>自增</strong>的需求(将结果保存在两个矩阵中的其中一个)，尤其体现在矩阵的<strong>左乘和右乘</strong>等方面。</p>
<p>本项目除了实现将结果作为新结构体返回的函数，也实现了将结果存入两个矩阵之一的函数，返回值为布尔型的函数会将结果存入传入的矩阵中。布尔型的返回值代表操作是否成功，若失败则返回<code>false</code>并报错，不对传入矩阵做任何操作。</p>
<p>以下是矩阵乘法的实现：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">matrix_multiply</span><span class="params">(Matrix *multiplicand, Matrix *multiplier)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (multiplicand == <span class="literal">NULL</span> || multiplier == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The pointers to multiplicand and multiplier matrix are null, multiplication process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (multiplicand-&gt;col != multiplier-&gt;row)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal matrix shape&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The col number of multiplicand matrix should equal to row number of multiplier matrix.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new = create_full(multiplicand-&gt;row, multiplier-&gt;col, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">1</span>; i &lt;= multiplicand-&gt;row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">1</span>; k &lt;= multiplicand-&gt;col; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            TYPE t = multiplicand-&gt;data[(i - <span class="number">1</span>) * multiplicand-&gt;col + k - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">1</span>; j &lt;= multiplier-&gt;col; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                new-&gt;data[(i - <span class="number">1</span>) * new-&gt;col + j - <span class="number">1</span>] += t * multiplier-&gt;data[(k - <span class="number">1</span>) * multiplier-&gt;col + j - <span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> new;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>除了<del>已经敲到不能再熟的</del>报错环节，由于项目对效率要求并不高，因此矩阵乘法依然使用的是$O(n^3)$的传统矩阵乘法，但使用了$ikj$的三层循环顺序，可以较好地提高内存访问的连续性，具体原理参考自<a href="https://zhuanlan.zhihu.com/p/146250334">知乎用户@寨森Lambda-CDM的文章</a>。下图是摘自文章的各个循环顺序的内存访问跳跃数列表，作为参考：</p>
<p><img src="https://s2.loli.net/2022/10/29/ISBDZ7X1WxdnrPi.png" alt="不同循环顺序的条约次数"></p>
<h3 id="矩阵快速幂"><a href="#矩阵快速幂" class="headerlink" title="矩阵快速幂"></a>矩阵快速幂</h3><p>喜闻乐见的快速幂环节，具体原理为将指数二进制表示后，通过倍乘<code>base</code>矩阵将乘法次数优化到<code>log(power)</code>次，对于$O(n^3)$的矩阵乘法而言优化力度较为客观，代码如下：</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">matrix_pow</span><span class="params">(Matrix *base, <span class="type">int</span> power)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (base == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>, <span class="string">&quot;The pointer to base matrix is null, power process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (power == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> create_copy(base);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (base-&gt;row != base-&gt;col)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal matrix shape&quot;</span>, <span class="string">&quot;The base matrix should be square matrix.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (power == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> create_identity(base-&gt;row);</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new;</span><br><span class="line">    <span class="keyword">if</span> (power &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        new = create_copy(inverse(base));</span><br><span class="line">        <span class="keyword">if</span> (new == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;The source matrix has no inverse, negative power calculation interrupted.&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        power = -power;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        new = create_copy(base);</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *Base = create_copy(base);</span><br><span class="line">    power--;<span class="comment">//因为new本来就是base一次方了所以-1</span></span><br><span class="line">    <span class="keyword">while</span> (power)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (power &amp; <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            multiply_by(&amp;new, Base);</span><br><span class="line">        &#125;</span><br><span class="line">        multiply_by(&amp;Base, Base);</span><br><span class="line">        power &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> new;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>实际上，矩阵的幂运算在正整数之外并没有定义，本项目中为了便利，将矩阵的幂的定义进行拓展：</p>
<p>若矩阵为方阵，则其0次幂为单位阵；</p>
<p>若矩阵为方阵且可逆，则其负数次幂为其逆的对应正数次幂。</p>
<hr>
<h3 id="矩阵变换"><a href="#矩阵变换" class="headerlink" title="矩阵变换"></a>矩阵变换</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Functions For Matrix Transformations</span></span><br><span class="line">TYPE <span class="title function_">determinant</span><span class="params">(Matrix *pmat)</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">inverse</span><span class="params">(Matrix *pmat)</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">transpose</span><span class="params">(Matrix *pmat)</span>;</span><br><span class="line"></span><br><span class="line">Matrix *<span class="title function_">Uptriangular</span><span class="params">(Matrix *pmat)</span>;</span><br></pre></td></tr></table></figure>
<p>本节包含矩阵专属的一些常用函数：求行列式、求逆、转置、上三角化，求行列式和求逆均依赖上三角化进行。</p>
<h3 id="矩阵转置"><a href="#矩阵转置" class="headerlink" title="矩阵转置"></a>矩阵转置</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">transpose</span><span class="params">(Matrix *pmat)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (pmat == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>, <span class="string">&quot;The pointer to source matrix is null, transpose process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new = create_empty(pmat-&gt;col, pmat-&gt;row);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; pmat-&gt;row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; pmat-&gt;col; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            *(new-&gt;data + j * new-&gt;col + i) = *(pmat-&gt;data + i * pmat-&gt;col + j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> new;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>行列交换即可。</p>
<h3 id="上三角化"><a href="#上三角化" class="headerlink" title="上三角化"></a>上三角化</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">Uptriangular</span><span class="params">(Matrix *pmat)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (pmat == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The pointer to source matrix is null, uptriangular process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new = create_copy(pmat);</span><br><span class="line">    <span class="type">size_t</span> lim = new-&gt;row &lt; new-&gt;col ? new-&gt;row : new-&gt;col;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; lim; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (float_equal(new-&gt;data[i * new-&gt;col + i], <span class="number">0.0f</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> j = i + <span class="number">1</span>; j &lt; new-&gt;row; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (!float_equal(new-&gt;data[j * new-&gt;col + i], <span class="number">0.0f</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">0</span>; k &lt; new-&gt;col; k++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        TYPE t = new-&gt;data[i * new-&gt;col + k];</span><br><span class="line">                        new-&gt;data[i * new-&gt;col + k] = new-&gt;data[j * new-&gt;col + k];</span><br><span class="line">                        new-&gt;data[j * new-&gt;col + k] = t;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (float_equal(new-&gt;data[i * new-&gt;col + i], <span class="number">0.0f</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = i + <span class="number">1</span>; j &lt; new-&gt;row; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            TYPE t = new-&gt;data[j * new-&gt;col + i] / new-&gt;data[i * new-&gt;col + i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">0</span>; k &lt; new-&gt;col; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                new-&gt;data[j * new-&gt;col + k] -= new-&gt;data[i * new-&gt;col + k] * t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *res = create_full(new-&gt;row, new-&gt;col, <span class="number">0.0f</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>, it = <span class="number">0</span>; i &lt; new-&gt;row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">bool</span> emp = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; new-&gt;col; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!(float_equal(new-&gt;data[i * new-&gt;col + j], <span class="number">0.0f</span>)))</span><br><span class="line">            &#123;</span><br><span class="line">                res-&gt;data[it * res-&gt;col + j] = new-&gt;data[i * new-&gt;col + j];</span><br><span class="line">                emp = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        it += emp ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    delete_matrix(&amp;new);</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上三角化是线性代数第一课就会讲的内容，也是线性代数大部分变换的基础，实现后求逆、求行列式等操作则迎刃而解。</p>
<p>上三角化的主要步骤为：</p>
<ol>
<li><p>检查报错，记录行数与列数中较小的一个作为循环上界</p>
</li>
<li><p>按列进行，对于矩阵$A$的第$i$列：</p>
<ul>
<li><p>若$A[i][i]$非零，则将其下方的所有行减去其倍数，直到$A[i][i]$下方所有元素消为0</p>
</li>
<li><p>若$A[i][i]=0$，则向下寻找第一个$j&gt;i$使得$A[j][i]≠0$，交换第$i$行和第$j$行</p>
</li>
<li>若到达最后一行仍没有找到，则说明该列主元缺失，$rank—$</li>
</ul>
</li>
<li><p>减除完毕后，部分全零行会存在矩阵中，此时将全零行下沉到矩阵最下方，得到完整的上三角矩阵$U$。</p>
</li>
<li>释放临时矩阵，返回结果</li>
</ol>
<h3 id="矩阵求秩"><a href="#矩阵求秩" class="headerlink" title="矩阵求秩"></a>矩阵求秩</h3><p>矩阵的秩经过基础行变换不会变化，因此我们只需统计上三角化后的矩阵的非零行数量即可。</p>
<h3 id="矩阵求行列式"><a href="#矩阵求行列式" class="headerlink" title="矩阵求行列式"></a>矩阵求行列式</h3><p>对矩阵进行除了换行以外的初等行变换不会影响矩阵的行列式，换行操作会使行列式变为相反数，因此在上三角化的过程中，我们只需记录换行的次数，并对上三角阵$U$的对角元素进行累乘运算即可得到矩阵的行列式。</p>
<p>代码较上三角化仅添加了几行(换行时记录符号，最后累乘)，此处不费篇幅展示。</p>
<h3 id="矩阵求逆"><a href="#矩阵求逆" class="headerlink" title="矩阵求逆"></a>矩阵求逆</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">Matrix *<span class="title function_">inverse</span><span class="params">(Matrix *pmat)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (pmat == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The pointer to source matrix is null, inverse calculation interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pmat-&gt;row != pmat-&gt;col)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal matrix shape&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The matrix should be square to have inverse, inverse calculation interrupted.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Matrix *new = row_concat(pmat, create_identity(pmat-&gt;row));</span><br><span class="line">    <span class="type">size_t</span> row = pmat-&gt;row;</span><br><span class="line">    <span class="type">size_t</span> col = row * <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (float_equal(new-&gt;data[i * col + i], <span class="number">0.0f</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> j = i + <span class="number">1</span>; j &lt; row; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (!float_equal(new-&gt;data[j * col + i], <span class="number">0.0f</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">0</span>; k &lt; col; k++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        TYPE t = new-&gt;data[i * col + k];</span><br><span class="line">                        new-&gt;data[i * col + k] = new-&gt;data[j * col + k];</span><br><span class="line">                        new-&gt;data[j * col + k] = t;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (float_equal(new-&gt;data[i * col + i], <span class="number">0.0f</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            print_error(<span class="string">&quot;Inverse doesn&#x27;t exist&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;The rank of source matrix is not full, inverse calculation interrupted.&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = i + <span class="number">1</span>; j &lt; row; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            TYPE t = new-&gt;data[j * col + i] / new-&gt;data[i * col + i];</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> k = <span class="number">0</span>; k &lt; col; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                new-&gt;data[j * col + k] -= new-&gt;data[i * col + k] * t;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        TYPE u = new-&gt;data[i * col + i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            TYPE v = new-&gt;data[j * col + i] / u;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">size_t</span> k = i; k &lt; col; k++)</span><br><span class="line">            &#123;</span><br><span class="line">                new-&gt;data[j * col + k] -= new-&gt;data[i * col + k] * v;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        TYPE t = new-&gt;data[i * col + i];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = row; j &lt; col; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            new-&gt;data[i * new-&gt;col + j] /= t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> sub_matrix(new, <span class="number">1</span>, pmat-&gt;col + <span class="number">1</span>, new-&gt;row, new-&gt;col);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>完成了上三角化，我们可以用$Gauss\ Jordan\ Elimination$进行矩阵求逆：</p>
<ol>
<li><p>检查报错，记录行数与列数中较小的一个作为循环上界</p>
</li>
<li><p>在原矩阵的右侧拼合一个同阶单位矩阵，与原矩阵进行同样的行变换</p>
</li>
<li><p>按列进行，对于矩阵$A$的第$i$列：</p>
<ul>
<li><p>若$A[i][i]$非零，则将其下方的所有行减去其倍数，直到$A[i][i]$下方所有元素消为0</p>
</li>
<li><p>若$A[i][i]=0$，则向下寻找第一个$j&gt;i$使得$A[j][i]≠0$，交换第$i$行和第$j$行</p>
</li>
<li>若到达最后一行仍没有找到，则说明该列主元缺失，矩阵不满秩，不存在逆，<strong>返回空指针</strong></li>
</ul>
</li>
<li><p>减除完毕后，有逆的矩阵不存在全零行，得到上三角矩阵$U$</p>
</li>
<li><p>按列反向进行，对于矩阵$A$的第$i$列，将$A[i][i]$上方的所有行减去其倍数直到消为0</p>
</li>
<li><p>上一步完成后，拼合矩阵的左侧为对角阵，对于每一行除以其主元$A[i][i]$即可</p>
</li>
<li>利用<code>sub_matrix</code>函数截取起初拼合在右侧的单位矩阵，此时经过行变换已经变成了矩阵的逆</li>
<li>返回结果</li>
</ol>
<hr>
<h3 id="报错与警告"><a href="#报错与警告" class="headerlink" title="报错与警告"></a>报错与警告</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Functions For Debugging, Error &amp; Warning</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">print_matrix</span><span class="params">(Matrix *pmat, <span class="type">int</span> precision)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">print_error</span><span class="params">(<span class="type">char</span> *err_type, <span class="type">char</span> *err_info)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">print_warning</span><span class="params">(<span class="type">char</span> *w_type, <span class="type">char</span> *w_info)</span>;</span><br></pre></td></tr></table></figure>
<p>本项目中，参数列表带有矩阵的函数均有报错/警告语句，为了综合报错和警告而非排布<code>printf</code>语句，本项目使用两个函数进行规范化报错和警告，分为类型和具体信息两部分，内容详细具体。</p>
<h3 id="输出矩阵"><a href="#输出矩阵" class="headerlink" title="输出矩阵"></a>输出矩阵</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">print_matrix</span><span class="params">(Matrix *pmat, <span class="type">int</span> precision)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (pmat == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>, <span class="string">&quot;The pointer to source matrix is null, print process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (precision &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal precision&quot;</span>, <span class="string">&quot;Precision should be non-negative, print process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (precision &gt; <span class="number">6</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_warning(<span class="string">&quot;Precision too large&quot;</span>, <span class="string">&quot;Float numbers are accurate to at most the 6th decimal place.&quot;</span>);</span><br><span class="line">        precision = <span class="number">6</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; pmat-&gt;row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; pmat-&gt;col; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (float_equal(pmat-&gt;data[i * pmat-&gt;col + j], <span class="number">0.0f</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                pmat-&gt;data[i * pmat-&gt;col + j] = <span class="number">0.0f</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%.*f\t&quot;</span>, precision, pmat-&gt;data[i * pmat-&gt;col + j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>考虑到用户可能并不是每次都想输出小数点后6位数字，继承前两次project优良传统的笔者给输出函数加了精度参数，如果只是整数级别的运算就没必要显示小数点后了嘛。</p>
<p>不过就算把<code>precision</code>设置为114514，囿于<code>float</code>型的精度也只能精确到6位以内，因此程序在接收到高于6的精度要求后会抛个警告并坚持设置精度为6。</p>
<p>输出的部分也是朴素安全，在调试时笔者注意到一个细节：有时候会输出<code>-0.0</code>这样的数据，看上去很怪，这是因为没有显示完全一个很接近0的负数，所以采用了<code>float_equal</code>进行处理，顺便把原矩阵的值也修改为常规的<code>0.0f</code>。</p>
<h3 id="输出矩阵到文件"><a href="#输出矩阵到文件" class="headerlink" title="输出矩阵到文件"></a>输出矩阵到文件</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">bool</span> <span class="title function_">print_matrix_to_file</span><span class="params">(<span class="type">char</span> *filename, Matrix *pmat, <span class="type">int</span> precision)</span></span><br><span class="line">&#123;</span><br><span class="line">    FILE *file = fopen(filename, <span class="string">&quot;w&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (file == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The output file is not found, print to file process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pmat == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;NULL pointer exception&quot;</span>,</span><br><span class="line">                    <span class="string">&quot;The pointer to source matrix is null, print to file process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (precision &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_error(<span class="string">&quot;Illegal precision&quot;</span>, <span class="string">&quot;Precision should be non-negative, print to file process interrupted.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (precision &gt; <span class="number">6</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        print_warning(<span class="string">&quot;Precision too large&quot;</span>, <span class="string">&quot;Float numbers are accurate to at most the 6th decimal place.&quot;</span>);</span><br><span class="line">        precision = <span class="number">6</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; pmat-&gt;row; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; pmat-&gt;col; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (float_equal(pmat-&gt;data[i * pmat-&gt;col + j], <span class="number">0.0f</span>))</span><br><span class="line">            &#123;</span><br><span class="line">                pmat-&gt;data[i * pmat-&gt;col + j] = <span class="number">0.0f</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">fprintf</span>(file, <span class="string">&quot;%.*f\t&quot;</span>, precision, pmat-&gt;data[i * pmat-&gt;col + j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">fprintf</span>(file, <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    fclose(file);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于规模较大的矩阵，用户会有将结果输出到指定文件的需求，本项目也进行了实现。</p>
<h2 id="Part-3-Result-amp-Verification"><a href="#Part-3-Result-amp-Verification" class="headerlink" title="Part 3 - Result &amp; Verification"></a>Part 3 - Result &amp; Verification</h2><h3 id="Testcase-1-创建矩阵"><a href="#Testcase-1-创建矩阵" class="headerlink" title="Testcase #1 创建矩阵"></a>Testcase #1 创建矩阵</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *mat = create_full(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    print_matrix(mat, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    delete_matrix(&amp;mat);</span><br><span class="line"></span><br><span class="line">    TYPE arr[] = &#123;<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>, <span class="number">2</span>&#125;;</span><br><span class="line">    mat = create_from_array(arr, <span class="number">4</span>, <span class="number">2</span>);</span><br><span class="line">    print_matrix(mat, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    delete_matrix(&amp;mat);</span><br><span class="line"></span><br><span class="line">    mat = create_from_string(<span class="string">&quot;1,1,4;5,1,4&quot;</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">    print_matrix(mat, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    delete_matrix(&amp;mat);</span><br><span class="line"></span><br><span class="line">    Matrix *mat2 = create_copy(mat);</span><br><span class="line">    delete_matrix(&amp;mat);</span><br><span class="line">    print_matrix(mat2, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    delete_matrix(&amp;mat2);</span><br><span class="line"></span><br><span class="line">    mat = create_identity(<span class="number">3</span>);</span><br><span class="line">    print_matrix(mat, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    delete_matrix(&amp;mat);</span><br><span class="line"></span><br><span class="line">    mat= create_random(<span class="number">4</span>,<span class="number">4</span>);</span><br><span class="line">    print_matrix(mat, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">putchar</span>(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">    delete_matrix(&amp;mat);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/29/jgWrmOKsMZPNiHv.png" alt="create.png" style="zoom:50%;" /></p>
<hr>
<h3 id="Testcase-2-矩阵级别操作"><a href="#Testcase-2-矩阵级别操作" class="headerlink" title="Testcase #2 矩阵级别操作"></a>Testcase #2 矩阵级别操作</h3><h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *mat = create_full(<span class="number">3</span>, <span class="number">3</span>, <span class="number">1.2</span>);</span><br><span class="line">    print_matrix(mat, <span class="number">1</span>);</span><br><span class="line">    delete_matrix(&amp;mat);</span><br><span class="line">    print_matrix(mat, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/29/KC4NxfWbXqAr9HY.png" alt="delete.png"></p>
<h4 id="复制"><a href="#复制" class="headerlink" title="复制"></a>复制</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    TYPE arr[] = &#123;<span class="number">0.1</span>, <span class="number">-0.2</span>, <span class="number">0.3</span>, <span class="number">-0.4</span>&#125;;</span><br><span class="line">    Matrix *mat = create_from_array(arr, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    Matrix *cpy=<span class="literal">NULL</span>;</span><br><span class="line">    Matrix *ref=<span class="literal">NULL</span>;</span><br><span class="line">    copy_matrix(&amp;cpy,mat);</span><br><span class="line">    ref_matrix(&amp;ref,mat);</span><br><span class="line">    set_value(mat,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;copy:\n&quot;</span>);</span><br><span class="line">    print_matrix(cpy,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;reference:\n&quot;</span>);</span><br><span class="line">    print_matrix(ref,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result:</p>
<p><img src="https://s2.loli.net/2022/10/29/UW7Qe1SyVT62hBX.png" alt="copy.png"></p>
<h4 id="拼接"><a href="#拼接" class="headerlink" title="拼接"></a>拼接</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *mat = create_from_string(<span class="string">&quot;1,1,2;3,5,8;13,21,34;55,89,144&quot;</span>,<span class="number">4</span>, <span class="number">3</span>);</span><br><span class="line">    Matrix *i3=create_identity(<span class="number">3</span>);</span><br><span class="line">    Matrix *i4=create_identity(<span class="number">4</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;col_concat:\n&quot;</span>);</span><br><span class="line">    print_matrix(col_concat(mat,i3),<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;row_concat:\n&quot;</span>);</span><br><span class="line">    print_matrix(row_concat(i4,mat),<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/29/FNXEbCLoKOWUxgJ.png" alt="concat.png" style="zoom:50%;" /></p>
<hr>
<h3 id="Testcase-3-矩阵查询"><a href="#Testcase-3-矩阵查询" class="headerlink" title="Testcase #3 矩阵查询"></a>Testcase #3 矩阵查询</h3><h4 id="自定义最值-从文件中读取"><a href="#自定义最值-从文件中读取" class="headerlink" title="自定义最值(从文件中读取)"></a>自定义最值(从文件中读取)</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matfile</span></span><br><span class="line"><span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>;</span><br><span class="line"><span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>;</span><br><span class="line"><span class="number">9</span>,<span class="number">8</span>,<span class="number">7</span>,<span class="number">6</span>,<span class="number">5</span>;</span><br><span class="line"><span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>,<span class="number">0</span>;</span><br><span class="line"><span class="number">1.1</span>,<span class="number">2.2</span>,<span class="number">3.3</span>,<span class="number">4.4</span>,<span class="number">5.5</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (customized compare function &amp; main function)</span></span><br><span class="line"><span class="type">bool</span> <span class="title function_">mycmp</span><span class="params">(TYPE x,TYPE y)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">fabs</span>(x<span class="number">-2.1</span>)&lt;<span class="built_in">fabs</span>(y<span class="number">-2.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *mat=create_from_file(<span class="string">&quot;matfile&quot;</span>,<span class="number">5</span>,<span class="number">5</span>);</span><br><span class="line">    print_matrix(mat,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The max value is %.1f\nThe min value is %.1f\n&quot;</span>,max(mat),min(mat));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The value closest to 2.1 is %.1f\n&quot;</span>,extreme_value(mat,mycmp));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/qmQKaxO95sT14nC.png" alt="extrema.png" style="zoom: 67%;" /></p>
<hr>
<h3 id="Testcase-4-自定义矩阵运算"><a href="#Testcase-4-自定义矩阵运算" class="headerlink" title="Testcase #4 自定义矩阵运算"></a>Testcase #4 自定义矩阵运算</h3><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *mat=create_from_file(<span class="string">&quot;matfile&quot;</span>,<span class="number">5</span>,<span class="number">5</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;origin mat:\n&quot;</span>);</span><br><span class="line">    print_matrix(mat,<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;unary operation mat:\n&quot;</span>);</span><br><span class="line">    Matrix *una=unary_calc(mat,cosf);</span><br><span class="line">    print_matrix(una,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;binary operation mat:\n&quot;</span>);</span><br><span class="line">    Matrix *bin=binary_calc(mat,una,divide);</span><br><span class="line">    print_matrix(bin,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;scalar operation mat:\n&quot;</span>);</span><br><span class="line">    Matrix *sca=scalar_calc(mat,<span class="number">6</span>,minus);</span><br><span class="line">    print_matrix(sca,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/eFrIh8cDbTSfOAQ.png" alt="image.png" style="zoom:50%;" /></p>
<hr>
<h3 id="Testcase-5-矩阵计算"><a href="#Testcase-5-矩阵计算" class="headerlink" title="Testcase #5 矩阵计算"></a>Testcase #5 矩阵计算</h3><h4 id="简单运算"><a href="#简单运算" class="headerlink" title="简单运算"></a>简单运算</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    srand(time(<span class="literal">NULL</span>));</span><br><span class="line">    Matrix *A=create_random(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A:\n&quot;</span>);</span><br><span class="line">    print_matrix(A,<span class="number">2</span>);</span><br><span class="line">    Matrix *B=create_random(<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;B:\n&quot;</span>);</span><br><span class="line">    print_matrix(B,<span class="number">2</span>);</span><br><span class="line">    multiply_by(&amp;A,B);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A=A*B=\n&quot;</span>);</span><br><span class="line">    print_matrix(A,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A+B=\n&quot;</span>);</span><br><span class="line">    print_matrix(matrix_add(A,B),<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A-B=\n&quot;</span>);</span><br><span class="line">    print_matrix(matrix_subtract(A,B),<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/Vi9kB5tTDgGz1w8.png" alt="basic_calc.png" style="zoom:50%;" /></p>
<h4 id="矩阵加速斐波那契数列"><a href="#矩阵加速斐波那契数列" class="headerlink" title="矩阵加速斐波那契数列"></a>矩阵加速斐波那契数列</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *A=create_from_string(<span class="string">&quot;1,1;1,0&quot;</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">    Matrix *v=create_from_string(<span class="string">&quot;1;1&quot;</span>,<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">size_t</span> i=<span class="number">0</span>;i&lt;<span class="number">20</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Matrix *t=matrix_multiply(matrix_pow(A,i),v);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;fib[%d] = %.0f\n&quot;</span>,i,get_value(t,<span class="number">2</span>,<span class="number">1</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/z9MgQqcWDFhk2HT.png" alt="fib.png" style="zoom:50%;" /></p>
<hr>
<h3 id="Testcase-6-矩阵变换"><a href="#Testcase-6-矩阵变换" class="headerlink" title="Testcase #6 矩阵变换"></a>Testcase #6 矩阵变换</h3><h4 id="上三角化，行列式，逆"><a href="#上三角化，行列式，逆" class="headerlink" title="上三角化，行列式，逆"></a>上三角化，行列式，逆</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *A=create_random(<span class="number">6</span>,<span class="number">6</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A:\n&quot;</span>);</span><br><span class="line">    print_matrix(A,<span class="number">2</span>);</span><br><span class="line">    Matrix *U=Uptriangular(A);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;U:\n&quot;</span>);</span><br><span class="line">    print_matrix(U,<span class="number">2</span>);</span><br><span class="line">    Matrix *I=inverse(A);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A^-1:\n&quot;</span>);</span><br><span class="line">    print_matrix(I,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A*(A^-1)=\n&quot;</span>);</span><br><span class="line">    print_matrix(matrix_multiply(A,I),<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;|A| = %f\n&quot;</span>,determinant(A));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/rmu34DqKpo7nGB2.png" alt="trans.png" style="zoom:50%;" /></p>
<h4 id="不满秩矩阵"><a href="#不满秩矩阵" class="headerlink" title="不满秩矩阵"></a>不满秩矩阵</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//matfile</span></span><br><span class="line"><span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0</span></span><br><span class="line"><span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">2</span></span><br><span class="line"><span class="number">3</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span>,<span class="number">3</span>,<span class="number">0</span></span><br><span class="line"><span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">4</span></span><br><span class="line"><span class="number">5</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">0</span>,<span class="number">5</span>,<span class="number">0</span></span><br><span class="line"><span class="number">0</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">0</span>,<span class="number">6</span></span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *not_full_rank_mat=create_from_file(<span class="string">&quot;matfile&quot;</span>,<span class="number">6</span>,<span class="number">6</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;Not full rank matrix:\n&quot;</span>);</span><br><span class="line">    print_matrix(not_full_rank_mat,<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;inverse:\n&quot;</span>);</span><br><span class="line">    print_matrix(inverse(not_full_rank_mat),<span class="number">2</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;determinant: %.0f\n&quot;</span>,determinant(not_full_rank_mat));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/OBfg7usEH9AVkNi.png" alt="image.png" style="zoom:50%;" /></p>
<h4 id="转置与秩"><a href="#转置与秩" class="headerlink" title="转置与秩"></a>转置与秩</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *A=create_from_file(<span class="string">&quot;matfile&quot;</span>,<span class="number">6</span>,<span class="number">6</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A:\n&quot;</span>);</span><br><span class="line">    print_matrix(A,<span class="number">0</span>);</span><br><span class="line">    Matrix *T=transpose(A);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;T:\n&quot;</span>);</span><br><span class="line">    print_matrix(T,<span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;The rank of A is: %d\nThe rank of T is: %d\n&quot;</span>,rank(A),rank(T));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/RvWqULAaYg1tJQn.png" alt="image.png" style="zoom:50%;" /></p>
<hr>
<h3 id="Testcase-7-鲁棒性测试"><a href="#Testcase-7-鲁棒性测试" class="headerlink" title="Testcase #7 鲁棒性测试"></a>Testcase #7 鲁棒性测试</h3><h4 id="创建矩阵-1"><a href="#创建矩阵-1" class="headerlink" title="创建矩阵"></a>创建矩阵</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//申请不合法空间</span></span><br><span class="line">    Matrix *too_large=create_empty(<span class="number">10000</span>,<span class="number">10001</span>);</span><br><span class="line">    Matrix *too_small=create_empty(<span class="number">0</span>,<span class="number">100</span>);</span><br><span class="line">    <span class="comment">//空数组作为数据源</span></span><br><span class="line">    TYPE *arr=<span class="literal">NULL</span>;</span><br><span class="line">    Matrix *null_src=create_from_array(arr,<span class="number">5</span>,<span class="number">5</span>);</span><br><span class="line">    <span class="comment">//试图拷贝null数组</span></span><br><span class="line">    Matrix *copy_null=create_copy(<span class="literal">NULL</span>);</span><br><span class="line">    <span class="comment">//错误格式的字符串作为数据源</span></span><br><span class="line">    Matrix *wrong_str=create_from_string(<span class="string">&quot;1,2,3;4,5;&quot;</span>,<span class="number">3</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="comment">//不存在的文件作为数据源</span></span><br><span class="line">    Matrix *file_404=create_from_file(<span class="string">&quot;file.404&quot;</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">    <span class="comment">//截取超出原矩阵的子矩阵</span></span><br><span class="line">    Matrix *ori=create_full(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">    Matrix *sub=sub_matrix(ori,<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">3</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/xsZzMyaATJX7BUF.png" alt="robust_create.png" style="zoom:50%;" /></p>
<p>(*每个函数都内置了空指针报错，后续不作重复展示)</p>
<h4 id="矩阵级别操作-1"><a href="#矩阵级别操作-1" class="headerlink" title="矩阵级别操作"></a>矩阵级别操作</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//二次删除</span></span><br><span class="line">    Matrix *A = create_full(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    Matrix *B = create_full(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">    Matrix *C = create_full(<span class="number">5</span>, <span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">    delete_matrix(&amp;A);</span><br><span class="line">    delete_matrix(&amp;A);</span><br><span class="line">    <span class="comment">// null作为源的拷贝</span></span><br><span class="line">    copy_matrix(&amp;B, A);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;B:\n&quot;</span>);</span><br><span class="line">    print_matrix(B, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//覆盖null的拷贝</span></span><br><span class="line">    copy_matrix(&amp;A, B);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A:\n&quot;</span>);</span><br><span class="line">    print_matrix(A, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//大小不匹配时的警告</span></span><br><span class="line">    copy_matrix(&amp;A, C);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A:\n&quot;</span>);</span><br><span class="line">    print_matrix(A,<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//按列拼合两个列数不同的矩阵</span></span><br><span class="line">    Matrix *cat=col_concat(A,B);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/r2tpMAf7mnSekV3.png" alt="robust_del_cpy.png"></p>
<h4 id="矩阵运算-修改传入值"><a href="#矩阵运算-修改传入值" class="headerlink" title="矩阵运算(修改传入值)"></a>矩阵运算(修改传入值)</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//被加数为空</span></span><br><span class="line">    Matrix *A=<span class="literal">NULL</span>;</span><br><span class="line">    Matrix *B=create_full(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;A=0+B=\n&quot;</span>);</span><br><span class="line">    add_by(&amp;A,B);</span><br><span class="line">    print_matrix(A,<span class="number">0</span>);</span><br><span class="line">    <span class="comment">//被减数为空</span></span><br><span class="line">    B=<span class="literal">NULL</span>;</span><br><span class="line">    subtract_by(&amp;B,A);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;B=0-A=\n&quot;</span>);</span><br><span class="line">    print_matrix(B,<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/AMyiL6RSBpVwlnv.png" alt="image.png"></p>
<h4 id="矩阵计算-1"><a href="#矩阵计算-1" class="headerlink" title="矩阵计算"></a>矩阵计算</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *A = create_full(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    Matrix *B = create_full(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="comment">//不同形状的矩阵相加</span></span><br><span class="line">    Matrix *C = matrix_add(A, B);</span><br><span class="line">    <span class="comment">//不合法的矩阵相乘</span></span><br><span class="line">    C = matrix_multiply(A, B);</span><br><span class="line">    <span class="comment">//非方阵的矩阵幂</span></span><br><span class="line">    C = matrix_pow(A, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//逆不存在时的负数幂</span></span><br><span class="line">    C=matrix_pow(B,<span class="number">-2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/Jx2N4SXjBUD5lw8.png" alt="robust_calc.png"></p>
<h4 id="矩阵变换-1"><a href="#矩阵变换-1" class="headerlink" title="矩阵变换"></a>矩阵变换</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Benchmark.c (main function)</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    Matrix *A = create_full(<span class="number">3</span>, <span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">    Matrix *B = create_full(<span class="number">3</span>, <span class="number">3</span>, <span class="number">3</span>);</span><br><span class="line">    <span class="comment">//非方阵求逆</span></span><br><span class="line">    Matrix *I=inverse(A);</span><br><span class="line">    <span class="comment">//非方阵求行列式</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;detA=%f\n&quot;</span>,determinant(A));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Result: </p>
<p><img src="https://s2.loli.net/2022/10/30/hdIanKWlCuwJDom.png" alt="robust_trans.png"></p>
<h2 id="Part-4-Difficulties-amp-Solutions"><a href="#Part-4-Difficulties-amp-Solutions" class="headerlink" title="Part 4 - Difficulties &amp; Solutions"></a>Part 4 - Difficulties &amp; Solutions</h2><h3 id="1-安全、报错与警告"><a href="#1-安全、报错与警告" class="headerlink" title="1. 安全、报错与警告"></a>1. 安全、报错与警告</h3><p><strong>需求</strong>：由于项目需要实现一个安全的库，不至于用户正常操作导致崩溃，因此对于可能的危险操作要进行检查、报错和处理。</p>
<p><strong>解决方案</strong>：</p>
<p>​        标准库中，一个函数有时会有对应的<code>safe</code>版本，以效率作为代价提高安全性。本项目根据情景需求，将所有函数按<code>safe</code>标准编写，对于每个函数都内置内存管理、指针操作等细节，用户直接调用函数即可。</p>
<p>​        由于C并不能便捷地通过<code>throw catch</code>来捕获错误，本项目中在每个函数中，在进行函数操作前都使用判断语句检查安全性，若有错误则及时返回并报错/警告，报错/警告通过综合的函数实现。同时，丰富的函数接口覆盖了用户对于矩阵操作的需求，可以便利地使用，避免了用户直接对矩阵进行内存管理而可能导致的高危隐患。</p>
<h3 id="2-移植性与拓展性"><a href="#2-移植性与拓展性" class="headerlink" title="2. 移植性与拓展性"></a>2. 移植性与拓展性</h3><p><strong>需求</strong>：理工科在不同操作系统进行矩阵运算的情境下，经常需要对整个矩阵进行一元/二元的各种类型的运算，如果按照传统的方式，对于每一种运算都实现一个函数，则会导致库的冗余重复，调用时也很麻烦。</p>
<p><strong>解决方案</strong>：</p>
<p>​        可移植方面，本项目依据标准库模式使用<code>size_t</code>类型记录下标，既避免了负下标可能导致的段错误，也保证了不同位数操作系统下的一致性。</p>
<p>​        数据类型方面，囿于C语言的限制，本项目以宏丐版代替模板，模拟了类模板的效果，更改<code>TYPE</code>后只需要简单修改细节即可适用于不同类型的数据。</p>
<p>​        矩阵运算方面，本项目实现支持自定义运算的矩阵运算函数，对于用户自定义的任意一元/二元运算，只需要将运算的函数指针作为参数传入库内的函数，则可以对矩阵逐元素进行自定义运算，扩展性良好<del>，不能重载运算符的确让人挺难受的</del>。</p>
<h3 id="3-复杂函数的实现"><a href="#3-复杂函数的实现" class="headerlink" title="3. 复杂函数的实现"></a>3. 复杂函数的实现</h3><p><strong>需求</strong>：求行列式，求秩，求逆这三个问题与上三角化均有绑定关系，但上三角化的实现较为复杂。</p>
<p><strong>解决方案</strong>：回去翻了线性代数教材，手动模拟了几次$Gauss\ Jordan\ Elimination$，然后将模拟的过程在2h的debug后码出来了，前三个问题也迎刃而解，实现这个之后，矩阵的若干种其他分解要实现也很轻松了。</p>
<h2 id="Part-5-Summary"><a href="#Part-5-Summary" class="headerlink" title="Part 5 - Summary"></a>Part 5 - Summary</h2><p>​        感谢您能读到这里，报告为了尽力展示项目全貌略显冗长，下次改正，感谢理解（磕头</p>
<p>​        和前两次project不同，这次笔者先没有直接开写，而是首先观摩了<a href="https://github.com/Amoiensis/Matrix_hub">GitHub上Amoiensis的Matrix_hub项目</a>，了解了矩阵运算常用的需求，对照题目构思了可能可以实现的功能以及相比他的项目我可以做出的改进。也因此，在项目的实现中并非想到一个函数就写一个，加入了很多扩展性的内容。</p>
<p>​        本次project对于安全性的要求较高，笔者也因此再次加强了对程序鲁棒性的要求，在没有<code>try catch</code>的帮助下进行<code>error handling</code>确实是个技术活，在编写过程中也有参考大家讨论中提出的异常情况来进行优化。</p>
<p>​        感觉这次project的主要难点在要自己给自己出难题(实际上这学期的project都有这个成分在的)，对于加深C的理解还是很有帮助的，不过对于初学者来说可能是个不小的挑战吧(笑)。</p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS214 计算机组成原理 期末复习</title>
    <url>/2023/06/04/CS214_Final_Review/</url>
    <content><![CDATA[<p>$\huge\text{Outline}$</p>
<ol>
<li>Pipelining</li>
<li>Memory Hierarchy</li>
<li>Parallel Processors</li>
</ol>
<h2 id="Chapter-4-Piplining"><a href="#Chapter-4-Piplining" class="headerlink" title="Chapter 4 - Piplining"></a>Chapter 4 - Piplining</h2><h3 id="§4-1-Pipeline-Overview"><a href="#§4-1-Pipeline-Overview" class="headerlink" title="§4.1 Pipeline Overview"></a>§4.1 Pipeline Overview</h3><p><strong>Performance Issues</strong>:</p>
<ul>
<li>Longest delay determines clock period<ul>
<li>Critical path: load instruction</li>
<li>Instruction memory → register file → ALU → data memory → register file</li>
</ul>
</li>
<li>Not feasible to vary period for different instructions</li>
<li>Violates design principle: <strong>Making the common case fast</strong></li>
</ul>
<p><strong>Pipeline</strong>: </p>
<p>An implementation technique in which multiple instructions are overlapped in execution. Reduces time between instructions.</p>
<p>Pipeline is a form of parallelism.</p>
<p><strong>5-stage pipeline</strong>:</p>
<ol>
<li><strong>IF</strong>: Instruction fetch from memory</li>
<li><strong>ID</strong>: Instruction decode &amp; register read </li>
<li><strong>EX</strong>: Execute operation or calculate address</li>
<li><strong>MEM</strong>: Access memory operand</li>
<li><strong>WB</strong>: Write result back to register</li>
</ol>
<p><strong>Pipeline Speedup</strong>:</p>
<p>If all stages are balanced (take the same time), </p>
<script type="math/tex; mode=display">\text{T}_\text{pip}=\frac{\text{T}_\text{non-pip}}{\text{Number of Stages}}</script><p>* here $\text T$ means time between instructions.</p>
<p>If not balanced, speedup is less.</p>
<ul>
<li>Latency (time for each instruction) does not decrease</li>
</ul>
<h3 id="§4-2-Hazards"><a href="#§4-2-Hazards" class="headerlink" title="§4.2 Hazards"></a>§4.2 Hazards</h3><p><strong>Structure hazards</strong>:</p>
<p>Conflict for use of a resource.</p>
<p>If data and instructions all in one, accessing <code>DATA MEM</code> and <code>INST MEM</code> will cause a pipeline “bubble”.</p>
<p><strong>Data Hazards</strong>:</p>
<p>Need to wait for previous instruction to complete its data read/write.</p>
<p>use-use hazard, load-use data hazard</p>
<p><strong>Forwarding</strong>: </p>
<p>Use result immediately when it is computed.</p>
<ul>
<li>Don’t wait for it to be stored in a register</li>
<li>Requires extra connections in the datapath</li>
<li>Add a bypassing line to connect the output of EX to the input</li>
</ul>
<ol>
<li>EXE - EXE</li>
<li>MEM -EXE</li>
</ol>
<p><img src="https://s2.loli.net/2023/04/17/OW7n6jlZKcD4Axh.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Control Hazards</strong>:</p>
<p>Fetching next instruction depends on branch outcome.</p>
<p>In MIPS pipeline, </p>
<ul>
<li><p>Need to compare registers and compute target early in the pipeline.</p>
</li>
<li><p>Add hardware to do it in ID stage.</p>
</li>
</ul>
<p><strong>Branch Prediction</strong>:</p>
<p>Predict outcome of branch, stall only if prediction is wrong.</p>
<ul>
<li><p>Static branch prediction</p>
<p>Done by compiler(software)</p>
</li>
<li><p>Dynamic branch prediction</p>
<p>Hardware measures actual branch behavior,  e.g., record recent history of each branch. Assume future behavior will continue the trend.</p>
</li>
</ul>
<p><img src="https://s2.loli.net/2023/04/24/1nft2JdaVygvQ8I.png" alt="image.png" style="zoom:50%;" /></p>
<center><b>The single-cycle diagram corresponding to 5-stage pipeline</b></center>

<p><img src="https://s2.loli.net/2023/04/24/OVjJawHuYoDvltn.png" alt="image.png" style="zoom: 67%;" /></p>
<center><b>The datapath with controls to handle exceptions</b></center>

<h3 id="§4-3-Instruction-level-Parallelism"><a href="#§4-3-Instruction-level-Parallelism" class="headerlink" title="§4.3 Instruction-level Parallelism"></a>§4.3 Instruction-level Parallelism</h3><p><strong>To increase Instruction-level parallelism(ILP)</strong>: </p>
<ul>
<li><p>Deeper pipeline: more stages</p>
<p>Less work per stage → shorter clock cycle</p>
</li>
<li><p>Multiple issue: start multiple instructions per clock cycle</p>
<p>Instruction per Cycle: $\text{IPC}={1\over \text{CPI}}$</p>
<p>More hardware used</p>
</li>
</ul>
<p><strong>Key problems of multiple issue</strong>: </p>
<ul>
<li>Packaging instructions into issue slots</li>
<li>Dealing with data and control hazards</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>$\text{Multiple issue type}$</th>
<th>Static multiple issue</th>
<th>Dynamic multiple issue</th>
</tr>
</thead>
<tbody>
<tr>
<td>Also called</td>
<td>Very long instruction word (VLIW)</td>
<td>Superscaler</td>
</tr>
<tr>
<td>Decision made by</td>
<td>Compiler (software)</td>
<td>Processor (hardware)</td>
</tr>
<tr>
<td>Ways to remove hazard</td>
<td>Loop unrolling/ Register renaming</td>
<td>Out-of-order execution</td>
</tr>
</tbody>
</table>
</div>
<h4 id="Static-multiple-issue"><a href="#Static-multiple-issue" class="headerlink" title="Static multiple issue"></a>Static multiple issue</h4><ul>
<li>Decision made by compiler, software</li>
<li>Compiler groups instructions into “issue packet”<ul>
<li>Group of instructions that can be issued on a single cycle</li>
<li>Determined by pipeline resources required</li>
</ul>
</li>
<li>Think of an issue packet as a very long instruction<ul>
<li>Specifies multiple concurrent operations</li>
<li>Very Long Instruction Word (VLIW)</li>
</ul>
</li>
</ul>
<p><strong>MIPS with Static Dual Issue</strong>:</p>
<p>Two-issue packets</p>
<ul>
<li>Type 1: ALU or branch instructions</li>
<li>Type 2: load or store instructions</li>
</ul>
<p><img src="https://s2.loli.net/2023/04/24/DCy2gGsPjrAFYQU.png" alt="image.png" style="zoom: 50%;" /></p>
<center>
    <b>
        A static two-issue datapath
    </b>
</center>

<p>Hazards</p>
<ul>
<li>Split interdependent instructions into different packet</li>
<li>Put bubbles: one stall, multiple instructions wait.</li>
</ul>
<p><strong>Scheduling</strong>: </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lw $t0, 0($s1)		 # $t0=array element</span><br><span class="line">addu $t0, $t0, $s2	 # add scalar in $s2</span><br><span class="line">sw $t0, 0($s1)		 # store result</span><br><span class="line">addi $s1, $s1,–4	 # decrement pointer</span><br><span class="line">bne $s1, $zero, Loop	 # branch $s1!=0</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>ALU/branch</th>
<th>Load/store</th>
<th>cycle</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nop</code></td>
<td><code>lw $t0, 0($s1)</code></td>
<td>1</td>
</tr>
<tr>
<td><code>addi $s1, $s1,–4</code></td>
<td><code>nop</code></td>
<td>2</td>
</tr>
<tr>
<td><code>addu $t0, $t0, $s2</code></td>
<td><code>nop</code></td>
<td>3</td>
</tr>
<tr>
<td><code>bne $s1, $zero, Loop</code></td>
<td><code>sw $t0, 4($s1)</code></td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Loop Unrolling</strong>:</p>
<ul>
<li>Remove “name dependence”</li>
<li>Replicate loop body to expose more parallelism</li>
<li>Register renaming: use different registers per replication</li>
<li>Reduces loop-control overhead</li>
</ul>
<h4 id="Dynamic-multiple-issue-Superscalar"><a href="#Dynamic-multiple-issue-Superscalar" class="headerlink" title="Dynamic multiple issue(Superscalar)"></a>Dynamic multiple issue(Superscalar)</h4><ul>
<li>Decision made by processor during execution</li>
<li>CPU decides whether to issue 0, 1, 2, … each cycle,avoiding structural and data hazards</li>
<li>Hardware support for reordering the order of instruction execution</li>
<li>Allow the CPU to execute instructions out of order to avoid stalls</li>
<li>Commit result to registers in order</li>
</ul>
<p><img src="https://s2.loli.net/2023/04/24/DurNiyhPfCMEjRd.png" alt="image.png" style="zoom:50%;" /></p>
<center>
    <b>
        The three primary units of a dynamically scheduled pipeline
    </b>
</center>

<h4 id="Speculation"><a href="#Speculation" class="headerlink" title="Speculation"></a>Speculation</h4><p><strong>“Guess” what to do with an instruction</strong>:</p>
<ul>
<li>Start operation as soon as possible</li>
<li>Check whether guess was right<ul>
<li>If so, complete the operation</li>
<li>If not, roll-back and do the right thing</li>
</ul>
</li>
</ul>
<p><strong>Compiler/Hardware Speculation</strong>:</p>
<ul>
<li>Compiler can reorder instructions<ul>
<li>Can include “fix-up” instructions to recover from incorrect guess</li>
</ul>
</li>
<li>Hardware can look ahead for instructions to execute<ul>
<li>Buffer results until it determines they are actually needed</li>
<li>Flush buffers on incorrect speculation</li>
</ul>
</li>
</ul>
<p><strong>Speculation and Exceptions</strong>:</p>
<p>Static speculation: Can add ISA support for deferring exceptions</p>
<p>Dynamic speculation: Can buffer exceptions until instruction completion (which may not occur)</p>
<h3 id="§4-4-Fallacies-Pitfalls-and-Summary"><a href="#§4-4-Fallacies-Pitfalls-and-Summary" class="headerlink" title="§4.4 Fallacies, Pitfalls and Summary"></a>§4.4 Fallacies, Pitfalls and Summary</h3><h4 id="Fallacies-amp-Pitfalls"><a href="#Fallacies-amp-Pitfalls" class="headerlink" title="Fallacies &amp; Pitfalls"></a>Fallacies &amp; Pitfalls</h4><p>The basic idea of pipelining is easy, the devil is in the details.</p>
<p>More transistors make more advanced techniques feasible, pipeline-related ISA design needs to take account of technology trends.</p>
<p>Poor ISA design can make pipelining harder</p>
<h4 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h4><p>ISA influences design of datapath and control</p>
<p>Datapath and control influence design of ISA</p>
<p>Pipelining improves instruction throughput using parallelism</p>
<ul>
<li>More instructions completed per second</li>
<li>Latency for each instruction not reduced</li>
</ul>
<p>Hazards: structural, data, control</p>
<p>Multiple issue and dynamic scheduling (ILP)</p>
<ul>
<li>Dependencies limit achievable parallelism</li>
<li>Complexity leads to the power wall</li>
</ul>
<h2 id="Chapter-5-Memory-Hierarchy"><a href="#Chapter-5-Memory-Hierarchy" class="headerlink" title="Chapter 5 - Memory Hierarchy"></a>Chapter 5 - Memory Hierarchy</h2><h3 id="§5-1-Introduction"><a href="#§5-1-Introduction" class="headerlink" title="§5.1 Introduction"></a>§5.1 Introduction</h3><p><strong>Larger, Slower, Cheaper</strong>: Register → L1 Cache → L2 Cache → Memory → Disk</p>
<p>Cache (CPU←→Memory)</p>
<p>Virtual Memory (Memory←→Disk)</p>
<p>DRAM: high bit density, but relatively poor latency</p>
<p>SRAM: faster, but lower bit density</p>
<p><strong>Memory Hierarchy</strong>:</p>
<ul>
<li>Store everything on disk</li>
<li>Copy recently accessed (and nearby) items from disk to DRAM (main memory)</li>
<li>Copy recently accessed (and nearby) items from DRAM to SRAM (cache memory attached to CPU)</li>
</ul>
<p>If accessed data is absent in upper level: miss and block(copy)</p>
<p>If accessed data is present in upper level: hit</p>
<p><strong>Locality makes caches work</strong></p>
<ul>
<li>Temporal locality: possible to access items again</li>
<li>Spatial locality: possible to access neighbors</li>
</ul>
<p>32KB 1-cycle L1 cache that has a hit rate of 95%: </p>
<p>$\text{average access time} = 0.95\times 1 + 0.05 \times (301) = 16 \text{ cycles}$</p>
<h3 id="§5-2-Memory-Technologies"><a href="#§5-2-Memory-Technologies" class="headerlink" title="§5.2 Memory Technologies"></a>§5.2 Memory Technologies</h3><p><strong>Static RAM(SRAM)</strong></p>
<ul>
<li>memory arrays with a single read/write port</li>
<li>volatile, data loss when power off</li>
<li>No refresh, use 6-8 transistors to install a bit</li>
<li>Used in CPU cache, integrated onto the processor chip</li>
</ul>
<p><strong>Dynamic RAM(DRAM)</strong></p>
<ul>
<li>Data stored as a charge in a capacitor</li>
<li>Single transistor used to access the charge</li>
<li>Must periodically be refreshed<ul>
<li>Read contents and write back, performed on a DRAM “row”</li>
</ul>
</li>
<li>Bits in a DRAM are organized as a rectangular array<ul>
<li>Accesses an entire row</li>
<li>Burst mode: supply successive words from a row with reduced latency</li>
</ul>
</li>
</ul>
<p>Synchronous DRAM</p>
<ul>
<li>A clock is added, the memory and processor are synchronized </li>
<li>Allows for consecutive accesses in bursts without needing to send each address </li>
<li>Improves bandwidth</li>
</ul>
<p>Double data rate (DDR) DRAM: Transfer on rising and falling clock edges</p>
<p><strong>Flash Storage</strong></p>
<ul>
<li>Nonvolatile semiconductor storage, faster than disk</li>
<li>Flash bits wears out after 1000’s of accesses</li>
<li>Wear leveling: remap data to less used blocks</li>
</ul>
<p><strong>Disk</strong></p>
<ul>
<li>Each sector records<ul>
<li>Sector ID</li>
<li>Data (512 bytes, 4096 bytes proposed)</li>
<li>Error correcting code (ECC) : Used to hide defects and recording errors</li>
</ul>
</li>
<li>Access to a sector involves<ul>
<li>Queuing delay if other accesses are pending</li>
<li>Seek: move the heads</li>
<li>Rotational latency</li>
<li>Data transfer</li>
<li>Controller overhead</li>
</ul>
</li>
</ul>
<p><strong>Direct Mapped Cache</strong></p>
<p><img src="https://img-blog.csdnimg.cn/b68ccbecb0514a988b83bcaf595b5ab3.png" style="zoom: 33%;" /></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Word addr.</th>
<th>Bin addr.</th>
<th>Hit/Miss</th>
<th>Cache Block</th>
</tr>
</thead>
<tbody>
<tr>
<td>22</td>
<td>10 110</td>
<td>Miss</td>
<td>110</td>
</tr>
</tbody>
</table>
</div>
<div class="table-container">
<table>
<thead>
<tr>
<th>Index</th>
<th>Valid bit</th>
<th>Tag</th>
<th>Data</th>
</tr>
</thead>
<tbody>
<tr>
<td>110</td>
<td>Y</td>
<td>10</td>
<td>Mem[10110]</td>
</tr>
</tbody>
</table>
</div>
<p>Address = Tag | Index | Offset</p>
<p>$\text{Offset} = \log(\text{Block size})$</p>
<p>$\text{Index} = \log(\text{Number of Blocks})$</p>
<p>Tag = Bin addr length - Offset - Index</p>
<p>Block number = ( Memaddr &gt;&gt; Offset ) % (1 &lt;&lt; Index)</p>
<p><strong>Block Size Consideration</strong></p>
<p>Larger block size means:</p>
<ul>
<li>lower miss rate due to spatial locality</li>
<li>fewer blocks, more competitions, higher miss rate</li>
<li>more transfer time uppon missing, larger miss penalty</li>
</ul>
<p><strong>Cache misses</strong></p>
<ul>
<li>stall CPU pipeline</li>
<li>fetch block from next-level memory</li>
<li>read/write miss</li>
<li>instruction/data miss: restart IF / complete data access</li>
</ul>
<p><strong>Write-through</strong></p>
<p>Update memory when data in cache is modified</p>
<p>Write buffer: Holds data waiting to be written to memory, CPU only stalls on write if write buffer is already full</p>
<p><strong>Write-Back</strong></p>
<p>On data-write hit, just update the block in cache. Keep track of whether each block is dirty.</p>
<p>When a dirty block is replaced, write it back to memory, can use a write buffer to allow replacing block to be read first.</p>
<p><strong>Write Allocation</strong></p>
<p>Alternatives for write-through</p>
<ul>
<li>Allocate on miss: fetch the block</li>
<li>Write around: don’t fetch the block</li>
</ul>
<p>For write-back: Usually fetch the block</p>
<script type="math/tex; mode=display">\left\{\begin{array}{l}
  \text{write hit}\left\{\begin{array}{l}
  \text{write through + buffer} \\  
  \text{write back + buffer} 
\end{array}\right.  \\  
  \text{write miss}\left\{\begin{array}{l}
  \text{allocate on miss} \\  
  \text{write around}
\end{array}\right.  
\end{array}\right.</script><h3 id="§5-3-Measuring-amp-Improving-Cache-Performance"><a href="#§5-3-Measuring-amp-Improving-Cache-Performance" class="headerlink" title="§5.3 Measuring &amp; Improving Cache Performance"></a>§5.3 Measuring &amp; Improving Cache Performance</h3><p>$\text{Memory stall cycles} = \frac{\text{Memory accesses}}{\text{Program}}\times\text{Miss rate}\times\text{Miss penalty}$</p>
<p>Average memory access time $\text{AMAT} = \text{Hit time} + \text{Miss rate}\times\text{Miss penalty}$</p>
<ul>
<li>CPU performance ↑, miss panalty% ↑</li>
<li>CPI↓, memory stalls% ↑</li>
<li>Clock rate↑, memory stalls more cycles</li>
</ul>
<p><strong>Associative Cache</strong>:</p>
<p><img src="https://s2.loli.net/2023/05/15/YKdln9urkxowtA8.png" alt="image.png" style="zoom:50%;" /></p>
<p>Fully associative</p>
<ul>
<li>Any block → Any cache entry</li>
<li>All entries searched once (parallel)</li>
<li>Comparator per entry (expensive)</li>
</ul>
<p>n-way set associative</p>
<ul>
<li>$\left|S\right|=n$</li>
<li>Block number % (number of sets in cache)</li>
<li>All entries in given set searched once</li>
<li>$n$ comparators needed</li>
</ul>
<p>Kick out from associative cache: Random vs. LRU</p>
<p>LRU is simple for 2-way, managable for 4-way, too hard beyond that.</p>
<p><strong>Multilevel Caches</strong></p>
<p>Calc. single level cache architecture</p>
<p>memory access time → memory access cycles(miss penalty of L1) → effective CPI</p>
<p>Calc. two level cache architecture</p>
<p>hit + miss penalty of L1 + miss penalty of L2 = effective CPI</p>
<p>local miss ratio vs. global miss ratio</p>
<ul>
<li>L1: minimize hit time</li>
<li>L2: minimize miss rate, avoid main memory access</li>
<li>L1 with smaller block size than L2, smaller than a single cache</li>
</ul>
<h3 id="§5-4-Virtual-Memory"><a href="#§5-4-Virtual-Memory" class="headerlink" title="§5.4 Virtual Memory"></a>§5.4 Virtual Memory</h3><p>Memory ⇋ Disk</p>
<p>Miss in virtual memory: access disk, otherwise access physical memory</p>
<p>Address translation</p>
<p>|Virtual Page Number|Offset| → |Physical Page Number|Offset|</p>
<p>ptr → &amp;Page table </p>
<p>Page hit</p>
<ul>
<li>Access page table, obtain the PPN and some status bits</li>
<li>Access PPN</li>
</ul>
<p>Page fault</p>
<ul>
<li>Access page table, raise page fault interrupt</li>
<li>Fetch page from disk</li>
</ul>
<p><strong>Replacement and Writes</strong>:</p>
<p>LRU replacement:</p>
<ul>
<li>Reference bit in PTE, periodically cleared to 0 by OS</li>
</ul>
<p>Disk writes:</p>
<ul>
<li>Write-back, write through toooo slow, dirty bit in PTE set when page is written.</li>
</ul>
<p><strong>Fast Translation Using TLB</strong></p>
<p>TLB as “cache” of Page Table</p>
<p>TLB: |V|D|R|Tag|Payload|, Payload(PTE): |V|D|R|PPN|</p>
<p><img src="https://s2.loli.net/2023/05/15/9fdke2HDvT6SEBz.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Sources of misses</strong>:</p>
<ul>
<li>Compulsory misses (cold start misses)<ul>
<li>Increase block size to reduce</li>
</ul>
</li>
<li>Capacity misses<ul>
<li>Due to finite cache size</li>
<li>e.g., try to put a block into a full cache</li>
</ul>
</li>
<li>Conflict misses (collision misses)<ul>
<li>In a non-fully associative entries in a set</li>
<li>e.g., try to put a block into an already full set, but the cache is not full.</li>
</ul>
</li>
</ul>
<p><strong>Cache Design Trade-offs</strong>:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Design change</th>
<th>Effect on miss rate</th>
<th>Negative performance effect</th>
</tr>
</thead>
<tbody>
<tr>
<td>Increase cache size</td>
<td>Reduce capacity misses</td>
<td>Increase access time</td>
</tr>
<tr>
<td>Increase associativity</td>
<td>Reduce confit misses</td>
<td>Complex hardware, increase access time</td>
</tr>
<tr>
<td>Increase block size</td>
<td>Reduce compulsory misses</td>
<td>Increase conflict misses and miss penalty</td>
</tr>
</tbody>
</table>
</div>
<h3 id="§5-5-Dependable-memory"><a href="#§5-5-Dependable-memory" class="headerlink" title="§5.5 Dependable memory"></a>§5.5 Dependable memory</h3><p><strong>Dependability measures</strong>:</p>
<p>Reliability: mean time to failure (MTTF)</p>
<p>Service interruption: mean time to repair (MTTR)</p>
<p>Mean time between failures: MTBF = MTTF + MTTR</p>
<p>Improving availability</p>
<ul>
<li>Increase MTTF: fault avoidance, fault tolerance, fault forecasting</li>
<li>Reduce MTTR: fault detection, fault diagnosis, fault repair</li>
</ul>
<p><strong>Hamming SEC Code</strong>:</p>
<p>Hamming distance: minimum number of bits that are different between two valid bit patterns</p>
<h2 id="Chapter-6-Parallel-Processors"><a href="#Chapter-6-Parallel-Processors" class="headerlink" title="Chapter 6 - Parallel Processors"></a>Chapter 6 - Parallel Processors</h2><h3 id="§6-1-Introduction"><a href="#§6-1-Introduction" class="headerlink" title="§6.1 Introduction"></a>§6.1 Introduction</h3><p>Large, inefficient uni-processor → Small, efficient multi-processors</p>
<p>Scalability, availability, power efficiency</p>
<ul>
<li><p>Instruction level: multiple issue</p>
</li>
<li><p>Data level: SIMD</p>
</li>
<li><p>Task level(process-level): high throughput for independent jobs </p>
</li>
<li><p>Parallel processing program: single program running on multiple processors</p>
</li>
<li>Multicore microprocessors: Chips with multiple cores(GPU), SMP</li>
</ul>
<p>H’ware: Parallel vs. Serial</p>
<p>S’ware: Concurrent vs. Sequential</p>
<p><strong>Parallel programming difficulties</strong></p>
<ul>
<li>Partitioning</li>
<li>Coordination</li>
<li>Communications overhead</li>
</ul>
<p><strong>Amdahl’s Law</strong></p>
<p><img src="https://s2.loli.net/2023/06/05/yepcChQH6uzgGvW.png" alt="image.png" style="zoom:50%;" /></p>
<p>Strong scaling: fixed problem size, time is reverse proportional to number of processors</p>
<p>Weak scaling: constant time cost when problem size is proportional to number of processors</p>
<p>Load balancing</p>
<p><strong>SIMD</strong></p>
<ul>
<li>Operate on vectors of data: data level parallelism</li>
</ul>
<p><strong>Vector Processors</strong></p>
<p><strong>Multithreading</strong></p>
<p>Coarse-grain multithreading</p>
<ul>
<li>Only switch on long stall</li>
<li>Simplifies hardware, but doesn’t hide short stalls</li>
</ul>
<p>Fine-grain multithreading</p>
<ul>
<li>Switch threads after each cycle</li>
<li>Interleave instruction execution</li>
<li>If one thread stalls, others are executed</li>
</ul>
<p>Simultaneous Multithreading(SMT)</p>
<ul>
<li>In multiple-issue dynamically scheduled processor</li>
</ul>
<p><strong>Shared Memory Multiprocessors</strong></p>
<ul>
<li>All processors share one memory(uniform/non-uniform access speed)</li>
</ul>
<p><img src="https://s2.loli.net/2023/05/29/ytTjZ41MOds2nbk.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Message Passing Multiprocessors</strong></p>
<ul>
<li>Each processor has private physical address space</li>
</ul>
<p><img src="https://s2.loli.net/2023/05/29/rYd6ktQLbiv8l9x.png" alt="image.png" style="zoom: 50%;" /></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Computer Organization</tag>
      </tags>
  </entry>
  <entry>
    <title>CS213 Project Report</title>
    <url>/2022/08/08/CS213_Project_Report/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重试⚠" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="152812a8bb559b1259b40ae29114faa3166415edc6c508e23c9fb320a883fdaf">4107a32a960ffb4bf995ce54cf178313ab43e46880b39212ad942a6b6889712572e8dbc1ee95a2e15dc38fbb0db925fd272ea8e58903535827315a3ce0c9268049c7ed16aa733917921a1be8d05aba7581edec6049fe8385932c69123f91cfe223d44233fc188f5ab467def12ab1ba7f311c10190ea5c93a55ac6ef78c2246ddf91969e14b55174743fb355b6834bc70e34f5e91df5ac421521f99e9422f4a573f3a4c657a2316da27eb78d4a9b4c710f0761c479b00fc3b0e40243baf31c00e53094e8913ec6978d081d2e3987ce11e6ba399332d2cc1332463bf03f5790bdbad96a7eac87ede34b971a91387b425176a0293900c989aad5b141bb31dd1f61753ee617027dc25c2c1e7eb5839df538ff02609d06da91e1b8febb96d78383c95c4cb6fa4aab7d0634a9b0d412e0779466d26605f8809dd750c7296c2d6e5a2da60a8ad0537a2d5c5e8c648e8d507242d766a4c13507ab0f671228f3052145fe193c91b2be80d8a69cc142376bfa2724400b95dc1b0f41f31b460b92a722e9dc786138aa0d4b312dd68c90510a7338b099bb6c60052a2ff9c5296eccc97cd93cf2a6636ff00d45be6e08fe6966068b1ce4605ff702cd5d44e46b969eb30938d6ac4ba7cc5403a1142544f05c0d6057679021193d11d5bc2fae292c04c88cd5ae41cddece15afb0808fa50e7433551ef9455aabb3bd5eeff92697ba16fbe349ef38d418c9c4a6409cd1cc98ab35bb7e2be53357e9eef91219e25b5833a9548336fdb01b5a0b9edfd6dce36e7e0cdc62b4f65f5e9e68c2bd5b54dc6d4a8d0e6cbe28af21afc1ffd010e5e68105ffa8cc145cc2a539140ada252fb0af5d27c7081adc84442234a0e63dda2c6f71935ea219684cb327f82c41c717f1f997e0f2e0eb0dd6670406911874c5fd95063619157d2bb6072732c220fca36eb578393f9bc897c3ef6264aa8986911520f56b2cb32bdb75b13c1c3fa9ca38605452abceb05e89759eb6846f42134405f077f6d3d94ac0cb366f9ecf26787eb7df560583dffdb283ecae75d92fb0e4d9b132452a5d843a8d1e6573fba407701205eeb0f9c5f95e8ed4449576a98614d1713c96ada429f54bf8efabcf2eb3ab20be66239015ed78087b748ff8421a781a197b496a3bf8c134c7971ed2e838ef51fb1dfd902c6ff5086853d265cfee09f3a6678288e6428166d6cea234a3db5bd530e1d8c1895123f087d579a0b633c81c91a5c46983886b02641e22595867dfdbac86dc2b4c86730af1b5e955cd87a8068f01582a08f31738fdd66c11375ea98de10b1a90f5ba246e854d95fb9ce16ba81882114f6d4a5e06f5749b3ffdcefe1e2b6e6cc58c39ab0572552198f732bbf7c26eaf65e76cd54a638b585ba0f08eac0419baa4fc0c4212165149b94d73fb883c73d93fd2642cf563f0bac896bac42c7188464b90206dafd077b3036df31fe1e720e1bcb43ddf0bcd8a7534855f0811100146f0b57260ef0306579679a414a34858848497cc5e6b46c26b44625df78730a5040e14065c1616ae02ed0de571bd8f5bb051d2941c85bcf0e9700e598bad4443a65b660de41ac2619085be46252a9b06e6fdd86133afebc9e27650907e22a844abe19770cc7ba2783316f6cf20bdebe3298bbe3dd368c5d3ea5c1137e65d53b66f593607207529849fdd2761663044d3e1892a74607ef9bedab5fe9391aec9ced46a3d94af218f3147cb58953830d926eb5e3c55e43125c185cffac07a0c76f55828af1cdb23c82680b9bbe7f315eae63e9dc3c45d92c6ab462a2f9bd44d2e40d379311def1a31cbbf46117e4cd17f60e4a0696fe380d87b0b42c15fb87a3fab6c159903c7b65b944d20ea0aade8bdce105573023ed9fde20b0bd27ccda9d3bfa7a36bed3b7e7b04036dab73306827df8fd30f3063fecdd9726bd1b95b403d4b29a6e7da01229201fd6f91b5e6984c21e1c3b14b93236432b0994d8be8cfb3b7b2b50e8b7b4402fe0b89e8ff274ed70a8df5a09cae5d7c9118f5d9acf535716098aaf26d7ddd00f1cd0332641dc737336d96c92fd3fbbd520b8eb45804e4f5059236f26e6cab6a83925b83dc15b04c78c3f0a17fd5984ff7135f3ec7226949de59bc17bcb50917e28d6714bfed2b5c20d7ad0890bbeb8c0c0878de787f213bc1dd553f18e4cca3f65d9f4975168fc7ff1300a8cc89916969b312a00990a524e522c16723582e38208bfee01ef9e7840008f5c16a8bbbd0af76f94e4b04183f016a7f28bf4a4c9e51c6b5c12b62164cc7c69a9ad30dddf36af972c5e11358911479a757a0f3cbdc88bd8b182b755913fc236fa6f87217fe2c10b30da1fd8836035b5a6b900dfb1c7b3981a7ffd3aca9132c1311f78c91649ac6adb9ee427dcb5ef7c9a7ab18a4d7368e39ed0d26574196aeacc8d4290597135f35e3c0e039479f98d38735804ddc3e550772e2f119d942513e36c420f2082fa26c75775b92700f5f763ebcd89b9a1ba007c6403af59da8fc6b5f267ce872f85d33ae45595c94bfcf2176eafb2768db097f1a869b6f8bbddc0bd65846654a4f61dfc5c1f551b873b4f5f1c0e970931aa86c62966ba4df6fd3389a9c253fdc35fffa9eae1c8f2e412a62bb1b44cc2a15685fdf5802853b49b6b09e42fab086ced4f94c3a04706f9255b3b1bd69f85f070ffb12d634f48e56c86eeea619a5c5e4193ec6278c314ad996ab98d70b81dd52da7ae4e43c49cf4040d807dcb2b97c89058e69e61cf58de115468b5c1dd0a78a6c7c2463df957f65ea7b2e9589f7ed612696b640db8d81831652a5a4b3414aeddad5a248dc82bb57325ae0e4ff29b5910d9acd796739bad201eac825fa1e5edc954ea4c0e5116d3e5030b97667301e5552ff4a6aa7fbe25703748f8a52852b0f3d17639742bac91b3963174688c085335fba94b5caa841fc4ab495451846df18b5aa814b7d19f56604bdc757c82c6e8ba553dd758279c9b527cb4dda50007b2b8c1c30c10d26ca237723e8f56ddb924f72d69b14cd2411d510c5439b82f3e9a44f30bee06f926cee790fe097f302c3b2f7cebccdead657e742c72e289e56c23ca07a279d50e0f1cb1f9080204a22bc9bf9a25416631eb7a3a27b0a2e72c3d641bc362a90cce07d39aec7eb77b3d4719fd1be08029d2bbaf2048429f686ebe67b58e80d263a593af5535bc5d341280619e675f05d7b23c79d04058f790aae7a474d55a98247ad3f1c7b7113730c84e05cb2ca624caefcc7a0ec474bbe7a52adfa4f5353618074f912053a00784da74e29296969d7f8c7a678c721c124de3edf79c73457625dfedc394073c979b8dbaaa9e8fdc54abd02728acbee7e481306a787da69caccb440d930c564bff77ee6c7d55846f23c664fc7e105cfe4c9a2c7ccd3fb22b447e5ffad1c8ea04990bcd99437823778ff12e1977aa46ea4c4a22625fe1da48c40faa8fc6ddcd99f0b1264b6daf24b5fa7f3cc37c41f5013464b6ad7c2507bc5426a14055bd20e0392762c69848f91c0ff4fe709d5cd5aa21ca9cbaa7dceda66e197b5c2c892cfea667c7d1de635ecf050084d63b9ebc32e0d3fbdf37c6f3ee1d6352b70f25ae55a7f12c958f89f3ece14c80b609d3f17f453e76397d5c7b7d64823d834bd82170334af5af2a1424a8a9d0241aa14199c3f6a846564e81536c20a49122b13bc15ca4b8ee656a4815549c67b8b920b40275e95caf7eef87a96a7ce3484d1e3c29559e30df9df48a52d2cd58fd59d187431ba2edd8781cda1995081ec5e941eeffc3f74e4634338c1955467db4429185fdeefafab4e42add8d140e2f1a9e5c92e9c9b59f924fb3f514f37f2f7cc365b9b67c753946ae87fbb066cb2dfb52246ec213a6251143d4790e00e3cd8d05ab7df0556175f1c88a53a701eb6eb0803a9e1847c17bd2523c843674da16e922eb5ddbbc981bd3f7d46598adc720f259c1481e5cf2a9b14341b32eb896c1b8896c80a69d00438ac543614a7078aacb47d8d73c3389be574a122b72208ce651646f4fa94438fa363667d4082798a3369aed061905f3ce99d2f596cea7a9b4f3df18e5b7f113671d398c07444be985c3c65a4a8a204f59c04beb19e9932956ea51f89c7795a91a4c0029102021130c41e112fb04514c690016ee70fe3d0980be4ce4884d200c15316aaed43abc69e32003b110f39165eadf7d28bee0fbf16925bd69e5b1da32827f6e478d12a27fa67aef071ee93aa5217f3863ec3e0f00877485d72fd8e7edb0ea2b99a2f57d3f55e86fb9d0d7f5336221ffc95eb9eda94342636c065acec7de49890230832579ecb29339b69c3e3aca7b523e8970b21afd91a7c8456d5f73b2d9c95269fccf2421c19e79b9984d94377d8903be9866b914b6238f1ee4df82316ac0c750fcee999e4077171cacf2888662bbc673a613555e099bc579ae8e4228a20fed58cd364b20ca9bb4be29bf2de429b5558f7f64043f21a75e05e2706469d5a128c3ce0f1d838caf52a6d1e78acc34e8c2327dcf0223b38e8de988ff552214e02abe1cd4ac5b5b52bb4eec7d426c21d67af77b481018ed09ef4b3334a29a6b3e5d54490e075520f135f0be9351c9931c52f6d27cdf81471069ab2f3bf73b8d889306a2a2ada8923a6b6559915acaec32e2c80a62b5803c3582063d2c34181f4cfa3d346990d64ed2047037e9fc5578b03b60c5569559882d880f8db05f250dcab6d2fd95c32372f9c8365ef037adfac69f5a63929d838d9acdad351f8587bd1d0c5992c478fecd1a2953a05df7b21e8d6cd7b338ba1dfe1f016112297478cbc92bcb94628f97892aa51fc514e023c777d9ffc72e059d7b3a4d4c5844b31a5b094d610177cb95f21001d4b0f15f293a23e9b1779823ec75f25b0687e61887f7cdc3e7ca806eeb75b840bef66a911f80214f9b1b8c6a91239e04254d252e11f7c281e6029f743891d88849ec3bf8151b74338fdf3654ddd697ae7aa31600113c88e847c3a76aea82d28528a7be1bd593e8e9789293e3460b3900e6348833b8118bf52dbcd803bc7e414951d5b1253e5a40611482748da1eebc83e526ae19ccb46714a81bf0afabae82bccd1865dc28dca217e3d125f1d2b957ad2cdf5c98ad2f42ffccbb1c8d1e71610b9252b292a3de33e0902f6135406b72e23dbff598cfd28f0f5a6c735bc84c97bbcce46b30e4e13798373fc12f764205483e97bdf5c29294a4ab9f9c025ad5398af4fda6134f010fd3c2a40b3b657e5ffbb0d95787351fd58c32336f751f06fa954d4fea7af6a6f0f8fbd34ec5556cfc63843164b3926aa2fe60773fe3df4a45ec403ef5dd0ee8bd9ff0c9839f4e9991d10064c65595592360329b017a73239b510bf16b17afddb36f1ebdc25db8566c7a8e21f5fdeab88e71d25d86a491e3dc86ca64f1129c00aff3774e2ed0d7bcbea27b63126aa3425a4f8d1be217917b6f084ce9b12a1ebdd728dc7c3ef4cdb30529dbded34b953b56cfeb763812dee223301d5723802d25bfeee4ba06092f0feab77070fe654746c9d800c601bb84d044afb132d70d17b0cbc8ab2482bd258a8aad98764340feaeb2cf28e60079d548f3ad0057729d0678ec757e196bedb1f743c70a9ec93fc486df1ad72b2f30c3d26001ff58e098f944c105b616bcf44f572f28648c1dced7f428116bc69b9c3fa921ac60c04730d50082ecf568c25fc0d70f0b7a799679da156dac70c2a76470bfe98a1a08d68d72f3291a178ffd981167b1d5c89a1b16de419e02a4808b241d8f756a5a56b8fbadb2416565a344664d91e2f50920f6bcf2188c489f9f2eb7bb33df170b0eaffb95e2b5b730bbf36029413f102660bb86c065ff02cab01f79c2f7a560b8ae3c9a767b72ac826b9823f17366372d82db2d2ffc0b37e312969d19955c1abc113c025e1129f7f8d9d17a7e9b9167bfdc258405b49a009e470aeb9c8695557a157f6399ae4f13979e4bfafae136a5c5a7013eb853c10d61f9737e87baefe477a02406e98877272f6ae53698871d6f66499a9e44252d7bbc42156b7fd10dc94d4103756a5f3894fb3e30f7995aa807cf506cc7565e40959371b61ca501bf1a7d1d45c88be97d04fb2f4a632b6d95796965f55477901f46c220c3c7c10af0c78a9ffe7cb3f6689bef2c1faa948fad6ff317dc4c44508de3d8908c2af6817abc9d9855729123b8fd25a89954c21edbf906324aba8c66300bdfc205b2344695e068f625be1605d89e7d1d0efa4590a074b2e2516e3607c0eeef117fefdc31f07974ffb0fc3fe77fd34a1d9669e4dd94da1d28706d51323da29b614268e3d7c8deb7f5392f8cbf912ef1059e8326263c04687d81995792e490b6239d8fdd8a04b20df18a171800eb4cb9a793320313ec8094b28855727f4b9183818cc71b7a7762a5d797fcc59da6f8a17b72ccb6dd24ebbfdc68e25778b3c52d0109f1200ea5d4a1aff2130fd5eeb370d2d0692b46e55c2bc470d7bc78fe049bb7314922c0534766feb7afccd2c7aa1538da27f03bd28f41a55f6a8b5d768cc1b08bfad0653d454909f70322ee3d018d2bf433f5a9f849b5880000118884d3e4fc84df6e52370dd32f86c681f7942658bf21dcf780efa661c393b2800806e1f42f11815ecc6060c2455976e24533820058371765ecdf7e1baf3c71c28ac3ce3a6896434c22276f3161bb9c9d842f60156789c80fe5a42f0833420408a6bf854ee7be877a5c1c3013c973fc4d65f797cbeef55d1101ce8b3ab98dc6b86833fc5bad79d31fa54ccad8ba108431fb175e977f9a1499f81e486da6f15475f4b4f3c076115d21d614b53e2add4774e3b0566c0adb678d600a6036e2535c27bac7ba705eb13bacd5b6a76576c8310b4a44e653a4788dcb60e453777e7c246f2ccbf3cb6a5ec1eb3662d330de9e9aeb4447e4359f4c9097743aecacfd10fa06ba547bf49a23db2cbea1764c54136a8efd3f60b58d2e43e80622738dd762e626fb6c65b02cfd70a725487f51c7af6a9ae34eae6411fe55678566c25930c329f3307cbff2e166d01496b3b0d67c1860b29d48b2eb91f362d3b5cb403cdaa8f4e88b6f4ef41f681c099ce57e2eb437bd276847f37ff8c0a62e49405f53aae98879622b66f52ca2374e8e23ddba340b6785703bdb991a1d690c608785ed5c9d9f846ab209eb23cef796f169c172102d6f161b25b5f761e2a93e7f43ab321fe9204b43f8aba9291c2a662ab114ee0ce901d7a383d29c843a6bac5ab66a63e9aeee3c349384473dfa9b74e8286f2d0ed1fe728cc65c65c7dd9d2bafe929b54856795cc30eeca9d2fbf009d4667ce8c76327522bf757308944da90325dc2d9978c9dbcf862d453efb7d203f026ae3826e84365868cb67b0ec84f5eb2d93ed138c39b65b829c76b3faedf37a049afacbb2892f1c683879e5b78a97c2c875d18761743412a50999b13d83e90388f080fbe9a96db8d912d2cb0ab0d300b0ac7c318939b60b7c9f61f19937165bf81b4019e58a4485781752f99c221190c58fb4f031e1a07e6b76dbddd5792fa429d9b0cf6ece55a3d2e22409c9188e67a7bfd886afaa02521560bf09ca27b202098aa4f128f1ef5642518f93292a07512824099a159553857865e8e0ad71832314e0ec1bd73ec8a65bfbcf478524cfee7ffb92f26d40ee730ad117bc5643dd1c30ee06bb2b4927a09c3bea17f3bb49a4e8c6c517a1624a269cbb88f8120707f79cec5412f2855212e8ddf388450b986074083724acd266d7534cc329ac0ee384be0207ae6d57e30ff163e6eb49bc205fd676f3533e764099b545dd895a90d2f867a60222a46db53b0caba87a4320decc3b5e7f7027477587e723ef5075329d6c331a999bed7fabe509a9088d021341459cea8f9939bf618b5d60b7f1204b25b6a5efd5522ebcbcb0b1b7923e960ad261b760a12599c59d9ab8b4eabf66aa60457aa9fde3c8cfcc28a049fdc750d4262da739951e42a98c409d3f72509c8f8f51ed64372c792e90b65f0ce192d3fc60062859e1c52e1640130f24b6f3f4a882bd25429bf0d81cde4e1d8308b51b39941eb430b17020625bbd260d6ac0915602636420a7407b2b54294497eb6a0a40155cc08e0ecabe9c84c14e1384d280a5fd7bdebd474022e7bb18277a7e8015fa556253c5f4d7a9b98357fd9adc396baf03afb4a7ffc1d1f1914f2152513858257bf865f12eaa0820ae042f0193b832121b74a707b7ab4392e16f42fbd4507940445bfc823b9926cbb35418c0a02936a32ba9ab22808ff320911fd3fda27b0cd7c2a8596493a828e87ff0b3460a21f3ae4cdb99738df9dafefca46c4e9b5332ddcf6e37a6485e7265b442d767027e2c73ae53821f39508f956dcac5df2269e97bf48a47aa51d7836d193b7505c45c111da137e59c36c9d804aff83fae1c651f53215cbde2ce6961496327b04ea2d65255946111eacb8b96c4a0a0412496f119052e9ad83a1935c7d46caa005f705eb84a0e6926961c65409404fe6f59ea72b21f31ac969661b623f3a61fd470e1bc0f8de8a45b80228b3b7960d0cc29db4ebe4119e371c75dd597d9fa2b152818c7fea730c2bcd5e65dde6e421efce590f485ed5970a8681a49133ada507e6edaffb00363c14fc02256f3b0462c505a608954439ec6d4704f5411bf863395dbf0b18ec6a3bb5f947dfa89fbe54b6ab626313df30031ea998c5aa593df092f5e80d90fde32cae09d6735300613ae147d9f13f32a280e555f03e3ebff46ef766db6d94784f3924e5ccfeb11476514bc5053f0c66c55bd44f61eea4c35e93b3a83acb2206ddbfcf0aa3b18a888f2c56d96d4677ab3956d7e4079d9f6c18b20f08756b30dea85dee538f1cb83cbad1abca02aae02afd29a8e3868d2e82f2f023bde4e4729a261bf50972900ba20f3c367a6b01e6cc639d0e50217b699d647aa8e56f4b137a491d6e15779349ea6f4d14294a316d16f789bf55f24da2c16301ef21e6e16a2685d7045491c71859aba5f6127d1e8028c0531f556e8a110ec7836810c9de006280c1441a0092512407b60b6dfffdca5f0ea1037e296dfea8e19829e21d81972e2b98a6ea54b9afd560c1888eafb90f25c406b342395415b98454803c76adb66ef891ba914868e35c4765ed9faa7023b53eee39bf929aba3e9a68c8c4d8f20dfd8829a1e3a1b45e36d5af8e815c4dbd77b04a37e294a3853c8128c3b9dd96dae3496634da7473179bb231bddaef3a742019d2feb6ddf3aef03a00f6b3c34786f7c1db3aec3ff6c0d1cd4daba9898d53f794c4c095366e2d4629495e52e2a2d692bd9dec77818ee71875c547846fac9c879159e52e00adfb54e96d54c50d1212e84f64f30e73cbd58a8939f89b6b535fb2651732a1a3a13e4f92b7f89bf3db856731c7059cff22b03599dc4daf917d51de02da177391e41f158ec68c739217287f245d764037847944596c9110bee57ca3649575ae66eae74287662227ce3d2302cb8eb6a1b76e0475e5b16ae697ca38dc435e253dadb2e5ee6e2289f6f6af118950da91cac3e0e744e5879b15d47882e8f98030fdd5e90b5f245a4f763d1000c7e5f6ad7bcb4f79ff92614c806b031657d09bd01855cd0b114cbed5a1360874f4ec45043222713fd11acd2caef0db1cd8fae5772e77cc78459c2fe6b424189502431f4aa2f56474ba2ff281325ff17ef240f887905f14fb5d7522c4684693db1e57db0e54aead010329468d507ab9cf95b34a0a4a02b446b64841c8b8a24d7644d4e571b16f889f2ba2c99aca14d81f9c9b6a81007910ce9c7720f5ee96c04acb77fe4e011af68c21bc7ee5c75b6829ca8a7f22cdea7656199d90b2f9c288a14c5a0f44156bb50d33963cca40ed09e37060af7b40dcac45a728e7853373842035da0d07c27ee110c5f79bcc3df214ba5478bde1c236436180a510d3c9a2a2a60f57198c2f474ddec3736ecd6c5416bfae16831f12f678dbc072325d1026806199349cc14474a619f082da3c8ed57c3cb2be0b246696dfe7bb68babec3daf158c55c67239eea074fcbf02476d58ec9b934e10b1c0545494b2da9e4f375724a71d5cc09720c6fdf31c8792b064c20ae4d52af28af4b44ae4b70623d0e80a5432fea35d5b4fb4df38fbf991c2df71eaba266ae590515fb08beaef44ee9e28762bbfd9dd254c5aae9232872db3df0b5e49b90631d4eabb02a08d600c1c2823ff4fb4a567b6b47697ba744419df0044451587dacd1967c363bf8992e1fdb4b6409806832145462d6afe1b350a9da638e57135845ed8e5171d02a3b0837777f2affe02488c212effd7cada6d770c441b405cb7c08cc158ebb1707225365aeeceacc5a53528cc0541db25ffe28aad32b6981fceea35bae602e0893458a50b9821d84abeada2c52ec7755ebb60906e3f9c4c296ddeacce43e0a96e9a3273350cb773cd5f31bbf0be93b10a27329aa08d2e4633562e3eba6f7cf4bc1bdf398ab826a827d01880a4c11458e1786ca65278789fe48afd69623542af0dddc0365a6e953e2101ac76eb21392423349b0709ce2bdb5b588a43bbc27726b41055817c5c93a1a924ee048dc61defd3e9e38779f45c338bd5db309b573ab6bbcc2de1a21c865d11efe76e9d68d055845a5e45b3626e2e8e8b24f758c7e0989bc4eebae89c70d5b462af62f978dda0149728687c804def9940116f4a96aba33ef5cd651500c5a4d897679a917fb6db80e65ce91f4c11a97725a3ec47f5c73597e8f3eeb74e914fd51be102aa55593b2d1a62cd991220cf8e8b85db9abe35a2e2bea97df7b7e577e2fdaaefcecc934b5de5c11e97b9474d44a31c945cfaea4eb3f349e281b4682df0369692fb841be2f6527b869745a08f4d1df56b1fbd7d7d4b5edba3edb14fd1816392460c215720e17a76d968eba289ebb136b95e0cddcc9fd328ddc313788063d34cdd337a8050847149ab32ce8627e8093c4f083cf18913c4ec4911cca904b77826cb4780a1ddb1f581e31477855d369d4ac770994b57e08d58cd0c690a071a4d2dda6c0873ed1c39fa5057d4aa36dc8d8067f623dd0fb775a12b6c49e8468f87683ee230728fc5537186200bbdda5f9d6418023f22f569e3970f647c3d1948b5099d9e217adc9e29445bae445961876fd280a256b0f0dc8aa538e2f78765c10ad41cde47da705082e1caf5c9381877f0e384fdf2b1f46c1bc381fadd8c2977f5eead1e129f5e376afd297fcf5a3a54f82be651022b26a6a0657a83454d5340d4c6c56ded810da01a5e97a1f9b8eb175392ffab3fb13d75eca511d96403ee0b708a33ae6c90006abbc0d89bf6a15cb2bc548df64426ab0d579ecf039b9b49c55c124601d04d29efa1edcffeb679ba0d10e4442f2b335044d4262986ce3bd62b4d7c2c4a8fb136661f059838469e56b1132198872ae731fe7dc4180a0286ceafd9425c4fb164ec99058bbe3212c30ae1eca81f203d4ed8c6ff9eabfa88f115acd030763748f8c272b2d37c7fd5b92802fbdc7f66c8a2767e05e94abc25d31e86f0f77bd07d46dc46c7b306c2d1a87a303d69148b0ba7a53a9212b53d8c0c581e3e47e23adea0b6531aff908251d76780024b141d56843fa0a71b0071a15eb9781cfd65b34dc015f797286a9d1fd8785bb5694836cc14c798181b4558fcd989e16f5c2ec0565ff0694bbe2ebbc82879a83136d643b84325c38d9ac0cd5bd7ba5de891398c1d4b9b509d7959e4b6c9b04cf91e4da677c9dc6ab8584a54ee6c39f780006d37ca62a32ad0039b434a38edf7478b5bcc9c358be530e0046dd8a51391062b059d7dd299b8a3938f8ce1f7256af44b0b1f797ddeaf0275486718d4c8c10af3dd9c0830dc5b0e3b010908aac65f7cb030667ae352ec8b0b278e5eff9934289908afc0cd76c4e94a557c35e6b6772290fd3c08ded07f3d77eb1ae072d165cc306f0b14559fa8e422104dee7cf48b0ccc0f7e44160807e0ad9e6de9037a9a6608c694cf4c9010939622c6ce51b7a77a4c84177e6022e39eaf0abe91b8ddea4647c4a596873a1d17190f58dba38148fffd8b3a03196bd8a3222b59f134000092092878bfa3942638a4fa6aaa0bdc25dbe10413d0a3492871cd1a94d59f54eafbc7b00ed6e766363da40e76a2bf28e6fe608b173b2312fa5cb21b6cf5a03e5eaf28f9bffe18f6dcf46dd1e481c1be2950c0fda5525b1d02e7123b415309be10bac653b41ae1f9f9738f7dc348d5d1a1844dfcfa7489571261665ab84ad8638efe54a64e809b99e99d9fec6faed8c83d06714b846452b935f372eee9c6c91ea9c9c3e1b640722b4c5bd42df07b72869a3f50664180bf1924a99800c10f13886bfc0cf804ffbfc8e96e205acb25908c358bcf2086b571a78a5040d5f5413f53c7cdf5e8466bb954d16c67205466e448a56fe2ed646e50cebbbf2c4f930feae57bcd1d319b03bd4f2e7370a75de61366a826f1f0c6961ac1947653475de1eebac7b399c76a2eab56a66bdaa2ad82d4c19e77c2d1a3c880f1e168c8312547f2741ad1fd57d8548154a13884e449488afcf0de8e5124582f27843073427257309a055eb3d42889e455c072aab5be91e6d6b669250c9f62e0d054e25ed30aa571dc5cdba29b1d6e9b049d60ef1d138aa5df02063efb943c87c0ea0bdf6381ead3027ca71b88c0936b2d3edbe731458b25e4df38003ac11c9da1d013c41538e5af8834a2a1f7134a673457a679b6a5826da551b42168c84ec9343a2b759a05ab703e0c3850b6bc646d68054d2b96b5ea017fb1e85ec016e74be02c95d2eb7b234852446f43f7320d6a947ed0245298a00604442696ef84af2ee25bbad4475d4747edd5e535a20dc54a43d4725c00359d61b6a3397efbef180200ef4328ca1c4380d6dd06bdfad8783b00d9889bff3f2d2039c36e4fb5fd92d6ee0b308de45274f534c42d769081e2df3617a9fbdd029b989aa84c662ddf420022560dd89563df746932df4abba4a0001ce6e7e5f894768e8b9084ec5da73f282eb93fca611c8086cbe4b00fde0d6a209085375abd53e371111034cd17e921ed4b9e5ca0fd3306fcb4b5069fb427b840c6fbae06937289937b1f08629eea04a59f9aef4ffcf285f158ef404d457a61eaad1550015c31eb3ad9df70ae2c97a1e85b3238b2748e74b3272052d362fa80a6cfcf0aa6402a399bf83a3833be3072bbff1932ccc606c56bc99603bf4d6dc538421ae0ab5e55a661bfa42be1c10e43184bd7e6bffd1c196196cb179df24ed42e736eb8a50aa85886f6884575a8402266d5e3900c535958d0b3ed139ec83da5c6311628e44817b59648cb82e46248431c0a23e18bced529643758c0fecd4f30c633e6e6baecad307aabe4a46a607c01335ae95e52a10eb58b00e158c160aacbb116510130b664a92774130f2b7d102469b4db99b67887e0924de8d1acdf7296c805de088e3339e64d66f560946bed69ff0a9bcb478e200bc3bfd4907a0b9d94d10e87f3dc5258ee447cf868763aa65968b0a9c78ab63723f55a5070d57b98bc6e63959767288f7b29b74500d5924b47d5c42e1872710f27754685c82e17bece0b4f525be850cd4dbbaef779d6cd2b09e341d90bfb069cd862e691f9a4eb4d4173e7efbaca8b754e56700d185566c68cc339d26dc49650c6dda1002022073a37a7165691280665d769f11a941e1678a998e5e591dd7c4c28c70cffafffda204fd3cb93b241d8ee724733e2cb0eb93736c7ea3ac258919d12e7c10f3286aaa222e1dc3beb9c4a8c18c4f1246238df73f04acdd96f054ee7e3426635782699b69ddfbd730fbc6a9590697fd9f84b465bd22c022ccc0e97db5e065c6841f9d0184225fc623bb69a5ea35b080065d3cafeadfe6ff047deb53d45c71c24b9fd85888b124a246d950e3767ae94fc180e4826b3cf5c7e37141b049441c61ce45d29290df19979ac2478d65036bf4b59757a9fa672459cf355f711cc1a1a982999f1baf8181d75158a82500d3c8eb9b011cbdb9bc32b1b127a398317ebb7abffc87741ad58ed130a77728f0a1a6779208930aa7ed3aecf8ad561c5b6a09c25daca6a802c83d9cc5d061814b36ed9911a3e350ee2c4a3c9fa4674c384be86ba317a6cea078c2e660c1b6c9965e9de64a9e1d698e40f0bd00bfe381683640b2be998e4a3616cd9cc246536fef56851b109c3c25bbdd2a9c630713811c449b8ab67afde1bcbe1a4b3f107b6ac6dcad9700b96bf7d48e71f4d7e774d3d7b640feb8088ec790dbcfdd3f3151a1f594c2a5b853505a9ec32b1f5d28dbd41016e0efdcbe4d5cb9401aa2c70c91498375a0a2fb5646736312d3afa17d54baab7049e67b2222324911f8f180f4a9d7747dbe9dd642f66199ae67bc6dcb1b2ec42b95fdc5f4465c687363bbdfa82537157b9a1d1895e211f3890076778e2e33bb1e0c1125b0c7e098d30ee07451cbc6d9d96c84696ae9d3d5a36fbcd807948ac0d93a28ff809334a30c12a2dc93213e75c407aa926590186d1dd5542301f769978bcabb81b695567d19770deed1c5cf674bfd07f93caeb266c631c760e33165132b021c241db7f6e8476fec6e807e9a6150eb6b0e6931838af6ee82a8448593c1a7d893c16e0510ad732c67b7f2691f5ce09609b9f0a39b083ca82b28befa9c6168f0e18a1eabc12bded88adea58a125310203ae2063c98134b65843f7c498fdb9e2daec3ebd69dba3a9e7782f6bbcf4cee7e94f0fadec761495fbd23c528004b2c6b28680f2ad2c4b8059b8e8c4d479e250898bd668a45d706847c63901da38b8a7220f61e827a951970b9193300f87c2317477032abdc4a6eae0b39cc511a6ace9dbeb8a6577a1fc2a4282bed78197f760360a695288cfac7b122ef47ac78cb9275cfe954adbe8b865244b4e5826530590e8509f7067f020093ccfbe2d96d406c84a6e36a3162d54cf254f6b813a429fd21033ec76d686e236711263883f82916290e1af908a0cc38ac16add6e2b351445058a24a07b5ff317ae031abc9c80302f993ab71469ba3b9df62cc76b53b8fad7479804663af34b95a0d9c575269f65c913d516270117d7a9fa46bff59991fa4d13e118db73e9a8aae668a36ae7d75c14a229fd902dffdfdd8c72b3a2f0b439cb1d8045798905c5d29b112a49a4abd21895362f5f2c9f993c51fbc0ce45f944c7faba0ebace15ad5b7251399ea80afc9c8d6d1d6dab14a8fc2c08b6f69d6517fd96ea1575c1bbc9ca13ac842a6ee1b0b988d3607d7d59f9c5ef9c6b740c91d63c2f2c6124a9213f5e9151b93cf7763b8da604078af21e74de27c670df9be1c70b3e8fe1a420818c556b6e6c1c3d24edbaee94634a4758ba7c1391ea21c006fd8f7c0ff3b4ddf837b4a3b2c7d48f118ed780e0e90e12e55d9411fa41f75dc100e1b20b097e38e43bad7daaea4d5ac94d2b369df85b9e1614449555c7c63e9d5a7695644971b0b4b2f5dbb390a09be2b1fccd8af5f9082e1231fde71b3fc7db0efb65a21d6c7c184370f863e37eb83e93b1db2f2ddf7c3a14fef4a27f9435b3e0d1ab4bc90fcbb86f4bc607492a3ad8c2eae0c87c795b0fa71087f2f9c990391d5aa37f12d90c6d75410c797fb6c91fddf210c193a32f21454b57e5165531f8067e0802d3e9bdbd63f0e7dc8c42cd38b6b29373bf18f3b059e02b655a7b16dc405bea6aa8be9ba170e7b94363f2a7634dc5154bcef1bf35486f450b7fe8fb6c23a3431dd5b18a99a47f36b0dac885a6d3754f1e84e0a7ea3f6c9fe232d1629bda7eacaba87a35586c4412a22ecfbecebc6ec393e8c641a17e81048d02584c6e5a059d03cdc0af6f6d78e19a981e14eabe41961d74b73e6e42dc28336b3025e830da8e9959b14acdec83aac3d4748baf158fc2e88e96ef3201c6a018c699fe05f62c29ecd4e4e66d88d77cd4f3c666e1c3eccfa41a373f46bf533c862bfde89a133d601a9105fd0a00480fbcd96e43a70843e308e81c6f7b78a372b8fe96dc5d891cc8dfd317ad9ca7d040d343ff952d20b07f7342a433ec8a137de986f629ba54a0ee0c99f6caa258ddd3c6a6ff7c649c9a187c3551ecc955109801a73273fd3ccc4e6bf6fb9be9764a27fce3c03b15c8bf053461cb934378918f53709aafea5b642757669dc9d2839915621eb9a5c01179ba23b4b3e6a987eb82616678241ee071827b094e625bdc1e2fbaa4c10df73af2acdea94a0acf1311f20e9ae4a63d7d4745b29906240638b9aae3869be4eacc418cf24f7596c1f969060149d756ef412885a49ebd03b07a25c33ad0482990962785abbeb36f089bb2c22caae7ff7da7d0d2582adfa87a467a48bd49fba8e736372554f5fcf921389787854ae912ca670c061086d223495cffc7835d52152cedafbfcbe09b24567ab3bb3b6ee415343716d51ee02dda5274830311bc214e3a1f0fe5c487635a666a7bb4f4b474e1583e9b2ba5206f69c111fbc53c836861abdce4ba3b754dc438282f0d57cd8b81fd2a19d67a1e1ecffd4cde951f2f5daaae5b783a9d6bae70a5129ac3320b55c07491aefe657eb2c5969f02c69e4684ff7be70e2f43c41bce604200c76ddf5a1e406c76f2bc3484af08590db74972aef7e93b778340e2a50227eb78e54894080d4835aeebf1ef8acbdae517084d9a541edc47ca5a4df2b67dec7119321fd96e12423b4f256990a732f2704156d33fb9edc3c8c9882aef28e7ad911e78fa4d45884e422b258d4322d68e01511e5e0283ec2fffac5231217783a3045aa9ce8ae96f7b6f69d45df3b2226f408389042c7522aab2c699fa90ce3087a821f4c286796589d46b086609a2afffdb06edac009477ca8b5b96fc6a71f7c8ffcf18892bb8b9a8fef65fe5103c1033d9d506be85986cc44d8d2f93f070f38342d6c89e14a7ffcb17f5e217cec8edaa1f87f8828c20a77361d2f2ebb7969449da03c050d566ec493f849bcc29271b73c9a03ad4d8b378eeef220e36b7861915c814abcabc45837295f7d804c92e770f1f965579242dd4af1733da984ac2dbe7b826e9b0f40413743baca83c5f2cfda25a4f5c0f07c679c620c6b16b53f2df985d890036a33b0e90fc6487794b55b5ef0e02374546420fe7c6081091527724cfff21cda5872217994f64f24a938ef320df150fbccba98025149a19c90f4d846487d9afefd689a560f84d1cdf03bfd02bb0b2212d95a3238bafdf530698a282233b24f258c297d22385ca2d5ddf69d9e03a1dc33cfbf1b2a1d47e6079f718f7459f492aa7938f39531ba32f6036f71ed3dbcff767272e89c6793f4cf3b7ee17657123dc0bbe0ffcd37ace35ce40c22a1d2f2481aa80f79b16f30205643efcec7ecb264431dc4800b7a2f8016c365afe1aa72962881f175a3048f165766d97baa35869b885c501ac0c92600c030f5cd5810722dd49fbb227331d1970d0654d2ff11b8ce1a9d51bf95d5187e1d6136bf9149ba192a47b7b47177ac189dbeafd50c7a3135cc17ff6ec3f09b039aced1b6e18b4c82c252efcf5de8cbb59d2edfe86397e589a83caf699ec3cf84eb624063483bb6846bb84683145aaba397c5326c729fb964edacc277916c2d777c32de8211abea9933905d130d5490b9518c6c11ad9ddf1fb823c373936671900236095708901a54721dcc32135e7253a4fa4b8fd8b1642e800fc3c0dc9d6497860f46e1e64c670ec6a28e84934ad8271f66e04c3e8d047084ad4f9c37d81681def5c2a09d5c36162362396a809ddabd2d5fa63e6570d150d5dbd01f3ff2144bddde45c9a4f3cc823a7a7cabe8cf8d62e202cf31fc60a44cb4a2b66011cd590c09d3cfebb85f5f204c92218440ff3229ac9741661d684aee54497a0cac1f17c6ad37f3a40283776446fa51e3f1c79a3c599d8d5173bc3095a49946e46ba2bd667d916cc7406687cd9e3f470586d804c1127eeae88fc555a386ab807379df2be741e49680c3a5fb6383f2637203a7cb4695011fb28763d7a145167d380da92851ebcce0e02f5895bbadc7f8392b627ea2c6986b882bf26f49d413c709a77265ade3db17191b4d8ec3ead83292b4e1409391647c92d121bf4224c0da513a87ad83269351428358c0d3e7db7e1c1512ac20dfc446e161328c0bd469bd8627ec155b89857207380344d7b570e91114d20da1ef33ea11f7a8024c76b6a485f194d01e42503872c5c4fb5e50a0383d46bed9939c6ded9ce65faf5f27b14743f6ea3849b2cb20d0927188b83cf4005c1e1166f0f20a39f05bc2d803d825b53bb19e2a6a1b4f5557e29a84a3e4e752b2b09f47bd5ac9b04144d22e8e99a32b2b4cd682880f96b2063a72432553fb5591063b9b94fdfbdbaf2d08d56a81c285e4f5d5116a968fa5686945d328421497d6582306854aea8a6d6fdee64ec413e69044fe8886a65af748656fc5c6adf4b46ea9542f0547a82a62554da2d20ce1d55997d8466a10b365e6bc29bdff74e0da5232985d5a1d14bd01d2e82c351e3de1b27b5d19bd18e827488b2a90a7e9861a99cd35bea77d040e6256d6e3de753283bff491d5735dcb5eb4b06a3ecfea40db2b35cb7f5248035b09035160eb8d844f48e6fb5dc4b36b2a4b42bf07ec7e4bc8cb9af80d0930f8b8aef52e636e231d2cb0fe16b63b287f12f0bb3363670de1b22ab8e0edfc4b1c4d965943db22572dfb8d4cb5274b1110e6cc9a5e1fc44795200028c4c03a7fe094b4ab947caca82a4867c8262e02260b3236eace88f9d6d5f75b813c0b786160d01858985ea9a34e433e3d81786442bfadae2e64ac0754aa5497ce8765a3280d4b0e1db2d633441473d5f185a09427490a7cdfabc34d0e41632af5b85043f9f35a98cd8539e7dc5305507425e909dcc04d427d0dd367252949c27cc65754b33a26c648fc12ceb357a5c61cccb7c1eb61c63083592282daaf64bae9fa454518dddb705e2601f8042651b6feb0d3abf929147f50a4564e0483146c4106b0564c07c6037da8f3bc24a7a027f739b6a8a66fc3a70b6cb6d7b480fac685d66a9866e134e1d5a0255f45aebd5ca2c996977b4b343c3aa303f715b8fd99bf3b87e4606803cf3aa0f7191631f8b5d3dc4062d55960042d3ea54d7d1b759b45c9a57abdf7d14b1c9b7575e13b76e942c6d4b5aa0f422e827f32a2b835b3dd5bc87b0a9408a49647213dba8a95d01e36470b7cc1e95758b6f46a90f8bd5b180931d6d6c8c79ce650c059d0c124a5c51d188091c07b9ba3315856fa967e279c57b719e84a8ee81eb6ef722e7ffdecec4c39418984a8c19a6460867dc87cd3d6dbab5481709963cacaf6b2c84f403235874c4251920903522748122761df9b0402bb7df3f9fcb89b5bae23c60f27416540eb5a9379058e730c9ddc35b0c72e9e747b8c0e3aeb6b6a8b98829bf6c0aa7b782854fc4b110de93ace4dfa5b8fc15761a75d692b74e7814b8f9604de899a035d4673db910a33e8de7cea312b97aab1f8a2e9dcddb0423a2371ef785776f8d0fbdf93d848bfb6d284c5ded986466092dba1f1768d87d8de3724ea23c8dc77506d90423ae74b786002b42d8bd62d9332d29e84638b99adf481ea1bae3c20699d3774d2c06f1bb9d37211e18fe4df04dfd1a5fe138e73ea4de3d5950a672b1278c5ff3aefe4106f2b7a170e4c4d30e0c6a48e2fb4b072e5201e375e669b821eb272e799e70c85e8d59ed87c33799b9701fe4a1b7410faaad4b6a6561e267c4dfd8a20d2f7577a375b593a23970b53392a2dbf3c1d68c3999d578fff6e3d5bd2aef7bd42870af55dcac50c30240173690d2c2f6eae25bce69af9207a5706c706650b27019fcfbe975e9d31780a61d678be01b878f7e081bc62a7a0e238527ef59fda0d8273e15f89282a3d7bccddf3b8b731678d5190d83070e2e0203e40d14903764db47dcd94b0aa209e84432aee3563c62a26e7e81303d15fb208c1f55874aeaddda1f92438b097b6e1d816730e6558039f287aa67c5ee210ff12407c01d8754229779614f69ed58c6437a9df392c2f00952f8db8aaeeff1eff9d010b69281a1eb90fe78bd516b6f701dd6ef7e947c1feaa4090e3a5588815c98488a245aa98a1c027b2bba9e351d22cc7fd42f45ed1f7693000b8f87a0d4f38ecc26be11ef5b86f8b9da8015940a7a40d6fb4c4efbb7910dea2511ce471e8a60689df5c4b3803925520fa6acd3925547fa742a25ad53ea2beb5f80d66c698d2992ae47694fb51c43da0898a694d3a2c623fe3562e371f650f9ac0e776add30c680c51762ed6fb2de20dbb2a896d37f1134a38b9e9a8ab759c2a566997d76aa516051bed0c46248d171472ffb6837f598541950707cc4b30ccf97aa002c1ed536272eda78b6c865cd10dd9c00e6390181955262bb9c22fc699b26984790f5dd3d0c4b99afa15ad9acbfc8fda00b7aff88788b052915f2bb93a491782916059e7cd1f4414b0460e7cbc998af738ba1ffb859ae8a887c500313a57fff9587ab92053b76ace658643eb32066453a410424ea06b6fa19d387095719d05bc1eec7caff8e1740ed1447e2cce214697b4790ee8910b6daa1a33c5148037f655bff17d88e17fbfc4c3022d700ce862321487681dec58a4649df9311f0990db6b18c4752555427ab97c81fdbef6bd99f4137f6cbdef4b0a606da7743766b434542d8ea193ed62b9a894b24064bd462ddcee28c93d9ee30e6bc835c4adb6e88c1b0f7a71c490c5440eb3026cac7dce621af6626c49bfc377659f908ac6967f9a44acd0b666a33dc4607f8c5039ec928d145cc65dbdda8ec4ef482f93e97c6e354ab68d7974e6cdc2e3f40b6507af6efde12d29def681fe2380b63c15fdba54763bfec3e23a4473fb16a04db0d00531fd00d80559a55543d985fe567d50612b6e3bb801b75b056d00a3e99b52a4afe8dfe122bb532fa7293eac639ee4aecb9d5bb919545e758d00963ee594462f587dcd7224d43b5a292a9b3edb2e4568af5b3597321d17589e8ebf6c834ccea4629ca37372cb837c46b8bd26c0a6e7f070e98b5c622fa443508cb50989d78ededa3a32342534061d5aa7bebf3dcaa03c05ccf6f256c30b1e4b2463645f9d29736a0d2d083b28521a57bbaa7f092b269fd9b2702f717bc64e73f99d7588cf069f31360c184875cdbb1050383334c54daa3c172cc566165f01cef5b8c117e76dfd894bd7edc29fe1ad1705d972051ad3dfd4178c9d2cbe4d5a11d4106df933c58c25adc4986c91c1ea9e542b1658ee4410a4d6ea3cd29c52408df62920a358921b37237090cccedb701e11217b9304d0e9e356ca7ad9d129cda92825b4fe92ea6a538499dced16b5c34543d1ab7f817ae8595c6d6afd33f9e9eba7e83d5153ff1cd8653095749d5a585b3f558f0bd7abd1e2f6cc18f80d26e704d8e1f8f1d8630ac13d3d60d15c766b767a121e5f30d9683c3f7a114516956c0d3eb30706ad09d1219ec131d1e29d85132538fb325f1fb9997c9c1a9fbd04a9ee1be9350db3d6590eab9bcabc319abf74e8430c2d742a24634c48d5ef84bcf822158781f6d2c19d415f6be6f64cca69c60b7be56603b39296f210bf065cd39027f2aab2224a6ed1a5eb08f28271889c73ea49f5eb8df71758c73e6938477504c642313d9ca48736299f70fe4f6b8eaf51ef90827b96444c15a2e66ea259b42ddf6326517aead9e99edc9004fd6a9357e8d65d8f210e52f73c0b7b881f95f93250e2bff6b84aad8e56569271c30e0c382cf01c76e66f69478a5276a23c1389beedf32dd92d61c4be6f353026e2d3f3584eafd91bccf46aa6a43eef0dbf45e7320e6fbad33787b89de54b5021f124b0199cbb814cbe83d0e2722927e676f3cd7c5366a1ece5233dba070940f95196d08e60c0b25ee2c82e4821200f95ad72cb3751b72533bebeddb97e6cb634e8e7b75ef778acfdd5868fc6481ecd74ba5d81aa61f18504f861a012f97ec50fe339064b4e45336286e18eec9a6ac789547ba294e0564832caa554dc6c6a192843a7dd48df0cfc7319bd8aa1de91acb74afbd0af04eced7e72458c01636786a4769722d5c447c99f7193f1b60e2754ddaace185844f182a779f1343e5be35c2e9a0dea4f0791bd0a94d4b14e877718ddcc72a771ab72ef4d531b28704d94d0c8a8efc4d09eec9e26ead9b1579bdfe634e79ca021186aefa643b879df6205d7385530344d5a196c27adc86378b9bf260f41d5a6561097ca4637d7621b4d55b29f60025e4f8b4bd376b9624d24dd3973b6f67d8f778cd62f1b63296c1c471f5e73928b6c95c6850f61834cc14287efbde83b656fd9151997a78989ded8854f0329c6b994c5de51aa7968153ad3cbcd2faf60c411590a716f771ae7e87f2740db361d48340fe8de2104294ebdabef1a550f6119c2b09bdc1774b353019e31b5b9e55c390591673eb98d59df2a308157a00c4a5cb6b0096dd2988a861862a0ff221a8b9b883cc1bffd7059b5b2be94b593781a7f1300a72cf04e0f9604f8592a3079174421ff71ec8c1f94e6b46f454181c641bdf608ddc14766974caa34fc6fa040a70d8151340c241a8499b15b503ae735c54efcd7ceb809a249d726d4b83b342057be212ea8d637384ef5acaa305cfe031a86d9c5e86074d208684ec8ec95587a83a8b76e7905004821150dec1c1aaf83c26d3065360ed8406ce1632b32fbdd4da1032121da90c21283895fc429fa24a65ae905de137a32e8a02d33bbfa8e3fb4c9465a788e260af85db6a1c9d6ae4dd3b25f143cc400aacb96aaa0728c18b0e9c2936c3544ab5f312623ae50e1bf0ba4a37f07fbe456078d8bbd81505d486b2aed39a30f805d779bc34b04a49ce1cbc8f7ba16f1cafa16b9dd6117927223d571afcb48e98703738f3006b2ebc1f47e6efbdeabfae8e9714d6e9d508e371d885bdec9d88846e82c5821b6cb47d715e63f599d4b99600604d5452d37ae7b014fe992e465da065bfbada2b2077111f56d9eb7d11d5345c65eeb0febf1a88baab5c67dbee30fd734392743c775f9a2c0a212f6de3b797f80e148b16adc5d5ea6bdc3070d735f9be4f915624e1a8f3e6864d755424307dd78659242bd3fed01d56a87eb005b72958e7a7619b593e292a56c956ade723baa77d5bbde60595204ce468ffecd83c09400557aaef5bef599fd0ef6f3315a3d6616dba3896aae59d6e3efbde06b7a0481dcc96997ac4fae337803df35210cd8e6f4e4ea9a72c79273b9a3260f88b0364e0bef756f0387a093aef3d9ab83c82874271a8a7a97a5c23c375e131d4bc7123c7da0dd497bb3308b0cefd357ef8cfb1c72eb8be625dd8877b950a24a4ac246f1cac446c0575f096357e4a7c7b2d809e38d627570f531e3d58f311a30b755e24f1b7f12f6e6c3836de02baa7ef51a7af0759140c1b7576fa3ccca9db5dd577bcb7e598b96380343e6b823da56eee4467f1b74894bd76395dd99686055525a2044f456984ff3ad42052acef0af61f0628fe8e43516a6c53cd92c6fff91828d21aa6db874f1f4e075bb3cfdb0165fee1bea016af35e1d5bc56a6efd90775c4a1600b13dcb4d6517ae3e933c557d9cc35d804f483d3f4b4bdc7d4da7a84ab9f50d4ad68d14047962d1c5166c38e1efd1d778cacd7e3d1384849258d52ecb3498090537df532841e772f753ff348a3ac0cbef7be6ef3a56bf57cfb67eddb7b56cde3feb443318bfd178fdf87be31b0cc71e1df3a4ca78c8b7312e022ca68763f16186b22b80e5c5510a9623d1fc57ed39efaadead437ad04b30348a1a940cbc358378c918d9cd55810e028934c75430f739a01c9427da2d14f1e6babcaffb87dc381ed36a9902f6da30a549309d02069dace5b92645c064c29dfae47667401836ab3527689730c94f8f25f16303436f79650a96b966007efba4eaf6ea0fb45ed1e8b8e2d45276283788d3ad0bba1e4f3101f3bcea710cf325debfaf6217e4565ffdabdf1f23060b90b8bbdfa524271b13900cd79755718290afbd0601dd731a9b9fcd584d1d050d5dc5f94f696d38ca59e7356511a9b0a560dd3d72a189f4b8d46a0e9c7a85b3012e613e18f1a810efe9097eac8a8e3a11435f3f23a446e894b6af5ec06ba6cad0d32389494eaf75bd796a6334cbec5a5450c1b69de54a5e500fdfafdc5d75d9b5ce550eeb0a2703b81148f4786092345b39f64b671e5c7f5a8bd121140dd4b435d2c0425b51e0644d964f33a850e1fdb102e31db1c0aa39b57af1e8519eccc8b22b5011cd59264d31ececdf75d8565ffa5dacd980833f78113fb10b20526689dcec6a5bbc65699c906aa7c04dbc57fe6642630206be2b36715ea08d039e5f6d6ca98259e4b9034cbdab4a59e8e81ab81d538495115248474d06e96d67cdb5482629b37ccc78c7179cb3e7f6b82e1776e3f60b64b77a17ae80dc34c4711b083085434fb95b8607209ab96011043226a0e831822fb6928a8451f68a4ded1a6d788eaab813bade7cc33922681c51727ee9450b80024da9f0d5698535974493db1363ca9fdfa87460b3eb7ddf8b979650b7f568d0156b67480253f8872ddd278f139ec191f9a20db29c26b9c81a3e414d860334ff278eb5726920b5353cf6152333a630f9311fa6417c0e004ac5efb33366664adea72ea427d8fb2ef3dd56f92d4adf0456ef7597e5fc813a363fa97811a09fad696d52f370453585493cc31009140d92e4f337b1a9e5bf14fb7f8d1e078d0dc137fb3bd2c2634693a55ba5cc942289f86cbe7e9f7060cd208009c7900b2a88d3655553b6ee6e8bc2bcf8421db1e675f0a392b67cd0f282fe3914c1f937c75ebe2d1004be1102c7a4e152ca60d522690d383a61d5f1fbcdae32508b08a4ed0e76307fd59216c85c4d60bfb6119ea8cbdfd14adf25ca8c8d1e5b81f6e9f4d373f2c88be344e7cb84a022ba30e339306cd46a76cfed8899ec9add3ea32a91f99b41e939ccae55b76a3af061db7812896bdc6c9448a7b1e268965bbcda32b89de75c6dffc7f1c5a499f8f08d7c549e22adf621ac2aa6371474e53bec6514e6c644255c71208d423d9910c15af5c88159f0f57de9657dd0a927e74670aa4f33e4988150cd55b9ef5e4823af02c6d3bb5dbef76e5c36b44d9f000bf05fcf61d3af1b87d6fded4b8d97ad6af504385deb6aa87416fa1a7cdb0fd72087118cd5e111a162447c81fdc5caa9b95eda2eaa6cfc4ffcc729010480c9b14419e8906d241f7502c0f2da80aabb7ad4632a854bfc7a3b1e7f7245d5a9cae11fb67a4446f759b604db5789b128a4cb5084ef3b9d1d2c4e26a3b0904415e196c62e066db75b84e652d8375d04f96844b87eeb3d371e2db8b93ed2710645481f406f7f094f49a37ee3f7f69b0150045bcb6b7dd75df894851dd8785538807778d4e2ac4efc24e52510536e41f199e5662803374e9983a3bad874d813c1d3d73b87b6204228b3294c98c2a3b17403509356a3de00cde8bf5e456a0779db91e5777e07fb14f0a8980b2918a701721641df8c7f620999ae5a7f991e7bb6fee00628246cb6bb99f3353f42bbfea149d47d4d48c89e2c2fa5291904ba8e57fd1070675c1f9d73898f1ec12bd479e164bbff4eafc422ba648acdac3a934a74808bdb92ea50bfacc231d0ed37b94cd8e5d1447e19182c05381cbe67a850263dfa2115e9168cd0135864ae67a833685ead48c5547f7e62b0bde77fab3ef79bc89f25a6c1a607d9a73f0416b1b4137e979b480f9e6c1eba3d5ea14ead85c5f40d956e0d5062ec64c2a23a763788e46cb152319a487846a73e308c74a7a3b2e7c2bef7b62cd42a5faadd0640f0ab2cd832f01a59ed1bbdc435ec9e14a0bde27475f2ba142d1d72cf7c7e0880f340c1d7c8ba050a6ca0b24728041d9492349a61c0dc9a1b2d9675dfd8a12e8da14d823e7d186d8d249386f5e4f6e0c81a495d04b768d4c23d6cd4133708dba7d50e0601c21307c5739d0dffe2f6cc41baaaf0f8c988becd5e792dcc2400380b54eb93cde2789e482e7bfcfd3b5e0d1da96655c55f72117e929b55405fd8b7dcd06fc533d70aa0e0addf279aea4ee44ee27196c1fe2e9e44b42cbd7d98946f359af41f7581dcd28e29ca8ed1a34737a5f8b66acae5a84432b62627d29b067f5c9aad42783be483f781942a4d10595d4fb89a33f48e3ec63185493588692610511e689b2770177fd94bd5717cae796d1014f166ad621e52b00d8ccc4eb058b7721c5211b04a68a5f88f66b0a8d6b68d08ce825b7d862f13c4c5eb5353a7799b428589ef53b2d76b701a10711d91a1f0e95d4b34a5aeba15e1ee309214267be0da41fbc8760c50ea2979b50013212c8a7c36a44f31ec80ec1042dcb5437bafc19ecedff61b05aa5230bc11eb0fd8731b4e31d1676752957ea6162cbdd583f5b751de4f3a1af9130e8d2dcd3f1aeaeadc7c5a28edfc4ad77a027cf661f16016af357662bd90ee4d2d62c2c7f227965d0e579274a454df6e1d136b665650b77bf87dc986bcc88b2419e8acb902e67617c6ef727e4312af75881cd00c54a80b1c46fd07b708a7e80b549ecee48302d9b20ab62911a9046b89a8a5b2a14d25bc64d25df2e8ce089afd1c8675f11ed7eef2ed0e882c9b3d9dfb81ab81b4bec955b03a9f8b71549a8079944ccd6340d64fe784006bc7aaf0ac5484550d9aa9f0346c57999dcb76708eb69cd4ed636a93578954cbbed2e337ad0b2ca24d83497b458d5b05565c23750d9e006962030d4c1035c1bb37e2cf3d84d5d346d041751ce35c7aa86287720af90f392ea9b773cabf49373ec20a9fed35844ca861cf6c338b80038388a57d9d0624ef6dd2820b372aeaf4c1ca4db228798077efce713239743d945fbaf147a119ad228f2cdda495ecb1b9268fec31e76276c69e3e554928f5c9106325aa387357efbd969c9b62c31572b0f84035992afe2dfde03fac8094d83287613e2c5e5ea1ce300ad1deb484fb0ca316ef540d05dc62056114badac32945e191cbcf2cdfc71fec74f18b3fd2bd98f7f56d2d7bf4d45c56c3d873a8467ef7db00976bd85eadc14c47e42c7fd39d18ef5cf6c5d8927f5b90f67608fe4551e74d8717058bff27d720fa35308fe4cf0092b1708a5a108f7d1450aa735d2924cd61793718d2a7aa6fff59319a1137c90b0ce5c6084210af42ed5845f7fbe1341d63805c2c7df2aac280d556a84842f5f7488bdd7b84a5b06f4ac2ded418ecd56c8106ea823b5352e960a9f91c3872b244c4a81f7adb04744cedd463d36bf135cd383e9c62c15de161fac3b5801095be1b3d2d679a457ee0cad3fb66a4a0c7e0326ffe2e60e7583aec5fc7aceb014e3ed5774f6340e3a624b8076f7f4ec69acd8b7e288cb63144975c631c175f492671f1502a3447f7dc61702c8286e11d9bad4e611c6089455267bfcd6082ed36afe0ec2decbe14cdf0ab24511437038494e1e205f12cc3eb0e463dbbe5595148743924cc80ba730ba70a6bc62595d116c760ab1a57b9aef710a360504d80750c4e9a27198f977f0eb66e678d3dbd8e1867e398be3fef7b8698435808f81d84e678be83951bdeec08032e370888557ada4e8ba971a7e993abe76197df01acce324ccbbee9361a9cfbac949b977fc7cfb1dcee1351587bb0dcdeb589e289e0942b11a0eb268ee8f297d361c6a147e98c8d9f7aaa4f84ac4d00e2989bddd4d5573f495c17befffd5eedac47020c509a78985992ce550d36b22c2aae626fc5d818ae3285dcc7d10debe1ff628b97a6e57a8f87ab0a1f66b597c776a69db7dbac774d6b995b64a423c61d323284477402c169c2d5378c6a079c30a92239b2a65d12b67a926b544e33ad72bc2d0d99480a93fe77bb885ad466a9e66f294e157e68587d990566eae40192d400b7863ad9bb44d4507b7aa48b709e9ef0d35d8c024233b9633176e1e929704cb4bb4cb6ba07481709a12a8350e36eb35e946cf8a60ccc16344aeefb083a2e605d0f184cb447e442638d7792681e471e1cece6b09a96a0a1ea96f274324adfe9a400c4cfe959fa4d970d5f8a35290cecc0b84fafecce97d9badcb610fd82325efdce7b957566bc6cd68f573a7d5ab91806c673e1458604ad6f84d9e0386e391773e38eccd6944a183cc33f7ac19f20db3dbeaa40855265bb3e9dbe80fe35de6065f239b57845f206842c38cbf951875fb8644a7d5b436d9453281276888128800d5e64b45e0c5f8377c5461147af7d30ab33724af970e53a8b430963f94b13e9f4ae2378d5eda6ccbfb6504ff64128c4a6fb55b23c01773aff2427ff1752a2394ef6d5686314d2d9af57dfbaf21c7a47546f741e7bb7489199220a4bcaa9351848aa567aaba4fdda21daaf95f1f2c062283ba0fa88ec37245a89d17294a5079cd91db24b3e74df049bf8f488d69a7df497a6075f160a372c4ab47c9d452a24c70999c281e8906aea8eecef0f854ee4d5d55d81d544c9a5235a7011a3187fa9ef751bcb7db93cd8f4299247f8694a26d6cffa143cd46895408079c716ff7154be34959a51a7200dfe0583e2f85fd025d17a0694703a21602cb92e52798e0ebbe17ccc4768a8d1d570284279ee85bb247add5d588a14d869903df57857758c583e6b97ad8929bb631a59dc04798e4cfee58639563d633ca5a163a69b7bd2ee9fe4c3ac3b87aed41114ece90920026240be5643b6327a6f461f7e89651c7e9b4a88a2592d5ca32361713cb27f10e717df2ecb7ca06a6d88fc4a680d15cf114248a5a3616f9cb8e0c4b127257cfafc231d434344a49c574f354b6704451a56c01a1d1919c6b06df15ee763bc51509fc99d6f42ab585d623d3d65ee9dd85c450021b6468eda6bac8fdfd1cfe5eea9bbc91ab5daa60dbfc89eec730523661f2e5440ac0682b7d265dc2ab04ac70b4c0020f6057b7829aaf896db2c93c6ebb356bbecb6f92977b85ebc84d48d960e1bac22451bb6202a5f97d584e27cd6e7bdfc8a60161436749020cd17a15383b0bc05b72ed49200b1b819f757729da99bff921cee6b1503f45547afdad7d545b8bd787626ffb0218c37f9f387dac9cd1978edcfc9c018602ac30b9a6b4cc366a9bea2e14206918f6f745946b6125b0f22c5dd1884bc6fbfccb3fef06312d1c585897d80bb0cd569ad82b7cf19b7a4de3ae9fb9b980ff0012bb119757782fa6da415f9c03e775e51e6e81a02c0a09e830c0abf5c770ffbb00cc57ceaf2190ca47d90aa42b4178d817d2952b759a7f0f7c626a4f5ce8c3b85509b693f52941fc5d012a439f880c68ca18992774c538ba2f4fee3a3e906c18038b792a0a1e67d9dd24b3a02dd017a973927a714058d88c2a406664f46dc77dcfa4a5fbecb6a5ba021ed12cc2e74a8f1e4a3a2c31ed8cb5c2f36963b3328e8a96b9e1962cbbc76be4045c970ce5cb8909fac3faf48e6a45f919505049d9e2e279a5fb9ddc303c12cfc7064c25e403312aa29daf9818c83f398b0edda31da0cb42fa5c624ad639125b72923b19b655324403d69cdf4148be2ff17586cc975a1b23c3a8a0d81edc44c5294ca6691879c6c3370a7e8e680883154dd32a6b8ab145f32946d7ddd467262f323cb782fb7870ee149920a5e0379ecbe054a7bec44b19b11904b7fefa295da4b57fa114f5d0dcff51a85c0a7c1ed200495d1f91af3a812e1be390bb120c9e5f50c76919d6e1b2c15686b64b9ef44a22350658250e5305e4f2546440e07e17e81fea354e6a8e7e66637fa41c329504ab93e3ea32d6be44158fac5957ca8b7f4ba673789c7aeb7322488985656ff1c06671fc1b859aa06ae3c78c5d1306e4d28c544a2df926663a04b2e8911fe8610aa295bf06a2f0bdcfcf404b76c24f1c0ef4143eae63c028cf60b9ae48a260a60f602993f8d015caacda8acf9e92677c8e362855f8316ba31581c5f800f002373b54f7fb99a2f1e5bf50d0d5c450efa1ed17686d8d8c913f157ee088a9b4c67ea28beae54abebf44703510ba1fd86c9df005b92cafded1f9ec4efe82b829e528732dd39af1f3294e9a3bf98dd448a23cefc95888a3161d594f811f07aa0cf5215535ff82c17025ea1d631e3094bdaddc8c5f3c8db9ce699d2305e01b5a723f7157c67b5a84ab2e47aa5d64f9c200ccf59fc978c436258651db53b73b2f964afd015710844f4388e5e2258a7fdbb0d4faf8eea557d3751bd49101fb37e0e4ad062a1fa5f02c2acad45b944ac18e2007ef61310c23db4c0eedb7c380ed221a09a47d990c61684c92d934c705da66b699eee176b24cfab45e32458e76e42eb1e978160dd24de6b63236cf75fe5ddc5dc0d8e522a10bc1c4013bf566b840910da7b93acb284c17826c382be66997db771bf876b811c998ac8ad201f1d81f8614f8b249078670e250c374306d4adea71cbd524be2ba6a74f576d6ae4a53aeb16f2e5af5e9ab8ff6590d81962f830a4dd134ecfee00936a102bddedcc43020a7707e3e820f02fbcb06ddff1f5a71a2e9364758300f2bcfe280be8b77f7a618fcba8bbb553af25dec7382492eb0ae024303d31a4b1a1e8daf1b8204168ea30b5a8480a6670a135d0b9e054ecc42c9a489b1caea52ba0204bf356c32feac3c230b1b90f5075bc060f25b13a0c76a7417a51e66fced64eca1f2ba388b21423ca35bfd448c144a11e373d67bcc9de5fd0bc7162ced7595efb953556bb67fdb8538354a43078b52f777ca420681b14a132afa9ac5bfcfb8a45a3281d8bac0b5cd33f39e91a7b8dc04e102368cb1dad1fd1dde957d89808ae6373897f8a3c1af6659af86a101e57e5ce746b4120a529d205adff66df806c5118d1516374d7ebbccfe5d241b70087f6e8ca26656a073bbbf0b4cf8895b0dbf357d3a4a51b0ac0d3fcb5f54bbb1a47bef2a32e0ad4e5851f509ff497d2250f5c2f19b3fba380a0d183910c5917c481ddf646dd54203d6b1ddbfcafa3892d6eef5be5e7af10ce7fdd3e261ddfe1a85e9575c2496906d26f6762ed87233310bdbd8f9ecf3a9e9e012a74c793671b9b2c9cecd4add80ffc4b377b4f584e5544146693d09527faaf286d887a39e8613fc2336363274e7cc9091b3223cace20e135409572828b3ad073faec050c9f381f7d28f9e2b5cc4fc4bd169d4ac1a00a9ec13a8c5c40571a9b3a3353c6bb7ca6b34094668821108130082b1d4b0e3b7631c50d5325c8a1e6f503f92261f061791b1fbffe9910c5d3356e8b3a6dbc7443063cec9c1f3e8cc853e5b22aed76eeda296fb3bad55635eb8a9cf276ab1f5980d87e20d7e6020e5437a32712c96649d9d9ba5741cd03ad924793f009d2daf9ae26a44dd9adc0418fa35978119aa4465802288c89c163ee95cdb7dc1ce72262d1fc21e68bae4f6a4c349a1724715e435f14553416ac3ea642fc85ed1ad2e5bed4756855ffa952a09639076845700ee9a32fcaa8177b310dd24532ad78d53b817b3dabe20d853123db23d787793c2620c9d62d5dc4adfd4fabb0ee27c3a9f72c636c236f2989ac1b508d6bc8f34a17c1839b8cb7421acbb68193fb46becbdb2a090d5ec13cc88c33342c64bcf888c6266b5b9d47e95e34fe55d9dcc284d3c5d7519377cb7bfcae929f7b6939f20c4aa3168de28e861c71800f1118f1cf6b9809bb9e23511274bab4c2a8280918db0e0b55cc64194ccc202fbddc1d14ff6f08d0c2b83bfce868d989099f496d22838696639f47856fdd3e545865b8b060d279d51181e08286e1e27d976f59968bb0d2c8df4b411c8e01a61db858858ff8cd9d4a445d7316a62f9368d70b467cd1d7348e6db4fb1250bb70ab64f9852fece3c0c0f31077a0938aa4a50c3ae289a540626b7694eed50281227611a7b5eb597dc4b1de404c0fa98d54efa6394a84a7522e171ff365d7fd1ba552c563574e917eda8e3c4f83c9e5102f6563c02f9769d1c1cc1edf24a59d95cc7ab35b0369f20c3954747a43fad8c5b38945c7d49832f5f43db56976e187f9e077775fe34030072cd8441e23876f059340bf0848a40d80568825f46a165c86419a7535f77d80a7425b0277fccd9fdfd5e509a5057d8664aa58addc6ef39252b55750e616fa62979fc59260af90e620778b21074d6f4b6ec73e4c977d71f504da6671ddd6c821b216bec23ab151d7fc9ee1433d7b559b53e10ca1846350cf747e402f52eecd605ea80787dd7382cf0d77ec83c612c97da39487f2d67753f122deda1401e8a6c288e71ad2bd6c9d58a2ac8cdee06c7dc0a500d19881eb9182dad3fc69744114502a61dd881445adfb399f30770564288a0ebc3040ab86a665813f0362ac8694311f50bb3ffff8a62a881f310ae90d44bd29ceb03d840a4fac429a22f67459817065e4b05b148b877bbc69033490ebc1fe94fe67b0232fd27b124959b8b324233ae3187e0c766700f331f9187f404ab74c58113c46c325e59c50768d189feb944e6c1104acaab96cb5609a64036d3ffa6cbf2ee635d28e46cf17e04fd633ecb46e1c9342438c85c4a6802abb7372260c619fcc22c85457b93e73ef4b57cd6397609439378157c5ecf9a71c050e3ea9726b0b406c11dad8635ec086c68f1a3f98f9f3b26e706564d2305141462887e44bd265754f457bba3ad28f47832c6deb2da0ab35da6cb81632db909a692df8d110000264bf82314cd022a7437fe357963590e103280b5b2cef31766b49cf36fdd98da37ff2e28dab5d36e1b4c38b815202925f79dcc85528fdc9bef935b974847bd19b6c8e4c9c8da0c92312cedc5bbbf4c911414b5e40a62f612189ef2782211468f5d090befbc072d8fd8b59f7c52988929b6923a001fea1adb822803e7d3b3299f0aa28753a9421ccc077cab58c0728317eb536c938d1e8004f480a7bb2a664bcd409f573cf24db4f416cfb991536f4fabaa0d56a745cc0159780a2947cfbc5420bd1d8448a85745ca274b4b71031b2a2df69cadce892c75efb56e282c41fb4674bdd758694eee3acfdca78587885d2a48ebb6d34b6110251873e0b7e9d30fd249986761e42b78c87b5c808f34f789a83c12b2cd950a62f5c752a79c44f29563bb5ea906e008fce274076ed62dd10dfa189486e8c476f94cd9ee34fdbed72b3025115b4f2e0840c0c837ca8ac81f54a4eee23073592e2ac946957cafa742427ae947e6289c43a94e5ba04c1e521487a3f3428728cb49b3cb7a9336527590c8ad84fe2804bb4569cb33e438d94ae2d86bae369458e2bfd4c7ed2b9954f46dec15918bc29c41953c57d5e300b3c612c7cbda1458c3126e6ae4ee632b921c1041ea19fe2fe8a4bf8803e6091dcb8c164480dc720f536a963077577231dee36b0b682cd5dd559b5b59c03bb0f6ef62788ccb015e7c32547bd78ac13352f38ec8fda6d630f485561f70c6e196f687dd718d9a36c5240c3b497f87a11284d8fd7a97b88483bf9a430404f56239d9d5faea68d814cb3fcd4382c7e204fb35f8ba66bcbc02d46dc8160faadb7a65eae5b1fe7e69e2df8ea0161bdffe1bd8147aad43d5d7334723bb6f9d27fae6f84045e4b7bb56493eece4e7168b7596e19761b119caa9f90426d1ab93683e2e79b6cfeb35d7ee3d73641d86e0148b05259a164f2781250fe87b81f18dbcc6813db6c3e71bdcd98975f6a8e94c1b62794c5306276782e34e0d1459375f7cfba207687c5616b049858e28828a882a88ddf02e6cdca277b5a84e2460ebddfb978047bcc24b867c3a285851cf4bc4304f119c6ae4b2d7d57413b67cd877a4ae1c277abb9ab8da48f480ad92ca58d6aa24ffa790052e70b2a2858e46c795b01385bf182a905d4473704e82ceee2b700b33036511786df4418bff5b08571e3e84278c4691c78f875627791cf52d544f23b3f4f1ca08ec032a978b2799d9f5a359692257f2efba3e8361bdbb307f36cf3c7897ae15b5d5ea712a5df2bd90823d2a313fe07d01da1585a6cc428697863d761c124229bd1623aa56c1975a28a3e43dc588fc6d6931f2f927304b5a88548d003ffc7c638bb3a807cf63d0a4f05c1218d5a236860f55be7e315e21f117a357e58d9fb67f8be3857972c4f54f1e0cdcc3d435f9e3e0b95b1931384f8497677526d5ab25476c104684b5ba73fa0942c27f6758852a965828cb92ba7ad015f6ab58e2ddc1ce99232dc2415ee43d3bbc631688500ef8c310df6c4f2cb0ba1e23e44bc4f0840a1a713255305347dce8f90cafc444aa21ff446cce49bf0cd49c106998bb395e6919ddb6fb699c455965d61022f65c3c4a2abc13d6abf006bc5e8eab83907d927af1f2fbedfbae6e0a2fb195498af1dea7c5c1b5f656fb46d82bcd001903337e47f4170287b6afc3d7bbe17a345e3c411abf7f1f769715ac019c5b614b1d1746a858778d638e2e27bb3861e41d933f19ae2c57c0aa430330bbbb3bbaf014d759df16fbf89036dda07b65188f81687f815b69eb2e7d16745b76d15c2ccbcc6462aeebb36bcdd45a6ead798983b8d718251b4ef27b9ab565b52e74fd9936a9eb6fe994000b0a5f69d59b1a58c47deaf426a8a84195d83fd7527d491513803608a046c13882b0ca4ea0b89533856086d005505e6ab027a93c2ed6579e2c587eaeef8445a52146f3679e209e7473831dc34eef4e5c59b5f6f2a04a9221958aaea3465355cef2d36c75a30da3892dfa6395af03318ed1a98c4133b549590d94433b71c27a25f2db12e1adedddf5eeca9a25b73c74c5972a1f03ef92284ad7f0e4de80bb9e764b0ef66f481ea04d5983ba90cfd682a00e365ed01830415a12e4c7899a9372493a5b05360c61625a9091924c7f84e7838cb4834217ddb429a43849b46368d09f66dbd30a49425ee77d607c502cd73ffac6a3d104e87ceb314432d8aee22da6479114a36d43a894a3ade317338c388000c318859703b8b4f7129f142e6d5e41afb2c9ade952babe0ff42b74a1ddebaaac8a32198379532013dd58eb1fe54e02c3aff662e3f22403e0ffc317a7a194b61141f5bfe9b11a101f551d410fa16e5e90e6ffe6304a2ca111b984b935708cde9d1a0f3acc5e162be9d0040a48cf589787a1158b70d36a1dadfb5464d3f034c5e79f5c7a19978325736faa312a99eb6afec5dcbb7e2b7d0ccc0c030705f6892b01d7c478445d5d8950adb7fd2904b666a88ab5bc07ff8a5d49b9e65ff1d78f445c81d6330f074f12b7623c5ff43569d21e5fc1964b67a738ad93868a9ce6d09983477c1e8d94727f545b3469bc910e878bfc4f461956347ab6b726f11bcda201134c98e80204a3365eeaaffcef03d665d1561501fdff848a952b640828c0bf15976a7558d127b6c1d8c7d163ab61fb9af54da8882636e3f623c7a6d801af7c80bddf911b2239ed671688ea273f29f048ee0767ca235b6616349e88e2aac4abd8fd28591c4830996605261e9aac0fc351e2a59aca194ef02668ff25e6ff1058591faa13ccc92ac692ad99d7b8110970e1705c845254e6587630c27557e430cdde5a75b6a8814f158bd0128d59e4311d4ec96cbfeacad1253159d4fbd4685965661b3dcb231d489f0647bb219b2cdeb6d97c6f4ffea5ead22380c1455a9d9ab491da893b771406addabce6dd48548a15c11b8b1332a5931fdbd5c5c70e8b5c741271dd1aaff12bd10a8e97938b250779a73f5b6b6254e13e55dc29f4703501c0f0fb17757a893c39921e8726509727ffaed6500f4ee2f91d2cb084b37286f518c12a3158a8ccea91521bdc454d8e146e8fe4208bf8cafac1426795c6459e176d6844c471cea001e5216359f3d5019a4f27600877f0543adbd3469e1b74d8eccfa96cd89168d84faa1e2aeee1e5e6f465e54bcbb6bed703ec5a81c23ae5aa61ad6f4d96c8e89c2d15258761a2bb4836d15b01cac572a01b458e2ef6899d626aa1f0d8a581aa1d7eb054dff8a6a8dda754280aeccfab330ec1d61eb40abb62f5ca25b0da46d5ca96c51b587f9a531a9c4f1e70c3dec8c9ab5ac4a804aae87390996e23a556d0b3056fb07609deea5a4e521aacc82d432b620e0ed21bdb36d39ab70b4956bd4b3a8da3ddb5194c5ba9c8b5853c3c33f0f7f770f718b030a4058b996f88d7121a2a2cc5c83c99b045c824bb8d993875f896d3c5f2a61519935521d5bcebc39996fa20787d57c16264c51fd031948ed04c7deed364915b69eef94e8a43372dd97b83c181f540bca633188a67e2319eee1700c479894a70bcb81348c50273304005fc1cb05b8e9b888d033df5c1767e82075761ffd7aa801d776d278fdd191273c92f6062700cc30c374b40dc5471ed62eea9bcdf8796c10dcb789c80807d8bb62fcc8b4d3ce4c37504a4ba80ae0eb76dd2a3f60780a9d85af68b0738bb8cae58faf93e9c93e8375190c65b2ead9e351c374564db381fc3a5a34e765a655a6ec678f67689862554a0f030688f6da433378d85b5d16ce1c9a8d6a3c9e1efeb4c02615c9c7fcaf6dcdced6089914c2b039d25161512f4851639ed09d3942c146f941cd78491645c5b703c6b4468d049bb2d077c20f5e41c20aff921d1da038d1baf838e7dc530030c790987e21e4be1f401a2aae2ee42d4fb0748573e5211cee02cc90bc68c6b680f7e582d9180b8a7f95dbc188069c54308d868222b6f760aef4d413d4a6b4b3bc450c0f8601b07470b5ade0066bb9f8aa106fd1645aae0fbbd6cd7fd63f986d4656f36b3b6a1ca0bb7dfeda9ec30d21c3f8a15f9fe0ff15eda8d085dbfdd8432a921dcf32e7892b5a71c1ff80efa56b9bf02916646badc1627c2afcad0fc6fde66705e2c2f08f1458296330a9b386b172863582e106b72e4be0db0ef9357b81088b966e7d4feee7bb63ab888c59ad02f8952330a8f8c83df14703e49813e242066b79349b75ed82613eb315b75d2a0041fab0899040f1bafce6082c8a07049e56f2a03d53cdea674249b1c0bd8f11881b5e87d5a25fd86901d05d6ccd7fb365e27027d552e7043c262bde5c78e9420002c20fd442066439dc92c227faf2f29d30372dc716ef11f062c9d26a7d7c570692d38bc079394e65f0e81e1991f73f6fbbcbc14d45c3a31ff0476c38ca21f1a34612beb4bf30cf8b87cba8be64f75975ecebb22401152348f319739d2f1e79c54d198f15a9f33fb0f616e23cf72467f06051d6f09dc99beee6f6cbf74f47a23d7971fbb743c955d0107f22e75c5873fcad181b6655b1e2780068bcbd79135ddcdc96af152e99aa9f777292c70a9193de95bb24f0650be03d3fb52a4cc6393e6cf3008fe7b2f994fb4556d9dfa19252da5947eb5dedc53593be2aa0f0bc9e802328f23599802249a5aa9ce03b8d8aab2e30c75ab7b645d1379d7cd3d152c9fd791ca6d641b5bedcb1e4c2f0602a9071274c424ac13a0bf35c641088902995bee46f45cd1459509ed3ca599bcf366c7eaab5107491ac9569d60c304be7f426b549e3249667f96a6e74d88e0ec3ead182420933a8d4a3ba810774de4aa917a5a27cde70050a1f2320ab2c51312f13fd0060f4bbd6ccfa1df4ea738728e6c788d7a960aa53d305a8c8c9c29cff98d68c379652b6f018945744104c64383ba56ab8bd62ab34788e402159067daf8fd628e2550f11f6601da86f9628f1f20edc0e40898b006b79e72d38dfc1d6c63401b4bd7e7353fe15675a75283e75254ae86bdd06a35ab8caa6783aa0ae504fffa36e3e49a95daf3e90a2e0414edd2f0ae16fc196577bb9545e27c430e4bd31adf6b1d3605ebba72302a2e17770b86559e056e6b92517d3cdf9fe3551d088b4e6d3ed1f6af427fad401430a8493247d74b88fc9a2c22a3dc27d611c0eee87c368c2239938f904bd028138063bf235ebed488fd3a68bd203af3037d6816e3bd73eae90bd2b9fb90e41e5e468d9b924331f6ffb9cd6118a4961214674aab6eb8d02e346617bc372053002d9ba5b2a976a003920cc9ad7be65ce0ba482061a7fb7b336b656c598a9cd0b0fbdaeec90ab236a1e5a4c51b8752187ff75b3989b0c3fb99023618db66a17efc2d52816fcb270cbc3e52d15abd551d3642d8bcc4b5333eb83ab9a21499be12ce100143397e96d5a6dbea8e0f028c2edb7f2acef9c5e03d141f2ca6ab8740d30ef5d234e58bd1e4197ac7d5d57d1708119667d5dfb7bf9952255a3513e006a56174d0c5fc94d42c08b5d0c274cc3d19d771ec40461f077277d257583e205f9518b015d95575fbe7e69c350ec8885fc4b1c36e81d5b8cc61fe418d56215b49ac4c10003b7f8539ded20693391879f8eef71adfb117e0f16f962610688e71b1e61486f4d01084c88fbd377730dece5417248c595dc4c5b3845f30d4d9b4da1c55e390fd5a286bcec0c629e52e9da45eed830898da1021c8e0f9361122a460df9543fca7c2809e8e7bda7f67dfc4776828d708bd6901c1d60c2a124845d5c92e94fa2936e41de8b2c2f7259b92d537c0c35a286b3d3ae2b039159006e729fd6c20e811acaf9ca19d7b537a3ff1aafb9e18d0f30b964dd38aca9ac9884730846bfd948671fed5019fb42ea12a80ed4eeab220ab1554a2ecada89e929f9be2b1740b05213637cf1d49ddfc0b3b8f95c8302ea70d0f2b48a8c660562fd4ebb7b16a7a50e3471a83a69540955a181eadbf7f8e9743cb184bdce68e41a2a09eaf5a89e0035da4d8e76a35d1f2ff8f6f6fc9e155217c162da9411f61a60e03762a535aba9acd69c277e8b4580c6bf041f96e79115f6328cb68d554b1140f60959b66bfefadf59ff07df60f0f128fc5f22faee92bde509a14e05035f87d0b5c35fdaab5f695007898e3519550076baa24a5761756818ce437f8839ec4c0b7afab3cf402ce3378e45a850de457ac90595848972dcb59eb67e275a0917fcbb9fd8c8cd34586c3530592a4c666b28c619191050666577db0474c826fcf459c519d779ed82d9f602523e79f28fabcaeb99a7cd57b7d22ce766ad61e10de1bcc375e7fcf65468780b7ecb236fbfe6b682e139290da91401f03f4e094bb1a3938ede9d0df9945b0400bc4ab4ed618039e5cab68dfe82a4b28b75db816d00fd5cca5697bd8c4f8046e47145e05f4b975f0aeda6f26f389e2a91dabb99c8016a0f7f74d13a21292713364a2b3782088c90a62213e1c0a101f364eee581d0be5dd701fc72a8b426c633aeec65ae35d30503d5bee5f2b7ea68b2a837800af11568e264c418bde8ecc806254ca7025350f3e22b3e36b7b9fc6b8678b6ed8a884ec8b9646c97d81a95f7744a643bdb306217c8e78f5643cb0635ea58f78c5eb4ee114aef9dc0e412d5b08e3a3e6184d54c427d0583f04702e16a2250922f6ebb5d77835d73405bc13c393adde786c2b29c6458e06dfa19ef1c37ae04a3a20b0399bbdcc3ca03eb5bc1a6171769bebb0888b33aa03b59bef0c31b9ac30ef79620799987fb61a0861a7d368e032bab2e7183a2816b838b1d931683e5d38456e1fc104fa08f394cd3b83f010fc8ee58180edb385b027787ffbf5d1e3d95257073bea561eff733046295acd72fcc1f91eda4ed6379f1fe79e62a8155c22cb2c9bde4276a309ffbfcc098ca6305349901aa5fc708403d671478130808b0b13c41c6d3c0e721df49da5a38d1b67259c134a50d50597a41b1b60a4b64bc73ec2c793cba8f43f6bd87fbda9b549ac9802f718871e92653514c6cf6a0bcf822c4af75633c3144cec4f7047f6ef7b27ad1d8b8f7287d02fbf9960543f2b9a8158d6013d3422555d71bc5b317fc953ab11a3e2c0d12e815b4473809846ae0d5ff53fdbb711c0ab141c0830fbce1909ac9ed6a370f2303b9bad1d488a95977d03c757449283670f3c64288edd7c88a7eabae20e0b594cdc5436f651af8da882192668cde2d1592760445583a4bb81799f28ef23cb6fff605427b51bebd6a124f17df1d0814ec426d5f17f3747c6cf60b1063ce81b38f5a54d0c2a8dc886200b65d63f5e2f15230a66766b900ce17aa050e911217233d77dcce4893cbcc0e688798ab81c63464a16fed40b2c978031c3b6f0b4c57cca27c6f1a692462c69e6d017577f30b2bd4397876379639fefa8272388771cd5ecd3dc822237e9268f855a5455f3ce9fdb70375befaff997cce84a71077b859f9c259ec0c57fb1d11725f199a486b29dcc6ea5f567f0a12ed4ea82cfd6ef21cb9d6ae582b208d7b753fb0099ed4cfa6d406d0f30e717432705a6aec9964f8ab5de21a5a821761e8777061c5065d3106da30582d47b127ade6f5f29cac47540cf46be1a170e65e5bbd5bfdcf79b1ef77a4b7c49d7f82bdaabc5fa84fb2b48f2a638ad131f94acb13ab9d36d3a04b8d09683686b7f9889cb7edca50e976a110dda202c0fefcbb5064a55eb39d0de45ab37ee0b83a0848fb64e8b742c438a4a1c0ec78a1d518755ba62ce8c38e10f4b1bd5fbc233fb2234d8d7471c62c907a702061e9efd877a2cb51896e4585aa36df17f1decd7440d1353470e73168db2fd84da36c19c03f822efbb9828cdb4a90bf587d1e746680352b20047f770f3c48857e2084566ec537e7f33f2159af03cbcddc0e4e338d2f6863002fc9c96a17f6eacb7c7b55621df496331f8337c1b2efb0fc7aa1b5771f27fdd1210e5d7e887b872d6a10b8aa8401afb33e77ec6b52ae4a702d10bd83c2f7735dee2ae1c53b2436b751070c8993506e1c93971980bea7d626146ef0c2b68fbba83e4ca5ddf4c89196ae57b3767cb5c2121123feddc2a0f6ff07bf2a668e0804dc74c8a1cc4e90a35c276b33e9562f3121c169439b87bb24cc48c65377ac6574b6e070801ab9141f83dec4c794f20ceeffaf4ea3ff810daa6b8670a4c4c3461fad78c983fa227a15e525afcbf96d8dbeb6f7787e647e10c626da121666c8531b59129286e74bf0c88263688486e73045be2ff4a619c5178eb9b703a1a6d3d2cd0c2fe71d01a4355adcb289452e9f042ae396f170110ff660be6010e0bcba981f1af0c2e2f8ceae13329bac020e3b592427635729d21e5dbb7482b558a0b48ae8ce34bb94f5aef3deb61170db9d0538451223c4e9779d36d567cf4d5dd1db8c62e2a25e00573d72a18e684613472a3f47f3bb6b06bfbda125946f9a70b38c456b09a108c90a77a39508761562114a01f682768512d68edbd4b61f068ea0f5c18f4defa35a8746e46a2a519545017d5ae61617d75bec3390303f363c8e694e03f32d26f78c17f866577def1685a6ca7805c061f6e270e37503955882e712ef3a935750d0cabc6c3c1b1544f310d14f435bbc9ad66e437e66d3d9db2633a424d282fd9b1789380cbdca61901de6fb76dcb37d43b178da08fdc0bf29a2e8dd6621ff73f9848a997f83521d0d28855334b3652b9f982deff46f044ec6c860528023096a4e282e16744ca81f1083e3ed7fa9d71bf71fa25b34a3be5e6de6042b08b64a36672efa14ec2cf8066c40a44234fc9253a2039c65ecffe07b48f7063ac42ede9761638c5dc1f11d5d3f9fb0af54c775de15a92ab4b16be890f6ebbac4454000de10fe953968b95f619f991f79177f34840edbbd1480cc78d83b3c700b08e3068c791ab739c3c8ae6d101836960793b83ce6468b5ef331130b71e601c038b8be5dea0d533fe4ad1d73e428c6c730433872c62cc03c5ef64f4e1b6741db963d88acedda64f0456ce4ab1d5b67fbba4d289be1ee70075b93afa272ab4cc0168b7252d246ccba229a7a47fb66e2d43ba4d168cb4226807a6958a22083cffd1cc6703618d95d70c7d57287ecb3f3b60dbb55dd56ab8ae7026e102e343754a97ed0991736f5ba62e651152cc57546de40fa354d20ac8bc2331db5340c3844e596b2d322ebcfefc8dcfd8c54decb0c6190e96cbb9194bd93d662c78d74569f1d97c2488fe2497d8403130421c708a5903c88fa8d870ee5c478531ff23d8dda426934d0fe61f8601501bb7bb08defb7f40a8ac3be1c6e332359fef6ed44b2ffc638112bd1550e063b57f4a10c385cc380c3361cfe718dccbb2a2b2b7325c07701eae9649c22b71775ce999159ab1da014a4b3c4694fd1803404eaa2158d714d6bb1c8c69108b1f85496c56b847741fa82fa1f4a3b933ded65268abee456bd02b9d8e71fcbc678dfd92709820a3b3d2402a76a46e8242f232d4165ea823ec6f0c7b3539efa3051365a1b36ef797f160362f048277a9f27000311c1d313aaf666ae68a9fa647bbb69488dc197bfbced6d86f0b38caf6420a89a36ae8f8b7ac64d5b33dcabbbf0253011f0e5e39f0fb062adad357562f3a7146c37557b122c71b6ab6c73cae42a408edfade57c976ffd1586ad0ce9d4c8d4f57a8c8caa340d1667f71f25309c8f6709b40205442c28b0bccec4baab3c51981b8ec01ac20a483c20c3abf9078bb9106918292845b71af792948c2ec0ec602df21da5f1a7eb6e3bbfcbb6ab0cd0a382c701383215617f28222d991cb39840e0bfa553f2c96e961da21aa39ab0d1a1296a07ada22d4b50e765bc26d3c5c5a30df986aabded957a06bd613299c7f6afcf0b01add763b51761b11ce5984acb58365c34c4031f2bf8b09d0206dd407a7a3cfebd85135b46a5b7acf8f740f2f5244d01c120a378ce4b4bc48ed5dce541e3ac8cb88a59515b676bb594b1b22ae242544727c953b39ed1d728dab053edbf294dc4a0108d3afa04e7cab593059e2618e46c2b04da18637989af4e45dcc61e03f0bb81acbfac607dd6b519a36c634208cbd373bb5aea8fea6fa91ca7c58febe709ecb0e2be9ca06e2ea60c88db037e292a6e8c85a90952d1ad611c013abd0c5e93a22e96028cf4328a3c82909c28e081fc3df43149ab26b313622154d6fd02d957c097ecea3a9145cccfa4218ad560e35e2b28466a6aa9acb922e8b45955b82667fcc5f83589dc78be63a464011eefff656970931f7ba6d6e5bfe2dd48a892f6adcbbbfc68e787ce32b46f3c61914d81d36c9f754eebfc1a75e213846f230d1a948371f9aed9a5b549ac2b6a69c36e5b2176bc90cc5c01ac876577c9b82467f058325f18afff77a34c914acd33bb1e1844a5dfc77ae238f5506ddc1c496e530803dcf90223144709bb42a120d3ae907c532f5a808433b97d4e3a36d2dcd2978bd0fb5685c9d3e135b108d4eded40697c5c98075048c568c1fcde316b425dcfbb466310a7c3f54419154cf2800b11d2c2cab046337b4b9189dc5a49e4be15d894df927317bc40266f1358f5943bd25d46a5b7fb51ca692b34ac83c9a334050f1cf2ddf8d79b3871fc581ce2ce684420e0c469c4c5ab7f8ec7762379be6af41a785d50555f5bd06241330861091759464939465f64b069fce767fbd35839fb291378e7038f6325c4d31b8a1247ca2ee2726331ef8366fc611edd9d15182b1a19de65ad8ece439b35b8ff92348ec08c34563ad61b335cab5240493671fee3d80ef2f93c90fc171ad37a7509a780d4fbdbd7feeb7d3d1a35f2bc60608d3592f44c58a874a4d61188800b680622ef5d9a4ad429e988d471d6cad817d3f7db941c1c13a40843df47cec9f16066ce3980926391cf72a2f721f2b00d9f6cc33f881bee9b26c6b703f54ae65a6715a14920a91d999ceaa9d94deb6062c9054c7f4f2d710a36aa6eca08e728fa8005788f50b6efa90adef97371e8ca13cd6f0e51b668de101de44a5643f06194797f563b801563c25f34ece59ea0f0ae4add6a12f8d8dd807a1261c6106bfb4be676772feb90cc1bda99434cd6541b8f1bbd1251507ee37e707e287fef86a8b6d8a0cb4a58b4250bae2a796f80ad73a4e88d1134dd5db9519b53ab28ed3f867971bbfe1db0d77b8cb82512adc5b3ed9a9f2fb7b42b9a61837fb44ed0fdcad6b338393600308208e7d28e5182f877a14f0966f2220b25fa704e03b85a44d36f1ff7d9f38248871adf953e81de5d7121bd4959ab66aadd354dd1aa1b239500127e762c580cd9b44f8e784acead90998205ca346b5b7da8a3f77bc56019d69021291152553c1cefc36464ad52885672d2a8554e49b097bfdd8e40a073caeb70f389bc1cc955c91b9484e2bf71501b517e184c02ab7dd2b55de76871321f65cff77455abf6c21ac4c03e8af03ec09d788034dab2a9c1a407cbfe6898f46e651ecaa3f969861dec6531bfc706a939fc68b81951fa0e3e4375b2bc946e9a754373210727abf7bdff9d396a3d999545740b43925262a12d1c9fbbac688e5b284268fbd7e7cccffd9f60a7056aa5f8bbcfbad4c7a3736b63dada4a6d73c3e366eee7256781569cef737048f7619a578c71efd025751ac27a7ec3ace0ff95ab13ca6c8f99c86971955f17b5dbcc2be9971c28f4a1e4bb2f0b396bd1057f4c8852ba714ed8bd37095b6d0db3f2c8a1e69357699eb86fb4caca961a35a126065d9cdd3163b253bd64f8e6e4c7e2c25b067b00d7a66b862e914e13b7bfb0967c410c7b5c57d1ab4387fd2fc7b4f908f3877e5180a9dbdfdad9d6b339d594125996f2497f296805e8211aa87e9908be9d1a42c27a4e3cad4e7585b592921a358c80a55eb3558dcd0c84121d755e43d1572a8a97fed8539d5fd402a17c874142d7eaa35d1a6788c2418fb54c77c9694a84d975c20f9b3db9ad6d184e3725301fc2f7285e37a9cabe9f99be6c9bdd6f0288f6e27b41d086bce9e5f71d1230e3387a29367cb93a411da328047c9e695d7796cbd5e2525a4057e5a04ec024be55c6c5d108c0befa7d895bb0e5d3f5e400770c612ee22f1b6872436e8a5ec16c33e8a5b4390166610ef5da5770d414b4e080d1e307087efd29ec5a66015ba9c46962086f8d27a188def9d7d50a26bedfcfa2fc289e6e5389524eafe626b900cc2e17a2259ed7c69b13a698feea6e55deedadb315c74aace9535270f44c6f9f98db7658e4709a516dd2fb5eaf9c50131dfb0fd41431fb1c3fbf0dbf3f6db2915ba4ad6a4f5a33dd0e714ea0bea22de80f61ef247da48fe93c048cde4c324059e171e01e3a6295dad59673081005357aa43c9c0aa776deceb58c58d896a95d5bee77479930d92b131dba9bd5e209ff740cf752b28309b7e29a61e8292f2bfc7a7791a1672683889516b9ed00e89e4b02052fb34a69d716ab4090baf526714e36952dab7455548a5563decc80c41e8983a43f691dee0f187caf3557a0a3e07c72d8c6508e42e1472ac23a3006605b9b37bd3503dd17e1980338121123440a7b138ac90bd8a16dd5c82a177cb906277329cbcd6c87cf34730b1a74f059fbec991ecac897c128f7f55711433d266b3566508a075aca80fa103161c778524ad1f76d10fc3669ff5526bc20605544a0e3b5f2debb7b934d84f41b1650933452498e8c389e99c37211c24523725053a9f87eb18fed89ed63f7d696994f33f62b4cbfd2020c07ad4a530b1a63da62aa4de5185af255ddb1d0a97c0e29bbc1e7c70cc5d9ba852738f2f90f2e1b85e4c1cefefa8a96e368e847b745fb6a0a852703d7303b6714dbcca738c99394ee50115dbb80658d84f7900cf556c18bca2e6781fb3ad8b2536d33dbccc742b3e840a7c5f60792204daa5494a9e3c85bb6bb3edc1fedc2c0389cd53a1a93171b14c4f6041e34b094407c0ee6125771280dc10ffe8dbc960c0992cb0559d868e7aea213b3c12833e215059a2aa8b5b96dcc54a78940a8f5e872620fd9f51c2c5d0a0051bb15b8d143fa2846be06360e85a680f8d971bafa87b4ceb39b4411b5c922a8699df7a3797a9b5d0e0dc4f05ce5884ca9ae15a75ffdb2a7f94c21f63fbe086abdedbee7803ef0cefa3b6f30b34d183a0723345dc0f955976549402bb2fb2fbf523d30a4aac2f1e7311df8a81d351cac8a7964d20a270bd40b86a240cb00ec9b9a61b38e44402c30b56aea39561e821161a7251eb38e57c40b60fd23e1ade18280ae75540ed6a5f43d9df19e350b92db09c3493649c9351983ec778f3e7572ecc338b98fa1b4494ed0dab3c117abbc5682783473099dbe64befedf3fe85be829b377444587a968d43b8466875104a3c8c006a7b295622367418ad3f9d576bd72fb3b7ee0f927c8143e361185ef427acb34048ff4b42a41d9522ff94d31ffa9a52d6c01ea338651b07a3d88ba39e57338e29aec7074bb7e713329a4e17482160d8a0b5a700bbdcf2c6b12003e37ffa90f39656f64c79d99c15769792bcffc8a46f1cdc89890c6e74522f2209fe30bb5b08bee2e1cc35dec899b7cf36e991c16a29a3dbca225b07c2ec2bd35ca8960c88a8816f0808a80747fec1627d24abbe035006c306ee85ee76e8f2573da2ef06b2e6777871adf86fcece1ee5040ba63174dc2262fc8476663927e40e5f8b517fd277c7a5b4baed2b6e1dc43a7eb86872f7fa7879b53254a4b8908324b53b7f3d6627ecdb3dbdbbfa92a981d8e736e9cd6c938ccf92a892bca6394380f80da3d938bda4cddaefd7b39c216cb0785bffd6a7800112f8b7acee367289f34dc42d3348f83f2baedac04c4ddd660e0f4ce772acba930c1acc21e241eb0129818fd6f1d88722d423416fe44c79887d1de4a731dce7aa71605fdcde2da11cbc440ee1cdfbf482c39fc4556b14643c703b53ee4dfbacf17e216e41de4d6c221e0b9e3cc6a0ab493b0602f9ef7c73794a8bd97d840873c8da00d7744b58664022a32921ad566a294b533133053721a9afb4617c238bd9b0f43e4668de458e880a04e9b6155101d8a639efe1bfddcc4c5baa5072917fdcb0c18cc2c418d81159c15815491c28b04992f86ef602c30a4ed7bc992236434aa090af4ae286b8b5889b96f5ab551bf15a8c6b1988ea55e7d31a82334747e3888d7a64e84bbee5219fd430ffba74cf94fd139d91b21db48105d4a2faec4da7b36e4881df917017ab6d0169995c8f0b85097e8861bd02ff5988d6858ee79cda2034b79164fab1fe157dab057e084942b77adc951a7e4cd12d578935b0f9c3ee4dda7ca0a231889c931b8a7097afc9bc78457b574b3e725e1db2c4114a420609ecfdb99eeb29ea5cb8e07f83802e574466c2ba98adb3b6d47f9cd88072cc6ff013a7a41085466954c4bcd6a43810ae9fad04d13297092e7547ad477787798874f2acbdb59aaef5da8dbda83b931842d27432b9c1e999ac4ce8b55960e4cf405102ae6f449ae9c72e6c8be4310bc35abe4a419fd845c65b11e1b1ac385786721ad0adaa009dd268ea402712d99b8d8048de0db7b5229edc98eb58289e931af4c0a804e736fe1be0f1651d996848e5197226d3d5ed7bc88e4e88fa2dcfe55a67fb1883aa5941c4a6312c34fbd52f391121120acc5591d887ae4ac5241fa740b61cc260ae7286e0e203704489e0f89c451dbef66bca4ea5a0032a9185b6e7d9bccbe88bdae1476e67e1647c874a110bfa48bad9dcfda9f6563eafb52e6ed17014e124e41a5ea9b6387f741f1f4738e1cdb7c4f1b9ecb14ba2fe612147ee6d71b55440f261b686b08ab3fab740a2cd11c99079dc8a7c0be03feb19b0613122ee18572cd42d2c237ef6bf6a53a44e8141200d9b75a12acb89f3175f2421368a573af18c5e438ce1d387fed7365a9e17de46576360a7210fb5800cb935c5f1f57f819f536356f415a7f19c55494e76ac6489bcea30a7d23b658e5ec2c1b0a895d74ae01319f262309c3f397f09078b5f6d2dd1991c96aac4226b363a0774bfad1f20efaa75e9d1360aa6e0a52be18cb8ab1e936fa9be67287179b95a1278e5a89bb6ca75d35c53d9cce66bb7d12ba8b46273fccea2e31f1eb6a3a06ea469b01cab2c6a5be4d5328a10eea29ac8f4b2a1513f64808a57dafab384084d71a918407753706601927d48843bedf740413aeb6b977e5a2dcf70b95eb2ed9f1927e5d3878c8dc17afbe6d0d3cd37f4d1877d8af387c9d2bebe2d640f60bfc328add8ba29ea679036bb9d04ff1bc3f8ae2d19951a6608433f87ce4a0351c8666f076c73b4b26de404ae4c4b7de86f0614a5251b0e1c1fa108a1097a89354ddec008f1270092fd9774a20207adbba23a421acaf2d6f2f07be5f4b161c08c31a862eaa4ec61c6325d7fbd4f0d20b080850953b3310ec54996ece1004321ce4e07b31989b53bcb252dfe8eefbfe270526de6012a5884f25cc2564b8bbcdd89f365eada2525f5bc705c2d752fefbdd2bdd43bf073f5d4ea49033ea93943d07fd851a97a0acb79a59369341c529add14ebe88ac2067bd67a18b8da7106a5c0037d22b82fdfac94963905e69e372ba6f161ed123078e06ee91b7fb3ebfca769be3f7b3365d02998a9952ad3715be328b6a618274dd2c56a5c92bf40a785f6917184cc3760a34d96ac772f442adfd9c99362f3ee28ce55606f30945a86140b1f3e83688f3bfc668a5cadcdec36feda8a4286bd327ed5282da41ee738ef527132c601b95b1275c559ad15a6356c94ff098de6a3b1b63b190794e1749465d452734482b6e4577e1a2bf1f1252751bb367fc2ae2b75bc4975e31bf257aaf4423b884344048be7531a36e5cef33208684bc8f9cba9758df83335be56879647b2a3f2a07994e9329db137611891e67197ff0396dcaddf33d118678cd2a3aa7e39aef42bc44b6fa388074bb4623bf8c71a2cba6431b2431870bc8831f7091c563f8b77cf7d71d8df0c9900b6d31f4879c96cd38c2faf4dc029971fbb9e1f2de0a77b2dcda8cb3084277596af039d966d64f2be027514ba411e325a09f216743c1cdf3b955ada64d4f04a7194d8aecebcc5a1eb37dfb02e1566b769325f64e880fa5091e6901e84f90b8423e042303192fb000a11951b7d0a7c9cfa036be4afa4d5dce0b9ef12a38ff5729a89fe31ff1abd354c00bfbdd3a764c351c710080ef812721b721bd9e22eb128df4705de64babcb9e920ee3fd969187b6efffded48862765fbe8939351c0816ebc15edab8f6a707fa976e69c1e314049e8da36f06f88066a6293ee386a1a106257c2d6fe0636760bdbfb5eddbfc70f5c4d2e39e182323f6488c3c8fa77a9e4a652230ce0fcdf1126787fc3e25d3445e2aad37f61093594d1e5b3a412eaa3d623b846e05a2686c1f4ee936d06aaf300a22f158cc91b2d73b8ed136a974080b5b8a2b16b69c89247cc504b09eff0a3ed703592b46235d53ab9bac3737280f4a7f84e96c716c8535d1ece6805965aff8c2c3fd952ca0b514ff27740ca7f242aff6d8084edd0ce6900d6faffabc441acd755f298494bd965d0f5ab013394fbf23932f9e2d593bde9ef489881f8614fbaf4ba182ebe0732590e301c50f89933ecca2190001ccfc76b042c26b07c8249db3dc5c7ab656f4cd7232536aed59f37c9961fc18545eb7e39de0f615843ae58fdebd48004ac5ad7f94f05e7eaded286facf45e0ffbfd9cc58c88fcebe524f4b991aa3a36bb85576ffc3ae883801f53b79907c151ba3415dce465a10555995319920a771947f9bff8966fb210a25c0d9a2c414e77225ddc983327fa5fb6d48dd22f8e88c51e4bf94d48790eb4a65ee4d9242ab2898d732d8a1b2963671743043700cf13e242e91f7b06efc2af60fcfc7ad5f1c078294f14f82999ef66a023243c78019049d8860b7b5f67f9486ad0e2bb60f81df97aa005231184e64132b978309d4c62b550420b6fe078ee9b1b7508fc16a51ace92167f76619830befd25c566012f99e18ee35d09e39f0ae3925cd3c004d53d158d5499c4a8b2eb7a9b671daaa6ddbf1682e3c4733bdc514f89c71708ca017de5eb83dd540a244afb0f30ae8c08568e17e7eab92daaa4bb6c5d34e35f9a2d0f1117558ebdd1c30623c938e8a09102a1a98eebdcc5da95dce516715922cef151d50e5ca03c310fc7cff1ad8ab4732dbcf60499ba465f0519dbdf974d33c279dfd1e347c3a5a2258bb633102474a0f6aff161de2c2a1693526830b7ffafe512234594ad36e973194f5f22017cb9fd513f17201b476baf0846fd76a616f02afb38a633d24757988c9a750142d793da83edbab8bb296f867e491cc6dafb17e52359fab4c58fc46a53aefb1a2f0804b2ef6d7c47f2fb334223fe911004e3118ff9b95c46467fa4b32c896789f69f4769ee2cba648dc20be3bb230c8bbd436643324e8e7c8511bf4a3854d229ba1858adf4cf85f59be2e255441e46cce8c0761290beaadd98e7c35ccef21ce35fe17a047c35e2e05c3d5b3cac56094352f7b9223fdca961dce4001d2970c488724a837e00cd359cd6ebb6be27e6aac6a430563c12769776b18f84cd56eb75b65476d1931237d48187fc5304e9be4d8a2e52f226c2af3194b160af46c69841bea64590f1623cc9529434d125beee0106849fc1c4efa725fe6045610017d13e2cf5f5ab1a8bb1d555f72f233edfd441c9df681d09c877ee4403b821d7d87e8f9e10fbaf09586e81a9fbc936d03bbc3963b759c7bd3f1ba3b25fa5aba80727071c85bca5ccf12d98bc3240be873f2cd6f2293b59abef4c20664e99967cd57b91a1fc84f4c55d8c9dda81153c57b53c2fea9aec07381e396e5979cc92629a193c190ffc9817c846f7bd54374ec489848e27f168bce5e969ac5bcb8936ac4dce9dabfb4be9de498cc1164edf4e040b259f505c77fb15e275a19a7079847d76980a10be8b0c113967688e636acd2f6ba601f5ba3f5bf1c56adfd8aea3a628bee2579013b22d0f051f1e26f0778e117e894152bf02d620ccca72119ea71c1cc14e6c2c5c89e0d2676fb2cc5f27c0327098d5519b28e23bcc5e34b2a15472557c38231d3ff135f84ed7e9c914f228e0fe5635f1b6855de3cd0624b9c8c682f3baddc53dc5bcf74b637f9b172e0b0ab3e4eff14e794c60e1fc5d02e06f4ed2efbdbfea0ede82f524f0145a1da02e8b96f3eaa535e337880235f4eb9ef8cc99dea0afa6bed0b12ff6e2e43b5ccb683ae3881b02e5fe15c930c8774ce798b53de6e0b3a562eda85c2065f389087f6d945f20dfb512569a517473736fbd13e71b6e7b738d2f1f58629a9a2d37090d592f6622ef42d3a5bf06f5fa1aa6987e1182a89e06552fd83d9f7b8b223f25157b20323d93ea6b4de49bfa27455a504c9a3f96edccce777695a01f49ef219c930ffd2655fe6a1bcf0d5a0d515513e4f3ff31ab213fa077b2a2c1cfadb4efb8dad3159dd2109133320a3401acddfbb288a3c001f4f52ad2a22922a2c0dd4ca154e267197d119eae7ed878023cd45e71fbea126f27fa8dd598f60a1735cac4b186a3d7aff5010f71590e429d6f11a1ea5c48d9b849c5c23b603001932ed9691253c13edc4c59ad10651c016ae368a18fc53db6d573e0a020d92b776920991a82314dba855ac2bce90147a7ac9aa28c7aa8894e22b452923d67803474191df6584abd1b79876f287c2e550418afc6d2d2336b4ca63998d338db12b4e5c673306e6d0ba4bd9a01b4aade2b4bc474883166d60f5310c19b0e98f445bbb85f5e85576dd40a928e6dea88eac6722ed42489a9efef85cd58a04b0ab3f3c637c85ad779ab20fb8e0461f5514a56a868bba92e9a897a86102ddfcd3f6b62d5c0488df71e9d660529940151b1d4fff3f537a4036f065f99dd08913a7532709e18cb6574b324c8901160e2e7979e3b0f678c35fc4a52d488b6fc9388da297256c7bd43db9b8978614bd4984816ed5a5955921862c23c4d874291b3efe8521e24f966619acd3db5adb9941eb72be0d44c2411e7aa640e3ccfd8e166830ec7f7eded175efb37b7f40590a365ce47f243cffa0130fa3ac5b338804e41e66a96569c42b06b0ba64e9dc90afcf7491ed2f6538478eec9ee95107a41dcfbe44b173463be119eef7f9237765d25ab27876ba6e718b33cbadb28ca7b40183ca48b6c4e2cca164dfc6103d12d7ca03a4599b9278c791c95af0681418553ae18c971b7fb1c68f715e8f0867a3b82c876ac66383ac763feb9630f7cb59f713c3cc715cd1d3bd77b47ba5567ed8bb96c5d04aac4d7cff91b0637821f8056bd90ccfa6715c1a12389eb630ddfcf9c2b5f6299e0f03ef6a9870e7548f12425ddca7916f05366399baf8669def61c5f6879bc135f4c9ae16dd19dfe9550949b7873bbd011b75add17e41c218f4d45b3aaa1ad16e0f674525afb7947</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">CS213使用的数据源是？</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>CS211 Digital Logic (H) Project Design Report Flappy Bird</title>
    <url>/2022/11/06/CS211_Project_Report_Flappy_Bird/</url>
    <content><![CDATA[<p><img src="https://www.android-digital.de/wp-content/uploads/flappy_bird-600x337.jpg" alt=""></p>
<h2 id="Part-I-Team-Member"><a href="#Part-I-Team-Member" class="headerlink" title="Part I. Team Member"></a>Part I. <del>Team</del> Member</h2><div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
<th>SID</th>
<th><del>Contribution</del></th>
</tr>
</thead>
<tbody>
<tr>
<td>GuTao</td>
<td>-</td>
<td><del>100%</del></td>
</tr>
</tbody>
</table>
</div>
<h2 id="Part-II-System-Function"><a href="#Part-II-System-Function" class="headerlink" title="Part II. System Function"></a>Part II. System Function</h2><p>​        In this project, I designed a game based on the  VGA module of EGO1 development board using <code>Verilog</code> to imitate <strong>Flappy Bird</strong>. In  the project, the player can press the button to control the bird to jump  upward through the gap of the tubes to score points. </p>
<p>​        The project implements  basic user interaction interface, start, pause, reset and other game  functions, and also adds new features such as highest score, difficulty  switch, developer mode etc. to provide a more comfortable player experience  while ensuring a high degree of reproduction.   </p>
<h2 id="Part-III-System-Design"><a href="#Part-III-System-Design" class="headerlink" title="Part III. System Design"></a>Part III. System Design</h2><ol>
<li><p><strong>Working principle</strong></p>
<ul>
<li><p><strong>(a)</strong> Connect the monitor and press the global RESET button, the monitor displays 640*480 game screen, at this time the bird is stationary and the tube is on the right side out of the screen.</p>
</li>
<li><p><strong>(b)</strong> After selecting the DIFFICULTY by the switches the game starts, the bird will start moving under the simulated gravity and FLAP button, while tubes of random heights are generated from the right side of the screen and move to the left, the FLAP button supports “short press short jump” and “long press continuous flight” function.</p>
</li>
<li><p><strong>(c)</strong> The player will get a point after operating the bird through a tube. The four LED SEGMENT DISPLAYS on the right side show the current score and the other four show the highest score, and the highest score will be updated automatically when the score breaks the record.</p>
</li>
<li><strong>(d)</strong> The game ends when the bird collides with the water tube or the ground, the bird lands at a constant speed, the tubes stop moving, the FLAP button and DIFFICULTY switches are disabled, and the GAMEOVER LED lights up.</li>
<li><strong>(e)</strong> After game over, switch the difficulty to 0, press the RESTART button and select the difficulty and restart the game. The high score will be kept when the EGO1 development board is not disconnected. The game can be paused by setting the difficulty to 0 during the game.</li>
<li><strong>(f)</strong> The rightmost small switch is set to DEVELOPER MODE, which is used to observe the game difficulty and debug features. When turned on, the DEVELOPER MODE LED lights up and the bird will be stripped from the tube layer to a higher dimension and fly over the side of the tube without causing game over.</li>
<li><strong>(g)</strong> The game supports hot-swapping for both 640<em>480 and 800</em>600 resolutions, and will generate maps of suitable difficulty adapting to different resolutions.</li>
</ul>
</li>
<li><p><strong>System work flow chart</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/tRlj5IZaWAVKTJ3.png" alt="System work flow chart" style="zoom: 67%;" /></p>
</li>
<li><p><strong>System frame diagram</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/eb5SPRATqdhuMEf.png" alt="System frame diagram" style="zoom: 80%;" /></p>
</li>
<li><p><strong>Port logic function description</strong></p>
</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>Port</th>
<th>Direction</th>
<th>Width(bit)</th>
<th>Function Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>R</td>
<td>OUT</td>
<td>4</td>
<td>Red signal  for VGA</td>
</tr>
<tr>
<td>G</td>
<td>OUT</td>
<td>4</td>
<td>Green signal  for VGA</td>
</tr>
<tr>
<td>B</td>
<td>OUT</td>
<td>4</td>
<td>Blue signal  for VGA</td>
</tr>
<tr>
<td>hsync</td>
<td>OUT</td>
<td>1</td>
<td>Horizontal  sync signal</td>
</tr>
<tr>
<td>vsync</td>
<td>OUT</td>
<td>1</td>
<td>Vertical sync  signal</td>
</tr>
<tr>
<td>cho</td>
<td>OUT</td>
<td>8</td>
<td>Sequence of  chosen segment</td>
</tr>
<tr>
<td>lseg</td>
<td>OUT</td>
<td>8</td>
<td>Left segment</td>
</tr>
<tr>
<td>rseg</td>
<td>OUT</td>
<td>8</td>
<td>Right segmet</td>
</tr>
<tr>
<td>overled</td>
<td>OUT</td>
<td>1</td>
<td>Gameover LED</td>
</tr>
<tr>
<td>stateled</td>
<td>OUT</td>
<td>1</td>
<td>Resolution  mode LED</td>
</tr>
<tr>
<td>cheatled</td>
<td>OUT</td>
<td>1</td>
<td>Developer  mode LED</td>
</tr>
<tr>
<td>rst</td>
<td>IN</td>
<td>1</td>
<td>Refresh  displayer</td>
</tr>
<tr>
<td>restart</td>
<td>IN</td>
<td>1</td>
<td>Reset game</td>
</tr>
<tr>
<td>flap</td>
<td>IN</td>
<td>1</td>
<td>Flap button</td>
</tr>
<tr>
<td>reso</td>
<td>IN</td>
<td>1</td>
<td>Resolution  switch</td>
</tr>
<tr>
<td>cheatmode</td>
<td>IN</td>
<td>1</td>
<td>Developer  mode switch</td>
</tr>
<tr>
<td>clk</td>
<td>IN</td>
<td>1</td>
<td>Default clock</td>
</tr>
<tr>
<td>sw</td>
<td>IN</td>
<td>3</td>
<td>Difficulty  switches (0 for pause)</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li><p><strong>Sub-module design</strong></p>
<p>The system is divided into 11 sub-modules, the relation between modules are shown as follows.</p>
<p><img src="https://s2.loli.net/2022/08/04/j7Kgtlx3wiH1PD9.png" alt="submodule design" style="zoom: 33%;" /></p>
<ul>
<li><p><strong>(a) Main module</strong></p>
<p>​        The master control module, which integrates each sub-module, gets the clock signal, LED segment signal, coordinate information, and is also responsible for the output of VGA display signal, game difficulty selection, game over judgment, restarting the game, switching resolution, etc. It is the integrated module of all input ports and output ports.</p>
</li>
<li><p><strong>(b) Clock divider &amp; clock wizard module</strong></p>
<p>​        Frequency divider module, the game clock frequency is manually implemented, 100MHz clock frequency of EGO1 reduced by two million times to get 50Hz of the game clock frequency, the logic of the manual frequency divider is: the use of counter <code>t%2000000 = 0</code> condition output 1ns high level game clock and clear the counter.</p>
<p>​        The clock wizard IP core is used to obtain the VGA synchronous clock frequency divider in two resolutions, 640*480 corresponds to 25.175MHz, 800*600 corresponds to 40MHz.</p>
</li>
<li><p><strong>(c) Random generator module</strong></p>
<p>​        Retrieved from the answer of @nguthrie on <a href="https://stackoverflow.com/questions/14497877">stackoverflow: how to implement a pseudo hardware random number generator?</a></p>
</li>
<li><p><strong>(d) Segment &amp; Converter module</strong></p>
<p>​        The converter module is responsible for converting the input decimal score into BCD code, and then outputting the segment sequence according to the parameter table.</p>
<p>​        The segment display module is responsible for reading the sequence from the converter module, and displaying the highest score and the current score on the eight-digit eight-segment display by dividing the frequency.</p>
</li>
<li><p><strong>(e) Bird position module</strong></p>
<p>​        The bird position calculation module is responsible for processing the input current y coordinate and the FLAP button information and obtaining the y coordinate of next frame. When the FLAP button is pressed, the bird is given an upward initial velocity, otherwise the bird is subjected to a downward simulated gravitational acceleration. The coordinate is calculated using a right shift operation for fluency, which simulates float calculation and gravity.</p>
</li>
<li><p><strong>(f) Display module (is_bird &amp; is_tube module)</strong></p>
<p>​        The display module is responsible for processing the input query coordinates and the position information of each element, and outputting the color information corresponding to the query coordinates. The display priority of the same coordinates: bird &gt; tube &gt; background. </p>
<p>​        <code>is_bird</code> and <code>is_tube</code> modules pass their relative coordinates to the top leftmost pixel for the input coordinates, and use the <code>Block Memory Generator</code> IP core in the display module to take out the corresponding color values and output the color of the current query position after deciding the priority.</p>
</li>
<li><p><strong>(g) Block Memory Generator</strong></p>
<p>​        This project uses this IP core to connect <code>bird.coe</code>, <code>tube_body.coe</code>, <code>tube_head.coe</code>, <code>bg.coe</code> to display images of birds, tube, and backgrounds.</p>
</li>
</ul>
</li>
<li><p><strong>Simulation result (waveforms)</strong></p>
<p>* As some of the modules have tons of input and output ports and are quite complex, simulation steps are not used in the development process, so the part of the waveforms are not shown here.</p>
<ul>
<li><p><strong>(a) Converter simulation</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/l67RJGQOLdvVicT.png" alt="counter_sim"></p>
</li>
<li><p><strong>(b) Random generator simulation</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/5MlnNjHiLtDUqkT.png" alt="random_generator_sim"></p>
</li>
<li><p><strong>(c) Clock divider module</strong> (Mod factor shrunk for better simulation)</p>
<p><img src="https://s2.loli.net/2022/08/04/2XM1CEdf5PeFqo4.png" alt="clk_div_sim"></p>
</li>
<li><p><strong>(d) Segment module</strong> (Higher shifting frequency for better simulation)</p>
<p><img src="https://s2.loli.net/2022/08/04/oAEKzSFUw5aDCBd.png" alt="seg_sim"></p>
</li>
</ul>
</li>
</ol>
<h2 id="Part-IV-Problems-encountered-and-solved"><a href="#Part-IV-Problems-encountered-and-solved" class="headerlink" title="Part IV. Problems encountered and solved"></a>Part IV. Problems encountered and solved</h2><h3 id="Question1-How-to-display-the-image-instead-of-simply-rectangles-and-squares"><a href="#Question1-How-to-display-the-image-instead-of-simply-rectangles-and-squares" class="headerlink" title="Question1.  How to display the image instead of simply rectangles and squares?"></a><strong>Question1</strong>.  How to display the image instead of simply rectangles and squares?</h3><p><strong>Reason</strong>: The very first step during my  development process is to protect my eyes, a better UI is more comfortable  for development, so implementing images is my first step.  </p>
<p><strong>Solution</strong>: Block memory generator, read the  help document and seek help from my friend. By the way, the first time I  displayed the game, the color was quite strange (red cloud, purple tube  etc.), and that’s because the non-active part of the screen was unexpectedly  assigned with non-zero values, and the screen took these values as noise and  subtracted them from normal values, leading to the strange color shift.  </p>
<h3 id="Question2-How-to-generate-tubes-of-random-height"><a href="#Question2-How-to-generate-tubes-of-random-height" class="headerlink" title="Question2.  How to generate tubes of random height?"></a><strong>Question2</strong>.  How to generate tubes of random height?</h3><p><strong>Reason</strong>: To add some basic difficulty to  this game.  </p>
<p><strong>Solution</strong>: Seek help from _stackoverflow_,  this pseudo 5-bit random number generator is powerful enough for my project.  </p>
<h3 id="Question3-How-to-create-map-adapting-to-different-resolutions"><a href="#Question3-How-to-create-map-adapting-to-different-resolutions" class="headerlink" title="Question3.  How to create map adapting to different resolutions?"></a><strong>Question3</strong>.  How to create map adapting to different resolutions?</h3><p><strong>Reason</strong>: Some classmates encounter problem  when switching to a higher resolution, so I want to solve it before it  happens.</p>
<p><strong>Solution</strong>: Use screen height and screen  width as parameter to generate map instead of using constant, which  guarantees the tube height and tube generation interval to automatically fit  the resolution.  </p>
<h3 id="Question4-How-to-simulate-the-gravity"><a href="#Question4-How-to-simulate-the-gravity" class="headerlink" title="Question4.  How to simulate the gravity?"></a><strong>Question4</strong>.  How to simulate the gravity?</h3><p><strong>Reason</strong>: To make the flap and fall more  fluent and natural.</p>
<p><strong>Solution</strong>: Use right shift operation to  simulate the float calculation, introduce velocity and acceleration to  calculate the bird position, and update it at the frequency of 50Hz.  </p>
<h3 id="Question5-How-to-judge-game-over-How-to-figure-out-the-priority-of-elements-when-displaying"><a href="#Question5-How-to-judge-game-over-How-to-figure-out-the-priority-of-elements-when-displaying" class="headerlink" title="Question5.  How to judge game over? / How to figure out the priority of elements when  displaying?"></a><strong>Question5</strong>.  How to judge game over? / How to figure out the priority of elements when  displaying?</h3><p><strong>Reason</strong>: To optimize the visual experience,  when bird hits the tube, it should fall slowly to the ground, which may cause  the bird to have intersection with the tube.</p>
<p><strong>Solution</strong>: Bird&gt;Tube&gt;Background, also  some pixels of bird is transparent, for these pixels I need to display the  tube or background below the bird. Also, the logic of judging game over is  quite simple using display logic, that is, when a pixel tries to display both  bird and tube, it means that the bird has hit the tube, game over.  </p>
<h2 id="Part-V-Summary-amp-experience"><a href="#Part-V-Summary-amp-experience" class="headerlink" title="Part V. Summary &amp; experience"></a>Part V. Summary &amp; experience</h2><p>* Since my English level is not so high, I use Chinese here to better express my true feeling :)</p>
<p>​        本次项目我利用本学期所学知识，基于EGO1开发板使用Verilog复现了经典小游戏Flappy Bird，项目中熟悉了VGA显示原理、数码管显示原理、状态机的转移和设计、简单游戏逻辑设计、硬件语言开发流程等内容。</p>
<p>​        特别感谢肖佳辰等同学提供了若干踩坑的经验，开发过程中预防了很多问题，整个开发过程实际用时不到24h，不过我在开发过程中还是遇到了花式的问题和困难，但最终也都得到了不错的解决。同时我也为其他同学提供了多次帮助，例如屏外噪声、图像导入、分辨率切换、游戏逻辑等问题。</p>
<p>​        项目中最大的收获是模块化设计的思想，本次开发前我先在纸上设计好了各个模块的大致功能和模块间互相调用的关系，在实际开发时按部就班达到了很高的效率，比较java项目边写边加的模式更为从容有条理。</p>
<p>​        实际上，本次项目由于开发周期短(同期的数据库项目对时间占用较大)还存在较多的不足，在本学期课程结束后我会将GitHub上的项目同步并继续开发，优化界面、调整重力等参数，因为我对本项目抱有较大的兴趣，所以我会继续做下去。</p>
<p>​        报告的最后，非常感谢为本学期课程和项目提供指导帮助的老师、助教和图班优秀的同学们，让我从一个对硬件一无所知甚至抱有胆怯的小白变成了对硬件编程、电路设计感兴趣的人，受益匪浅。  </p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Digital Logic</tag>
      </tags>
  </entry>
  <entry>
    <title>CS214 计算机组成原理 半期复习</title>
    <url>/2023/04/17/CS214_Midterm_Review/</url>
    <content><![CDATA[<p>$\huge\text{Outline}$</p>
<ol>
<li>Computer Abstractions and Technology</li>
<li>Instructions: Language of the Computer</li>
<li>Arithmetic for Computers</li>
</ol>
<h2 id="Chapter-1-Computer-Abstractions-and-Technology"><a href="#Chapter-1-Computer-Abstractions-and-Technology" class="headerlink" title="Chapter 1 - Computer Abstractions and Technology"></a>Chapter 1 - Computer Abstractions and Technology</h2><h3 id="§1-1-Introduction"><a href="#§1-1-Introduction" class="headerlink" title="§1.1 Introduction"></a>§1.1 Introduction</h3><p><strong>Classes of Computers</strong>:</p>
<ul>
<li>Personal computers</li>
<li>Server computers</li>
<li>Supercomputers</li>
<li>Embedded computers</li>
</ul>
<p><strong>The Post-PC Era</strong>:</p>
<ul>
<li>Cloud computing<ul>
<li>Warehouse Scale Computers (WSC)</li>
<li>Software as a Service (SaaS)</li>
</ul>
</li>
<li>Data centers</li>
<li>Personal Mobile Device(PMD)</li>
</ul>
<h3 id="§1-2-Eight-Great-Ideas-in-Computer-Architecture"><a href="#§1-2-Eight-Great-Ideas-in-Computer-Architecture" class="headerlink" title="§1.2 Eight Great Ideas in Computer Architecture"></a>§1.2 Eight Great Ideas in Computer Architecture</h3><ol>
<li><p>Design for <strong>Moore’s Law</strong></p>
<blockquote>
<p>The number of transistors that can be integrated on a die would double every 18 to 24 months.</p>
<p>Gordon Moore, 1965</p>
</blockquote>
</li>
<li><p>Use <strong>Abstraction</strong> to Simplify Design</p>
<p>High Level Language → (Compiler) → Assembly Code → (Assembler) → Machine Language → (Machine Interpretation) → Hardware Architecture Description → (Architecture Implementation) → Logic Circuit Description</p>
</li>
<li><p>Make the <strong>Common Case Fast</strong></p>
</li>
<li><p>Performance via <strong>Parallelism</strong></p>
</li>
<li><p>Performance via <strong>Pipelining</strong></p>
</li>
<li><p>Performance via <strong>Prediction</strong></p>
</li>
<li><p><strong>Hierarchy</strong> of Memories</p>
<p><img src="https://s2.loli.net/2023/04/10/7jNgTnyGV5WS9iJ.png" alt="image.png"></p>
</li>
<li><p><strong>Dependability</strong> via Redundancy</p>
<p>Redundancy so that a failing piece doesn’t make the whole system fail.</p>
</li>
</ol>
<h3 id="§1-3-Below-Your-Program"><a href="#§1-3-Below-Your-Program" class="headerlink" title="§1.3 Below Your Program"></a>§1.3 Below Your Program</h3><p><strong>Between Your Program and Hardware</strong>:</p>
<ul>
<li>Application software<ul>
<li>Written in high-level language (HLL)</li>
</ul>
</li>
<li>System software<ul>
<li>Compiler: translates HLL code to machine code</li>
<li>Operating System: service code<ul>
<li>Handling input/output</li>
<li>Managing memory and storage</li>
<li>Scheduling tasks &amp; sharing resources</li>
</ul>
</li>
</ul>
</li>
<li>Hardware<ul>
<li>Processor, memory, I/O controllers</li>
</ul>
</li>
</ul>
<p><strong>Levels of Program Code</strong>:</p>
<ul>
<li>High-level language<ul>
<li>Level of abstraction closer to problem domain</li>
<li>Provides for productivity and portability</li>
</ul>
</li>
<li>Assembly language<ul>
<li>Textual representation of instructions</li>
</ul>
</li>
<li>Hardware representation<ul>
<li>Binary digits (bits)</li>
<li>Encoded instructions and data</li>
</ul>
</li>
</ul>
<h3 id="§1-4-Under-the-Covers"><a href="#§1-4-Under-the-Covers" class="headerlink" title="§1.4 Under the Covers"></a>§1.4 Under the Covers</h3><p><strong>Same components for all kinds of computer</strong>:</p>
<ul>
<li>I/O device</li>
<li>Memory</li>
<li>Processor</li>
</ul>
<p><strong>Inside the Processor</strong>:</p>
<ul>
<li>Datapath: performs operations on data</li>
<li>Control: control the sequence of Datapath, memory, I/O</li>
<li>Cache memory: Small fast SRAM memory for immediate access to data</li>
</ul>
<h3 id="§1-5-Technologies-for-Building-Processors-and-Memory"><a href="#§1-5-Technologies-for-Building-Processors-and-Memory" class="headerlink" title="§1.5 Technologies for Building Processors and Memory"></a>§1.5 Technologies for Building Processors and Memory</h3><p>(Different from textbook)</p>
<p><strong>Processor Technology Trends</strong>:</p>
<ul>
<li>Shrinking of transistor sizes</li>
<li>Transistor density increases by 35% per year and die size increases by 10-20% per year</li>
<li>Transistor speed improves linearly with size</li>
<li>Wire delays do not scale down at the same rate as transistor delays</li>
</ul>
<p><strong>Storage</strong>:</p>
<ul>
<li>Volatile main memory<ul>
<li>Loses instructions and data when power off</li>
</ul>
</li>
<li>Non-volatile secondary memory<ul>
<li>Magnetic disk</li>
<li>Flash memory</li>
<li>Optical disk (CDROM, DVD)</li>
</ul>
</li>
</ul>
<p><strong>Memory and I/O Technology Trends</strong>:</p>
<ul>
<li>DRAM density increases by 40-60% per year, latency has reduced by 33% in 10 years (the memory wall!), bandwidth improves twice as fast as latency decreases.</li>
<li>Disk density improves by 100% every year, latency improvement similar to DRAM.</li>
<li>Networks: primary focus on bandwidth; 10Mb → 100Mb in 10 years; 100Mb → 1Gb in 5 years.</li>
</ul>
<p><strong>Power Consumption Trends</strong>:</p>
<ul>
<li><p>$\text{Dyn Power} \propto \text{activity} \times \text{capacitance}\times \text{voltage}^2\times \text{frequency}$</p>
</li>
<li><p>Voltage &amp; frequency are constant now. Capacitance per transistor is decreasing, number of transistors (activity) is increasing.</p>
</li>
<li>Power leakage rising.</li>
</ul>
<h3 id="§1-6-Performance"><a href="#§1-6-Performance" class="headerlink" title="§1.6 Performance"></a>§1.6 Performance</h3><p>$\text{*}$Focus on response time for now.</p>
<p><strong>Execution Time</strong>: </p>
<ul>
<li>Elapsed time<ul>
<li>Total response time, including all aspects.<ul>
<li>Processing, I/O, OS overhead, idle time</li>
</ul>
</li>
<li>Determines system performance.</li>
</ul>
</li>
<li>CPU time<ul>
<li>Time spent processing a given job<ul>
<li>Discounts I/O time, other jobs’ shares</li>
</ul>
</li>
<li>Comprises user CPU time and system CPU time</li>
<li>Different programs are affected differently by CPU and system performance</li>
</ul>
</li>
</ul>
<p>$\text{Performance}=1/\text{Execution time}$</p>
<p><strong>Clock level</strong>: </p>
<p>$\text{CPU Time} = \text{Clock Cycles}\times\text{Clock Period}=\frac{\text{Clock Cycles}}{\text{Clock Rate}}$</p>
<p>Performance improved by: </p>
<ul>
<li>Clock cycles ↓</li>
<li>Clock rate ↑</li>
</ul>
<p>Trade off: rate vs. count</p>
<p><strong>Instruction level</strong>:</p>
<p>$\text{Clock Cycles} = \sum\limits_{i=1}^n(\text{IC}_i\times \text{CPI}_i)$</p>
<p>$\text{CPU Time} = \text{IC} \times \text{CPI}\times \text{Clock Period}$</p>
<ul>
<li>Instruction Count for a program<ul>
<li>Determined by program, ISA and compiler</li>
</ul>
</li>
<li>Average cycles per instruction (CPI)<ul>
<li>Determined by CPU hardware</li>
<li>If different instructions have different CPI<ul>
<li>Average CPI affected by instruction mix</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>The big picture</strong>: </p>
<p>$\text{CPU Time} = \frac{\text{Instructions}}{\text{Program}}\times \frac{\text{Clock Cycles}}{\text{Instruction}}\times \frac{\text{Seconds}}{\text{Clock Cycle}}=\text{IC}\times \text{CPI}\times \text{Tc}$</p>
<ul>
<li>Algorithm: affects IC, possibly CPI</li>
<li>Programming language: affects IC, CPI</li>
<li>Compiler: affects IC, CPI</li>
<li>Instruction set architecture: affects IC, CPI, Tc</li>
</ul>
<h3 id="§1-7-The-Power-Wall"><a href="#§1-7-The-Power-Wall" class="headerlink" title="§1.7 The Power Wall"></a>§1.7 The Power Wall</h3><p><strong>Energy Consumption of a chip</strong>:</p>
<ul>
<li>Energy consumption = dynamic energy + static energy</li>
<li><p>Energy for a single transistor switch: $E\propto \frac 1 2\times \text{Capacity load}\times \text{Voltage}^2$</p>
</li>
<li><p>Energy per second (Power): $\text{Power}\propto E\times \text{Frequency switched}$</p>
</li>
</ul>
<p><strong>The power wall</strong>: </p>
<ul>
<li>We can’t reduce voltage further: too leaky.</li>
<li>We can’t remove more heat: too expensive.</li>
</ul>
<h3 id="§1-8-The-Sea-Change-The-Switch-from-Uniprocessors-to-Multiprocessors"><a href="#§1-8-The-Sea-Change-The-Switch-from-Uniprocessors-to-Multiprocessors" class="headerlink" title="§1.8 The Sea Change: The Switch from Uniprocessors to Multiprocessors"></a>§1.8 The Sea Change: The Switch from Uniprocessors to Multiprocessors</h3><p><strong>Uniprocessor Performance</strong>: </p>
<p>Constrained by power, instruction -level parallelism, memory latency</p>
<p><strong>Multiprocessors</strong>:</p>
<ul>
<li>Multicore microprocessors<ul>
<li>More than one processor per chip</li>
</ul>
</li>
<li>Requires explicitly parallel programming<ul>
<li>Compare with instruction level parallelism<ul>
<li>Hardware executes multiple instructions at once</li>
<li>Hidden from the programmer</li>
</ul>
</li>
<li>Hard to do<ul>
<li>Programming for performance</li>
<li>Load balancing</li>
<li>Optimizing communication and synchronization</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="§1-9-Real-Stuff-Benchmarking-the-Intel-Core-i7"><a href="#§1-9-Real-Stuff-Benchmarking-the-Intel-Core-i7" class="headerlink" title="§1.9 Real Stuff: Benchmarking the Intel Core i7"></a>§1.9 Real Stuff: Benchmarking the Intel Core i7</h3><p><strong>Standard Performance Evaluation Cooperative(SPEC) CPU Benchmark</strong>: </p>
<p>Develops benchmarks for CPU, I/O, Web, …</p>
<p><strong>SPEC CPU2006</strong>: </p>
<ul>
<li><p>Elapsed time to execute a selection of programs</p>
<ul>
<li>Negligible I/O, so focuses on CPU performance</li>
</ul>
</li>
<li><p>Normalized relative to reference machine</p>
</li>
<li><p>Summarize as geometric mean of performance ratios</p>
<ul>
<li>CINT2006 (integer) and CFP2006 (floating-point)</li>
</ul>
<p>$\sqrt[n]{\prod\limits_{i=1}^n \text{Execution time ratio}_i}$</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>Instruction Count</th>
<th>CPI</th>
<th>Clock Cycle Time</th>
<th>Execution Time</th>
<th>Reference Time</th>
<th>SPEC ratio</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\text{IC}$</td>
<td>$\text{CPI}$</td>
<td>$\text{Tc}$</td>
<td>$\text{T}_\text{Exe}$</td>
<td>$\text{T}_\text{Ref}$</td>
<td>$\frac{\text{T}_\text{Ref}}{\text{T}_\text{Exe}}$</td>
</tr>
</tbody>
</table>
</div>
<p><strong>SPEC Power Benchmark</strong>:</p>
<p>Power consumption of the server at different workload levels.</p>
<ul>
<li>Performance: ssj_ops (server side Java operations per second)</li>
<li>Power: Watts</li>
</ul>
<p>$\text{Overall ssj_ops per Watt} = (\sum\limits_{i=0}^{10}\text{ssj_ops}_i)/(\sum\limits_{i=0}^{10}\text{power}_i)$</p>
<h3 id="§1-10-Fallacies-and-Pitfalls"><a href="#§1-10-Fallacies-and-Pitfalls" class="headerlink" title="§1.10 Fallacies and Pitfalls"></a>§1.10 Fallacies and Pitfalls</h3><p><strong>Amdahl’s Law</strong>: performance improvements through an enhancement is limited by the fraction of time the enhancement comes into play.</p>
<script type="math/tex; mode=display">\text{Execution time after improvement}=\\{\text{Execution time affected by improvement}\over\text{Amount of improvement}}+\text{Execution time unaffected}</script><ul>
<li>Corollary: make the common case fast</li>
</ul>
<p><strong>Fallacy: Computers at low utilization use little power (X)</strong></p>
<hr>
<h2 id="Chapter-2-Instructions-Language-of-the-Computer"><a href="#Chapter-2-Instructions-Language-of-the-Computer" class="headerlink" title="Chapter 2 - Instructions: Language of the Computer"></a>Chapter 2 - Instructions: Language of the Computer</h2><h3 id="§2-1-Introduction"><a href="#§2-1-Introduction" class="headerlink" title="§2.1 Introduction"></a>§2.1 Introduction</h3><p><strong>Concepts</strong>: </p>
<ul>
<li>Instructions, Instruction set</li>
<li>Assembly language, Machine language</li>
<li>Von Neumann Architecture</li>
<li>Harvard Architecture</li>
<li>reduced instruction set computer (RISC)</li>
<li>complex instruction set computer (CISC)</li>
</ul>
<p><strong>Similarity of instruction set</strong>: </p>
<ul>
<li>base on similar design principles</li>
<li>several basic operations provided</li>
<li>designed for common goal</li>
</ul>
<p><strong>Design target</strong>:</p>
<ul>
<li>easy to build</li>
<li>maximizing performance and minimizing cost and energy</li>
</ul>
<p><strong>Important design principles</strong>: </p>
<ul>
<li>keep the hardware simple</li>
<li>keep the instructions regular</li>
</ul>
<p><strong>Design Principles</strong></p>
<ul>
<li>Simplicity favors regularity<ul>
<li>Regularity makes implementation simpler</li>
<li>Simplicity enables higher performance at lower cost</li>
</ul>
</li>
<li>Smaller is faster<ul>
<li>Register vs. memory</li>
<li>Number of registers is small</li>
</ul>
</li>
<li>Make the common case fast<ul>
<li>Small constants are common</li>
<li>Immediate operand avoids a load instruction</li>
</ul>
</li>
<li>Good design demands good compromises<ul>
<li>Different formats complicate decoding, but allow 32-bit instructions uniformly</li>
<li>Keep formats as similar as possible</li>
</ul>
</li>
</ul>
<h3 id="§2-2-Operands"><a href="#§2-2-Operands" class="headerlink" title="§2.2 Operands"></a>§2.2 Operands</h3><p><strong>Registers</strong>: </p>
<ul>
<li>MIPS ISA: 32 registers.<ul>
<li>Reason for the limit of 32 registers: Smaller is faster</li>
</ul>
</li>
<li>MIPS: Each register is 32-bit wide, a word.</li>
</ul>
<p><strong>Memory Operands</strong>:</p>
<ul>
<li>Values must be fetched from memory</li>
<li>load word: <code>lw \$t0, memory-address</code></li>
<li>store word: <code>sw \$t0, memory-address</code></li>
</ul>
<p><strong>Memory Address</strong>: </p>
<blockquote>
<p>The compiler organizes data in memory… it knows the location of every variable (saved in a table)… it can fill in the appropriate mem-address for load-store instructions.</p>
</blockquote>
<p><strong>Immediate Operands</strong>: </p>
<p>An immediate instruction uses a constant number as one of the inputs (instead of a register operand).</p>
<p><strong>Registers vs. Memory</strong>:</p>
<ul>
<li>Registers are faster to access than memory</li>
<li>Operating on memory data requires loads and stores<ul>
<li>More instructions to be executed</li>
</ul>
</li>
<li>Compiler must use registers for variables as much as possible<ul>
<li>Only spill to memory for less frequently used variables</li>
<li>Register optimization is important!</li>
</ul>
</li>
</ul>
<h3 id="§2-3-Numeric-Representations"><a href="#§2-3-Numeric-Representations" class="headerlink" title="§2.3 Numeric Representations"></a>§2.3 Numeric Representations</h3><p>Decimal, Binary, Hexadecimal</p>
<p><strong>Unsigned Binary Integers</strong>: </p>
<p>$x=x_{n-1}2^{n-1}+x_{n-2}2^{n-2}+\cdots + x_12^1+x_02^0, x\in[0,2^n-1]$</p>
<p><strong>2s-Complement Signed Integers</strong>: </p>
<p>$x=-x_{n-1}2^{n-1}+x_{n-2}2^{n-2}+\cdots + x_12^1+x_02^0, x\in[-2^{n-1},2^{n-1}-1]$</p>
<p><strong>Signed Negation</strong>:</p>
<p>2’s complement = 1’s complement + 1</p>
<p><strong>Sign Extension</strong>:</p>
<p>Representing a number using more bits, and preserve the numeric value.</p>
<p>Replicate the sign bit to the left.</p>
<p><code>addi</code>, <code>lb</code>, <code>lh</code>, <code>beq</code>, <code>bne</code></p>
<p>Instruction Formats</p>
<h3 id="§2-4-Instructions"><a href="#§2-4-Instructions" class="headerlink" title="§2.4 Instructions"></a>§2.4 Instructions</h3><p><strong>Arithmetic instruction</strong>: add, sub, …</p>
<p><strong>Data transfer instruction</strong>: lw, sw, lh, sh, …</p>
<p><strong>Logical instruction</strong>: and, or, …</p>
<p><strong>Conditional branch</strong>: beq, bne, slt, …</p>
<h3 id="§2-5-Instruction-Formats"><a href="#§2-5-Instruction-Formats" class="headerlink" title="§2.5 Instruction Formats"></a>§2.5 Instruction Formats</h3><p><strong>Registers</strong>: </p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Name</th>
<th style="text-align:center">Number</th>
<th style="text-align:left">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$zero</td>
<td style="text-align:center">0</td>
<td style="text-align:left">Constant value 0</td>
</tr>
<tr>
<td style="text-align:center">$at</td>
<td style="text-align:center">1</td>
<td style="text-align:left">Assembler Temporary</td>
</tr>
<tr>
<td style="text-align:center">$v0-$v1</td>
<td style="text-align:center">2-3</td>
<td style="text-align:left">Values for Function Results and Expression Evaluation</td>
</tr>
<tr>
<td style="text-align:center">$a0-$a3</td>
<td style="text-align:center">4-7</td>
<td style="text-align:left">Arguments</td>
</tr>
<tr>
<td style="text-align:center">$t0-$t7</td>
<td style="text-align:center">8-15</td>
<td style="text-align:left">Temporaries</td>
</tr>
<tr>
<td style="text-align:center">$s0-$s7</td>
<td style="text-align:center">16-23</td>
<td style="text-align:left">Saved Temporaries</td>
</tr>
<tr>
<td style="text-align:center">$t8-$t9</td>
<td style="text-align:center">24-25</td>
<td style="text-align:left">Tempoaries</td>
</tr>
<tr>
<td style="text-align:center">$gp</td>
<td style="text-align:center">28</td>
<td style="text-align:left">Global Pointer</td>
</tr>
<tr>
<td style="text-align:center">$sp</td>
<td style="text-align:center">29</td>
<td style="text-align:left">Stack Pointer</td>
</tr>
<tr>
<td style="text-align:center">$fp</td>
<td style="text-align:center">30</td>
<td style="text-align:left">Frame Pointer</td>
</tr>
<tr>
<td style="text-align:center">$ra</td>
<td style="text-align:center">31</td>
<td style="text-align:left">Return Address</td>
</tr>
</tbody>
</table>
</div>
<p><strong>R-type instruction</strong>:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">opcode</th>
<th style="text-align:center">source 1</th>
<th style="text-align:center">source 2</th>
<th style="text-align:center">dest</th>
<th style="text-align:center">shift amt</th>
<th style="text-align:center">function</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">op</td>
<td style="text-align:center">rs</td>
<td style="text-align:center">rt</td>
<td style="text-align:center">rd</td>
<td style="text-align:center">shamt</td>
<td style="text-align:center">funct</td>
</tr>
<tr>
<td style="text-align:center">6 bits</td>
<td style="text-align:center">5 bits</td>
<td style="text-align:center">5 bits</td>
<td style="text-align:center">5 bits</td>
<td style="text-align:center">5 bits</td>
<td style="text-align:center">6 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>I-type instruction</strong>:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">opcode</th>
<th style="text-align:center">source</th>
<th style="text-align:center">dest</th>
<th style="text-align:center">constant</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">op</td>
<td style="text-align:center">rs</td>
<td style="text-align:center">rt</td>
<td style="text-align:center">const</td>
</tr>
<tr>
<td style="text-align:center">6 bits</td>
<td style="text-align:center">5 bits</td>
<td style="text-align:center">5 bits</td>
<td style="text-align:center">16 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>J-type instruction</strong>:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>opcode</th>
<th>target address</th>
</tr>
</thead>
<tbody>
<tr>
<td>6 bits</td>
<td>26 bits</td>
</tr>
</tbody>
</table>
</div>
<h3 id="§2-6-Procedures"><a href="#§2-6-Procedures" class="headerlink" title="§2.6 Procedures"></a>§2.6 Procedures</h3><p><strong>Procedure lifespan</strong>:</p>
<ul>
<li>acquires resources</li>
<li>performs task</li>
<li>covers its tracks</li>
<li>returns back with desired result</li>
</ul>
<p><strong>Steps of procedure execution (caller calls the callee)</strong>:</p>
<ul>
<li>parameters (arguments) are placed where the callee can see them</li>
<li>control is transferred to the callee</li>
<li>acquire storage resources for callee</li>
<li>execute the procedure</li>
<li>place result value where caller can access it</li>
<li>return control to caller</li>
</ul>
<p><strong>Registers Used during Procedure Calling</strong>:</p>
<ul>
<li>The registers are used to hold data between the caller and the callee:</li>
<li>$a0 - $a3: four argument registers to pass parameters</li>
<li>$v0 - $v1: two value registers to return the values</li>
<li>$ra: one return address register to return to the point of origin in the caller</li>
</ul>
<p><strong>Storage Management on a Call/Return</strong>:</p>
<ul>
<li>A new procedure must create space for all its variables on the stack</li>
<li>Before executing the jal, the caller must save relevant values in $s0-$s7, $a0-$a3, $ra, temps into its own stack space</li>
<li>Arguments are copied into $a0-$a3; the jal is executed</li>
<li>After the callee creates stack space, it updates the value of $sp</li>
<li>Once the callee finishes, it copies the return value into $v0, frees up stack space, and $sp is incremented</li>
<li>On return, the caller may bring in its stack values, $ra, temps into registers</li>
</ul>
<blockquote>
<p>Updating $sp <strong>can</strong> be ahead of save caller-saved registers, e.g. MIPS clang 16.0.0. It is reasonable in the sense that the stack space should be allocated before being used. (Supplement from <a href="https://github.com/NeumoNeumo">NeumoNeumo</a>)</p>
</blockquote>
<p><strong>Saving Conventions</strong>:</p>
<ul>
<li>Caller saved: $t0-$t9, $ra, $a0-$a3</li>
<li>Callee saved: $s0-$s7</li>
</ul>
<p><strong>Memory Layout</strong>:</p>
<ul>
<li>Text: program code</li>
<li>Static data: global variables<ul>
<li>static variables in C, constant arrays and strings</li>
<li>$gp initialized to address allowing ±offsets into this segment</li>
</ul>
</li>
<li>Dynamic data: heap<ul>
<li>malloc in C, new in Java</li>
</ul>
</li>
<li>Stack: automatic storage</li>
</ul>
<p><strong>Local Data on the Stack</strong>:</p>
<ul>
<li><p>Local data allocated by callee</p>
<ul>
<li>C automatic variables</li>
</ul>
</li>
<li><p>Procedure frame (activation record)</p>
<ul>
<li>Used by some compilers to manage stack storage</li>
</ul>
<blockquote>
<p>In <code>cpython</code>(commit 95ee7c), the function runtime is stored in <code>PyFrameObject</code> which is allocated on the heap. (Acceleration of function calls in python 1.11 is due in large part to the optimization of memory allocation for PyFrameObject)</p>
</blockquote>
</li>
</ul>
<h3 id="§2-7-Addressing"><a href="#§2-7-Addressing" class="headerlink" title="§2.7 Addressing"></a>§2.7 Addressing</h3><p><img src="https://s2.loli.net/2023/04/12/73bqCv5AmxMslwz.png" alt="image.png" style="zoom:67%;" /></p>
<p><strong>Immediate Addressing</strong>:</p>
<p><code>addi, subi, andi, ori...</code></p>
<p>$\text{hi = x&gt;&gt;16}$, $\text{lo=x-(hi&lt;&lt;16)}$</p>
<p><code>lui</code> + <code>ori</code> = 32-bit constant</p>
<p><strong>Register Addressing</strong>:</p>
<p><code>and, andi, sub, subi, lw...</code></p>
<p>Using register as the operand.</p>
<p><img src="https://s2.loli.net/2023/04/12/mRP9EeWzLYSHJwq.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Base/displacement Addressing</strong>:</p>
<p>​    <code>lw, sw, lh, sh, lb, sb...</code></p>
<p>​    The address is the sum of a register and a constant.</p>
<p><strong>Branch Addressing (PC-relative addressing)</strong>:</p>
<p><code>beq, bne</code></p>
<p>$\text{Target address = PC + 4 + constant × 4}$</p>
<p><strong>Jump Addressing (Pseudo-direct addressing)</strong>:</p>
<p><code>j, jal</code></p>
<p>$\text{Target address = PC[31:28]:(address×4)}$</p>
<p>Address times 4 because it is the “word address”.</p>
<p>If branch target is too far to encode with 16-bit offset, assembler rewrites the code to “double jump”.</p>
<h3 id="§2-8-Translating-and-Starting-a-Program"><a href="#§2-8-Translating-and-Starting-a-Program" class="headerlink" title="§2.8 Translating and Starting a Program"></a>§2.8 Translating and Starting a Program</h3><p><strong>A translation hierarchy for C</strong>:</p>
<p><img src="https://s2.loli.net/2023/04/12/Og1dI2isJ5Mq7Ao.png" alt="image.png" style="zoom:67%;" /></p>
<p><strong>Role of Assembler</strong>:</p>
<ul>
<li>pseudo-instructions → actual hardware instructions</li>
<li>assembly instructions → machine instructions</li>
</ul>
<p><strong>Role of Linker</strong>: </p>
<ul>
<li>Stitches different object files into a single executable<ul>
<li>patch internal and external references</li>
<li>determine addresses of data and instruction labels</li>
<li>organize code and data modules in memory</li>
</ul>
</li>
<li>Dynamically linked libraries – the executable points to dummy routines – these dummy routines call the dynamic linker-loader so they can update the executable to jump to the correct routine.</li>
</ul>
<p><strong>Linker Simulation</strong>:</p>
<ul>
<li>Combine the <code>Text size</code> and <code>Data size</code>.</li>
<li>Determine the order of objects.</li>
<li>Combine the text segment, conventionally start from $0040\ 0000_\text{HEX}$.</li>
<li>Modify the jump address according to new text addresses.</li>
<li>Combine the data segment, conventionally start from $1000\ 0000_\text{HEX}$.</li>
<li>Modify the memory operations according to new data addresses. Be careful about the sign extension!</li>
</ul>
<p><strong>A translation hierarchy for Java</strong>:</p>
<p><img src="https://s2.loli.net/2023/04/12/5A3ytqQFM42BUNr.png" alt="image.png" style="zoom: 67%;" /></p>
<h3 id="§2-9-RISC-V"><a href="#§2-9-RISC-V" class="headerlink" title="§2.9 RISC-V"></a>§2.9 RISC-V</h3><p><strong>Differences between MIPS32 and RISC-V32</strong>:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>MIPS32</th>
<th>RISC-V32</th>
</tr>
</thead>
<tbody>
<tr>
<td>License</td>
<td>Proprietary</td>
<td>Open-Source</td>
</tr>
<tr>
<td>Endianness</td>
<td>Big-endian</td>
<td>Little-endian</td>
</tr>
<tr>
<td>Addressing modes</td>
<td>5</td>
<td>4</td>
</tr>
<tr>
<td>Conditional branches</td>
<td>slt, sltu + beq, bnq</td>
<td>+blt,bge,bltu,bgeu</td>
</tr>
</tbody>
</table>
</div>
<p><strong>RISC-V Registers</strong>:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>x0</td>
<td>the constant value 0</td>
</tr>
<tr>
<td>x1</td>
<td>return address</td>
</tr>
<tr>
<td>x2</td>
<td>stack pointer</td>
</tr>
<tr>
<td>x3</td>
<td>global pointer</td>
</tr>
<tr>
<td>x4</td>
<td>thread pointer</td>
</tr>
<tr>
<td>x5-x7</td>
<td>temporaries</td>
</tr>
<tr>
<td>x8</td>
<td>frame pointer</td>
</tr>
<tr>
<td>x9</td>
<td>saved registers</td>
</tr>
<tr>
<td>x10-x11</td>
<td>function arguments/results</td>
</tr>
<tr>
<td>x12-x17</td>
<td>function arguments</td>
</tr>
<tr>
<td>x18-x27</td>
<td>saved registers</td>
</tr>
<tr>
<td>x28-x31</td>
<td>temporaries</td>
</tr>
</tbody>
</table>
</div>
<p><strong>R-type instruction</strong>:</p>
<p>Arithmetic instruction format.<code>add, xor</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>funct7</th>
<th>rs2</th>
<th>rs1</th>
<th>funct3</th>
<th>rd</th>
<th>op</th>
</tr>
</thead>
<tbody>
<tr>
<td>7 bits</td>
<td>5 bits</td>
<td>5 bits</td>
<td>3 bits</td>
<td>5 bits</td>
<td>7 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>I-type instruction</strong>:</p>
<p>Loads &amp; immediate arithmetic.<code>addi, lw</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>immediate[11:0]</th>
<th>rs1</th>
<th>funct3</th>
<th>rd</th>
<th>op</th>
</tr>
</thead>
<tbody>
<tr>
<td>12 bits</td>
<td>5 bits</td>
<td>3 bits</td>
<td>5 bits</td>
<td>7 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>S-type instruction</strong>:</p>
<p>Stores.<code>sw, sb</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>immed[11:5]</th>
<th>rs2</th>
<th>rs1</th>
<th>funct3</th>
<th>imme[4:0]</th>
<th>op</th>
</tr>
</thead>
<tbody>
<tr>
<td>7 bits</td>
<td>5 bits</td>
<td>5 bits</td>
<td>3 bits</td>
<td>5 bits</td>
<td>7 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>SB-type instruction</strong>:</p>
<p>Conditional branch format.<code>beq, bge</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>immed[12,10:5]</th>
<th>rs2</th>
<th>rs1</th>
<th>funct3</th>
<th>imme[4:1,11]</th>
<th>op</th>
</tr>
</thead>
<tbody>
<tr>
<td>7 bits</td>
<td>5 bits</td>
<td>5 bits</td>
<td>3 bits</td>
<td>5 bits</td>
<td>7 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>UJ-type instruction</strong>:</p>
<p>Unconditional jump format.<code>jal</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>immediate[20,10:1,11,19:12]</th>
<th></th>
<th>rd</th>
<th>op</th>
</tr>
</thead>
<tbody>
<tr>
<td>17 bits</td>
<td>3 bits</td>
<td>5 bits</td>
<td>7 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>U-type instruction</strong>:</p>
<p>Upper immediate format.<code>lui</code></p>
<div class="table-container">
<table>
<thead>
<tr>
<th>immediate[31:12]</th>
<th></th>
<th>rd</th>
<th>op</th>
</tr>
</thead>
<tbody>
<tr>
<td>17 bits</td>
<td>3 bits</td>
<td>5 bits</td>
<td>7 bits</td>
</tr>
</tbody>
</table>
</div>
<p><strong>MIPS &amp; RISC-V Instruction Formats</strong>:</p>
<p><img src="https://s2.loli.net/2023/04/12/mU6LCchI438Orvo.png" alt="image.png"></p>
<h3 id="§2-10-More-ISAs"><a href="#§2-10-More-ISAs" class="headerlink" title="§2.10 More ISAs"></a>§2.10 More ISAs</h3><p>ARM v8, Intel x86</p>
<hr>
<h2 id="Chapter-3-Arithmetic-for-Computers"><a href="#Chapter-3-Arithmetic-for-Computers" class="headerlink" title="Chapter 3 - Arithmetic for Computers"></a>Chapter 3 - Arithmetic for Computers</h2><h3 id="§3-1-Addition-and-Subtraction"><a href="#§3-1-Addition-and-Subtraction" class="headerlink" title="§3.1 Addition and Subtraction"></a>§3.1 Addition and Subtraction</h3><p><strong>Integer Overflow</strong>:</p>
<ul>
<li><code>add( + , + ) = -</code></li>
<li><code>add( - , - ) = +</code></li>
<li><code>sub( + , - ) = -</code></li>
<li><code>sub( - , + ) = +</code></li>
</ul>
<p><strong>1-bit Adder</strong>:</p>
<p><img src="https://s2.loli.net/2023/04/13/ZDsigL6rwNOdK5z.png" alt="image.png" style="zoom:33%;" /></p>
<p><strong>1-bit ALU and 32-bit ALU</strong>:</p>
<ul>
<li>If op = 0, o = a &amp; b (and) </li>
<li>If op = 1, o = a | b (or) </li>
<li>If op = 2, o = a + b (add)</li>
</ul>
<p>To obtain 32-bit ALU, sequentially connect the 1-bit ALU via <code>Carry</code>, bind <code>op</code>  to the same operation.</p>
<p><strong>Dealing with Overflow</strong>:</p>
<ol>
<li>Use unsigned operations.</li>
<li>On overflow, raise exceptions:<ul>
<li>Save <code>pc</code> in exception program counter <code>epc</code>.</li>
<li>Jump to predefined handler address.</li>
<li><code>mfc0</code> (move from coprocessor reg) instruction can retrieve EPC value, to return after corrective action.</li>
</ul>
</li>
<li>Saturating operations:<ul>
<li>On overflow, result is largest representable value.</li>
</ul>
</li>
</ol>
<p><strong>SIMD</strong>: Single-instruction, multiple-data. See <a href="https://github.com/ShiqiYu/CPP/blob/main/week08/Lecture08.pdf">CS205 C/C++ Lecture 8: Speedup Your Program</a> (^^ ;</p>
<h3 id="§3-2-Multiplication"><a href="#§3-2-Multiplication" class="headerlink" title="§3.2 Multiplication"></a>§3.2 Multiplication</h3><p><strong>Naive version</strong>:</p>
<p><img src="https://s2.loli.net/2023/04/13/sdiNn6Oh9qX5BaW.png" alt="image.png" style="zoom: 33%;" /></p>
<p>If the least significant bit of the multiplier is 1, add the multiplicand to the product. If not, go to the next step. Shift the multiplicand left and the multiplier right in the next two steps. These three steps are repeated 32 times.</p>
<p><strong>Refined version</strong>:</p>
<p><img src="https://s2.loli.net/2023/04/13/45pRS9xjfK8ocCH.png" alt="image.png" style="zoom: 33%;" /></p>
<p>The Multiplicand register, ALU, and Multiplier register are all 32 bits wide, with only the Product register left at 64 bits.</p>
<p>Now the product is shifted right. The separate Multiplier register also disappeared. The multiplier is placed instead in the right half of the Product register.</p>
<p><strong>Signed Multiplication</strong>:</p>
<p><strong>Faster Multiplication</strong>:</p>
<p><img src="https://s2.loli.net/2023/01/01/8pS9IbAPfWXDOgt.png" alt=""></p>
<h2 id="Appendix"><a href="#Appendix" class="headerlink" title="Appendix"></a>Appendix</h2><h3 id="MIPS-Core-Architecture"><a href="#MIPS-Core-Architecture" class="headerlink" title="MIPS Core Architecture"></a>MIPS Core Architecture</h3><p><img src="https://s2.loli.net/2023/04/12/ohiHcDIxywB4Y3k.png" alt="image.png"></p>
<h3 id="MIPS-instruction-encoding"><a href="#MIPS-instruction-encoding" class="headerlink" title="MIPS instruction encoding"></a>MIPS instruction encoding</h3><p><img src="https://s2.loli.net/2023/04/12/RB23qK1zE5mJtTa.png" alt="image.png"></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Computer Organization</tag>
      </tags>
  </entry>
  <entry>
    <title>CS215 离散数学 期末复习</title>
    <url>/2023/01/10/CS215_Final_Review/</url>
    <content><![CDATA[<h1 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h1><ol>
<li>Counting</li>
<li>Relation</li>
<li>Graphs</li>
<li>Tree</li>
<li>P, NP and NPC Problems</li>
</ol>
<h1 id="Chapter-11-Counting"><a href="#Chapter-11-Counting" class="headerlink" title="Chapter 11 - Counting"></a>Chapter 11 - Counting</h1><p><strong>Basic Counting Rules</strong>： the Product Rule &amp; the Sum Rule</p>
<p><strong>Pigeonhole Principle</strong>：</p>
<p> If there are more objects than bins then there is at least one bin with more than one object.</p>
<p><strong>Generalized Pigeonhole Principle</strong>：</p>
<p>If $N$ objects are placed into $k$ bins, then there is at least one bin containing at least $⌈N/k⌉$ objects.</p>
<p><strong>Inclusion-Exclusion Principle</strong>：</p>
<p>$|A\cup B|=|A|+|B|-|A\cap B|$</p>
<p>$|\bigcup\limits_{i=1}^{n}E_i|=\sum\limits_{k=1}^{n}(-1)^{k+1}\sum\limits_{1\le i_1&lt;i_2&lt;\cdots&lt;i_k\le n}|E_{i_1}\cap E_{i_2}\cap\cdots \cap E_{i_k}|$</p>
<p><strong>Permutations</strong>：</p>
<p>$P(n,k)=\frac{n!}{(n-k)!}$</p>
<p><strong>Binomial Coefficient</strong>：</p>
<p>$\left(\begin{array}{c}<br>n \\<br>k<br>\end{array}\right)=C(n, k)=\frac{n!}{k!(n-k)!}$</p>
<p><strong>Some Properties of Binomial Coefficients</strong>：</p>
<p>$\left(\begin{array}{c}<br>n \\<br>k<br>\end{array}\right)=\left(\begin{array}{c}<br>n \\<br>n-k<br>\end{array}\right)$</p>
<p>$\sum\limits_{i=0}^{n}\left(\begin{array}{c}<br>n \\<br>i<br>\end{array}\right)=2^n$</p>
<p><strong>Pascal identity</strong>：</p>
<p>$\left(\begin{array}{c}<br>n \\<br>k<br>\end{array}\right)=\left(\begin{array}{c}<br>n-1 \\<br>k-1<br>\end{array}\right)+\left(\begin{array}{c}<br>n-1 \\<br>k<br>\end{array}\right)$</p>
<p><strong>Pascal’s Triangle</strong>：</p>
<p>$\begin{array}{l}<br>1 \\<br>1 \quad 1 \\<br>\begin{array}{lll}<br>1 &amp; 2 &amp; 1<br>\end{array} \\<br>\begin{array}{llll}<br>1 &amp; 3 &amp; 3 &amp; 1<br>\end{array} \\<br>\begin{array}{lllll}<br>1 &amp; 4 &amp; 6 &amp; 4 &amp; 1<br>\end{array} \\<br>\begin{array}{llllll}<br>1 &amp; 5 &amp; 10 &amp; 10 &amp; 5 &amp; 1<br>\end{array} \\<br>\begin{array}{lllllll}<br>1 &amp; 6 &amp; 15 &amp; 20 &amp; 15 &amp; 6 &amp; 1<br>\end{array} \\<br>\end{array}$</p>
<p><strong>The Binomial Theorem</strong>：</p>
<p>$(x+y)^n=\sum\limits_{i=0}^{n}\left(\begin{array}{c}<br>n \\<br>i<br>\end{array}\right)x^{n-i}y^i$.</p>
<p><strong>Trinomial Coefficients</strong>：</p>
<p>When $k_1+k_2+k_3=n$</p>
<p>$\left(\begin{array}{ccc}<br>&amp; n &amp; \\<br>k_{1} &amp; k_{2} &amp; k_{3}<br>\end{array}\right)=\frac{n!}{k_1!k_2!k_3!}$</p>
<p><strong>The Polynomial Theorem</strong>：</p>
<p>$(a_1+a_2+\cdots+a_m)^n=\sum\limits_{x_1+x_2+\cdots+x_m=n}\frac{n!}{x_1!x_2!\cdots x_m!}a_1^{x_1}a_2^{x_2}\cdots a_m^{x_m}$</p>
<p><strong>Solving Linear Recurrence Relations of degree 2</strong>：</p>
<p>$a_n=c_1a_{n-1}+c_2a_{n-2}$</p>
<p>characteristic equation: $r^2-c_1r-c_2=0$</p>
<p>If CE has 2 distinct roots $r_1\ne r_2$, the solution: $a_n=\alpha_1r_1^n+\alpha_2r_2^n$</p>
<p><strong>Solving Linear Recurrence Relations of degree k</strong>：</p>
<p>$a_n=\sum\limits_{i=1}^kc_ia_{n-i}$</p>
<p>CE: $r^k-\sum\limits_{i=1}^k c_ir^{k-i}=0$</p>
<p>If CE has $k$ distinct roots $r_i$, then the solution: $a_n=\sum\limits_{i=1}^k \alpha_ir_i^n$</p>
<p><strong>The Case of Degenerate Roots in General</strong>：</p>
<p>Suppose there are $t$ roots $r_1,\cdots, r_t$ with multiplicities $m_1,\cdots,m_t$. Then the solution: </p>
<script type="math/tex; mode=display">a_n=\sum\limits_{i=1}^t(\sum\limits_{j=0}^{m_i-1}\alpha_{i,j}n^j)r_i^n</script><p><strong>Linear Nonhomogeneous Recurrence Relations</strong>：</p>
<p>$a_n=F(n)+\sum\limits_{i=1}^kc_ia_{n-i}$</p>
<ol>
<li>Solve $a_n=\sum\limits_{i=1}^kc_ia_{n-i}$ and get $a_n=h(n)$</li>
<li>Solve particular solution $p(n)$</li>
<li>$a_n=p(n)+h(n)$</li>
</ol>
<p><strong>Generating Functions</strong>：</p>
<p>$G(x)=a_0+a_1x+\cdots+a_kx^k+\cdots=\sum\limits_{k=0}^{\infty}a_kx^k$</p>
<p><strong>Examples of Generating Functions</strong>：</p>
<p>$G(x)=1/(1-x)$ for $|x|&lt;1$</p>
<p>$1,1,1,1,1,\cdots$</p>
<p>$G(x)=1/(1-ax)$ for $|ax|&lt;1$</p>
<p>$1,a,a^2,a^3,a^4,\cdots$</p>
<p>$G(x)=1/(1-x)^2$ for $|x|&lt;1$</p>
<p>$1,2,3,4,5,\cdots$</p>
<p>$G(x)=1/(1-ax)^2$ for $|ax|&lt;1$</p>
<p>$1,2a,3a^2,4a^3,5a^4,\cdots$</p>
<p><strong>Operations of Generating Functions</strong>：</p>
<p>Let $f(x)=\sum\limits_{k=0}^{\infty}a_kx^k$, and $g(x)=\sum\limits_{k=0}^{\infty}b_kx^k$</p>
<p>Then</p>
<script type="math/tex; mode=display">f(x)+g(x)=\sum\limits_{k=0}^{\infty}(a_k+b_k)x^k</script><script type="math/tex; mode=display">f(x)g(x)=\sum\limits_{k=0}^{\infty}(\sum\limits_{j=0}^{k}a_jb_{k-j})x^k</script><p><strong>Convolution Rule</strong>：</p>
<p>Let $A(x)$ be the generating function for selecting items from a set $A$, and let $B(x)$ be the generating function for selecting items from a set $B$ disjoint from $A$. Then the generating function for selecting items from the union $A ∪ B$ is the product $A(x) \cdot B(x)$.</p>
<p>e.g. Number of ways to select $n$ balls with $k$ colors.</p>
<p>$D(x)=1/(1-x)^k$, $d_n=[x^n] (1/(1-x)^k)=\left(\begin{array}{c}n+k-1 \\n\end{array}\right)$</p>
<p><strong>Useful Generating Functions</strong>：</p>
<p>$\begin{aligned}<br>(1+x)^{n} &amp; = \sum_{k=0}^{n} C(n, k) x^{k} \\<br>(1+a x)^{n} &amp; = \sum\limits_{k=0}^{n} C(n, k) a^{k} x^{k} \\<br>\left(1+x^{r}\right)^{n} &amp; = \sum\limits_{k=0}^{n} C(n, k) x^{r k} \\<br>\frac{1-x^{n+1}}{1-x} &amp; = \sum\limits_{k=0}^{n} x^{k}  = 1+x+x^{2}+\cdots+x^{n} \\<br>\frac{1}{1-x} &amp; = \sum\limits_{k=0}^{\infty} x^{k}  = 1+x+x^{2}+\cdots \\<br>\frac{1}{1-a x} &amp; = \sum\limits_{k=0}^{\infty} a^{k} x^{k}  = 1+a x+a^{2} x^{2}+\cdots \\<br>\frac{1}{1-x^{r}} &amp; = \sum\limits_{k=0}^{\infty} x^{r k}  = 1+x^{r}+x^{2 r}+\cdots \\<br>\frac{1}{(1-x)^{2}} &amp; = \sum\limits_{k=0}^{\infty}(k+1) x^{k}  = 1+2 x+3 x^{2}+\cdots \\<br>\frac{1}{(1-x)^{n}} &amp; = \sum\limits_{k=0}^{\infty} C(n+k-1, k) x^{k} \\<br>\frac{1}{(1+x)^{n}} &amp; = \sum\limits_{k=0}^{\infty} C(n+k-1, k)(-1)^{k} x^{k} \\<br>\frac{1}{(1-a x)^{n}} &amp; = \sum\limits_{k=0}^{\infty} C(n+k-1, k) a^{k} x^{k} \\<br>e^{x} &amp; = \sum\limits_{k=0}^{\infty} \frac{x^{k}}{k !}  = 1+x+\frac{x^{2}}{2 !}+\frac{x^{3}}{3 !}+\cdots \\<br>\ln (1+x) &amp; = \sum\limits_{k=0}^{\infty} \frac{(-1)^{k+1} x^{k}}{k}  = x-\frac{x^{2}}{2}+\frac{x^{3}}{3}-\frac{x^{4}}{4}+\cdots<br>\end{aligned}$</p>
<p><strong>r-Combinations from a Set</strong>：</p>
<p>An n-combination with <strong>repetition allowed</strong>, or a multiset of size $n$, chosen from a set of $k$ elements, is an unordered selection of elements with repetition allowed.</p>
<p>number of n-combinations: $C(n+k-1,n)$</p>
<h1 id="Chapter-12-Relation"><a href="#Chapter-12-Relation" class="headerlink" title="Chapter 12 - Relation"></a>Chapter 12 - Relation</h1><p><strong>Properties of Relations</strong>：</p>
<ul>
<li><p>Reflexive Relation：$\forall a\in A$, $(a,a)\in R$</p>
</li>
<li><p>Irreflexive Relation：$\forall a\in A$, $(a,a)\notin R$</p>
</li>
<li>Symmetric Relation：$\forall a,b\in A$, $(a,b)\in R→(b,a)\in R$</li>
<li><p>Antisymmetric Relation：$\forall a,b\in A$, $(a,b)\in R\wedge (b,a)\in R→a=b$</p>
</li>
<li><p>Transitive Relation：$\forall a,b,c\in A$, $(a,b)\in R\wedge (b,c)\in R→(a,c)\in R$</p>
</li>
</ul>
<p><strong>Combining Relations</strong>：</p>
<p>Using set operations.</p>
<p><strong>Composite of Relations</strong>：</p>
<p>$(a,b)\in R$, $(b,c)\in S$, then $(a,c)\in S\circ R$</p>
<p>The powers $R^n$, for $n=1,2,3,\cdots$, is defined inductively by</p>
<p>$R^1=R$ and $R^{n+1}=R^n\circ R$</p>
<p>The relation $R$ on a set $A$ is transitive IFF $R^n\subseteq R$ for $n=1,2,3,\cdots$</p>
<p><strong>Number of Reflexive Relations</strong>：</p>
<p>The number of reflexive relations on a set $A$ with $|A|=n$ is $2^{n(n-1)}$</p>
<p>Proof: $n$ diagonal elements fixed, the other $n(n-1)$ elements are free to choose.</p>
<p><strong>Representing Relations</strong>：</p>
<p>explicit list/table, function $f:D→\{T,F\}$, 01 matrix, directed graph…</p>
<p><strong>Closures of Relations</strong>：</p>
<p>Let $R$ be a relation on a set $A$. A relation $S$ on $A$ with property $P$ is called the closure of $R$ with respect to $P$ if $S$ is subset of every relation $Q$ ($S\subseteq Q$) with property $P$ that contains $R$ ($R\subseteq Q$).</p>
<p>$S$ is the minimal set containing $R$ satisfying the property $P$.</p>
<ul>
<li>reflexive closures</li>
<li>symmetric closures</li>
<li>transitive closures</li>
</ul>
<p><strong>Path Length</strong>：</p>
<p>Let $R$ be relation on a set $A$. There is a path of length $n$ from $a$ to $b$ IFF $(a,b)\in R^n$.</p>
<p>Proof by induction.</p>
<p>Let $A$ be a set with $n$ elements, and $R$ a relation on $A$. If there exists a path from $a$ to $b$ with $a\ne b$, then there exists a path of length $\le n-1$.</p>
<p><strong>Connectivity Relation</strong>：</p>
<p>Let $R$ be a relation on a set $A$. The connectivity relation $R^\star$ consists of all pairs $(a,b)$ such that there is a path (of any length) between $a$ and $b$ in $R$.</p>
<script type="math/tex; mode=display">R^\star =\bigcup\limits_{k=1}^{\infty}R^k</script><p>The transitive closure of a relation $R$ equals the connectivity relation $R^\star$.</p>
<p>Proof:</p>
<ul>
<li><p>$R^\star$ is transitive.</p>
<p>$(a,b)\in R^\star$ and $(b,c)\in R^\star$, then there are paths from $a$ to $b$ and from $b$ to $c$ in $R$. Thus, there is a path from $a$ to $c$ in $R$. This means that $(a,c)\in R^\star$.</p>
</li>
<li><p>$R^\star\subseteq S$ whenever $S$ is a transitive relation containing $R$.</p>
<p>Suppose that $S$ is a transitive relation containing $R$.</p>
<p>Then $S^n$ is also transitive and $S^n\subseteq S$.</p>
<p>We have $S^\star\subseteq S$. Thus $R^\star\subseteq S^\star\subseteq S$.</p>
</li>
</ul>
<p><strong>Transitive Closure Algorithm</strong>：</p>
<p>Roy-Warshall Algorithm ($\Theta(n^3)$)</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// computes R* ith zero-one matrices</span><br><span class="line">W := M_R;</span><br><span class="line">for k := 1 to n</span><br><span class="line">   for i := 1 to n</span><br><span class="line">      for j := 1 to n</span><br><span class="line">         w[i][j]=w[i][j] | (w[i][k] &amp; w[k][j]);</span><br><span class="line">return W;</span><br><span class="line">// W is the zero-one matrix for R*</span><br></pre></td></tr></table></figure>
<p><strong>n-ary Relations &amp; Relational Databases</strong>：</p>
<p>domains, degree, functional, primary key, composite key, selection, projection, join…</p>
<p><strong>Equivalence Relation</strong>：</p>
<p>A relation $R$ on a set $A$ is called an equivalence relation if it is <strong>reflexive</strong>, <strong>symmetric</strong> and <strong>transitive</strong>.</p>
<p><strong>Equivalence Class</strong>：</p>
<p>Let $R$ be an equivalence relation on a set $A$. The set of all elements that are related to an element $a$ of $A$ is called the equivalence class of $a$, denoted by $[a]_R$. When only on relation is considered, we use the notation $[a]$.</p>
<p>Let $R$ be an equivalence relation on a set $A$. The following statements are equivalent: </p>
<ol>
<li>$a\ R\ b$</li>
<li>$[a]=[b]$</li>
<li>$[a]\cap[b]\ne0$</li>
</ol>
<p>Proof: </p>
<p>1→2: Prove $[a]\subseteq[b]$ and $[b]\subseteq[a]$</p>
<p>2→3: $[a]$ is not empty ($R$ reflexive)</p>
<p>3→1: $\exists c$ s.t. $c\in[a]$ and $c\in [b]$</p>
<p><strong>Partition of a set</strong>：</p>
<p>Let $S$ be a set. A collection of nonempty subsets of $S$ $A_1,A_2,\cdots,A_k$ is called a partition of $S$ is</p>
<p>$A_i\cap A_j=\emptyset$, $i\ne j$ and $S=\bigcup\limits_{i=1}^{k}A_i$</p>
<p><strong>Equivalence Classes and Partitions</strong>：</p>
<p>Let $R$ be an equivalence relation on a set $A$. Then union of all th equivalence classes of $R$ is $A$: </p>
<script type="math/tex; mode=display">A=\bigcup \limits_{a\in A}[a]_R</script><p>The equivalence classes form a partition of $A$.</p>
<p>Let $\{A_1,A_2,\cdots,A_i,\cdots\}$ be a partition of $S$. Then there is an equivalence relation $R$ on $S$, that has the sets $A_i$ as its equivalence classes.</p>
<p><strong>Partial Ordering</strong>：</p>
<p>A relation $R$ on a set $S$ is called a partial ordering, if it is <strong>reflexive</strong>, <strong>antisymmetric</strong> and <strong>transitive</strong>. A set $S$ together with a partial ordering $R$ is called a poset, denoted by $(S,R)$. Members of $S$ are called elements of the poset.</p>
<p><strong>Comparability</strong>：</p>
<p>The elements $a$ and $b$ of a poset $(S,≼)$ are comparable if either $a≼b$ or $b≼a$. Otherwise, $a$ and $b$ are called incomparable.</p>
<p><strong>Total Ordering</strong>：</p>
<p>If $(S,≼)$ is a poset and every two elements of $S$ are comparable, $S$ is called a <strong>totally ordered</strong> or <strong>linearly ordered set</strong>, and $≼$ is called a <strong>total order</strong> or a <strong>linear order</strong>. A totally ordered set is also called a <strong>chain</strong>.</p>
<p><strong>Lexicographic Ordering</strong>：</p>
<p>Given two posets $(A_1,≼_1)$ and $(A_2,≼_2)$, the lexicographic ordering on $A_1\times A_2$ is defined by specifying that $(a_1,a_2)$ is less than $(b_1,b_2)$, i.e., $(a_1,a_2)≼(b_1,b_2)$, either if $a_1≺_1b_1$ or if $a_1=b_1$ then $a_2≼_2b_2$.</p>
<p><strong>Hasse Diagram</strong>：</p>
<p>……</p>
<p><strong>Maximal and Minimal Elements</strong>：</p>
<p>$a$ is a maximal (resp. minimal) element in poset $(S, ≼)$ is there is no $b\in S$ such that $a ≺ b$ (resp. $b ≺ a$).</p>
<p><strong>Greatest and Least Elements</strong>：</p>
<p>$a$ is the greatest (resp. least) element of the poset $(S, ≼)$ if $b ≼ a$ (resp. $a ≼ b$) for all $b\in S$.</p>
<p><strong>Upper Bound and Lower Bound</strong>：</p>
<p>$u\in S$ is called an upper bound (resp. lower bound) of $A$ if $a ≼ u$ (resp. $u ≼ a$) for all $a\in A$.</p>
<p>$x\in S$ is called the least upper bound (resp. greatest lower bound) of $A$ if $x$ is an upper bound (resp. lower bound) that is less than any other upper bound (resp. greater than any other lower bound) of $A$.</p>
<p><strong>Well-Ordered Set</strong>：</p>
<p>$(S, ≼)$ is a well-ordered set if it is a poset such that $≼$ is a total ordering and every non empty subset of $S$ has a least element.</p>
<p><strong>The Principle of Well-Ordered Induction</strong>：</p>
<p>Suppose that $S$ is a well-ordered set. Then $P(x)$ is true for all $x\in S$, if</p>
<p>Inductive Step: For every $y\in S$, if $P(x)$ is true for all $x\in S$ with $x ≺ y$, then $P(y)$ is true.</p>
<p><strong>The reason for no base step</strong>: For the least element $x_0$, the precedent “P(x) is true for all $x\in S$ with $x ≺ x_0$” is itself false, by <strong>vacuous proof</strong>, $P(x_0)$ is true.</p>
<p><strong>Lattices</strong>：</p>
<p>A poset in which every pair of elements has both a least upper bound and a greatest lower bound is called a lattice.</p>
<p><strong>Topological Sorting</strong>：</p>
<p>Given a partial ordering $R$, find a total ordering $≼$ such that $a≼b$ whenever $a\ R\ b$. $≼$ is said <strong>compatible</strong>  with $R$.</p>
<p><img src="https://s2.loli.net/2023/01/02/SmQ43Gcoi9Nlnk8.png" alt="image.png" style="zoom:50%;" /></p>
<h1 id="Chapter-13-Graph"><a href="#Chapter-13-Graph" class="headerlink" title="Chapter 13 - Graph"></a>Chapter 13 - Graph</h1><p><strong>Definition of a Graph</strong>：</p>
<p>A graph $G=(V,E)$ consists of a nonempty set $V$ of vertices and a set $R$ of edges. Each edge has either one or two vertices associated with it, called its endpoints. An edge is said to be incident to its endpoints.</p>
<p><strong>Simple graph</strong>：</p>
<p>A graph in which at most one edge joins each pair of distinct vertices and no edge joins a vertex to itself.</p>
<p><strong>multigraph</strong>：</p>
<p>Graphs that may have multiple edges connecting the same vertices.</p>
<p><strong>pseudograph</strong>：</p>
<p>Graphs that may include loops, and possibly multiple edges connecting the same pair of vertices or a vertex to itself.</p>
<p><strong>Undirected Graphs</strong>：</p>
<p>adjacent(neighbors), neighborhood, degree…</p>
<p> Handshaking Theorem: If $G=(V,E)$ is an undirected graph with $m$ edges, then $2m=\sum\limits_{v\in V}deg(v)$.</p>
<p>An undirected graph has an even number of vertices of odd degree.</p>
<p><strong>Directed Graphs</strong>：</p>
<p>adjacent from, adjacent to, in-degree $deg^-(v)$, out-degree $deg^+(v)$</p>
<p>$|E|=\sum\limits_{v\in V}deg^-(v)=\sum\limits_{v\in V}deg^+(v)$</p>
<p><strong>Complete Graphs</strong>：</p>
<p>A complete graph on $n$ vertices, denoted by $K_n$, is the simple graph that contains exactly one edge between each pair of distinct vertices.</p>
<p><img src="https://s2.loli.net/2023/01/02/FLgD3CjqZrykNEK.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Cycles</strong>：</p>
<p>A cycle $C_n$ for $n \ge 3$ consists of $n$ vertices $v_1, v_2,\cdots, v_n$, and edges $\{v_1,v_2\},\{v_2,v_3\},\cdots,\{v_{n-1},v_n\},\{v_n,v_1\}$.</p>
<p><img src="https://s2.loli.net/2023/01/02/fvPKBXwR3t8JIyo.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Wheels</strong>：</p>
<p>A wheel $W_n$ is obtained by adding an additional vertex to a cycle $C_n$.</p>
<p><img src="https://s2.loli.net/2023/01/02/FsuZT7cd2tvEbXQ.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>N-dimensional Hypercube</strong>：</p>
<p>An  n-cube $Q_n$ is a graph with $2^n$ vertices representing all bit strings of length $n$, where there is an edge between two vertices that differ in exactly one bit position.</p>
<p><img src="https://s2.loli.net/2023/01/02/LMvoapSku5HEOFB.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Bipartite Graphs</strong>：</p>
<p>A simple graph $G$ is bipartite if $V$ can be partitioned into two disjoint subsets $V_1$ and $V_2$ such that every edge connects a vertex in $V_1$ and a vertex in $V_2$.</p>
<p><strong>Complete Bipartite Graphs</strong>：</p>
<p>A complete bipartite graph $K_{m,n}$ is a graph that has its vertex set partitioned into two subsets $V_1$ of size $m$ and $V_2$ of size $n$ such that there is an edge from every vertex in $V_1$ to every vertex in $V_2$.</p>
<p><strong>Bipartite Graphs and Matchings</strong>：</p>
<p>A matching is a subset of $E$ such that no two edges are incident with the same vertex.</p>
<p>A maximum matching is a matching with the largest number of edges.</p>
<p>A matching $M$ in a bipartite graph $G=(V,E)$ wth bipartition $(V_1,V_2)$ is a complete matching from $V_1$ to $V_2$ if every vertex in $V_1$ is the endpoint of an edge in the matching, i.e., $|M|=|V_1|$.</p>
<p><strong>Hall’s Marriage Theorem</strong>：</p>
<p>The bipartite graph $G=(V,E)$ with bipartition $(V_1,V_2)$ has a complete matching from $V_1$ to $V_2$ IFF $|N(A)|\ge |A|$ for all subsets $A$ of $V_1$.</p>
<ul>
<li><p>“only if”: For every vertex $v\in A$, there is an edge in $M$ connecting $v$ to a vertex in $V_2$. Thus, for all subsets $A$ of $V_1$, there are at least as many vertices in $V_2$ that are neigbors of vertices in $A$ as there are vertices in $A$, $|N(A)|\ge |A|$.</p>
</li>
<li><p>“if”: Use strong induction. </p>
</li>
<li><p>Base step: $|V_1|=1$</p>
</li>
<li><p>Inductive hypothesis: Let $k$ be a positive integer. If $G=(V,E)$  is a bipartite graph ith bipartition $(V_1,V_2)$, and $|V_1|=j\le k$, then there is a complete matching $M$ from $V_1$ to $V_2$ whenever the condition that $|N(A)|\ge |A|$ for all $A\subseteq V_1$ is met.</p>
</li>
<li><p>Inductive step: suppose that $H=(W,F)$ is a bipartite graph with bipartition $(W_1,W_2)$ and $|W_1|=k+1$</p>
</li>
<li><p>Case (Ⅰ): For all integers $j$ with $1\le j\le k$, the vertices in every set of $j$ elements from $W_1$ are adjacent to at least $j+1$ elements of $W_2$.</p>
<p>Find a complete matching from $W_1-\{v\}$ to $W_2-\{w\}$, then match $v$ to $w$.</p>
</li>
<li><p>Case (Ⅱ): For some integer $j$ with $1\le j\le k$, there is a subset $W_1’$ of $j$ vertices such that there are exactly $j$ neighbors of these vertices in $W_2$.</p>
<p>Let $W_2’$ be the set of these neighbors. Then by i.h., there is a complete matching from $W_1’$ to $W_2’$. Now consider the graph $K=(W_1-W_1’,W_2-W_2’)$. We will show that the condition $|N(A)|\ge |A|$ is met for all subsets $A$ of $W_1-W_1’$.</p>
<p>If not, there is a subset $B$ of $t$ vertices with $1\le t\le k+1-j$ such that $|N(B)|&lt;|B|$, contradiction.</p>
<p>Then there is a complete matching for $K$, and thus a complete matching for $G$.</p>
</li>
</ul>
<p><strong>Subgraphs</strong>：</p>
<p>A subgraph of a graph $G=(V,E)$ is a graph $(W,F)$, where $W\subseteq V$ and $F\subseteq E$. A subgraph $H$ of $G$ is a proper subgraph of $G$ if $H\ne G$.</p>
<p><strong>Union of Simple Graphs</strong>：</p>
<p>Simple graph: $G_1\cup G_2=(V_1\cup V_2, E_1\cup E_2)$</p>
<p><strong>Representation of Graphs</strong>：</p>
<p>adjacency lists, adjacency matrices, and incidence matrices.</p>
<p><strong>Isomorphism of Graphs</strong>：</p>
<p>The simple graphs $G_1=(V_1,E_1)$ and $G_2=(V_2,E_2)$ are isomorphic if there is a <strong>bijection</strong> from $V_1$ to $V_2$ with the property that $a$ and $b$ are adjacent in $G_1$ IFF $f(a)$ and $f(b)$ are adjacent in $G_2$, for all $a$ and $b$ in $V_1$. Such a function is called an isomorphism.</p>
<p>Useful graph invariants: the number of vertices, number of edges, degree sequence, etc.</p>
<p><strong>Path</strong>：</p>
<p>Let $n$ be a nonnegative integer and $G$ an undirected graph. A path of length $n$ from $u$ to $v$ in $G$ is a sequence of $n$ edges $e_1,e_2,\cdots,e_n$ of $G$ for which there exists a sequence $x_0=u,x_1,\cdots,x_{n-1},x_n=v$ of vertices such that $e_i$ has the endpoints $x_{i-1}$ and $x_i$ for $i=1,\cdots,n$.</p>
<p>A path is <strong>simple</strong> if it does not contain the same edge more than once.</p>
<p><strong>Circuit</strong>：</p>
<p>The path is a circuit if it begins and ends at the same vertex, i.e., if $u=v$ and has the length greater than $0$. </p>
<p><strong>Simple Path Existence Lemma</strong>：</p>
<p>If there is a path between two distinct vertices $x$ and $y$ in graph $G$, then there is a simple path between $x$ and $y$ in $G$. (Just delete cycles/loops.)</p>
<p><strong>Connected Components</strong>：</p>
<p>A connected component of a graph $G$ is a connected subgraph of $G$ that is not a proper subgraph of another connected subgraph of $G$.</p>
<p><strong>Connectedness in Directed Graphs</strong>：</p>
<p>A directed graph is strongly connected if there is a path from $a$ to $b$ and a path from $b$ to $a$ whenever $a$ and $b$ are vertices in the graph.</p>
<p>A directed graph is weakly connected if there is a path between every two vertices in the underlying undirected graph.</p>
<p><strong>Cut Vertices and Cut Edges</strong>：</p>
<p>……</p>
<p>A set of edges $E’$ is called an edge cut of $G$ if the subgraph $G-E’$ is disconnected. The edge connectivity $\lambda(G)$ is the minimum number of edges in an edge cut of $G$.</p>
<p><strong>Paths and Isomorphism</strong>：</p>
<p>The existence of a simple circuit of length $k$ is isomorphic invariant. In addition, paths can be used to construct mappings that may be isomorphisms.</p>
<p><strong>Counting Paths between Vertices</strong>：</p>
<p>Let $G$ be a graph with adjacency matrix $A$ with respect to the ordering $v_1, v_2,\cdots, v_n$ of vertices. The number of different paths of length r from $v_i$ to $v_j$ , where $r &gt; 0$ is positive, equals the $(i, j)$-th entry of $A^r$.</p>
<p>Proof by induction:</p>
<p>$A^{r+1}=A^rA$, the $(i,j)$-th entry of $A^{r+1}$ equals $b_{i1}a_{1j}+b_{i2}a_{2j}+\cdots+b_{in}a_{nj}$, where $b_{ik}$ is the $(i,k)$-th entry of $A^r$.</p>
<p><strong>Euler Paths and Circuits</strong>：</p>
<p>An Euler circuit in a graph $G$ is a simple circuit containing every edge of $G$.</p>
<p>A connected multigraph with at least two vertices has an Euler circuit IFF each of its vertices has even degree.</p>
<p>An Euler path in $G$ is a simple path containing every edge of $G$.</p>
<p>A connected multigraph has an Euler path but not an Euler circuit IFF it has exactly two vertices of odd degree.</p>
<p><strong>Hamilton Paths and Circuits</strong>：</p>
<p>A simple path in a graph $G$ that passes through every vertex exactly once is called a Hamilton path.</p>
<p>A simple circuit in a graph $G$ that passes through every vertex exactly once is called a Hamilton circuit.</p>
<p><strong>Sufficient Conditions for Hamilton Circuits</strong>：</p>
<p><strong>Dirac’s Theorem</strong>： If  $G$ is a simple graph with $n\ge 3$ vertices such that the degree of every vertex in $G$ is $\ge n/2$, then $G$ has a Hamilton circuit.</p>
<p><strong>Ore’s Theorem</strong>： If $G$ is a simple graph with $n\ge 3$ vertices such that $deg(u)+deg(v)\ge n$ for every pair of nonadjacent vertices, then $G$ has a Hamilton circuit.</p>
<p><strong>Shortest Path Problems</strong>：</p>
<p>Dijkstra-$O(v^2)$, Fredman &amp; Tarjan-$O(e+v\log v)$, Bellman-Ford-$O(ev)$…</p>
<p><strong>Planar Graphs</strong>：</p>
<p>A graph is called planar if it can be drawn in the plane without any edge crossing. Such a drawing is called a planar representation of the graph.</p>
<p><strong>Euler’s Formula</strong>：</p>
<p>Let $G$ be a connected planar simple graph with $e$ edges and $v$ vertices. Let $r$ be the number of regions ina planar representation of $G$. Then $r=e-v+2$.</p>
<p>Proof by induction.</p>
<p><strong>The Degree of Regions</strong>：</p>
<p>The degree of a region is defined to be the number of edges on the boundary of this region. When an edge occurs twice on the boundary, it contributes two to the degree.</p>
<p><strong>Corollaries of Planar Graphs</strong>：</p>
<p><strong>Corollary 1</strong>： If $G$ is a connected planar simple graph with $e$ edges and $v$ vertices, where $v\ge3$, then $e\le 3v-6$.</p>
<ul>
<li><p>The degree of every region is at least 3.</p>
</li>
<li><p>The sum of the degrees of the regions is exactly twice the number of edges in the graph.</p>
<script type="math/tex; mode=display">2e=\sum\limits_{\text{all regions R}}deg(R)\ge 3r=3e-3v+6</script></li>
</ul>
<p><strong>Corollary 2</strong>：If $G$ is a connected planar simple graph, then $G$ has a vertex of degree not exceeding 5.</p>
<ul>
<li>Proof by contradiction using Corollary 1 and Handshaking Theorem.</li>
</ul>
<p><strong>Corollary 3</strong>：In a connected planar simple graph has $e$ edges and $v$ vertices with $v\ge3$ and no circuits of length 3, then $e\le2v-4$.</p>
<ul>
<li>The degree of every region is at least 4. (no circuit of length 3)</li>
</ul>
<p><strong>Kuratowski’s Theorem</strong>：</p>
<p>If a graph is planar, so will be any graph obtained by removing an edge $\{u, v\}$ and adding a new vertex $w$ together with edges $\{u,w\}$ and $\{w, v\}$. Such an operation is called an <strong>elementary subdivision</strong>. </p>
<p>The graphs $G_1 = (V_1, E_1 )$ and $G_2 = (V_2, E_2 )$ are called <strong>homomorphic</strong> if they can be obtained from the same graph by a sequence of elementary subdivisions.</p>
<p>A graph is nonplanar IFF it contains a subgraph homomorphic to $K_{3,3}$ or $K_5$.</p>
<p><strong>Graph Coloring</strong>：</p>
<p>A coloring of a simple graph is the assignment of a color to each vertex of the graph so that no two adjacent vertices are assigned the same color.</p>
<p>The chromatic number of a graph is the least number of colors needed for a coloring of this graph, denoted by $\chi(G)$.</p>
<p><strong>Four-color theorem</strong>： </p>
<p>The chromatic number of a planar graph is no greater than 4.</p>
<p><strong>Six Color Theorem</strong>：</p>
<p>The chromatic number of a planar graph is no greater than 6.</p>
<p><strong>Proof by induction</strong>. (w.l.o.g., assume that the graph is connected)</p>
<p><strong>Basic step</strong>: For a single vertex, pick an arbitrary color.</p>
<p><strong>Inductive hypothesis</strong>: Assume that every planar graph with $k\ge1$ or fewer vertices can be 6-colored.</p>
<p><strong>Inductive step</strong>: Consider a planar graph with $k+1$ vertices. Using <strong>Corollary 2</strong> (the graph has a vertex of degree 5 or fewer). Remove this vertex, by i.h., we can color the remaining graph with 6 colors. Put the vertex back in. Since there are at most 5 colors adjacent, so we have at least one color left.</p>
<p><strong>Five Color Theorem</strong>：</p>
<p>The chromatic number of a planar graph is no greater than 5.</p>
<p><strong>Proof by induction</strong>. (w.l.o.g., assume that the graph is connected)</p>
<p><strong>Basic step</strong>: For a single vertex, pick an arbitrary color.</p>
<p><strong>Inductive hypothesis</strong>: Assume that every planar graph with $k\ge1$ or fewer vertices can be 5-colored.</p>
<p><strong>Inductive step</strong>: Consider a planar graph with k + 1 vertices. Using <strong>Corollary 2</strong> (the graph has a vertex of degree 5 or fewer). Remove this vertex, by i.h., we can color the remaining graph with 5 colors. Put the vertex back in.</p>
<p>Case (Ⅰ): If the vertex has degree less than 5, or if it has degree 5 and only $\le 4$ colors are used for vertices connected to it, we can pick an available color for it.</p>
<p>Case (Ⅱ): We make a subgraph out of all the vertices colored 1 or 3. If the adjacent vertex colored 1 and the adjacent vertex colored 3 are not connected by a path in the subgraph.</p>
<p>On the other hand, if the vertices colored 1 and 3 are connected via a path in the subgraph, we do the the same for the vertices colored 2 and 4. Note that this will be a disconnected pair of subgraphs, separated by a path connecting the vertices colored 1 and 3.</p>
<h1 id="Chapter-14-Tree"><a href="#Chapter-14-Tree" class="headerlink" title="Chapter 14 - Tree"></a>Chapter 14 - Tree</h1><p><strong>Tree</strong>：</p>
<p>A tree is a connected undirected graph with no simple circuits.</p>
<p>An undirected graph is a tree IFF there is a unique simple path between any two of its vertices.</p>
<p>A rooted tree is a tree in which one vertex has been designated as the root and every edge is directed away from the root.</p>
<p>parent, child, sibling, ancestor, descendant, leaf, internal vertex, subtree…</p>
<p><strong>m-Ary Trees</strong>：</p>
<p>A rooted tree is called an m-ary tree if every internal vertex has no more than $m$ children.</p>
<p>The tree is called a <strong>full</strong> m-ary tree if every internal vertex has exactly $m$ children.</p>
<p>In particular, an m-ary tree with $m = 2$ is called a binary tree.</p>
<p>A binary tree is an ordered rooted tree where the children of each internal vertex are ordered.</p>
<p>In a binary tree, the first child is called the left child, and the second child is called the right child.</p>
<p>left subtree, right subtree</p>
<p><strong>Counting Vertices in a Full m-Ary Trees</strong>：</p>
<p>A full m-ary tree with $i$ internal vertices has $n = mi + 1$ vertices. Leaves number $ℓ=n-i$.</p>
<p><strong>Level and Height</strong>：</p>
<p>The level of a vertex $v$ in a rooted tree is the length of the unique path from the root to this vertex.</p>
<p>The height of a rooted tree is the maximum of the levels of the vertices.</p>
<p>A rooted m-ary tree of height $h$ is balanced if all leaves are at levels $h$ or $h − 1$. (differ no greater than 1)</p>
<p><strong>The Number of Leaves</strong>：</p>
<p>There are at most $m^h$ leaves in an m-ary tree of height $h$.</p>
<p>If an m-ary tree of height $h$ has ℓ leaves, then $h \ge ⌈\log_m ℓ⌉$. If the m-ary tree is full and balanced, then h = $⌈\log_mℓ⌉$.</p>
<p><strong>Tree Traversal</strong>：</p>
<p>preorder traversal, inorder traversal, postorder traversal.</p>
<p>expression trees, prefix notation, infix notation, postfix notation.</p>
<p><strong>Catalan Numbers</strong>：</p>
<p>$C_0=C_1=1$</p>
<p>$C_n=\sum\limits_{i=0}^{n-1}C_iC_{n-i-1}=\frac{1}{n+1}\left(\begin{array}{c}2n \\n\end{array}\right)=\left(\begin{array}{c}2n \\n\end{array}\right)-\left(\begin{array}{c}2n \\n-1\end{array}\right)$</p>
<p>The number of 01 sequences using $n$ ones and $n$ zeros such that the number of ones is no less than the number of zeros in any prefix subsequence.</p>
<p>The number of full binary trees with $2n+1$ vertices.</p>
<p>The number of binary trees with $n$ vertices.</p>
<p><strong>Spanning Trees</strong>：</p>
<p>Let $G$ be a simple graph. A spanning tree of $G$ is a subgraph of $G$ that is a tree containing every vertex of $G$.</p>
<p>A simple graph is connected IFF it has a spanning tree.</p>
<p><strong>DFS, BFS</strong>：</p>
<p>……</p>
<p><strong>Minimum Spanning Trees</strong>：</p>
<p>Prim’s Algorithm($O(e\log v)$), Kruskal’s Algorithm($O(e\log e)$).</p>
<h1 id="Chapter-15-P-NP-and-NPC-Problems"><a href="#Chapter-15-P-NP-and-NPC-Problems" class="headerlink" title="Chapter 15 - P, NP and NPC Problems"></a>Chapter 15 - P, NP and NPC Problems</h1><p><strong>Class NP vs. Class P</strong>：</p>
<p><strong>P</strong>： decision problems solvable in polynomial time</p>
<p><strong>NP</strong>： decision problems with certificates verifiable in polynomial time (polynomial time verification)</p>
<p><strong>Satisfiability Problem(NP)</strong>：</p>
<p>To determine whether a Boolean formula is satisfiable or not.</p>
<p><strong>2SAT Problem(P)</strong>：</p>
<p>To determine whether a 2-CNF formula is satisfiable or not.</p>
<p>Using path searching (polynomial-time decidable), construct edges using “→”.</p>
<p>A 2-CNF formula is <strong>unsatisfiable</strong> IFF there exists a variable $x$ such that: </p>
<ul>
<li>there is a path from $x$ to $\neg x$ in the graph $G$</li>
<li>there is a path from $\neg x$ to $x$ in the graph $G$</li>
</ul>
<p><strong>Polynomial-Time Reduction &amp; The Class NP-Complete</strong>：</p>
<p>see <a href="https://gutaozi.github.io/2022/11/05/CS215_Midterm_Review/">Chapter 6</a>.</p>
<p><strong>Cook’s Theorem</strong>：</p>
<p>SAT $\in$ NPC.</p>
<p>3SAT $\le_P$ DCLIQUE $\le_P$ DVC</p>
<p><strong>Clique</strong>：</p>
<p>A clique is a complete subgraph of $G$.</p>
<ul>
<li><p>The Problem CLIQUE</p>
<p>Find a clique of maximum size in a graph $G$.</p>
</li>
<li><p>The Problem DCLIQUE</p>
<p>Given an undirected graph G and an integer $k$, determine whether $G$ has a clique of size $k$.</p>
</li>
</ul>
<p>DCLIQUE $\in$ NP： certificate $O(|V^2|)$</p>
<p><strong>3SAT $\le_{P}$ DCLIQUE</strong>：</p>
<p>For the $k$ clauses input to 3SAT, draw literals as vertices, and all edges between vertices such that:</p>
<ul>
<li>across clauses only</li>
<li>not between $x$ and $\neg x$</li>
</ul>
<p>The reduction takes polynomial time: A satisfiable assignment $⇌$ a clique of size $k$</p>
<p><strong>Vertex Cover</strong>：</p>
<p>A vertex cover of $G$ is a set of vertices such that every edge in $G$ is incident at at least one of these vertices. </p>
<ul>
<li><p>The Vertex Cover Problem (VC) </p>
<p>Given a graph $G$, find a vertex cover of $G$ of minimum size.</p>
</li>
<li><p>The Problem DVC</p>
<p>Given a graph $G$ and an integer $k$, determine whether $G$ has a vertex cover of with $k$ vertices.</p>
</li>
</ul>
<p>DVC $\in$ NP： certificate $O(ke)=O((n+e)^2)$</p>
<p><strong>DCLIQUE $\le_{P}$ DVC</strong>：</p>
<p>Start with the graph $G=(V,E)$ input of the DCLIQUE problem.</p>
<p>Construct the complement graph $\bar G=(V,\bar E)$ by only considering the missing edges from $E$.</p>
<p>The reduction takes polynomial time: A clique of size $k$ in $G$ $⇌$ a vertex cover of size $|V|-k$ in $\bar G$</p>
<p><strong>Approximate Vertex Cover</strong>：</p>
<p>Approx-Vertex-Cover is a 2-approximation algorithm, i.e., $\frac{|C|}{|C^\star|}\le 2$.</p>
<p>Proof:</p>
<p>The set of edges picked by this algorithm is a maximal-maching $M$: no two edges touch each other.</p>
<p>The potimal vertex cover $C^\star$ must cover every edge in $M$, so $|C^\star|\ge |M|$. The algorithm returns a vertex set of size $2|M|$. Therefore, we have</p>
<p><script type="math/tex">|C|=2|M|\le 2|C^\star|</script>.</p>
<p><img src="https://s2.loli.net/2023/01/01/8pS9IbAPfWXDOgt.png" alt=""></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Discrete Math</tag>
      </tags>
  </entry>
  <entry>
    <title>CS211 数字逻辑 (H) 项目设计报告 Flappy Bird</title>
    <url>/2022/11/06/CS211_%E9%A1%B9%E7%9B%AE%E8%AE%BE%E8%AE%A1%E6%8A%A5%E5%91%8A_Flappy_Bird/</url>
    <content><![CDATA[<p><img src="https://www.android-digital.de/wp-content/uploads/flappy_bird-600x337.jpg" alt=""></p>
<h2 id="Part-I-团队成员"><a href="#Part-I-团队成员" class="headerlink" title="Part I. 团队成员"></a>Part I. <del>团队</del>成员</h2><div class="table-container">
<table>
<thead>
<tr>
<th>姓名</th>
<th>学号</th>
<th><del>贡献率</del></th>
</tr>
</thead>
<tbody>
<tr>
<td>咕桃</td>
<td>-</td>
<td><del>100%</del></td>
</tr>
</tbody>
</table>
</div>
<h2 id="Part-II-系统功能"><a href="#Part-II-系统功能" class="headerlink" title="Part II. 系统功能"></a>Part II. 系统功能</h2><p>​        在本项目中，本人基于EGO1开发板的VGA模块，使用<code>Verilog</code>语言设计了一个模仿<strong>Flappy Bird</strong>的小游戏项目。项目中，玩家可以通过按键控制小鸟向上跳动以通过水管的间隙来得分。项目实现了基本的用户交互界面、开始、暂停、重置等游戏功能，也添加了最高记录、调整难度、开发者模式等新特性，在保证高还原度的前提下，提供了更舒适的玩家体验。</p>
<h2 id="Part-III-系统设计"><a href="#Part-III-系统设计" class="headerlink" title="Part III. 系统设计"></a>Part III. 系统设计</h2><ol>
<li><p><strong>工作原理</strong></p>
<ul>
<li><p><strong>(a)</strong> 连接显示器后按下总控重置按钮，显示器显示640*480游戏画面，此时小鸟静止，水管在右侧“屏外”。</p>
</li>
<li><p><strong>(b)</strong> 通过拨码开关选择难度后游戏开始，小鸟将在模拟重力和跳跃键下开始运动，同时随机高度的水管从右侧屏幕生成并向左移动，跳跃键支持短按短跳、长按连飞功能。</p>
</li>
<li><p><strong>(c)</strong> 玩家操作小鸟通过水管后将获得一分，右侧四位数码管显示当前得分，左侧四位数码管显示最高记录，当得分突破最高记录时最高记录会自动更新。</p>
</li>
<li><strong>(d)</strong> 当操作不当，小鸟与水管或地面碰撞时游戏结束，小鸟以匀速落地，水管停止运动，跳跃键和难度调整键功能被禁用，游戏结束指示LED亮起。</li>
<li><strong>(e)</strong> 游戏结束后将难度调整键归零，按下restart按钮选择难度后重新开始游戏。在EGO1开发板未断开连接时，高分榜将被保留。游戏过程中将难度调整键归零可以暂停游戏。</li>
<li><strong>(f)</strong> 最右侧小拨码开关设置为开发者模式，用于观察游戏难度和调试特性，开启后开发者模式指示LED亮起，小鸟将从水管层被剥离到更高维度，从水管侧面飞过而不会因撞击导致游戏结束。</li>
<li><strong>(g)</strong> 游戏同时支持640*480和800*600两种分辨率的热切换，并且会适配不同分辨率生成适宜难度的地图。</li>
</ul>
</li>
<li><p><strong>系统工作流程图</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/tRlj5IZaWAVKTJ3.png" alt="System work flow chart" style="zoom: 67%;" /></p>
</li>
<li><p><strong>系统框图</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/eb5SPRATqdhuMEf.png" alt="System frame diagram" style="zoom: 80%;" /></p>
</li>
<li><p><strong>端口描述</strong></p>
</li>
</ol>
<div class="table-container">
<table>
<thead>
<tr>
<th>端口</th>
<th>方向</th>
<th>位宽</th>
<th>功能简介</th>
</tr>
</thead>
<tbody>
<tr>
<td>R</td>
<td>OUT</td>
<td>4</td>
<td>VGA红色信号</td>
</tr>
<tr>
<td>G</td>
<td>OUT</td>
<td>4</td>
<td>VGA绿色信号</td>
</tr>
<tr>
<td>B</td>
<td>OUT</td>
<td>4</td>
<td>VGA蓝色信号</td>
</tr>
<tr>
<td>hsync</td>
<td>OUT</td>
<td>1</td>
<td>横向同步信号</td>
</tr>
<tr>
<td>vsync</td>
<td>OUT</td>
<td>1</td>
<td>纵向同步信号</td>
</tr>
<tr>
<td>cho</td>
<td>OUT</td>
<td>8</td>
<td>亮起数码管序列</td>
</tr>
<tr>
<td>lseg</td>
<td>OUT</td>
<td>8</td>
<td>左侧数码管示数</td>
</tr>
<tr>
<td>rseg</td>
<td>OUT</td>
<td>8</td>
<td>右侧数码管示数</td>
</tr>
<tr>
<td>overled</td>
<td>OUT</td>
<td>1</td>
<td>游戏结束LED</td>
</tr>
<tr>
<td>stateled</td>
<td>OUT</td>
<td>1</td>
<td>分辨率模式LED</td>
</tr>
<tr>
<td>cheatled</td>
<td>OUT</td>
<td>1</td>
<td>开发者模式LED</td>
</tr>
<tr>
<td>rst</td>
<td>IN</td>
<td>1</td>
<td>刷新显示器</td>
</tr>
<tr>
<td>restart</td>
<td>IN</td>
<td>1</td>
<td>重开游戏</td>
</tr>
<tr>
<td>flap</td>
<td>IN</td>
<td>1</td>
<td>跳跃键</td>
</tr>
<tr>
<td>reso</td>
<td>IN</td>
<td>1</td>
<td>分辨率开关</td>
</tr>
<tr>
<td>cheatmode</td>
<td>IN</td>
<td>1</td>
<td>开发者模式开关</td>
</tr>
<tr>
<td>clk</td>
<td>IN</td>
<td>1</td>
<td>默认时钟</td>
</tr>
<tr>
<td>sw</td>
<td>IN</td>
<td>3</td>
<td>难度开关(0难度暂停)</td>
</tr>
</tbody>
</table>
</div>
<ol>
<li><p><strong>子模块设计</strong></p>
<p>本项目分为11个子模块，各模块之间的关系如下图所示。</p>
<p><img src="https://s2.loli.net/2022/08/04/j7Kgtlx3wiH1PD9.png" alt="submodule design" style="zoom: 33%;" /></p>
<ul>
<li><p><strong>(a) Main module</strong></p>
<p>​        总控模块，集成各个子模块，获取时钟信号、数码管信号、坐标信息，同时负责VGA显示信号的输出、游戏难度选择、游戏结束判断、重启游戏、切换分辨率等功能，是所有输入端口和输出端口的集成模块。</p>
</li>
<li><p><strong>(b) Clock divider &amp; clock wizard module</strong></p>
<p>​        分频模块，手动实现了游戏时钟分频，将EGO1开发板100MHz的时钟频率降低两百万倍得到50帧的游戏时钟频率，手动分频器的原理为：利用计数器t%2000000=0的条件输出1ns的高电平游戏时钟并归零计数器；利用clock wizard IP核实现了两种分辨率下VGA同步时钟分频，640*480对应25.175MHz，800*600对应40MHz。</p>
</li>
<li><p><strong>(c) Random generator module</strong></p>
<p>​        本随机数生成器引用自@nguthrie在<code>stackoverflow</code>社区中的回答： <a href="https://stackoverflow.com/questions/14497877"> how to implement a pseudo hardware random number generator?</a></p>
</li>
<li><p><strong>(d) Segment &amp; Converter module</strong></p>
<p>​        数码管显示与转换器模块，转换器模块负责对输入的十进制得分转换为BCD码形式，进而根据参数表输出数码管序列；数码管显示模块负责从转换器模块读取序列，并通过分频显示的方式将最高分和目前得分显示于八位八段数码管。</p>
</li>
<li><p><strong>(e) Bird position module</strong></p>
<p>​        鸟坐标计算模块负责对输入的当前纵坐标和跳跃键信息进行处理并得到下一瞬间的纵坐标。当跳跃键按下时，鸟被给予一个向上初速度，否则鸟将受到向下的模拟重力加速度。计算坐标时为了流畅性，使用了右移位运算一定程度上模拟了小数，较好地模拟了重力。</p>
</li>
<li><p><strong>(f) Display module (is_bird &amp; is_tube module)</strong></p>
<p>​        显示模块负责对输入的查询坐标和各元素位置信息进行处理，并输出查询坐标对应的颜色信息。同一坐标的显示优先级：鸟&gt;水管&gt;背景，<code>is_bird</code>和<code>is_tube</code>模块对输入坐标传出其与最左上角像素的相对坐标，并在显示模块中利用<code>Block Memory Generator</code> IP核取出对应的颜色值，决定优先级后输出当前查询位置的颜色。</p>
</li>
<li><p><strong>(g) Block Memory Generator</strong></p>
<p>本项目使用此IP核连接<code>bird.coe</code>, <code>tube_body.coe</code>, <code>tube_head.coe</code>, <code>bg.coe</code>，进行鸟、水管、背景的图像显示，具体原理在帮助文档中已有详细介绍，此处不再赘述。</p>
</li>
</ul>
</li>
<li><p><strong>模拟结果(波形图)</strong></p>
<p>由于有些模块有一吨的输入输出端口，过于复杂不便模拟调试，且在开发过程中并未进行模拟过程，因此部分模块的模拟结果并未在此展示<del>(实际上整个过程非常自信，没有用一次模拟)</del></p>
<ul>
<li><p><strong>(a) Converter simulation</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/l67RJGQOLdvVicT.png" alt="counter_sim"></p>
</li>
<li><p><strong>(b) Random generator simulation</strong></p>
<p><img src="https://s2.loli.net/2022/08/04/5MlnNjHiLtDUqkT.png" alt="random_generator_sim"></p>
</li>
<li><p><strong>(c) Clock divider module</strong> (Mod factor shrunk for better simulation)</p>
<p><img src="https://s2.loli.net/2022/08/04/2XM1CEdf5PeFqo4.png" alt="clk_div_sim"></p>
</li>
<li><p><strong>(d) Segment module</strong> (Higher shifting frequency for better simulation)</p>
<p><img src="https://s2.loli.net/2022/08/04/oAEKzSFUw5aDCBd.png" alt="seg_sim"></p>
</li>
</ul>
</li>
</ol>
<h2 id="Part-IV-开发中遇到的困难与解决方案"><a href="#Part-IV-开发中遇到的困难与解决方案" class="headerlink" title="Part IV. 开发中遇到的困难与解决方案"></a>Part IV. 开发中遇到的困难与解决方案</h2><h3 id="Question1-如何显示精美的图像而非矩形正方形？"><a href="#Question1-如何显示精美的图像而非矩形正方形？" class="headerlink" title="Question1.  如何显示精美的图像而非矩形正方形？"></a><strong>Question1</strong>.  如何显示精美的图像而非矩形正方形？</h3><p><strong>Reason</strong>: 项目开发第一步，保护自己的双眼，精美的界面能让开发过程更舒适，因此我开发第一步就实现了图像显示功能。</p>
<p><strong>Solution</strong>: 通过阅读<del>隔壁边缘检测Project的</del>帮助文档和向同学寻求帮助，获悉Block memory generator的用法。顺带一提，我刚实现图像显示的时候屏幕上是黑暗风的火烧云界面，用一条RGB为<code>12&#39;hfff</code>的 检测条发现竟然是渐变色。这种现象是因为屏外未显示的部分被意外赋上了非零值，显示器把它们当作噪声减掉了，导致屏内的正常颜色发生了色差偏移。</p>
<p><img src="https://s2.loli.net/2022/08/04/lVepHaoWziFyrcq.jpg" alt="A4E63FBDF6897343FF0B9C709AD6EBE5.jpg" style="zoom: 25%;" /></p>
<h3 id="Question2-如何生成随机高度的水管？"><a href="#Question2-如何生成随机高度的水管？" class="headerlink" title="Question2.  如何生成随机高度的水管？"></a><strong>Question2</strong>.  如何生成随机高度的水管？</h3><p><strong>Reason</strong>: 给游戏加点难度。</p>
<p><strong>Solution</strong>: 从 _stackoverflow_ 社区寻求帮助,  找到的五位伪随机数生成器对我的项目来说就够用了。</p>
<h3 id="Question3-怎么针对不同分辨率创建对应的地图？"><a href="#Question3-怎么针对不同分辨率创建对应的地图？" class="headerlink" title="Question3.  怎么针对不同分辨率创建对应的地图？"></a><strong>Question3</strong>.  怎么针对不同分辨率创建对应的地图？</h3><p><strong>Reason</strong>: 开发时了解到有同学在调整到高分辨率时碰到了麻烦，因此我防患于未然。</p>
<p><strong>Solution</strong>: 用当前分辨率当作参数在模块间传递，用于代替常数来生成地图，保证了管子的高度和管子间的距离会自适应不同分辨率，也为热切换分辨率打好了基础。</p>
<h3 id="Question4-怎么模拟重力？"><a href="#Question4-怎么模拟重力？" class="headerlink" title="Question4.  怎么模拟重力？"></a><strong>Question4</strong>.  怎么模拟重力？</h3><p><strong>Reason</strong>: 为了让跳跃过程更丝滑。</p>
<p><strong>Solution</strong>: 使用右移位运算来模拟小数运算，引入了速度和加速度来计算鸟的坐标，并以50Hz的频率更新坐标。</p>
<h3 id="Question5-如何判定游戏结束？-如何判定各元素显示优先级？"><a href="#Question5-如何判定游戏结束？-如何判定各元素显示优先级？" class="headerlink" title="Question5.  如何判定游戏结束？ / 如何判定各元素显示优先级？"></a><strong>Question5</strong>.  如何判定游戏结束？ / 如何判定各元素显示优先级？</h3><p><strong>Reason</strong>: 为了优化视觉体验，鸟在创上水管的时候会徐徐落地，此时可能出现鸟和水管有重合的情况，需要判定此时该显示哪个元素。</p>
<p><strong>Solution</strong>: 鸟&gt;水管&gt;背景, 有些鸟的像素是透明的，这些像素在显示的时候就该显示鸟下面的图层信息。同时，利用显示逻辑可以很轻松的判定游戏结束：当一个像素同时要显示鸟和水管的时候，那就说明鸟创上水管了，游戏结束。</p>
<p><img src="https://s2.loli.net/2022/08/05/molDeZp2Fgdb6hP.jpg" alt="255B0D0A848EB7FA08864668093A2855.jpg" style="zoom:50%;" /></p>
<h2 id="Part-V-总结与感想"><a href="#Part-V-总结与感想" class="headerlink" title="Part V. 总结与感想"></a>Part V. 总结与感想</h2><p>​        本次项目我利用本学期所学知识，基于EGO1开发板使用Verilog复现了经典小游戏Flappy Bird，项目中熟悉了VGA显示原理、数码管显示原理、状态机的转移和设计、简单游戏逻辑设计、硬件语言开发流程等内容。</p>
<p>​        特别感谢xjc等同学提供了若干踩坑的经验，开发过程中预防了很多问题，整个开发过程实际用时不到24h，不过我在开发过程中还是遇到了花式的问题和困难，但最终也都得到了不错的解决。同时我也为其他同学提供了多次帮助，例如屏外噪声、图像导入、分辨率切换、游戏逻辑等问题。</p>
<p>​        项目中最大的收获是模块化设计的思想，本次开发前我先在纸上设计好了各个模块的大致功能和模块间互相调用的关系，在实际开发时按部就班达到了很高的效率，比较java项目边写边加的模式更为从容有条理。</p>
<p>​        实际上，本次项目由于开发周期短(同期的数据库项目对时间占用较大)还存在较多的不足，在本学期课程结束后我会将GitHub上的项目同步并继续开发，优化界面、调整重力等参数，因为我对本项目抱有较大的兴趣，所以我会继续做下去。</p>
<p>​        报告的最后，非常感谢为本学期课程和项目提供指导帮助的老师、助教和图班优秀的同学们，让我从一个对硬件一无所知甚至抱有胆怯的小白变成了对硬件编程、电路设计感兴趣的人，受益匪浅。  </p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Digital Logic</tag>
      </tags>
  </entry>
  <entry>
    <title>CS215 离散数学 半期复习</title>
    <url>/2023/01/10/CS215_Midterm_Review/</url>
    <content><![CDATA[<h1 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h1><ol>
<li><p>Propositional Logic</p>
</li>
<li><p>Predicate Logic</p>
</li>
<li><p>Mathematical Proofs</p>
</li>
<li><p>Sets</p>
</li>
<li><p>Functions</p>
</li>
<li><p>Complexity  of Algorithms</p>
</li>
<li><p>Number Theory</p>
<p>Groups, Rings and Fields</p>
</li>
<li><p>Cryptography</p>
</li>
<li><p>Mathematical Induction</p>
</li>
<li><p>Recursion</p>
</li>
</ol>
<h1 id="Chapter-1-Propositional-Logic"><a href="#Chapter-1-Propositional-Logic" class="headerlink" title="Chapter 1 - Propositional Logic"></a>Chapter 1 - Propositional Logic</h1><p><strong>Logical connectives</strong>：</p>
<p>$\neg p$，$p\vee q$，$p\wedge q$，$p\oplus q$，$p→q$，$p\leftrightarrow q$</p>
<p><strong>Logical equivalence</strong>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Name</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>Identity laws</td>
<td>$p \vee T \equiv p $，$ p \wedge F \equiv p$</td>
</tr>
<tr>
<td>Domination laws</td>
<td>$p \wedge T \equiv T$，$p \vee F \equiv F $</td>
</tr>
<tr>
<td>Idempotent laws</td>
<td>$p \wedge p \equiv p$ ，$p \vee p \equiv p$</td>
</tr>
<tr>
<td>Double negation laws</td>
<td>$\neg\neg p\equiv p$</td>
</tr>
<tr>
<td>Commutative laws</td>
<td>$p \wedge q \equiv q \wedge p$，$ p \vee q \equiv q \vee p$</td>
</tr>
<tr>
<td>Associative laws</td>
<td>$(p \wedge q) \wedge r \equiv p \wedge (q \wedge r) $，$ (p \vee q) \vee r \equiv p \vee (q \vee r)$</td>
</tr>
<tr>
<td>Distributive laws</td>
<td>$(p \wedge q) \vee r \equiv (p\vee r) \wedge (q \wedge r) $，$ (p \vee q) \wedge r \equiv (p\wedge r) \vee (q\wedge r)$</td>
</tr>
<tr>
<td>De Morgan’s laws</td>
<td>$\neg(p\vee q) \equiv \neg p \wedge \neg q$，$\neg(p \wedge q)\equiv \neg p \vee \neg q$</td>
</tr>
<tr>
<td>Absorption laws</td>
<td>$p\wedge(p\vee q) \equiv p$，$p\vee(p\wedge q)\equiv p$</td>
</tr>
<tr>
<td>Negation laws</td>
<td>$p\vee\neg p \equiv F$，$p\wedge\neg p \equiv T$</td>
</tr>
<tr>
<td>Useful law</td>
<td>$p→q \equiv \neg p \wedge q$</td>
</tr>
</tbody>
</table>
</div>
<p>e.g. Show that $p → q ≡ ¬q → ¬p $ .</p>
<p>$\begin{aligned}<br>\neg q \rightarrow \neg p &amp; \equiv \neg(\neg q) \vee(\neg p) &amp; &amp; \text { Useful } \\<br>&amp; \equiv q \vee(\neg p) &amp; &amp; \text { Double negation } \\<br>&amp; \equiv(\neg p) \vee q &amp; &amp; \text { Communtative } \\<br>&amp; \equiv p \rightarrow q &amp; &amp; \text { Useful }<br>\end{aligned}$</p>
<p><strong>Rules of Inference</strong>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">modus ponens</th>
<th style="text-align:center">modus tollens</th>
<th style="text-align:center">hypothetical syllogism</th>
<th style="text-align:center">disjunctive syllogism</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$\begin{array}{r}p \rightarrow q \\p \\\hline \therefore q\end{array}$</td>
<td style="text-align:center">$\begin{array}{r}p \rightarrow q \\\ \neg q\\\hline \therefore \neg p\end{array}$</td>
<td style="text-align:center">$\begin{array}{r}p \rightarrow q \\q \rightarrow r \\\hline \therefore p \rightarrow r\end{array}$</td>
<td style="text-align:center">$\begin{array}{r}p \vee q \\\neg p\\\hline \therefore q\end{array}$</td>
</tr>
<tr>
<td style="text-align:center"><strong>Addition</strong></td>
<td style="text-align:center"><strong>Simplification</strong></td>
<td style="text-align:center"><strong>Conjunction</strong></td>
<td style="text-align:center"><strong>Resolution</strong></td>
</tr>
<tr>
<td style="text-align:center">$\begin{array}{r}p\\\hline\therefore p\vee q\end{array}$</td>
<td style="text-align:center">$\begin{array}{r}p\wedge q\\\hline\therefore q\end{array}$</td>
<td style="text-align:center">$\begin{array}{r}p\\q\\\hline\therefore p\wedge q\end{array}$</td>
<td style="text-align:center">$\begin{array}{r}\neg p\vee r\\p\vee q\\\hline\therefore q\vee r\end{array}$</td>
</tr>
</tbody>
</table>
</div>
<h1 id="Chapter-2-Predicate-Logic"><a href="#Chapter-2-Predicate-Logic" class="headerlink" title="Chapter 2 - Predicate Logic"></a>Chapter 2 - Predicate Logic</h1><p><strong>Truth set</strong>：$\{(x_1,x_2,\cdots,x_n)\in D|P(x_1,x_2,\cdots,x_n)=T\}$</p>
<p><strong>Quantifier</strong>: $\forall$(Universal)， $\exists$(Existential)</p>
<p><strong>De Morgan laws for quantifiers</strong>：</p>
<p>$\neg\exists P(x)\equiv \forall\neg P(x)$，$\neg\forall P(x)\equiv\exists\neg P(x)$</p>
<p><strong>Order of Quantifiers</strong>：</p>
<ul>
<li>matters if quantifiers are of <strong>different type</strong></li>
<li>does no matter if quantifiers are of the <strong>same type</strong></li>
</ul>
<p><strong>Negating Nested Quantifiers</strong>：</p>
<p>Swap every quantifier, and negation the inner proposition.</p>
<p><strong>Rules of Inference</strong>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Universal Instantiation</th>
<th>Universal Generalization</th>
<th>Existential Instantiation</th>
<th>Existential Generalization</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\begin{array}{r}\forall xP(x)\\\hline\therefore P(c)\end{array}$</td>
<td>$\begin{array}{r}P(c)\text{ for an arbitrary }c\\\hline\therefore \forall x P(x)\end{array}$</td>
<td>$\begin{array}{r}\exists x P(x)\\\hline\therefore P(c)\text{ for some element }c\end{array}$</td>
<td>$\begin{array}{r}P(c)\text{ for some element }c\\\hline\therefore \exists x P(x)\end{array}$</td>
</tr>
</tbody>
</table>
</div>
<h1 id="Chapter-3-Mathematical-Proofs"><a href="#Chapter-3-Mathematical-Proofs" class="headerlink" title="Chapter 3 - Mathematical Proofs"></a>Chapter 3 - Mathematical Proofs</h1><p><strong>Methods of Proving Theorems</strong>：</p>
<ul>
<li>direct proof<ul>
<li>$p → q$ is proved by showing that if $p$ is true then $q$ follows</li>
</ul>
</li>
<li>proof by contrapositive<ul>
<li>show the contrapositive $¬q → ¬p$</li>
</ul>
</li>
<li>proof by contradiction<ul>
<li>show that $(p ∧ ¬q)$ contradicts the assumptions</li>
</ul>
</li>
<li>proof by cases<ul>
<li>give proofs for all possible cases</li>
</ul>
</li>
<li><p>proof of equivalence</p>
<ul>
<li>$p ↔ q$ is replaced with $(p → q) ∧ (q → p)$</li>
</ul>
</li>
<li><p>vacuous proof</p>
<ul>
<li>$p→q$ is always true if $p$ (the hypothesis) is always false</li>
</ul>
</li>
<li>trivial proof<ul>
<li>$p→q$ is always true if $q$ (the conclusion) is always true</li>
</ul>
</li>
</ul>
<p><strong>Proofs with Quantifiers</strong>：</p>
<ul>
<li><p>Universal</p>
<ul>
<li><p>prove the property holds for all examples</p>
<p>– proof by cases to divide the proof into different parts</p>
</li>
<li><p>counterexamples</p>
<p>– disprove universal statement</p>
</li>
</ul>
</li>
<li><p>Existential</p>
<ul>
<li><p>constructive</p>
<p>– find a specific example to show the statement holds</p>
</li>
<li><p>nonconstructive</p>
<p>– proof by contradiction</p>
</li>
</ul>
</li>
</ul>
<h1 id="Chapter-4-Sets"><a href="#Chapter-4-Sets" class="headerlink" title="Chapter 4 - Sets"></a>Chapter 4 - Sets</h1><p><strong>Important sets</strong>：</p>
<p>$\mathbf {N, Z, Z^+, Q, R, C}$</p>
<p><strong>Russell’s Paradox</strong>：</p>
<p>Let $S=\{x|x\notin x\}$, is a set of sets that are not member of themselves. Is $S\in S$ or $S\notin S$?</p>
<p><strong>Set Operations</strong>：</p>
<p>$A\times B, A\cup B,A\cap B,\bar{A},A-B$</p>
<p><strong>Cardinality</strong>：</p>
<p>The sets $A$ and $B$ have the same cardinality if there is a <strong>bijection</strong> between elements in $A$ and $B$.</p>
<p>$|A|\le|B|$ if there is an <strong>injection</strong> from $A$ to $B$, if they have different cardinalities then $|A|&lt;|B|$.</p>
<p><strong>Countable Sets</strong>：</p>
<p>A set that is either <strong>finite</strong> or <strong>has the same cardinality as the set of</strong> $\mathbf Z^+$ is called countable.</p>
<p><strong>Cantor diagonalization argument</strong>：</p>
<p>“Every part is different from some of the previous ones.”</p>
<p><strong>Schröder-Bernstein Theorem</strong>：</p>
<p>$|A|\le |B|$, $|B|\le |A|$, then $|A|=|B|$.</p>
<p><strong>Cantor’s Theorem</strong>：</p>
<p>If $S$ is a set, then $|S| &lt; |\mathcal P(S)|$ .</p>
<h1 id="Chapter-5-Functions"><a href="#Chapter-5-Functions" class="headerlink" title="Chapter 5 - Functions"></a>Chapter 5 - Functions</h1><p><strong>Functions</strong>：</p>
<p> A function from $A$ to $B$, denoted by $f : A → B$, is an assignment of exactly one element of $B$ to each element of $A$. </p>
<p>domain, codomain, image, preimage, range.</p>
<p>Injective (One-to-one) Function</p>
<p>Surjective (Onto) Function</p>
<p>Bijective (One-to-one Correspondence) Function</p>
<p>Invert Function (Exists IFF bijection)</p>
<p>Composition of Functions</p>
<p><strong>Sequence</strong>：</p>
<p>A sequence is a function from a subset of the set of integers.</p>
<p>arithmetic progression, geometric progression</p>
<p><strong>Some Useful Summation Formulas</strong>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Sum</th>
<th style="text-align:center">Closed Form</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$\sum\limits_{k=0}^{n}ar^k(r\ne0,1)$</td>
<td style="text-align:center">$\frac{ar^{n+1}-a}{r-1}$</td>
</tr>
<tr>
<td style="text-align:center">$\sum\limits_{k=1}^{n}k$</td>
<td style="text-align:center">$\frac{n(n+1)}{2}$</td>
</tr>
<tr>
<td style="text-align:center">$\sum\limits_{k=1}^{n}k^2$</td>
<td style="text-align:center">$\frac{n(n+1)(2n+1)}{6}$</td>
</tr>
<tr>
<td style="text-align:center">$\sum\limits_{k=1}^{n}k^3$</td>
<td style="text-align:center">$\frac{n^2(n+1)^2}{4}$</td>
</tr>
<tr>
<td style="text-align:center">$\sum\limits_{k=0}^{\infty}x^k,-1&lt;x&lt;1$</td>
<td style="text-align:center">$\frac{1}{1-x}$</td>
</tr>
<tr>
<td style="text-align:center">$\sum\limits_{k=1}^{\infty}kx^{k-1},-1&lt;x&lt;1$</td>
<td style="text-align:center">$\frac{1}{(1-x)^2}$</td>
</tr>
</tbody>
</table>
</div>
<h1 id="Chapter-6-Complexity-of-Algorithms"><a href="#Chapter-6-Complexity-of-Algorithms" class="headerlink" title="Chapter 6 - Complexity  of Algorithms"></a>Chapter 6 - Complexity  of Algorithms</h1><p><strong>Big-O Notation</strong>：</p>
<p>$f(n)=O(g(n))$, if $\exists C&gt;0,x_0&gt;0$ s.t. $\forall n&gt;x_0,\ |f(n)|\le C|g(n)|$</p>
<p><strong>Combinations of Functions</strong>：</p>
<p>$(f_1+f_2)(x)=O(\max(|g_1(x)|,|g_2(x)|))$</p>
<p>$(f_1f_2)(x)=O(g_1(x)g_2(x))$</p>
<p><strong>Big-Omega Notation</strong>：</p>
<p>$f(n)=\Omega(g(n))$, if $\exists C&gt;0,x_0&gt;0$ s.t. $\forall n&gt;x_0, |f(n)|\ge C|g(n)|$</p>
<p>$f(n)=O(g(n))$ IFF $g(n)=\Omega(f(n))$</p>
<p><strong>Big-Theta Notation</strong>：</p>
<p>$f(n)=\Theta(g(n))$, if $f(n)=O(g(n))$ and $g(n)=O(f(n))$</p>
<p><strong>The Input Size of Problems</strong>：</p>
<p>The input size of a problem is the minimum number of bits ($\{0,1\}$) needed to encode the input of the problem.</p>
<p><strong>Same type functions</strong>：</p>
<p>Two positive functions $f(n)$ and $g(n)$ are of the <strong>same type</strong> if</p>
<script type="math/tex; mode=display">c_1g(n^{a_1})^{b_1}\le f(n)\le c_2g(n^{a_2})^{b_2}</script><p>for all large $n$, where $a_1,b_1,c_1,a_2,b_2,c_2$ are some positive constants.</p>
<p>All <strong>polynomials</strong> are of the same type, but <strong>polynomials</strong> and <strong>exponentials</strong> are of different types.</p>
<p><strong>Polynomial-Time Algorithms</strong>：</p>
<p>An algorithm is polynomial-time if its running time is $O(n^k)$, where $k$ is a constant independent of $n$, and $n$ is the <strong>input size</strong> of the problem that the algorithm solves.</p>
<p><strong>The class P</strong>：</p>
<p>The class P consists of all <strong>decision problems</strong> that are solvable in polynomial time. That is, there exists an algorithm that will <strong>decide in polynomial time</strong> if any given input is a yes-input or a no-input.</p>
<p><strong>The class NP</strong>：</p>
<p>The class NP consists of all <strong>decision problems</strong> such that, for each yes-input, there exists a <strong>certificate</strong> which allows one to <strong>verify in polynomial time</strong> that the input is indeed a yes-input.</p>
<p><strong>Reduction</strong>：</p>
<p>Problem $Q$ can be reduced to $Q’$ if every instance of $Q$ can be “rephrased” to an instance of $Q’$.</p>
<p>“$Q$ is no harder to solve than $Q’$”</p>
<p><strong>Polynomial-Time Reductions</strong>：</p>
<ol>
<li><p>$f$ transforms an input $x$ for $L_1$ into an input $f(x)$ for $L_2$</p>
</li>
<li><p>$f$ is computable in polynomial time in size($x$)</p>
</li>
</ol>
<p>If such an $f$ exists, we say that $L_1$ is <strong>polynomial-time reducible</strong> to $L_2$, and write $L_1 \le_P L_2$.</p>
<p>“$L_1$ is no harder than $L_2$”</p>
<p><strong>Polynomial-Time Reduction $f : L_1 → L_2$</strong>：</p>
<p>If $L_1\le_P L_2$ and $L_2\in P$, then $L_1\in P$.</p>
<p>If $L_1\le_P L_2$, $L_2\le_P L_3$, then $L_1\le_P L_3$.</p>
<p><strong>The class NP-Complete</strong>：</p>
<ol>
<li>$L\in NP$</li>
<li>$\forall L’\in NP$, $L’\le_P L$</li>
</ol>
<p>$NPC$ consists of all the hardest problems in $NP$.</p>
<p><strong>NP-Completeness and Its Properties</strong>：</p>
<p>Let $L$ be any problem in $NPC$.</p>
<ol>
<li><p>If there is a polynomial-time algorithm for $L$, then there is a polynomial-time algorithm for every $L’\in NP$</p>
</li>
<li><p>If there is no polynomial-time algorithm for $L$, then there is no polynomial-time algorithm for every $L’\in NPC$</p>
</li>
</ol>
<p>Either all NP-Complete problems are polynomial time solvable, or all NP-Complete problems are not polynomial time solvable.</p>
<h1 id="Chapter-7-Number-Theory"><a href="#Chapter-7-Number-Theory" class="headerlink" title="Chapter 7 - Number Theory"></a>Chapter 7 - Number Theory</h1><p><strong>Properties of Divisibility</strong>：</p>
<ul>
<li>if $a|b$ and $a|c$, then $a|(b+c)$</li>
<li>if $a|b$ then $a|bc$ for all integers $c$</li>
<li>if $a|b$ and $b|c$, then $a|c$</li>
</ul>
<p><strong>Congruence Relation</strong>：</p>
<p>$a\equiv b\mod m$ IFF $m|(a-b)$</p>
<p>$a\equiv b\mod m$ IFF $a\mod m = b\mod m$</p>
<p>If $a\equiv b \mod m$ and $c\equiv d\mod m$, then $a+c\equiv b+d \mod m$ and $ac\equiv bd\mod m$</p>
<p>$(a+b)\mod m=((a\mod m)+(b\mod m))\mod m$</p>
<p>$ab\mod m=((a\mod m)(b\mod m))\mod m$</p>
<p><strong>Arithmetic Modulo m</strong>：</p>
<p>$(\mathbf Z_m,+_m,\cdot_m)$</p>
<ul>
<li><p>Closure: if $a,b\in \mathbf Z_m$, then $a+_mb,a\cdot_mb\in \mathbf Z_m$</p>
</li>
<li><p>Associativity: if $a,b,c\in \mathbf Z_m$, then</p>
<p>$(a+_mb)+_mc=a+_m(b+_mc)$</p>
<p>$(a\cdot_mb)\cdot_mc=a\cdot_m(b\cdot_mc)$</p>
</li>
<li><p>Identity elements: $a+_m0=a$ and $a\cdot_m1=a$</p>
</li>
<li><p>Additive inverses: if $a\ne0$ and $a\in \mathbf Z_m$, then $m-a$ is an additive inverse of $a$ modulo $m$</p>
</li>
<li><p>Commutativity: if $a,b\in \mathbf Z_m$, then $a+_mb=b+_ma$</p>
</li>
<li><p>Distributivity: if $a,b,c\in \mathbf Z_m$, then</p>
<p>$a\cdot_m(b+_mc)=(a\cdot_mb)+_m(a\cdot_mc)$</p>
<p>$(a+_mb)\cdot_mc=(a\cdot_mc)+_m(b\cdot_mc)$</p>
</li>
</ul>
<p><strong>Group</strong>：</p>
<p>$(G,\star)$</p>
<ul>
<li>Closure</li>
<li>Associativity</li>
<li>Identity element</li>
<li>Inverse</li>
</ul>
<p>e.g. Permutation Group：$(P_n,\circ )$</p>
<p><strong>Abelian Group</strong>：</p>
<p>$(G,\star)$</p>
<ul>
<li>Group</li>
<li>Commutativity</li>
</ul>
<p><strong>Ring</strong>：</p>
<p>$(R,+,\times)$</p>
<ul>
<li>Abelian Group $(R,+)$</li>
<li>Associativity of $\times$</li>
<li>Distributivity</li>
</ul>
<p><strong>Commutative Ring</strong>：</p>
<p>$(R,+,\times)$</p>
<ul>
<li>Ring</li>
<li><p>Commutativity of $\times$</p>
<p><strong>Integral Domain</strong>：</p>
</li>
</ul>
<p>$(R,+,\times)$</p>
<ul>
<li>Commutative Ring</li>
<li>Identity element of $\times$</li>
<li>Nonzero product</li>
</ul>
<p><strong>Field</strong>：</p>
<p>$(\mathbb F,+,\times)$</p>
<ul>
<li>Integral Domain</li>
<li>Inverse of $\times$</li>
</ul>
<p><strong>Prime Field and Characteristic</strong>：</p>
<p>Consider a finite field $\mathbb F$, define</p>
<p>$S_r=1+1+\cdots+1$ as sum of $r$ 1’s for a positive integer $r$.</p>
<ul>
<li><p>Let $p$ be the smallest positive number with $S_p=0$.</p>
<p>If such a $p$ exists, it must be prime.</p>
</li>
<li><p>If $p=a\cdot b$ with $0&lt;a,b&lt;p$, then by distributivity, $0=S_p=S_a\cdot S_b$. Then one of $S_a,\ S_b$ must be 0, contradicting the minimality of $p$.</p>
</li>
</ul>
<p>This $p$ is called the characteristic of the field $\mathbb F$.</p>
<p>The subset $\{0,S_1,S_2,\cdots,S_{p-1}\}$ is isomorphic to $\mathbb F$(prime field).</p>
<p>Any finite field $\mathbb F$ is a finite dimensional vector space over $\mathbb F_p$, with $n=dim_{\mathbb F_p}(\mathbb F)$, $|\mathbb F|=p^n$, i.e., the cardinality of $\mathbb F$ must be a prime power.</p>
<p><strong>Uniqueness of finite fields</strong>：</p>
<p>For any prime power $q$, there is essentially only one finite field of order $q$. Any two finite fields of order $q$ are the same except that the labelling used to represent the field elements may be different.</p>
<p><strong>Binary field</strong>：</p>
<p>characteristic-2 finite fields $\mathbb F_{2^m}$</p>
<p>Elements are polynomials over $\mathbb F_2$ of degree $\le m-1$</p>
<p>$\mathbb F_{2^m}:=\{a_{m-1}x^{m-1}+a_{m-2}x^{m-2}+\cdots+a_2x^2+a_1x+a_0:\ a_i\in \mathbb F_2\}$</p>
<p>An irreducible polynomial $f (x)$ of degree $m$ is chosen:</p>
<p>$f (x)$ cannot be factered as a product of binary polynomials each of degree less than $m$</p>
<ul>
<li>Addition: usual</li>
<li>Multiplication: modulo $f(x)$</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th>$\alpha^{0}=1$</th>
<th>$\alpha^{1}=\alpha$</th>
<th>$\alpha^{2}$</th>
<th>$\alpha^3$</th>
</tr>
</thead>
<tbody>
<tr>
<td>$\alpha^{4}=\alpha+1$</td>
<td>$\alpha^{5}=\alpha^{2}+\alpha$</td>
<td>$\alpha^{6}=\alpha^{3}+\alpha^{2}$</td>
<td>$\alpha^{7}=\alpha^{3}+\alpha+1$</td>
</tr>
<tr>
<td>$\alpha^{8}=\alpha^{2}+1$</td>
<td>$\alpha^{9}=\alpha^{3}+\alpha$</td>
<td>$\alpha^{10}=\alpha^{2}+\alpha+1$</td>
<td>$\alpha^{11}=\alpha^{3}+\alpha^{2}+\alpha$</td>
</tr>
<tr>
<td>$\alpha^{12}=\alpha^{3}+\alpha^{2}+\alpha+1$</td>
<td>$\alpha^{13}=\alpha^{3}+\alpha^{2}+1$</td>
<td>$\alpha^{14}=\alpha^{3}+1$</td>
<td>$\alpha^{15}=1$</td>
</tr>
</tbody>
</table>
</div>
<p>$&lt;\alpha^3,\alpha^2,\alpha,1&gt;$ is a basis for $\mathbb F_{2^4}$ over $\mathbb F_2$.</p>
<p>The finite field $\mathbb F_{q^n}$ can be viewed as a vector space over $\mathbb F_q$.</p>
<p><strong>Isomorphism of Finite Fields</strong>：</p>
<p>For a fixed $q$, the finite field $\mathbb F_q$ is unique.</p>
<p>if $\psi: z\mapsto c$ is an isomorphism between $K_1$ and $K_2$, then $f_1(c)\equiv 0\mod f_2(c)$ for some $c\in K_2$.</p>
<p><strong>Extension Fields and Subfields</strong>：</p>
<p>Let $p$ be a prime and $m\ge2$. Let $\mathbb F_p[z]$ denote the set of all polynomials in the variable $z$ with coefficients from $\mathbb F_p$. Let $f(z)$ be an irreducible polynomial of degree $m$ in $\mathbb F_p[z]$.</p>
<p>The elements of $\mathbb F_{p^m}$ are the polynomials in $\mathbb F_p[z]$ of degree $\le m-1$: </p>
<script type="math/tex; mode=display">\mathbb F_{p^m}:=\{a_{m-1}z^{m-1}+a_{m-2}z^{m-2}+\cdots+a_2z^2+a_1z+a_0:\ a_i\in \mathbb F_p\}</script><ul>
<li>Addition:  usual addition of polynomials, with coefficients arithmetic performed in $\mathbb F_p$.</li>
<li>Multiplication:  performed modulo the polynomial $f(z)$.</li>
</ul>
<p>A finite field $\mathbb F_{p^m}$ has precisely one subfield of order $p^ℓ$ for each positive divisor $ℓ$ of $m$.</p>
<p>The elements of this subfield are the elements $a\in \mathbb F_{p^m}$ satisfying $a^{p^ℓ}=a$; Conversely, every subfield of $\mathbb F_{p^m}$ has order $p^ℓ$ for some positive divisor $$</p>
<p><strong>Base-b Expansions </strong>：</p>
<p><img src="https://s2.loli.net/2023/01/01/4MF6VOsPHNdRLWv.png" alt="image.png" style="zoom:50%;" /></p>
<p>$O(\log n)$</p>
<p><strong>Binary Addition of Integers</strong></p>
<p><img src="https://s2.loli.net/2023/01/01/fX4BUCMSb8daslh.png" alt="image.png" style="zoom:50%;" /></p>
<p>$O(n)$ bit additions</p>
<p><strong>Binary Multiplication of Integers</strong></p>
<p><img src="https://s2.loli.net/2023/01/01/5VfLZkEC8MuaYxX.png" alt="image.png" style="zoom:50%;" /></p>
<p>$O(n^2)$ shifts and $O(n^2)$ bit additions</p>
<p><strong>Computing div and mod</strong></p>
<p><img src="https://s2.loli.net/2023/01/01/1vSPrNWfLFw9KkZ.png" alt="image.png" style="zoom:50%;" /></p>
<p>$O(\log q\log a)$ bit operations</p>
<p><strong>Binary Modular Exponentiation</strong>：</p>
<p><img src="https://s2.loli.net/2023/01/01/mO8rTNgWoRHSniB.png" alt="image.png" style="zoom:50%;" /></p>
<p>$O((\log m)^2\log n)$ bit operations</p>
<p><strong>Primes &amp; Composites</strong>：</p>
<p>If $n$ is composite, then $n$ has a prime divisor less than or equal to $\sqrt n$.</p>
<ul>
<li><p>if $n$ is composite, then it has a positive integer factor a such that $1 &lt; a &lt; n$ by definition. This means that $n = ab$, where $b$ is an integer greater than 1. </p>
</li>
<li><p>assume that $a&gt;\sqrt n$ and $b&gt;\sqrt n$. Then ab &gt; n, contradiction. So either $a\le \sqrt n$ or $b\le \sqrt n$. </p>
</li>
<li><p>Thus, $n$ has a divisor less than $\sqrt n$. </p>
</li>
<li><p>By the Fundamental Theorem of Arithmetic, this divisor is either prime, or is a product of primes. In either case, n has a prime divisor less than $\sqrt n$.</p>
</li>
</ul>
<p>There are infinitely many primes.</p>
<ul>
<li>assume that there are finite primes $\{a_n\}$, where $a_n$ is the largest one.</li>
<li>then we construct $a_{n+1}=(\prod\limits_{i=1}^{n}a_i)+1$</li>
<li>$a_{n+1}$ cannot be divided by any primes smaller than itself, so it is a prime number larger than $a_n$, contradiction.</li>
</ul>
<p><strong>GCD &amp; LCM Using Factorization</strong>：</p>
<p>$a=\prod\limits_{i=1}^{n}p_i^{a_i}$, $b=\prod\limits_{i=1}^{n}p_i^{b_i}$</p>
<p>$gcd(a,b)=\prod\limits_{i=1}^{n}p_i^{min(a_i,b_i)}$</p>
<p>$lcm(a,b)=\prod\limits_{i=1}^{n}p_i^{max(a_i,b_i)}$</p>
<p><strong>Euclidean algorithm ($O(\log b)$)</strong>：</p>
<p><img src="https://s2.loli.net/2023/01/01/n6vDqzNV9es2PXt.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Lemma</strong> Let $a=bq+r$, where $a,b,q,r$ are integers. Then $gcb(a,b)=gcd(b,r)$</p>
<ul>
<li>Suppose $d|a$ and $d|b$, then $d|(a-bq)$ i.e. $d|r$. </li>
<li>Suppose $d|b$ and $d|r$, then $d|(bq+r)$ i.e. $d|a$.</li>
</ul>
<p>Therefore, $gcd(a,b)=gcd(b,r)$.</p>
<p><strong>Bezout’s Theorem</strong>：</p>
<p>If $a$ and $b$ are positive integers, then there exist integers $s$ and $t$ such that $gcd(a,b)=sa+tb$.</p>
<p>$\begin{aligned}<br>503 &amp; = 1 \cdot 286+217 \\<br>286 &amp; = 1 \cdot 217+69 \\<br>217 &amp; = 3 \cdot 69+10 \\<br>69 &amp; = 6 \cdot 10+9 \\<br>10 &amp; = 1 \cdot 9+1<br>\end{aligned}$</p>
<p>$\begin{aligned}<br>1 &amp; =10-1 \cdot 9 \\<br>&amp; =7 \cdot 10-1 \cdot 69 \\<br>&amp; =7 \cdot 217-22 \cdot 69 \\<br>&amp; =29 \cdot 217-22 \cdot 286 \\<br>&amp; =29 \cdot 503-51 \cdot 286<br>\end{aligned}$</p>
<p><strong>Corollaries of Bezout’s Theorem</strong>：</p>
<p>If $a,b,c$ are positive integers such that $gcd(a,b)=1$ and $a|bc$, then $a|c$.</p>
<ul>
<li>$1=sa+tb$, $c=sac+tbc$, $a|bc$, $a|(sac+tbc)$, i.e. $a|c$.</li>
</ul>
<p>If $p$ is prime and $p|\prod\limits_{i=1}^n a_i$, then $p|a_i$ for some $i$.</p>
<ul>
<li>by induction. Will be given later</li>
</ul>
<p><strong>Uniqueness of Prime Factorization</strong>：</p>
<p>Suppose that the positive integer $n$ can be written as a product of primes in 2 distinct ways:</p>
<p>$n=\prod\limits_{i=1}^sp_i$ and $n=\prod\limits_{j=1}^t q_j$</p>
<p>Remove all common primes from the factorizations to get</p>
<p>$\prod\limits_{k=1}^{u}p_{i_k}=\prod\limits_{k=1}^{v}q_{j_k}$</p>
<p>It then follows that $p_{i_1}|q_{j_k}$ for some $k$, contradicting the assumption that $p$ and $q$ are distinct primes.</p>
<p><strong>Dividing Congruences by an Integer</strong>：</p>
<p>Let $m$ be a positive integer and let $a,b,c$ be integers. If $ac\equiv bc\mod m$ and $gcd(c,m)=1$, then $a\equiv b \mod m$.</p>
<p><strong>Modular Inverse</strong>：</p>
<p>An integer $\bar a$ such that $\bar aa\equiv 1 \mod m$ is said to be an inverse of $a$ modulo $m$</p>
<p>If $a$ and $m$ are relatively prime integers and $m&gt;1$, then and inverse of $a$ modulo $m$ exists. Furthermore, the inverse is unique modulo $m$.</p>
<ul>
<li><p>Existence: $gcd(a,m)=1$, $sa+tm=1$, $sa+tm\equiv 1\mod m$, $sa\equiv 1\mod m$.$s$ is an inverse of $a$ modulo $m$.</p>
</li>
<li><p>Uniqueness: $sa\equiv 1\mod m$, $ta\equiv 1 \mod m$, $(t-s)a\equiv 0\mod m$, $a\mod m\ne0$, so $(s-t)\equiv 0 \mod m$. Since $s,t\in\mathbf Z_m$, $s-t=0$, i.e. $s=t$</p>
</li>
</ul>
<p><strong>Find inverses: extended Euclidean algorithm</strong>：</p>
<p>$\begin{align}<br>4620 &amp; = 45 \cdot 101+75 \\<br>101 &amp; = 1 \cdot 75+26 \\<br>75 &amp; = 2 \cdot 26+23 \\<br>26 &amp; = 1 \cdot 23+3 \\<br>23 &amp; = 7 \cdot 3+2 \\<br>3 &amp; = 1 \cdot 2+1 \\<br>2 &amp; = 2 \cdot 1<br>\end{align}$</p>
<p>$\begin{aligned}<br>1 &amp; =3-1 \cdot 2 \\<br>1 &amp; =3-1 \cdot(23-7 \cdot 3)=-1 \cdot 23+8 \cdot 3 \\<br>1 &amp; =-1 \cdot 23+8 \cdot(26-1 \cdot 23)=8 \cdot 26-9 \cdot 23 \\<br>1 &amp; =8 \cdot 26-9 \cdot(75-2 \cdot 26)=26 \cdot 26-9 \cdot 75 \\<br>1 &amp; =26 \cdot(101-1 \cdot 75)-9 \cdot 75 \\<br>&amp; =26 \cdot 101-35 \cdot 75 \\<br>1 &amp; =26 \cdot 101-35 \cdot(4620-45 \cdot 101) \\<br>&amp; =-35 \cdot 4620+1601 \cdot 101<br>\end{aligned}$</p>
<p><strong>Number of Solutions to Congruences</strong>：</p>
<p>Let $d = gcd(a, m)$ and $m’ = m/d$. The congruence $ax \equiv b \mod m$ has solutions <strong>if and only if</strong> $d|b$. If $d|b$, then there are exactly $d$ solutions. If $x_0$ is a solution, then the other solutions are given by $x_0 + m’ , x_0 + 2m’ ,\cdots, x_0 + (d − 1)m’ $.</p>
<ul>
<li>“only if”: If $x_0$ is a solution, then $ax_0-b=km$. Thus, $ax_0-km=b$, Since $d|(ax_0-km)$, we must have $d|b$.</li>
<li>“if”: Suppose that $d|b$. Let $b=kd$. There exist integers $s,t$ such that $d=sa+tm$. Then $b=kd=ask+mtk$. Let $x_0=sk$, then $ax_0\equiv b\mod m$.</li>
<li>“#=d”: $m|a(x_1-x_0)$, and $m’|a’(x_1-x_0)$, $x_1=x_0+km’$, where $k=0,1,\cdots,d-1$.</li>
</ul>
<p><strong>The Chinese Remainder Theorem</strong>：</p>
<p>$\{m_n\}$ are pairwise relatively prime positive integers greater than 1 and $\{a_n\}$ be arbitrary integers. Then the system</p>
<script type="math/tex; mode=display">\begin{array}{ll}
x \equiv a_{1} & \left(\bmod m_{1}\right) \\
x \equiv a_{2} & \left(\bmod m_{2}\right) \\
\cdots \\
x \equiv a_{n} & \left(\bmod m_{n}\right)
\end{array}</script><p>has a unique solution modulo $m=\prod\limits_{i=1}^{n}m_i$.</p>
<p>Let $M_k=m/m_k$ for $k=1,2,\cdots,n$ and $m=\prod\limits_{i=1}^{n}m_i$. Since $gcd(m_k,M_k)=1$, there is an integer $y_k$, an inverse of $M_k$ modulo $m_k$ such that $M_ky_k\equiv 1\mod m_k$. Let</p>
<script type="math/tex; mode=display">x=\sum\limits_{i=1}^{n}a_iM_iy_i</script><p>It is checked that $x$ is a solution to the $n$ congruences.</p>
<p>Uniqueness: Suppose there are two solutions $u$ and $v$ to the system, then $m_i|(u-v),\ i=1,2,\cdots,n$, then $m|(u-v)$, i.e. $u\equiv v\mod m$.</p>
<p><strong>Back Substitution</strong>：</p>
<p>……</p>
<p><strong>Pseudorandom Number Generators</strong>：</p>
<p>$x_{n+1}=(ax_n+c)\mod m$</p>
<p><strong>Hash Functions</strong>：</p>
<p>……</p>
<h1 id="Chapter-8-Cryptography"><a href="#Chapter-8-Cryptography" class="headerlink" title="Chapter 8 - Cryptography"></a>Chapter 8 - Cryptography</h1><p><strong>Fermat’s Little Theorem</strong>：</p>
<p>Let $p$ be a prime, and let $x$ be an integer such that $x\not\equiv0\mod p$. Then $x^{p-1}\equiv 1\mod p$.</p>
<p><strong>Proof of Fermat’s Little Theorem</strong>：</p>
<p><strong>Lemma</strong>(Dividing Congruences by an Integer)</p>
<p>Let $m$ be a positive integer and let $a,b,c$ be integers. If $ac\equiv bc\mod m$ and $gcd(c,m)=1$, then $a\equiv b \mod m$.</p>
<ul>
<li>Pick distinct $u,v$ from $\mathbf Z_m$, suppose $ux\equiv vx \mod m$, $gcd(x,m)=1$, then $u\equiv v\mod m$, contradiction.</li>
<li>So $\{1,2,\cdots,p-1\}=\{x,2x,\cdots,(p-1)x \mod p\}$</li>
<li>$(p-1)!x^{p-1}\equiv(p-1)!\mod p$</li>
<li>Since $gcd((p-1)!,p)=1$, $x^{p-1}\equiv 1\mod m$</li>
</ul>
<p><strong>Euler’s totient function</strong>：</p>
<p>$\phi(n)$: the number of positive integers coprime to $n$ in $\mathbf Z_m$.</p>
<p>For prime numbers $p$</p>
<ul>
<li><p>$\phi(p)=p-1$</p>
</li>
<li><p>$\phi(p^i)=p^i-p^{i-1}$</p>
</li>
</ul>
<p>For positive integer $n&gt;1$, it has factorization $n=p_1^{k_1}p_2^{k_2}\cdots p_r^{k_r}$</p>
<ul>
<li>$\phi(n)=\prod\limits_{i=1}^{r}(p^{k_i}-p^{k_i-1})$</li>
<li>$m&gt;1$ and $gcd(m,n)=1$，$\phi(mn)=\phi(m)\phi(n)$</li>
</ul>
<p><strong>Euler’s Theorem</strong>： </p>
<p>Let $n$ be a positive integer, and let $x$ be an integer such that $gcd(x,n)=1$. Then</p>
<script type="math/tex; mode=display">x^{\phi(n)}\equiv 1\mod n</script><ul>
<li><p>Denote the set of numbers coprime to n in $\mathbf Z_n$ as $\{X_{\phi(n)}\}$.</p>
</li>
<li><p>Pick $u,v$ from $\{X_{\phi(n)}\}$, suppose $ux\equiv vx\mod n$, $gcd(x,n)=1$, then $u\equiv v\mod n$.</p>
<p>So the cardinality $|\{X_{\phi(n)}\}|=|\{x\cdot X_{\phi(n)}\}|$</p>
</li>
<li><p>Now prove that  for $X_i\in\{X_{\phi(n)}\}$, $gcd(x\cdot X_i,n)=1$.</p>
</li>
<li><p>Assume that $x\cdot X_i\equiv r \mod n$, and $t=gcd(r,n)\ne1$, i.e. $x\cdot X_i=kn+r$</p>
</li>
<li><p>Since $t|n,\ t|r$, $t|x\cdot X_i$, $gcd(X_i, n)=1$</p>
<p>So $t|x$, $gcd(x,n)\ge t&gt;1$, contradiction.</p>
</li>
<li><p>So multiplying $x$ to $\{X_{\phi(n)}\}$ is actually a bijection $f: \{X_{\phi(n)}\}→\{X_{\phi(n)}\}$</p>
</li>
<li><p>$\prod\limits_{i=1}^{\phi(n)}x\cdot X_i\equiv\prod\limits_{i=1}^{\phi(n)}X_i\mod n$</p>
</li>
<li><p>Eliminate the product of $X_i$ (which is coprime to n), we get $x^{\phi(n)}\equiv 1\mod n$</p>
</li>
</ul>
<p><strong>Primitive Roots</strong>：</p>
<p>There is a primitive root modulo $n$ IFF $n=2,4,p^e \text{ or }2p^e$,where $p$ is an odd prime.</p>
<p>If $n$ has primitive roots, then it has $\phi(\phi(n))$ primitive roots.</p>
<p><strong>RSA Public Key Cryptosystem</strong>：</p>
<p>Pick two large primes $p$ and $q$. Let $n=pq$, then $\phi(n)=(p-1)(q-1)$. Encryption and decryption keys $e$ and $d$ are selected such that</p>
<ul>
<li>$gcd(e,\phi(n))=1$</li>
<li>$ed\equiv 1\mod \phi(n)$</li>
</ul>
<p>RSA encryption: $C=M^e\mod n$</p>
<p>RSA decryption: $M=C^d\mod n$</p>
<p>For each integer $x$ such that $0\leq x&lt;n$, $x^{ed}\equiv x\mod n$.</p>
<p>$p,q,\phi(n)$ must be kept secret!</p>
<p>Let $(e,d)$ be a key pair for the RSA. Define $\lambda(n)=lcm(p-1,q-1)$, and compute $d’=e^{-1}\mod \lambda(n)$, decryption using $d’$ still works!</p>
<p><strong>Discrete Logarithm Problem</strong>：</p>
<p>For $b^x\equiv y\mod n$, given $n$, $b$ and $y$, find $x$. This is very hard!</p>
<p><strong>El Gamal Encryption</strong>：</p>
<p>……</p>
<h1 id="Chapter-9-Mathematical-Induction"><a href="#Chapter-9-Mathematical-Induction" class="headerlink" title="Chapter 9 - Mathematical Induction"></a>Chapter 9 - Mathematical Induction</h1><p><strong>Proof by Smallest Counterexample</strong>：</p>
<p>The statement $P(n)$ is true for all $n=0,1,2,\cdots$</p>
<ol>
<li>Assume that a counter-example exists, i.e. there is some $n&gt;0$ for which $P(n)$ is false.</li>
<li>Let $m&gt;0$ be the smallest value for which $P(m)$ is false.</li>
<li>Then use the fact that $P(m’)$ is true for all $0\le m’&lt;m$ to show that $P(m)$ is true, contradicting the choice of $m$.</li>
</ol>
<p><strong>Weak Principle of Mathematical Induction</strong>：</p>
<p>Base step: If the statement $P(b)$ is true.</p>
<p>Inductive step: The statement $P(n-1)→P(n)$ is true for all $n&gt;b$, then $P(n)$ is true for all integers $n\ge b$.</p>
<p><strong>Strong Principle of Mathematical Induction</strong>：</p>
<p>Base step: If the statement $P(b)$ is true.</p>
<p>Inductive step: The statement $P(b)\wedge P(b+1)\wedge \cdots\wedge P(n-1)→P(n)$ is true for all $n&gt;b$, then $P(n)$ is true for all integers $n\ge b$.</p>
<p>Weak 々 is equivalent to Strong 々.</p>
<h1 id="Chapter-10-Recursion"><a href="#Chapter-10-Recursion" class="headerlink" title="Chapter 10 - Recursion"></a>Chapter 10 - Recursion</h1><p><strong>Iterating a Recurrence</strong>：</p>
<p>“Top-down”: $T(n)=rT(n-1)+a=r(rT(n-2)+a)+a=\cdots$</p>
<p>“Bottom-up”: $T(0)=b,\ T(1)=rT(0)+a,\ T(2)=rT(1)+a\cdots$</p>
<p><strong>Formula of Recurrences</strong>：</p>
<p>$T(n)=rT(n-1)+a,\ T(0)=b$, and $r\ne1$, </p>
<p>then</p>
<script type="math/tex; mode=display">T(n)=r^nb+a\frac{1-r^n}{1-r}</script><p>for all nonnegative integers $n$.</p>
<p><strong>First-Order Linear Recurrences</strong>：</p>
<p>$T(n)=f(n)T(n-1)+g(n)$</p>
<p>When $f(n)$ is a constant: </p>
<script type="math/tex; mode=display">T(n)=\left\{\begin{array}{ll}
r T(n-1)+g(n) & \text { if } n>0 \\
a & \text { if } n=0
\end{array}\right.</script><script type="math/tex; mode=display">T(n)=r^{n} a+\sum_{i=1}^{n} r^{n-i} g(i)</script><p><strong>The Master Theorem</strong>：</p>
<p>$T(n)=aT(n/b)+cn^d$</p>
<ol>
<li>If $a&lt;b^d$, then $T(n)=\Theta(n^d)$</li>
<li>If $a=b^d$, then $T(n)=\Theta(n^d\log n)$</li>
<li>If $a&gt;b^d$, then $T(n)=\Theta(n^{\log_ba})$</li>
</ol>
<p><img src="https://s2.loli.net/2023/01/01/8pS9IbAPfWXDOgt.png" alt=""></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Discrete Math</tag>
      </tags>
  </entry>
  <entry>
    <title>CS217 数据结构与算法分析 期末复习</title>
    <url>/2023/01/08/CS217_DSAA_final/</url>
    <content><![CDATA[<p><a href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html">Algorithm visualization</a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Incremental technique, Recursive technique</p>
<p>Divide-and-conquer Strategy</p>
<p>Iteration, Recursion</p>
<h2 id="Algorithm-Analysis"><a href="#Algorithm-Analysis" class="headerlink" title="Algorithm Analysis"></a>Algorithm Analysis</h2><p><img src="https://s2.loli.net/2023/01/07/guLBibrv59NMZxQ.png" alt="image.png" style="zoom:50%;" /></p>
<p>CPU Basic (atomic) operations</p>
<ul>
<li>Initialization</li>
<li>Arithmetic</li>
<li>Comparison / Branching</li>
<li>Memory Access</li>
</ul>
<p>Cost analysis, Correctness analysis</p>
<p>Pseudocode</p>
<p>Binary Search Algorithm</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//end state: l&gt;r, answer registered as ans</span></span><br><span class="line"><span class="keyword">while</span> (l&lt;=r)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">check</span>(mid))</span><br><span class="line">    &#123;</span><br><span class="line">        ans=mid;</span><br><span class="line">        r=mid<span class="number">-1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,ans);</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//end state: l==r, answer=l=r</span></span><br><span class="line"><span class="keyword">while</span> (l&lt;r)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">check</span>(mid)) r=mid</span><br><span class="line">    <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,l); </span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//The smallest element no less than key</span></span><br><span class="line"><span class="type">int</span> l=<span class="number">1</span>,r=n;<span class="keyword">while</span> (l&lt;r)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> mid=(l+r)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (a[mid]&gt;=key) r=mid; </span><br><span class="line">    <span class="keyword">else</span> l=mid+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> l;</span><br></pre></td></tr></table></figure>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="comment">//The greatest element no greater than key</span></span><br><span class="line"><span class="type">int</span> l=<span class="number">1</span>,r=n;<span class="keyword">while</span> (l&lt;r)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> mid=(l+r+<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (a[mid]&lt;=key) l=mid; </span><br><span class="line">    <span class="keyword">else</span> r=mid<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> l;</span><br></pre></td></tr></table></figure>
<p>Big-O Notation</p>
<p><img src="https://s2.loli.net/2023/01/07/23DTsghj8wN7ZGF.png" alt="image.png" style="zoom:50%;" /></p>
<p>Big-Ω Notation</p>
<p><img src="https://s2.loli.net/2023/01/07/H5OqWMoCKBQJN6k.png" alt="image.png" style="zoom:50%;" /></p>
<p>Big-Θ Notation</p>
<p><img src="https://s2.loli.net/2023/01/07/Jls7Ym8nPtUubDe.png" alt="image.png" style="zoom:50%;" /></p>
<h2 id="Sorting"><a href="#Sorting" class="headerlink" title="Sorting"></a>Sorting</h2><p>Selection sort</p>
<p><img src="https://s2.loli.net/2023/01/07/L3ChUQbcRn1JkTs.png" alt="image.png" style="zoom:50%;" /></p>
<p>Insertion sort</p>
<p><img src="https://s2.loli.net/2023/01/07/iBv9AzLkywRgYu7.png" alt="image.png" style="zoom:50%;" /></p>
<p>Bubble sort</p>
<p><img src="https://s2.loli.net/2023/01/07/g2XKiwVMCQnkjtD.png" alt="image.png" style="zoom:50%;" /></p>
<p>Merge sort</p>
<p><img src="https://s2.loli.net/2023/01/07/TQvS3cqBDfjxd8I.png" alt="image.png" style="zoom:50%;" /></p>
<p><img src="https://s2.loli.net/2023/01/07/inEZaeqVXT1F4BD.png" alt="image.png" style="zoom:50%;" /></p>
<p>Matser Theorem</p>
<p><img src="https://s2.loli.net/2023/01/07/uPpn5dhbofysRlq.png" alt="image.png" style="zoom:50%;" /></p>
<p>Quick sort</p>
<p>Worst $O(n^2)$, Expected $O(n\log n)$</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">quickSort</span>(<span class="params">arr, left, right</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> len = arr.<span class="property">length</span>,</span><br><span class="line">        partitionIndex,</span><br><span class="line">        left = <span class="keyword">typeof</span> left != <span class="string">&#x27;number&#x27;</span> ? <span class="number">0</span> : left,</span><br><span class="line">        right = <span class="keyword">typeof</span> right != <span class="string">&#x27;number&#x27;</span> ? len - <span class="number">1</span> : right;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (left &lt; right) &#123;</span><br><span class="line">        partitionIndex = <span class="title function_">partition</span>(arr, left, right);</span><br><span class="line">        <span class="title function_">quickSort</span>(arr, left, partitionIndex-<span class="number">1</span>);</span><br><span class="line">        <span class="title function_">quickSort</span>(arr, partitionIndex+<span class="number">1</span>, right);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">partition</span>(<span class="params">arr, left ,right</span>) &#123;     <span class="comment">// 分区操作</span></span><br><span class="line">    <span class="keyword">var</span> pivot = left,                      <span class="comment">// 设定基准值（pivot）</span></span><br><span class="line">        index = pivot + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = index; i &lt;= right; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (arr[i] &lt; arr[pivot]) &#123;</span><br><span class="line">            <span class="title function_">swap</span>(arr, i, index);</span><br><span class="line">            index++;</span><br><span class="line">        &#125;        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">swap</span>(arr, pivot, index - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> index-<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//javascript version from runoob.com</span></span><br></pre></td></tr></table></figure>
<p>$e_i$ and $e_j$ are compared IFF either one is the first among $e_i, e_{i+1},\cdots, e_j$ picked as a pivot.</p>
<p><img src="https://s2.loli.net/2023/01/07/k3pjNxn8EP4W7zs.png" alt="image.png" style="zoom:50%;" /></p>
<p>Complexity Summary</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">Sort</th>
<th style="text-align:center">Average Time Complexity</th>
<th style="text-align:center">Space Complexity</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Selection</td>
<td style="text-align:center">$O(n^2)$</td>
<td style="text-align:center">$O(1)$</td>
</tr>
<tr>
<td style="text-align:center">Insertion</td>
<td style="text-align:center">$O(n^2)$</td>
<td style="text-align:center">$O(1)$</td>
</tr>
<tr>
<td style="text-align:center">Bubble</td>
<td style="text-align:center">$O(n^2)$</td>
<td style="text-align:center">$O(1)$</td>
</tr>
<tr>
<td style="text-align:center">Heap</td>
<td style="text-align:center">$O(n\log n)$</td>
<td style="text-align:center">$O(1)$</td>
</tr>
<tr>
<td style="text-align:center">Merge</td>
<td style="text-align:center">$O(n\log n)$</td>
<td style="text-align:center">Depends</td>
</tr>
<tr>
<td style="text-align:center">Quick</td>
<td style="text-align:center">$O(n\log n)$</td>
<td style="text-align:center">$O(1)$</td>
</tr>
</tbody>
</table>
</div>
<p><a href="https://www.bilibili.com/video/BV1iK4y1a7BU">Shell sort</a></p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">shell_sort</span><span class="params">(<span class="type">int</span> arr[], <span class="type">int</span> len)</span> &#123;</span><br><span class="line">        <span class="type">int</span> gap, i, j;</span><br><span class="line">        <span class="type">int</span> temp;</span><br><span class="line">        <span class="keyword">for</span> (gap = len &gt;&gt; <span class="number">1</span>; gap &gt; <span class="number">0</span>; gap &gt;&gt;= <span class="number">1</span>)</span><br><span class="line">                <span class="keyword">for</span> (i = gap; i &lt; len; i++) &#123;</span><br><span class="line">                        temp = arr[i];</span><br><span class="line">                        <span class="keyword">for</span> (j = i - gap; j &gt;= <span class="number">0</span> &amp;&amp; arr[j] &gt; temp; j -= gap)</span><br><span class="line">                                arr[j + gap] = arr[j];</span><br><span class="line">                        arr[j + gap] = temp;</span><br><span class="line">                &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Counting sort</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2019/03/countingSort.gif" style="zoom:50%;" /></p>
<p>Radix sort</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2019/03/radixSort.gif" style="zoom:50%;" /></p>
<p>Bucket sort</p>
<p><img src="https://www.runoob.com/wp-content/uploads/2019/03/Bucket_sort_1.svg_.png"  /></p>
<p><img src="https://www.runoob.com/wp-content/uploads/2019/03/Bucket_sort_2.svg_.png"  /></p>
<h2 id="Linked-List"><a href="#Linked-List" class="headerlink" title="Linked List"></a>Linked List</h2><div class="table-container">
<table>
<thead>
<tr>
<th>Operation</th>
<th>Time Complexity</th>
<th>Space Complexity</th>
</tr>
</thead>
<tbody>
<tr>
<td>Insert</td>
<td>$O(n)$</td>
<td>$O(1)$</td>
</tr>
<tr>
<td>Delete</td>
<td>$O(n)$</td>
<td>$O(1)$</td>
</tr>
<tr>
<td>Find</td>
<td>$O(n)$</td>
<td>$O(1)$</td>
</tr>
<tr>
<td>Update</td>
<td>$O(n)$</td>
<td>$O(1)$</td>
</tr>
</tbody>
</table>
</div>
<p>Double linked list</p>
<p>Circular linked list</p>
<h2 id="Stack-amp-Queue"><a href="#Stack-amp-Queue" class="headerlink" title="Stack &amp; Queue"></a>Stack &amp; Queue</h2><h3 id="Stack"><a href="#Stack" class="headerlink" title="Stack"></a>Stack</h3><p>First In Last Out</p>
<p><img src="https://s2.loli.net/2023/01/07/ZFqiK73UmcgL69T.png" alt="image.png" style="zoom:50%;" /></p>
<p>Applications: Delimiters balance problem, Evaluating arithmetic expressions, The runtime stack in memory</p>
<p>Prefix/Infix/Postfix expression</p>
<h3 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h3><p>First In First Out</p>
<p><img src="https://s2.loli.net/2023/01/07/SuFQyIO9J7kwRea.png" alt="image.png" style="zoom:50%;" /></p>
<p>Ring queue</p>
<p><img src="https://s2.loli.net/2023/01/07/p1g4YT6nEUXZoFA.png" alt="image.png" style="zoom:50%;" /></p>
<p>All operations above takes $O(1)$ time complexity.</p>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="String-matching"><a href="#String-matching" class="headerlink" title="String matching"></a>String matching</h3><p>Brute Force $O(mn)$</p>
<p><img src="https://s2.loli.net/2023/01/07/IRKWd4758mvjXpb.png" alt="image.png" style="zoom:50%;" /></p>
<p>Rabin-Karp Algorithm $O(mn)$</p>
<p><img src="https://s2.loli.net/2023/01/07/KExkrpRCdsSX3z2.png" alt="image.png" style="zoom:50%;" /></p>
<p>KMP $O(m+n)$</p>
<p><img src="https://s2.loli.net/2023/01/07/m6Xb14INu9FPVLz.png" alt="image.png" style="zoom:50%;" /></p>
<p><img src="https://s2.loli.net/2023/01/07/zetLS1yVfwFIPqs.png" alt="image.png" style="zoom:50%;" /></p>
<h3 id="FSA"><a href="#FSA" class="headerlink" title="FSA"></a>FSA</h3><ul>
<li>$Q$, a set of states</li>
<li>$q_0\in Q$, the start state</li>
<li>$A\subseteq Q$, the accepting states</li>
<li>$\Sigma$, the input alphabet</li>
<li>$\delta$, the transition function $Q\times \Sigma→Q$</li>
</ul>
<p><img src="https://s2.loli.net/2023/01/07/kxRLO5YAUwJXFj2.png" alt="image.png" style="zoom:50%;" /></p>
<h2 id="Tree"><a href="#Tree" class="headerlink" title="Tree"></a>Tree</h2><p>Internal nodes, leaf nodes, root</p>
<p>(proper) ancestor, descendant</p>
<p>Path, Depth, Level, Height</p>
<p>(full, complete) k-ary tree</p>
<p>preorder, inorder, postorder traversal</p>
<p>Character Encoding &amp; Huffman Tree</p>
<p><img src="https://s2.loli.net/2023/01/07/8lW4O3DwILt5iad.png" alt="image.png" style="zoom:50%;" /></p>
<p>Given a Huffman tree, it includes at least 2 nodes, assume node $u$ and node $v$ have the top-2 lowest frequencies, then</p>
<ol>
<li>node $u$ and $v$ have the same parent node</li>
<li>$depth(u)$ and $depth(v) \ge depth(x)$, where node $x$ is any leaf node in the Huffman tree.</li>
</ol>
<p>Huffman encoding is the optimum prefix code, i.e., the space cost is minimized.<a href="http://home.cse.ust.hk/faculty/golin/COMP271Sp03/Notes/MyL17.pdf">Proof</a></p>
<ol>
<li>A tree with $n$ nodes with $n-1$ edges</li>
</ol>
<ul>
<li>For each non-root node v, it has one and only one edge point to itself. </li>
<li>A tree with n nodes, thus the number of non-root nodes is n-1.</li>
<li>Thus, this tree has n-1 edges.</li>
</ul>
<ol>
<li>Let $T$ be a tree where every internal node has at least 2 child nodes. If $m$ is the number of leaf nodes, then the number of internal nodes is at most $m-1$.</li>
</ol>
<ul>
<li>Suppose internal node $v$ has $x_v$ child nodes </li>
<li>The average child nodes of each internal node is $x$ </li>
<li>It has $m$ leaf nodes, thus it has $m/x$ parent nodes at most, i.e., they are parent of leaf nodes. </li>
<li>For $m/x$ internal nodes, it has at most $m/x^2$ parents. </li>
<li>For $m/x^2$ internal nodes, it has at most $m/x^3$ parents. </li>
<li>… </li>
<li>The total number of internal nodes is $m/x + m/x^2 + … + 1$</li>
<li>It is at most m-1. </li>
</ul>
<ol>
<li>A complete binary tree with $n ≥ 2$ nodes has height $O(\log n)$</li>
</ol>
<ul>
<li>Suppose the height is $h$. </li>
<li>The number of nodes at each level: </li>
<li>Level 0: $2^0 = 1$, Level 1: $2^1 = 2 $</li>
<li>Level 2: $2^2 = 4$, Level 3: $2^3 = 8$</li>
<li>… </li>
<li>Level $h-1$: $2^(h-1)$, Level $h$: $x (x \ge 1) $</li>
<li>Thus, $2^0 + 2^1 + … 2^{h-1} + x = n$</li>
<li>$(1-2^{h-1})/(1-2) = n-x → 2^{h-1} &lt; n $</li>
<li>Thus, $h = O(\log n)$</li>
</ul>
<h2 id="Advanced-Binary-Trees"><a href="#Advanced-Binary-Trees" class="headerlink" title="Advanced Binary Trees"></a>Advanced Binary Trees</h2><h3 id="Heap"><a href="#Heap" class="headerlink" title="Heap"></a>Heap</h3><ul>
<li>Complete binary tree</li>
<li>$O(n)$ space consumption </li>
<li>$O(\log n)$ insertion time </li>
<li>$O(\log n)$ delete-min time</li>
</ul>
<p>Suppose that node $u$ of $T$ is stored at $A[i]$. Then, the left child of $u$ is stored at $A[2i]$, and the right child at $A[2i+1]$.</p>
<p>Suppose that node $u$ of $T$ is stored at $A[i]$. Then, the parent of $u$ is stored at $A[ \left \lfloor i/2 \right \rfloor ]$.</p>
<p>Root-fix operation: Build a heap with $O(n)$ time.</p>
<p>$O(\sum\limits_{i=0}^{h-1}(h-i)\times2^i)=O(2^h)=O(n)$</p>
<h3 id="Binary-Search-Tree"><a href="#Binary-Search-Tree" class="headerlink" title="Binary Search Tree"></a>Binary Search Tree</h3><p>predecessor($\max\{a[i]\le q\}$), successor($\min\{a[i]\ge q\}$): $O(h)$</p>
<p>↙↘↘↘↘↘，↘↙↙↙↙↙</p>
<p>Insert: $O(h)$</p>
<p><img src="https://s2.loli.net/2023/01/08/183xdOHumtvXn2P.png" alt="image.png" style="zoom: 40%;" /></p>
<p>Delete: $O(h)$</p>
<p><img src="https://s2.loli.net/2023/01/08/LICKz3nltBhc8Tx.png" alt="image.png" style="zoom:50%;" /></p>
<h3 id="BBST"><a href="#BBST" class="headerlink" title="BBST"></a>BBST</h3><p>For every internal node $u$ of $T$, the height of the left subtree of $u$ differs from that the right subtree of $u$ by at most 1.</p>
<p>Proof: A balanced binary tree with $n$ nodes has height $O(\log n)$.</p>
<p>To construct a BBST with greatest height using $n$ nodes, each internal node should has subtrees that differ 1 in height. Denote $f(h)$ as the least number of nodes of a BBST with height $h$, then </p>
<p>$f(1)=1, f(2)=2$</p>
<p>$f(h)=f(h-1)+f(h-2)+1$</p>
<p>$f(h)+1=f(h-1)+1+f(h-2)+1$</p>
<p>$f(h)=\frac{1}{\sqrt 5}[(\frac{1+\sqrt 5}{2})^{h+1}-(\frac{1-\sqrt 5}{2})^{h+1}]-1$</p>
<p>$n\ge \frac{1}{\sqrt 5}[(\frac{1+\sqrt 5}{2})^{h+1}-(\frac{1-\sqrt 5}{2})^{h+1}]-1$</p>
<p>$h\le c\log n, h=O(\log n)$</p>
<p>Insertion time analysis?</p>
<p>Deletion time analysis?</p>
<h2 id="Graph"><a href="#Graph" class="headerlink" title="Graph"></a>Graph</h2><p>BFS</p>
<p>BFS tree, SSSP</p>
<p>DFS</p>
<p>DFS tree, Cycle detection, topological sort</p>
<p><strong>Parenthesis Theorem</strong>: all the following are true: </p>
<ul>
<li>If $u$ is a proper ancestor of $v$ in DFS-tree of $T$, then $I(u)$ contains $I(v)$. </li>
<li>If $u$ is a proper descendant of $v$ in DFS-tree of T, then $I(u)$ is contained in $I(v)$ .</li>
<li>Otherwise, $I(u)$ and $I(v)$ are disjoint.</li>
</ul>
<p><strong>White Path Theorem</strong>: let $u$ be a vertex in $G$. Consider the moment when $u$ is pushed into the stack in the DFS algorithm. Then a vertex $v$ becomes a proper descendant of $u$ in the DFS-forest IFF we can go from $u$ to $v$ by travelling only on white vertices.</p>
<p><strong>Cycle Theorem</strong>: let $T$ be an arbitrary DFS-forest. $G$ contains a cycle if and only if there is a backward edge with respect to $T$.</p>
<ul>
<li>If: trivial</li>
<li>only if: Suppose the cycle is $v_1 → 𝑣_2 → ⋯ → 𝑣_𝑘 → 𝑣_1$, let $𝑣_𝑖$ be the first to enter the stack. Then by white path theorem, all the other vertices in the cycle must be proper descendants of $𝑣_𝑖$ in the DFS-forest. This means the edge pointing to $𝑣_𝑖$ in the cycle is a backward edge.</li>
</ul>
<p>Dijkstra: $O((|V|+|E|)\log |V|)$</p>
<p><img src="https://s2.loli.net/2023/01/08/k48ZqQhlP23gJnj.png" alt="image.png" style="zoom:40%;" /></p>
<p>Correctness proof: </p>
<p><img src="https://s2.loli.net/2023/01/08/QCciM1UtHqRp3LT.png" alt="image.png" style="zoom:50%;" /></p>
<p>Minimum Spanning Tree (Prim): $O(|V|\log |V|+|E|)$</p>
<p><img src="https://s2.loli.net/2023/01/08/kARudvoBUrhEZac.png" alt="image.png" style="zoom:50%;" /></p>
<p>Strongly Connected Components $O(|V|+|E|)$</p>
<ol>
<li><p>obtain $G^R$</p>
</li>
<li><p>DFS on $G^R$, obtain $L^R$</p>
</li>
<li>obtain $L$ by reversing $L^R$</li>
<li>DFS on $G$ according to $L$</li>
<li>obtain SCC from DFS-forest</li>
</ol>
<p>Correctness proof:</p>
<ol>
<li><p>Obtain $G^{SCC}$ by shrinking nodes</p>
</li>
<li><p>sink SCC: SCC without in-degree</p>
</li>
<li>DFS on $G$ starting from vertices of sink SCC.</li>
</ol>
<p>Let $S_1$ , $S_2$ be SCCs such that there is a path from $S_1$ to $S_2$ in $G^SCC$. In the ordering of $L$, the earliest vertex in $S_2$ must come before the earliest vertex in $S_1$</p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>CS305 计算机网络 期末复习</title>
    <url>/2023/06/02/CS305_Final_Review/</url>
    <content><![CDATA[<p>计算机网络之大观也，前人之述备矣。</p>
<p>这篇post就用来简单记一下参考过的复习资料，顺便帮大佬们宣发一下好了，觉得有帮助的话记得给他们点赞加关注！</p>
<p><a href="https://github.com/XDZhelheim">XDZhelheim</a>：<a href="https://github.com/XDZhelheim/CS305-Computer-Network-Notes">计算机网络笔记</a></p>
<p>力推！一百多页的pdf非常详细，截取了很多课件配图，中文看起来也会亲切一些。不过最好还是结合英文课件对照一下术语表，不然考试考到缩写全称就不好办了。<del>是我用来期末速通复习的主要材料</del></p>
<p><a href="https://github.com/NYH-Dolphin">NYH-Dolphin</a>：<a href="https://github.com/NYH-Dolphin/SUSTech-Course-Info/tree/main/CS305%20Computer%20Network">计网复习建议</a></p>
<p>有一个复习建议的md可以参考，学完的人看来都是很有用的建议，有Ch4-Ch7的中文笔记，期末的时候可以看看。这一整个仓库囊括了很多计系课的资料，五脏俱全。</p>
<p><a href="https://github.com/Leo-Adventure">Leo-Adventure</a>：<a href="https://github.com/Leo-Adventure/CS305-Computer-Network">2022S计网资料</a></p>
<p>更加精简的中文回顾笔记，建议是复习前后过一遍，没印象的再补原作，附录里有计算题型整理(虽然本来计算题就那几个地方可以出)。</p>
<p><a href="https://gaia.cs.umass.edu/kurose_ross/interactive/">计算机网络：自顶向下方法-书后练习</a></p>
<p>如果你很幸运在考前已经复习了全部内容，可以回顾一下这里的题看看是不是都会做，部分平时作业取材于此，顺带着就可以复习一下之前的作业了。</p>
<hr>
<p>不过的确没有看见英文的复习笔记。</p>
<p>个人而言，直接看课件还是冗余部分过多了，可以跟着复习笔记走，课件被跳过的部分略看一眼即可。</p>
<p><del>这学期学得还是太仓促了(sigh</del></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Computer Networks</tag>
      </tags>
  </entry>
  <entry>
    <title>CS334 操作系统 期末考试</title>
    <url>/2023/05/23/CS334_Final_Quiz/</url>
    <content><![CDATA[<h2 id="Q1-True-or-False"><a href="#Q1-True-or-False" class="headerlink" title="Q1. True or False"></a>Q1. True or False</h2><ol>
<li>Aging is an effective solution to priority inversion</li>
<li>Dual-mode operation is supported by the CPU to protect the OS from applications</li>
<li>TLB works well because of spatial locality and temporal locality, where temporal locality means accesses to the same page tend to be close in time</li>
<li>Peterson’s solution is an example of the spin-based locks</li>
<li>TLB entries can be extended with ASID to and TLB flushes during context switch</li>
<li>In Linux, kernel logic addresses are physically continuous; most kernel data structures, like page tables or per-process kernel stacks, are stored in kernel logic address</li>
<li>Memory-mapped I/O does not need spatial I/O instructions to operate the I/O ports and registers</li>
<li>SJF can be regarded as a dynamic priority scheduling where its priority is the next CPU burst time</li>
<li>A priority scheduling algorithm must be preemptive</li>
<li>Exit() is always invoked when the process terminates</li>
<li>seL4 is a formally verified micro kernel</li>
<li>A process switches from running to waiting state when it has used up its CPU quota and begin to wait until its next turn</li>
<li>Copy-on-write allows the parent process and the child process to share memory, so race condition may occur if they write to the same global variable concurrently</li>
<li>Peterson’s solution can be extended to more than two processes with some modification</li>
<li>When CPU scheduling is considered, a process can be described as either I/O bound or memory bound</li>
<li>*missing*</li>
<li>*missing*</li>
<li>SJF scheduling algorithm is optimal with respect to the average turnaround time.</li>
<li>In Linux completely fair scheduler, a process with higher priority has higher decay factor for its virtual run time</li>
<li>Bounded waiting requires a process trying to enter the critical section will eventually get in if no process is currently in it</li>
<li>Page table pages cannot be swap out to the disk by the Linux kernel</li>
<li>IA-32 only supports 6 segments per process as it only has 6 segment registers</li>
<li>The inverted page table is used to translate physical address into virtual addresses</li>
<li>DMA controllers can steal memory access cycles from the main CPU</li>
<li>The memory management unit (MMU) is a software component of the operating system to translate logical addresses to physical addresses</li>
<li>When a user process accesses a virtual address, it is the operating system that converts the virtual address into a physical address</li>
<li>With paging, virtually continuous memory can be physically discontinuous</li>
<li>Both segmentation and paging schemes are used in IA-32</li>
<li>A round-robin scheduling algorithm is non-preemptive, because it does not preempt the running process when another process switches from waiting to ready</li>
<li>Re-parenting happens when the parent process terminates before the child process</li>
</ol>
<p><strong>Answers：</strong></p>
<details>FTTTT TTTFT TFFTF ??TFF TFFTF FTTFT</details>

<h2 id="Q2-Short-Answers"><a href="#Q2-Short-Answers" class="headerlink" title="Q2. Short Answers"></a>Q2. Short Answers</h2><ol>
<li><p>A solution to the critical section problem must satisfy ______, ______ and ______.</p>
</li>
<li><p>The SV39 mechanism (some introductions). What are the page size of a Gigapage, Megapage and page?</p>
</li>
<li><p>The limitations of the Base &amp; Bounds scheme are ______, ______, ______.</p>
</li>
<li><p>What is TLB? When does uCore need to refresh TLB?</p>
</li>
<li><p>The limitations of the segmentation scheme are ______, ______, ______, ______.</p>
</li>
<li><p>What are the 3 privilege levels of RISC-V?</p>
</li>
<li><p>The 3 general methods used to pass system call parameters are ______, ______, ______.</p>
</li>
<li><p>Hard/Soft link in iNode-based file systems are different. When creating a hard/soft link, ______; when deleting a hard/soft link, ______.</p>
</li>
<li><p>The FAT32 file system stores file names into ______ and file attributes in ______, but ext2/3 file system stores file names in ______ and file attributes in ______.</p>
</li>
<li><p>What are the 3 thread models for mapping user-level thread to kernel-level thread?</p>
</li>
<li><p>The memory contents are shown as follows, what is the value of an integer at address 0x20 if the CPU is little endian(in hexadecimal)? </p>
<p><img src="https://s2.loli.net/2023/05/23/rkZK17cR3QGM8ne.png" alt="image.png"></p>
</li>
<li><p>______ is the phenomenon in which increasing the number of page frames results in an increase in the number of page faults for certain memory access patterns. This phenomenon is commonly experienced when using the ______ page replacement algorithm.</p>
</li>
</ol>
<p><strong>Answers</strong>:</p>
<details>
    <p>1. Mutual exclusion, progress, bounded waiting</p>
    <p>2. 2^30 Bytes, 2^21 Bytes, 2^12 Bytes</p>
    <p>3. Internal fragmentation, Connot support larger address space, Hard to do inter-process sharing</p>
    <p>4. CPU hardware cache to store PTEs that have been mostly reccently used, to spend up virtual address translation; When chaging page tables or updating page table contents.</p>
    <p>5. OS content switch must also saave and restire all pairs sof segment registers; A segment may grow, which may or may not be possible; Management of free spaces of physical memory with variable-sized segments; External fragmentation</p>
    <p>6. User, Supervisor, Machine</p>
    <p>7. Register, Block, Stack</p>
    <p>8. A hard link is a directory entry pointing to the iNode of an existing file; A symbolic link creates a new iNode, with the path to the target file in its data block; Deleting the target file does not affect the hard link, but deleting the target file makes the soft link invalid.</p>
    <p>9. FAT32 stores file names and attributes in the directory entries; ext2/3 file system stores the file name in the directry entries, and the file attributes in the iNode.</p>
    <p>10. one-to-one, Many-to-one, Many-to-many mapping</p>
    <p>11. 0x dd 42 34 e7</p>
    <p>12. Bélady's Anomalty, FIFO</p>
</details>

<h2 id="Q3-Questions-and-Answers"><a href="#Q3-Questions-and-Answers" class="headerlink" title="Q3. Questions and Answers"></a>Q3. Questions and Answers</h2><ol>
<li><p>On some CPU architecture, the page size is 16B, each page table entry is 4B, the virtual address has 8 bits.</p>
<p>(1) What is the size of the virtual space?</p>
<p>(2) If each level of page table fits into one page, how many levels of page tables are needed?</p>
<p>(3) If the relevant last-level page table is shown as below, what is the physical address of 0x64?</p>
<p>(4) If the CPU architecture changes to support page size of 32B, everything else remains unchanged. With the following page table, what is the physical address of 0x64?</p>
<p>Extra: The physical address of the virtual address 0x364 is 0x1164. What is the corresponding PFN(in decimal numbers)?</p>
<p><img src="https://s2.loli.net/2023/05/23/akqROWXvn49rxZe.png" alt="image.png"></p>
<p><strong>Answers</strong>:</p>
<details>
    <p>(1) 256 Bytes</p>
    <p>(2) 2 levels</p>
    <p>(3) 0x3e4</p>
    <p>(4) 0xc8</p>
</details>
</li>
<li><p>Suppose we have 3 page frames(1, 2, 3), 4 virtual pages(A, B, C, D), consider the following reference string: A B C A D B A C B C. What are the number of page faults for the following page replacement policies? Show each step in the tables.</p>
<p>(1) MIN</p>
<p>(2) LRU</p>
<p>(3) FIFO</p>
<p>(4) Clock (hint: only second page reference set reference bit)</p>
<p><img src="https://s2.loli.net/2023/05/23/rEflwc6y9Ovp2eP.png" alt="image.png"></p>
<p><strong>Answers</strong>:</p>
<details>
    <table>
    <tr>
        <td></td>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>A</td>
        <td>D</td>
        <td>B</td>
        <td>A</td>
        <td>C</td>
        <td>B</td>
        <td>C</td>
    </tr>
    <tr>
        <td>1</td>
        <td>A</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>C</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>2</td>
        <td></td>
        <td>B</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>3</td>
        <td></td>
        <td></td>
        <td>C</td>
        <td></td>
        <td>D</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>
<table>
    <tr>
        <td></td>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>A</td>
        <td>D</td>
        <td>B</td>
        <td>A</td>
        <td>C</td>
        <td>B</td>
        <td>C</td>
    </tr>
    <tr>
        <td>1</td>
        <td>A</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>2</td>
        <td></td>
        <td>B</td>
        <td></td>
        <td></td>
        <td>D</td>
        <td></td>
        <td></td>
        <td>C</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>3</td>
        <td></td>
        <td></td>
        <td>C</td>
        <td></td>
        <td></td>
        <td>B</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>
<table>
    <tr>
        <td></td>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>A</td>
        <td>D</td>
        <td>B</td>
        <td>A</td>
        <td>C</td>
        <td>B</td>
        <td>C</td>
    </tr>
    <tr>
        <td>1</td>
        <td>A</td>
        <td></td>
        <td></td>
        <td></td>
        <td>D</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>2</td>
        <td></td>
        <td>B</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>A</td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>3</td>
        <td></td>
        <td></td>
        <td>C</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>B</td>
        <td></td>
    </tr>
</table>
<table>
    <tr>
        <td></td>
        <td>A</td>
        <td>B</td>
        <td>C</td>
        <td>A</td>
        <td>D</td>
        <td>B</td>
        <td>A</td>
        <td>C</td>
        <td>B</td>
        <td>C</td>
    </tr>
    <tr>
        <td>1</td>
        <td>A</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>2</td>
        <td></td>
        <td>B</td>
        <td></td>
        <td></td>
        <td>D</td>
        <td></td>
        <td></td>
        <td>C</td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td>3</td>
        <td></td>
        <td></td>
        <td>C</td>
        <td></td>
        <td></td>
        <td>B</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
</table>
</details>
</li>
<li><p>In a computer system that supports demand-paging, the memory access time is 50 ns, the average page fault service time is 5 ms. The page fault rate $p$ is 1/5000. What is the Effective Access Time?</p>
<p><strong>Answer</strong>:</p>
<details>
    <p>1.05 μs</p>
</details>
</li>
<li><p>Consider a set of 4 processes, with their arrival time and CPU burst time shown in the table. What is the average turnaround time with the following CPU scheduling algorithm?</p>
<p>(1) Non-preemptive SJF</p>
<p>(2) Preemptive SJF</p>
<p>(3) Round-robin with a scheduling quantum of 2(let’s assume here if two process arrive at the ready queue at the same time, the one with running-ready state transition is placed at the end of the queue).</p>
<p><strong>Answers:</strong></p>
<details>
<table>
    <p>(1) (6 + 11 + 5 + 5) / 4 = 6.75</p>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
        <td>7</td>
        <td>8</td>
        <td>9</td>
        <td>10</td>
        <td>11</td>
        <td>12</td>
    </tr>
    <tr>
        <td>P1</td>
        <td>P1</td>
        <td>P1</td>
        <td>P1</td>
        <td>P1</td>
        <td>P1</td>
        <td>P3</td>
        <td>P4</td>
        <td>P4</td>
        <td>P2</td>
        <td>P2</td>
        <td>P2</td>
    </tr>
</table>
<p>(2) (12 + 4 + 1 + 3) / 4 = 5</p>
<table>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
        <td>7</td>
        <td>8</td>
        <td>9</td>
        <td>10</td>
        <td>11</td>
        <td>12</td>
    </tr>
    <tr>
        <td>P1</td>
        <td>P2</td>
        <td>P3</td>
        <td>P2</td>
        <td>P2</td>
        <td>P4</td>
        <td>P4</td>
        <td>P1</td>
        <td>P1</td>
        <td>P1</td>
        <td>P1</td>
        <td>P1</td>
    </tr>
</table>
<p>(3) (12 + 9 + 3 + 5) / 4 = 7.25</p>
<table>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
        <td>5</td>
        <td>6</td>
        <td>7</td>
        <td>8</td>
        <td>9</td>
        <td>10</td>
        <td>11</td>
        <td>12</td>
    </tr>
    <tr>
        <td>P1</td>
        <td>P1</td>
        <td>P2</td>
        <td>P2</td>
        <td>P3</td>
        <td>P1</td>
        <td>P1</td>
        <td>P4</td>
        <td>P4</td>
        <td>P2</td>
        <td>P1</td>
        <td>P1</td>
    </tr>
</table>
</details>
</li>
<li><p>In a disk scheduling algorithm, the range of the cylinders is 0~99. The arm head is originally located at track 50. The queue of requests is 25, 98, 52, 67, 42, 8. What is head movement distance, considering the following disk scheduling algorithms? Hint: for SCAN/C-SCAN/LOOK/C_LOOK, the arm head moves towards 99 first; for C-LOOK/C-SCAN, both directions count towards movement distance.</p>
<p>(1) SSTF</p>
<p>(2) C-LOOK</p>
<p>(3) SCAN</p>
<p>(4) FIFO</p>
<p><strong>Answers:</strong></p>
<details>
    <p>(1) 136</p>
    <p>(2) 172</p>
    <p>(3) 142</p>
    <p>(4) 218</p>
</details>
</li>
<li><p>A Turing Class student designed an iNode-based file system, called TCFS. The structure of an iNode in Site FS has 256 bytes, with 10 direct block pointers, 2 single indirect block pointers, and 1 double indirect block pointer. A block pointer takes 8 bytes. The block size is 8 KB.</p>
<p>(1) What is the maximum size of a file in TCFS?</p>
<p>(2) What is the maximum size of a file system with TCFS format?</p>
<p><strong>Answers:</strong></p>
<details>
    <p>10*8KB + 2*(8K/8)*8KB + (8K/8)*(8K/8)*8KB = 8GB</p>
    <p> 2 ^ 64 * 8K = 2 ^ 77</p>
</details>


</li>
</ol>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Operating System</tag>
      </tags>
  </entry>
  <entry>
    <title>CS334 操作系统 期末复习</title>
    <url>/2023/05/15/CS334_Final_Review/</url>
    <content><![CDATA[<p><img src="https://s2.loli.net/2023/01/01/8pS9IbAPfWXDOgt.png" alt=""></p>
<p>$\huge\text{Outline}$</p>
<ol>
<li>操作系统导论</li>
<li>操作系统基础</li>
<li>进程</li>
<li>CPU Scheduling</li>
<li>Synchronization</li>
<li>Address Translation</li>
<li>Paging</li>
<li>Demand Paging</li>
<li>Linux Memory Management</li>
<li>IO</li>
<li>Storage</li>
<li>File System</li>
</ol>
<p>Appendix: Quiz</p>
<h2 id="Chapter-1-操作系统导论"><a href="#Chapter-1-操作系统导论" class="headerlink" title="Chapter 1 - 操作系统导论"></a>Chapter 1 - 操作系统导论</h2><p><strong>计算机系统的结构</strong>:</p>
<ul>
<li>硬件<ul>
<li>提供基础计算资源</li>
<li>CPU, 内存, IO</li>
</ul>
</li>
<li>操作系统<ul>
<li>控制、协调 多应用/多用户 对于硬件的使用</li>
</ul>
</li>
<li>应用程序<ul>
<li>定义系统资源的使用方法，用于解决计算问题</li>
</ul>
</li>
<li>用户<ul>
<li>人、机器、其他计算机…</li>
</ul>
</li>
</ul>
<p><strong>操作系统</strong>:</p>
<p>使计算机正确、高效运行且易于使用的软件集。</p>
<p>A group of software that makes the computer operate correctly and efficiently in an easy-to-use manner.</p>
<p>操作系统包含一个称为<strong>内核</strong>的程序</p>
<ul>
<li>管理所有物理设备：CPU、RAM、硬盘……</li>
<li>提供诸如<strong>系统调用</strong>的函数</li>
</ul>
<p>操作系统包含其他的”helper”程序</p>
<ul>
<li>例如shell，提供了命令行用户接口</li>
<li>例如GUI，提供了有图标的用户友好的接口</li>
<li>例如浏览器，提供网页浏览服务</li>
</ul>
<p>操作系统是<strong>资源管理器</strong></p>
<ul>
<li>管理CPU、内存、硬盘、I/O设备</li>
<li>管控公平高效的资源使用，协调资源冲突</li>
</ul>
<p>操作系统是<strong>控制程序</strong></p>
<ul>
<li>控制程序的执行，避免错误或对计算机的不当使用</li>
</ul>
<p><strong>操作系统都做些什么</strong>:</p>
<p>虚拟化 Virtualization</p>
<ul>
<li>CPU虚拟化：单个CPU上运行多个程序</li>
<li>内存虚拟化：为进程(程序)分配相互独立的虚拟内存地址空间</li>
</ul>
<p>并发性 Concurrency</p>
<ul>
<li>运行多线程程序，保证其正确运行</li>
</ul>
<p>持久化 Persistence</p>
<ul>
<li>从RAM写入数据到持久内存</li>
<li>性能，崩溃恢复能力</li>
</ul>
<p><strong>操作系统的历史</strong>:</p>
<p>……</p>
<p><strong>进程</strong>:</p>
<p>进程(process)是在运行中的程序(program)</p>
<ul>
<li>程序是</li>
</ul>
<p>进程需要资源来完成任务</p>
<ul>
<li>CPU、内存、I/O、文件</li>
<li>进程终止，需要回收所有可再利用资源</li>
</ul>
<p>进程顺序执行指令，一次一个，直到结束</p>
<ul>
<li>单线程进程由PC指定下一条执行的指令位置</li>
<li>多线程进程的每个线程都有一个PC</li>
</ul>
<p>一般而言，计算机系统有多个进程，若干用户，若干操作系统在一个或多个CPU上运行</p>
<ul>
<li>通过在进程/线程之间复用(multiplexing)CPU来实现并发性</li>
</ul>
<p><strong>进程管理</strong>:</p>
<p>创建/删除用户和系统进程</p>
<p>暂停/恢复进程</p>
<p>为进程同步(process synchronization)提供机制</p>
<p>为进程通信(process communication)提供机制</p>
<p>为死锁处理(deadlock handling)提供机制</p>
<p><strong>内存</strong>：</p>
<p>动态随机访问内存DRAM</p>
<p>CPU在执行时只和主存交互</p>
<ul>
<li>处理前后数据都在内存里</li>
<li>执行的指令都在内存里</li>
</ul>
<p>操作系统管理内核和进程的主存，哪个进程用哪块内存</p>
<p><strong>内存管理</strong>:</p>
<p>内存管理决定，当优化CPU利用率、回应用户时内存中存储什么</p>
<p>内存管理活动</p>
<ul>
<li>记录哪些内存正在被哪些进程使用</li>
<li>决定哪些进程和数据要移入/移出内粗</li>
<li>按需申请/释放内存空间</li>
</ul>
<p><strong>存储管理</strong>:</p>
<p>操作系统提供信息存储的统一、逻辑的情况</p>
<ul>
<li><p>将物理属性抽象为逻辑存储单元：文件</p>
</li>
<li><p>每个介质都由设备控制</p>
<p>可变的性质包括访存速度、容量、数据传输率、访问方法(顺序/随机访问)</p>
</li>
</ul>
<p>文件系统管理</p>
<ul>
<li>文件通常分目录管理</li>
<li>访问控制：决定谁能访问什么</li>
<li>操作系统活动，包括：<ul>
<li>创建/删除文件和目录</li>
<li>操作文件和目录的原语(primitives)</li>
<li>将文件映射到二级存储</li>
<li>将文件备份到稳定存储介质</li>
</ul>
</li>
</ul>
<p><strong>I/O 子系统</strong>:</p>
<p>操作系统的一个目的是向用户隐藏硬件设备的特殊性</p>
<ul>
<li>包含I/O的内存管理<ul>
<li>缓存(buffering)，传输时临时存储数据</li>
<li>缓存(caching)，将部分数据放入高速缓存以提高性能</li>
</ul>
</li>
<li>通用的设备-驱动接口</li>
<li>特殊硬件设备的驱动</li>
</ul>
<p><strong>保护与安全</strong>:</p>
<p>保护：由操作系统定义，控制进程或用户对资源的访问的机制</p>
<p>安全：抵御内外对系统的攻击</p>
<p>操作系统决定哪个用户能做什么</p>
<ul>
<li>用户标识符：用户名，ID</li>
<li>将用户ID与该用户的所有文件、进程联系起来，以控制访问</li>
<li>组标识符(group ID)允许定义一组用户并管理控制权，与进程、文件相联系</li>
<li>特权升级允许用户改变ID以获得更多权利</li>
</ul>
<h2 id="Chapter-2-操作系统基础"><a href="#Chapter-2-操作系统基础" class="headerlink" title="Chapter 2 - 操作系统基础"></a>Chapter 2 - 操作系统基础</h2><p><strong>双模式操作(Dual-mode Operations)</strong>:</p>
<p>硬件支持至少两种模式</p>
<ul>
<li>内核模式：运行内核代码</li>
<li>用户模式：运行常规程序</li>
</ul>
<p>为实现双模式操作，硬件提供：</p>
<ul>
<li><p>一个<code>state</code>比特位</p>
</li>
<li><p>一些只能在内核模式执行的操作/行为</p>
</li>
<li><p>用户态→内核态，设置系统模式，并保存用户PC</p>
<p>操作系统将用户资源谨慎搁置，执行必要操作</p>
</li>
<li><p>内核态→用户态，清除系统模式，并恢复用户PC</p>
</li>
</ul>
<p>一些例子：</p>
<ul>
<li>x86 Ring 0 对应内核态，Ring 3对应应用态</li>
<li>RISC-V User/Supervisor/Machine 三种模式，应用态-内核态-固件态</li>
</ul>
<p><strong>三种模式转换的情形</strong>:</p>
<ol>
<li>系统调用(system call)</li>
</ol>
<ul>
<li><p>进程请求系统服务</p>
</li>
<li><p>类似函数调用，但在进程外</p>
</li>
<li>系统函数没有地址可供调用</li>
<li>向寄存器写入系统调用ID和参数，执行系统调用</li>
</ul>
<ol>
<li>中断(interrupt)</li>
</ol>
<ul>
<li>外部异步事件触发上下文切换(context switch)，如时钟、I/O设备</li>
<li>与用户进程独立</li>
</ul>
<ol>
<li>陷阱(trap)或异常(exception)</li>
</ol>
<ul>
<li>进程的内部同步事件触发上下文切换，如段错误、除以0…</li>
</ul>
<p><strong>系统调用</strong>:</p>
<p>由操作系统提供的服务的程序接口，以高级语言编写</p>
<p>每个系统调用都会有一个ID，映射关系表由系统调用接口维护</p>
<p>系统调用接口 调用 操作系统内核中对应的系统调用，返回系统调用的状态及返回值</p>
<p>调用者无需了解具体实现，只需要遵守调用规则，理解调用功能即可</p>
<p>大多数操作系统接口的细节通过library API隐藏，对使用者不可见</p>
<p>由运行时支持库（run-time support library, 包含在编译器中的库中的一组功能）管理</p>
<p><strong>系统调用类型</strong>:</p>
<ul>
<li>进程控制: fork, exit, wait</li>
<li>文件管理: open, read, write, close</li>
<li>设备管理: ioctl, read, write</li>
<li>信息维护: getpid, alarm, sleep</li>
<li>通信: pipe, shmget, mmap</li>
<li>保护: chmod, umask, chown</li>
</ul>
<p><strong>异常和中断</strong>:</p>
<p>异常(同步)应对非正常状况</p>
<ul>
<li>将swapped-out页映射回memory内</li>
<li>非法内存访问</li>
<li>除以0……</li>
</ul>
<p>中断(异步)抢占正常执行</p>
<ul>
<li>外部设备的通知</li>
<li>抢占式调度</li>
<li>另一个CPU的通知</li>
</ul>
<p>处理异常和中断</p>
<ul>
<li>停止执行当前程序</li>
<li>执行handler程序</li>
<li>处理器通过中断描述符表(Interrupt Descriptor Table, IDT)访问handler</li>
<li>每种中断对应一个数字</li>
</ul>
<p><strong>内核结构</strong>:</p>
<p><strong>宏内核</strong>:</p>
<p>宏内核(Monolithic Kernel)是一个操作系统软件框架，拥有访问所有I/O设备、内存、硬件中断、CPU栈的权限</p>
<p>宏内核包含很多组件，例如内存子系统、I/O子系统等，通常很大</p>
<p>宏内核是Linux, Unix, MS-DOS的基础</p>
<p><strong>微内核</strong>:</p>
<p>微内核(Micro Kernel)将操作系统功能外包给用户进程，灵活性、安全性、容错性增强</p>
<p>用户级服务器收到内核信任(通常以root身份运行)</p>
<p>保护机制保留在内核，资源管理转移到用户级服务器</p>
<p>代表性微内核操作系统：Mach, seL4</p>
<p>优点：</p>
<ul>
<li>内核响应速度更快：内核功能在可抢占的用户级进程种</li>
<li>稳定性和安全性提高：操作系统中代码更少</li>
<li>更好地支持并发性和分布式操作系统</li>
</ul>
<p>缺点：</p>
<ul>
<li>需要更多进程间通信(IPC)，带来更多上下文切换，更慢</li>
</ul>
<p><strong>杂交内核</strong>:</p>
<p>杂交内核(Hybrid Kernel)是宏内核和微内核的结合，例：Windows</p>
<p><strong>外内核</strong>:</p>
<p>外内核(Exokernel)将抽象与安全分开</p>
<ul>
<li>内核相当小：安全复用(security multiplexing)</li>
<li>Library OS作为进程运行：操作系统抽象化</li>
</ul>
<p>优点：</p>
<ul>
<li>直接管理资源，高效</li>
<li>易于进行新内核设计的实验</li>
</ul>
<p>缺点：</p>
<ul>
<li>通常只是个概念</li>
</ul>
<p>变种：nanokernel, picokernel</p>
<p><strong>虚拟化和管理程序</strong>:</p>
<p>管理程序(Hypervisor, virtual machine manager/monitor, VMM)强调<u>虚拟化</u>和<u>隔离</u></p>
<ul>
<li>操作系统可以在管理程序上几乎不做修改地运行</li>
<li>不同虚拟机之间资源隔离</li>
<li>微内核和外内核可用于实现管理程序</li>
</ul>
<p><strong>操作系统设计原则</strong>:</p>
<p>不同操作系统内部结构五花八门</p>
<ul>
<li>从设置目标和规格开始</li>
<li>收到硬件选择和系统类型的影响</li>
</ul>
<p>用户目标和系统目标</p>
<ul>
<li>用户目标：易于使用，易于上手，可靠安全高效</li>
<li>系统目标：易于设计、实现、维护，灵活可靠无错，高效</li>
</ul>
<p>操作系统区分开政策和机制</p>
<ul>
<li>政策(Policy)：哪个软件可以在什么时候访问什么资源</li>
<li>机制(Mechanism)：政策是如何实现的</li>
<li>分离政策和机制提供了灵活性，更换政策后选择对应机制即可</li>
</ul>
<p><strong>操作系统服务</strong>:</p>
<p>用户接口(UI)：几乎所有操作系统都有UI，CLI vs. GUI</p>
<p>程序执行：将程序载入内存并运行，结束执行，无论正常或异常</p>
<p>I/O操作：运行程序可能需要I/O，可能涉及文件操作或I/O设备</p>
<p>文件系统控制：创删读写查文件目录，权限管理</p>
<p>通信：进程间通信，网络通信</p>
<p>错误检测：时刻关注可能的错误，硬件/外设/用户程序…，恰当处理，调试功能</p>
<p>资源分配：多用户/多任务并行，各自分配各类资源(CPU，主存，文件存储)</p>
<p>账户管理：哪些用户使用了哪些计算机资源</p>
<p>保护与安全：多用户/网络计算机系统的权限需要管理，并行进程应互不干扰</p>
<p><strong>系统程序</strong>:</p>
<p>为程序开发和执行提供方便的环境，被分为：</p>
<ul>
<li>文件操作：创建、删除、复制、重命名、打印、转存、列表，操纵文件和目录</li>
<li>状态信息：日期、可用内存、性能、用户数量、调试信息…(注册表)</li>
<li>文件修改：文本编辑器，对文本进行修改</li>
<li>编程语言支持：编译器、汇编器、调试器、翻译器</li>
<li>程序加载与运行</li>
<li>通讯：提供虚拟连接的机制，供进程间、用户间、计算机系统间通信。</li>
<li>应用程序</li>
</ul>
<h2 id="Chapter-3-进程"><a href="#Chapter-3-进程" class="headerlink" title="Chapter 3 - 进程"></a>Chapter 3 - 进程</h2><h2 id="Appendix-Quiz"><a href="#Appendix-Quiz" class="headerlink" title="Appendix - Quiz"></a>Appendix - Quiz</h2><p><strong>Which of the following is/are correct about von Neumann architecture?</strong></p>
<p>❌It has better performance than Harvard architecture</p>
<ul>
<li>实际上哈佛架构把指令和数据分开之后，效率相对会高一点</li>
</ul>
<p>✔️It is a widely used architecture in modern computers</p>
<ul>
<li>确实，相当一部分计算机使用冯诺依曼架构</li>
</ul>
<p>✔️It use a shared memory for programs and data</p>
<ul>
<li>冯诺依曼架构特色</li>
</ul>
<p>❌It was first described in 1958</p>
<ul>
<li>冯诺依曼架构的名词提出于1945</li>
</ul>
<p><strong>Which of the following is/are true about dual-mode operation?</strong></p>
<p>❌The operating system must maintain a global bit to represent the current execution mode</p>
<ul>
<li>这个是CPU维护的</li>
</ul>
<p>❌Certain operations are not permitted in the kernel mode and will be trapped to the user mode</p>
<ul>
<li>反过来就是对的</li>
</ul>
<p>✔️Three ways to transit from user to kernel mode: system call, interrupt, and exception</p>
<ul>
<li>U→K: 系统调用，中断，异常</li>
</ul>
<p>❌Dual-mode operations are needed because applications need to be protected from OS</p>
<ul>
<li>反过来就是对的</li>
</ul>
<p><strong>What are the differences between an interrupt and an exception?</strong></p>
<p>✔️Interrupts are usually asynchronous with the program execution, but exceptions are usually synchronous</p>
<ul>
<li>中断是外部设备接入等与程序运行异步的事件产生的，异常则是于程序运行时同步产生的</li>
</ul>
<p>❌Interrupts may happen due to an abnormal condition, but exceptions are typically caused by normal conditions</p>
<ul>
<li>异常是对于异常(abnormal)情况的反馈，中断抢占正常执行。</li>
</ul>
<p>❌Interrupts and exceptions are handled in different ways</p>
<ul>
<li>都是到被捕获后由handler处理，具体不一样</li>
</ul>
<p>✔️Interrupts include notifications from devices or hardware components (e.g., APIC) but exceptions do not</p>
<ul>
<li>设备/硬件的异步通知造成中断，而不是异常</li>
</ul>
<p><strong>Which of the followings belong to operating system services?</strong></p>
<p>✔️Error detection and handling</p>
<p>✔️Inter-process communication and networking</p>
<p>❌CPU scheduling</p>
<ul>
<li>虽然CPU调度是进程管理的重要方面，但它并不被视为操作系统提供的独立服务</li>
</ul>
<p>✔️User interface</p>
<p><strong>Which of the followings is/are true about state transition(s) in a process life cycle?</strong></p>
<p><img src="https://s2.loli.net/2023/05/15/FGbZhvkB93QPHgM.png" alt="image.png" style="zoom: 40%;" /></p>
<p>✔️Waiting-&gt;ready upon I/O completion</p>
<p>✔️Ready-&gt;running when it is dispatched by the CPU scheduler</p>
<p>❌Waiting-&gt;running when return from I/O requests</p>
<p>❌Running-&gt;waiting when it has used up its CPU quota and begin to wait until its next turn</p>
<p><strong>Which of the followings is/are true about fork() and exec()?</strong></p>
<p>❌In the parent process, fork() returns 0; in the child process, fork() returns its own pid. </p>
<p>✔️The parent and child process share the same program counter, memory content, and opened files.</p>
<p>✔️Copy-on-write means the address space of the parent and child processes are only copied when updated</p>
<p>❌Calling exec() to load the same program into the memory is equivalent to not calling exec() at all</p>
<p><strong>Which of the followings is/are true about exit() and wait()?</strong></p>
<p>✔️Exit() is always invoked when the process terminates.</p>
<p>❌Exit() sends SIGCHLD to the parent process if the parent process is already waiting by calling wait().</p>
<p>✔️Exit() frees allocated kernel memory and everying on the userspace memory.</p>
<p>✔️A process becomes a zombie process when it is terminated but not yet cleaned up by its parent process.</p>
<p><strong>Which of the following is/are true about user-level and kernel-level thread?</strong></p>
<p>✔️Many-to-many mapping requires thread implementation on both user-level and kernel-level.</p>
<p>❌The benefit of one-to-many mapping is that when a user thread blocks on I/O, it may use other kernel thread to run.</p>
<p>✔️Kernel-level thread is an implementation of the thread abstraction in the OS kernel.</p>
<p>❌With many-to-one mapping, the OS kernel can schedule user threads independently.</p>
<p><strong>Which of the followings is/are true about preemptive scheduling?</strong></p>
<p>✔️If scheduler is invoked when a process switches from running to ready state, it is preemptive scheduling.</p>
<p>❌RR is non-preemptive because the scheduler is not invoked when a process switches from waiting to ready.</p>
<p>❌A scheduler is preemptive if it is invoked when a process switches from waiting to running.</p>
<p>✔️If the running process only gives up the CPU when it terminates or blocks on I/O, the scheduler is non-preemptive.</p>
<p><strong>Which of the following is/are true about race condition and mutual exclusion?</strong></p>
<p>✔️Implementation of critical sections require mutual exclusion, bounded-waiting and progress.</p>
<p>✔️Race condition may happen when two processes concurrently access shared variables. </p>
<p>❌Priority inversion may happen when two processes are synchronized with semaphores. </p>
<p>✔️Peterson’s solution satisfies all the three requirements of critical section implementation.</p>
<p><strong>Which of the following is/are true about semaphores?</strong></p>
<p>❌A binary semaphore could only have two values whereas a counting semaphore could have more than two values.</p>
<p>✔️Semaphores must be implemented in the kernel. </p>
<p>❌When solving producer-consumer problem with semaphores, it is OK to swap the order of wait(&amp;fill) and wait(&amp;mutex).</p>
<p>❌In the correct solution to dining philosopher problem, semaphore is used to model a chopstick. </p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Operating System</tag>
      </tags>
  </entry>
  <entry>
    <title>CS216 算法设计与分析 期末复习</title>
    <url>/2023/06/05/CS216_Final_Review/</url>
    <content><![CDATA[<p>$\huge\text{Outline}$</p>
<ol>
<li>稳定匹配</li>
<li>算法分析</li>
<li>贪心<ol>
<li>调度</li>
<li>Dijkstra</li>
<li>最小生成树</li>
<li>最小树形图</li>
<li>哈夫曼树</li>
<li>缓存</li>
</ol>
</li>
<li>分治<ol>
<li>$O(n\log n)$求逆序对</li>
<li>$O(n)$求第k小</li>
<li>$O(n\log n)$求平面最近点对</li>
<li>整数/矩阵乘法</li>
<li>FFT与卷积</li>
</ol>
</li>
<li>动态规划<ol>
<li>带权区间调度</li>
<li>分段最小二乘</li>
<li>背包问题</li>
<li>区间DP</li>
<li>带负环图最短路</li>
</ol>
</li>
<li>难问题<ol>
<li>归约</li>
<li>P, NP, NPC</li>
</ol>
</li>
<li>网络流<ol>
<li>最大流与最小割</li>
<li>Ford-Fulkerson</li>
<li>Capacity-Scaling</li>
<li>Edmonds-Karp</li>
<li>Dinitz’s</li>
<li>二分图匹配</li>
<li>不相交路径</li>
<li>多源多汇网络流</li>
<li>调查设计</li>
<li>航班调度</li>
<li>图像分割</li>
</ol>
</li>
<li>随机化算法<ol>
<li>访问调度</li>
<li>全局最小割</li>
<li>最大3-SAT</li>
<li>负载均衡</li>
</ol>
</li>
</ol>
<hr>
<h2 id="Chapter-1-稳定匹配"><a href="#Chapter-1-稳定匹配" class="headerlink" title="Chapter 1 - 稳定匹配"></a>Chapter 1 - 稳定匹配</h2><h3 id="定义-一对一匹配"><a href="#定义-一对一匹配" class="headerlink" title="定义(一对一匹配)"></a>定义(一对一匹配)</h3><p>输入：两个集合 $A=\{a_1,\cdots,a_n\}, B=\{b_1,\cdots,b_n\}$，以及每个元素对另一集合所有元素的偏好表。</p>
<p>完美匹配：$f:A\rightarrow B$是双射</p>
<p>不稳定对：未出现在匹配中，且双方对对方的偏好程度均高于当前匹配的偏好程度。例如匹配中存在$(a_1,b_1),(a_2,b_2)$，但$a_1$相比$b_1$更偏好$b_2$，且$b_2$相比$a_2$更偏好$a_1$，那么$(a_1,b_2)$被称为不稳定对。</p>
<p>稳定匹配：不存在不稳定对的完美匹配</p>
<h3 id="Gale-Shapley-算法"><a href="#Gale-Shapley-算法" class="headerlink" title="Gale-Shapley 算法"></a>Gale-Shapley 算法</h3><p>保证可以找到一个稳定匹配的算法，此处以婚配为例。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Initialize each person to be free.</span><br><span class="line">while (some man is free and hasn&#x27;t proposed to every woman)</span><br><span class="line">&#123;</span><br><span class="line">	Choose such a man m</span><br><span class="line">    w = 1st woman on m&#x27;s list to whom m has not yet proposed</span><br><span class="line">    if (w is free)</span><br><span class="line">    	assign m and w to be engaged</span><br><span class="line">    else if (w prefers m to her fiancé m&#x27;)</span><br><span class="line">    	assign m and w to be engaged, and m&#x27; to be free</span><br><span class="line">    else</span><br><span class="line">    	w rejects m</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="GS算法-正确性证明"><a href="#GS算法-正确性证明" class="headerlink" title="GS算法 - 正确性证明"></a>GS算法 - 正确性证明</h3><p><strong>Observation.</strong></p>
<ol>
<li>主动方按照偏好表降序提出匹配请求</li>
<li>被动方一旦匹配，就不会回到未匹配状态，只会更换到更偏好的匹配</li>
</ol>
<h4 id="算法一定终止"><a href="#算法一定终止" class="headerlink" title="算法一定终止"></a>算法一定终止</h4><p><strong>Claim</strong>. 算法在至多$n^2$轮while循环后终止</p>
<p><strong>Proof.</strong> 每次while循环，主动方会向一个新的被动方提出匹配请求，两个大小为$n$的集合至多有$n^2$种匹配，因此算法复杂度$O(n^2)$。</p>
<h4 id="匹配的完美性"><a href="#匹配的完美性" class="headerlink" title="匹配的完美性"></a>匹配的完美性</h4><p><strong>Claim.</strong> 所有元素在算法终止后都有匹配</p>
<p><strong>Proof.</strong> 反证法：假如某个主动方未被匹配，那么一定存在一个未被匹配的被动方。由Observation 2，该被动方一定从未收到匹配请求。但算法终止时主动方已对所有被动方进行了请求且仍未被匹配，引出矛盾。</p>
<h4 id="匹配的稳定性"><a href="#匹配的稳定性" class="headerlink" title="匹配的稳定性"></a>匹配的稳定性</h4><p><strong>Claim.</strong> 结果中不存在不稳定对</p>
<p><strong>Proof.</strong> 反证法：</p>
<p>记结果匹配为$S^\star$，其中存在配对$(a,y), (x,b)$。</p>
<p>假设存在不稳定对$(a,b)$，即$a$相比$y$更偏好$b$，而$b$相比$x$更偏好$a$</p>
<ol>
<li><p>$a$未向$b$发起匹配请求</p>
<p>说明$a$相比$b$更偏好$y$，引出矛盾</p>
</li>
<li><p>$a$向$b$发起过匹配请求</p>
<p>$b$拒绝了$a$，当即 或是 过了一会儿</p>
<p>说明$b$相比$a$更偏好$x$，引出矛盾</p>
</li>
</ol>
<p>两种情形均矛盾，因此不存在不稳定对。</p>
<h3 id="算法实现"><a href="#算法实现" class="headerlink" title="算法实现"></a>算法实现</h3><p>全局维护一个未匹配的主动方集合，每次选取其中的主动方进行匹配。</p>
<p>对于主动方，维护一个偏好值降序的队列，依次进行匹配请求。</p>
<p>对于被动方，维护一个从主动方到偏好值的映射，用于比对当前匹配是否更优，如有替换则将前任放回全局未匹配主动方集合。</p>
<h3 id="主被动方利益分析"><a href="#主被动方利益分析" class="headerlink" title="主被动方利益分析"></a>主被动方利益分析</h3><p>有效对象：如果某个稳定匹配中存在$(a,b)$，那么$a,b$互为有效对象。</p>
<h4 id="主动方最优性"><a href="#主动方最优性" class="headerlink" title="主动方最优性"></a>主动方最优性</h4><p><strong>Claim.</strong> GS算法得到的解$S^\star$对于主动方是最优的(每个主动方得到最优有效对象)</p>
<p><strong>Proof.</strong> 反证法：</p>
<p>假如不是主动方最优的，那么一定有某个主动方未与其最优有效对象匹配。</p>
<p>由于主动方是降序请求的，因此一定是被其最优有效对象拒绝了。</p>
<p>令首个这样的主动方为$a$，其最优有效对象为$b$。在$b$拒绝$a$时，一定更偏好于某个主动方$x$。由于$a$是首个被最优有效对象拒绝的主动方，所以$x$此时没有被任何有效对象拒绝过，即$b$是$x$的最优有效对象。</p>
<p>随后，由于$a$的最优有效对象是$b$，我们找到包含$(a,b)$的稳定匹配$S$，$S$包含$(x,y)$。根据上述分析，$b$相比$a$更偏好$x$，而$x$相比任何其他有效对象更偏好$b$，因此$(x,b)$是匹配$S$的不稳定对，引出矛盾。</p>
<h4 id="被动方最劣性"><a href="#被动方最劣性" class="headerlink" title="被动方最劣性"></a>被动方最劣性</h4><p><strong>Claim.</strong> GS算法得到的解$S^\star$对于被动方是最劣的(每个主动方得到最劣有效对象)</p>
<p><strong>Proof.</strong> 反证法：</p>
<p>假如不是被动方最劣的，那么一定有某个被动方未与其最劣有效对象匹配。</p>
<p>假如$S^\star$包含$(a,b)$，但$a$并不是$b$的最劣有效对象，假设其最劣有效对象为$x$。</p>
<p>我们找到包含$(x,b)$的稳定匹配$S$，$S$包含$(a,y)$。$b$相比$x$更偏好$a$，由主动方最优性，$b$一定是$a$的最优有效对象，即$a$相比$y$更偏好$b$，因此$(a,b)$是匹配$S$的不稳定对，引出矛盾。</p>
<h3 id="一对多匹配"><a href="#一对多匹配" class="headerlink" title="一对多匹配"></a>一对多匹配</h3><p>一对多匹配中，集合$A$中的一个元素可以与集合$B$中的多个元素匹配，此处将$A$中元素作为主动方进行讨论。</p>
<p>不稳定对$(a,b)$满足以下所有条件：</p>
<ul>
<li>$a,b$ 相互是可接受的</li>
<li>主动方$a$仍然有匹配容量，或者$a$相比其已经匹配的所有被动方元素更偏好$b$</li>
<li>被动方$b$未被匹配，或者$b$相比其已经匹配的主动方更偏好$a$</li>
</ul>
<h3 id="扩展GS算法"><a href="#扩展GS算法" class="headerlink" title="扩展GS算法"></a>扩展GS算法</h3><p>将具有容量的一方作为被动方，全局维护未匹配主动方的集合。</p>
<p>对于每个主动方，维护一个偏好值降序列表，依次进行匹配请求。</p>
<p>对于每个被动方，维护一个长度为容量的优先队列，存放当前被匹配的所有被动方。如果有更偏好的主动方请求匹配，将队首(偏好值最低)的主动方放回未匹配集合。</p>
<p>扩展GS算法的正确性和利益分析与上文所述类似，证明可参考Assignment 1。</p>
<h2 id="Chapter-2-算法分析"><a href="#Chapter-2-算法分析" class="headerlink" title="Chapter 2 - 算法分析"></a>Chapter 2 - 算法分析</h2><h3 id="运行时间分析"><a href="#运行时间分析" class="headerlink" title="运行时间分析"></a>运行时间分析</h3><p>最坏运行时间：给定输入数据规模，在所有不同的输入中，算法最大运行时间</p>
<p>平均运行时间：给定输入数据规模，对于随机的一个输入，算法的运行时间</p>
<p>最坏运行时间为多项式复杂度的算法被认为是高效的</p>
<h3 id="Asymptotic-Order-of-Growth"><a href="#Asymptotic-Order-of-Growth" class="headerlink" title="Asymptotic Order of Growth"></a>Asymptotic Order of Growth</h3><p><del>这玩意咋翻译来着，渐进时间复杂度吗</del></p>
<p>$O(n),\Omega(n),\Theta(n)$都是老朋友了</p>
<p>传递性，可加性，可乘性</p>
<h3 id="常见算法时间复杂度"><a href="#常见算法时间复杂度" class="headerlink" title="常见算法时间复杂度"></a>常见算法时间复杂度</h3><div class="table-container">
<table>
<thead>
<tr>
<th>类型</th>
<th>时间复杂度</th>
<th>应用</th>
</tr>
</thead>
<tbody>
<tr>
<td>常数(Constant)</td>
<td>$O(1)$</td>
<td>打表</td>
</tr>
<tr>
<td>对数(Logarithmic)</td>
<td>$O(\log n)$</td>
<td>二分查找</td>
</tr>
<tr>
<td>线性(Linear)</td>
<td>$O(n)$</td>
<td>求极值</td>
</tr>
<tr>
<td>算术线性(?)(Linearithmic)</td>
<td>$O(n\log n)$</td>
<td>归并排序，堆排</td>
</tr>
<tr>
<td>平方(Quadratic)</td>
<td>$O(n^2)$</td>
<td>暴力最近点对</td>
</tr>
<tr>
<td>立方(Cubic)</td>
<td>$O(n^3)$</td>
<td>集合不相容</td>
</tr>
<tr>
<td>指数(Exponential)</td>
<td>$O(c^n)$</td>
<td>暴力最大独立集</td>
</tr>
</tbody>
</table>
</div>
<h3 id="独立集问题"><a href="#独立集问题" class="headerlink" title="独立集问题"></a>独立集问题</h3><p>区间调度：$O(n\log n)$贪心</p>
<p>带权区间调度：$O(n\log n)$动态规划</p>
<p>二分图匹配：$O(n^k)$基于最大流算法</p>
<p>最大独立集：NP-complete</p>
<p>竞争便利店选址问题：PSPACE-complete</p>
<h3 id="均摊分析"><a href="#均摊分析" class="headerlink" title="均摊分析"></a>均摊分析</h3><p>这是赵老师的Lab课件内容，不过内容还挺重要的，之后再补吧。</p>
<h2 id="Chapter-3-贪心"><a href="#Chapter-3-贪心" class="headerlink" title="Chapter 3 - 贪心"></a>Chapter 3 - 贪心</h2><h3 id="区间调度"><a href="#区间调度" class="headerlink" title="区间调度"></a>区间调度</h3><p>问题：工作用一系列区间表示，工作不可并行，每个工作等权，最大化截止时间前完成的工作数。</p>
<p>贪心算法：按照DDL升序排序，贪心地选择当前尚未错过开始时间且DDL最近的一个完成。</p>
<p><strong>Theorem.</strong> 贪心算法是最优的</p>
<p><strong>Proof.</strong> 反证法：假如贪心算法结果不是最优，令贪心结果为$\{i_n\}$，最优结果为$\{j_m\}$，且两种方案的前$r$项相同。我们在所有最优解中，找到一个$\{j_m\}$使得其和贪心方案的重叠部分最多，即$r$最大。</p>
<p>由贪心策略，$i_{r+1}$的结束时间一定不会晚于$j_{r+1}$，那么我们将$i_{r+1}$替换$\{j_m\}$方案中的$j_{r+1}$，依然会得到一个最优的可行解，但是此时的重叠部分长度为$r+1$，引出矛盾。</p>
<h3 id="区间划分"><a href="#区间划分" class="headerlink" title="区间划分"></a>区间划分</h3><p>问题：课程用一系列区间表示，课程不可在同一教室并行，求安排下所有课程所需的最小教室数量。</p>
<p>贪心算法：按照开课时间升序排列，申请的所有教室按照最后一堂课的结束时间</p>
<p>放进优先队列，对于每节课，看上节下课最早的教室能不能放下，能的话就放，如果放不下那就新开一个教室加入队列。</p>
<p><strong>Theorem.</strong> 贪心算法是最优的</p>
<p>记贪心算法申请的教室数为$d$</p>
<p>第$d$个教室是因为贪心算法在规划第$j$节课时，前$d-1$个教室都放不下了，即该$d-1$个教室的最后一堂课的下课时间都比$j$的上课时间晚。</p>
<p>由于贪心按上课时间升序排列课程，所以这$d-1$个教室中的课程开始时间都比$j$的开始时间要晚，因此在第$j$节课开课后有$d$节课在同时上课。</p>
<p>根据题意，要能支持$d$节课同时进行至少需要$d$个教室，即不存在比贪心解更优的解。</p>
<h3 id="最小化迟到"><a href="#最小化迟到" class="headerlink" title="最小化迟到"></a>最小化迟到</h3><p>问题：给定工作耗时和DDL，同时只能做一件事，迟到值设定为完成时间与DDL之间的差值，最小化最大的迟到值。</p>
<p>贪心算法：DDL越早越先做</p>
<p><strong>Observation.</strong> 存在没有任何空闲间隔的最优解，贪心解也没有任何空闲间隔</p>
<p><strong>Observation.</strong> 对于没有空闲间隔的解，如果存在两个任务，DDL早的后完成，DDL晚的先完成，则称为一个逆序对。如果一个解有逆序对，那一定有一对连续规划的逆序对。(why?)</p>
<p><strong>Claim.</strong> 交换逆序对不会使最大迟到值增加。</p>
<p><strong>Proof.</strong> 记交换前的迟到值为$l$，交换后为$l’$，工作完成时间为$f$，截止时间为$d$。</p>
<ul>
<li>对于$k\ne i,j$，$l_k’=l_k$</li>
<li>$l_i’\le l_i$</li>
<li>$l_j’ = \max\{0,f_j-d_j\} = \max\{0,f_i-d_j\}\le \max\{0,f_i-d_i\} = l_i$</li>
</ul>
<p><strong>Theorem. </strong> 贪心解$S$是最优的</p>
<p><strong>Proof.</strong> 令$S^\star$为一个没有空闲间隔且逆序对数量最少的最优解。</p>
<p>如果$S^\star$没有逆序对，那么$S=S^\star$；</p>
<p>如果有逆序对，记相邻逆序对为$(i,j)$。交换$i,j$不会得到更劣解，但是将逆序对数量减少了1，引出矛盾。</p>
<h3 id="Dijkstra"><a href="#Dijkstra" class="headerlink" title="Dijkstra"></a>Dijkstra</h3><p>这也是老朋友了，每次贪心地挑dis最小的一个点去更新其他所有点。</p>
<p><strong>Invariant.</strong> 对于每个已探索集合$S$中的点$u$，$d(u)$即为$s-u$最短路的长度。</p>
<p><strong>Proof.</strong> 归纳法：</p>
<p>基态：$|S|=1$时，显然。</p>
<p>归纳假设：假设对于$|S|=1,\cdots,k$的时候结论均成立</p>
<p>记下一个探索的点为$v$，选中的边是$(u,v)$，此时$s-v$路径的长度为$\pi (v) = d(u)+l_{(u,v)}$。考虑任一$s-v$路径$P$，假设$(x,y)$是路径上离开$S$的第一条边，记到$x$的子路径为$P’$，那么有如下不等式：</p>
<script type="math/tex; mode=display">l(P)\ge l(P')+l_{(x,y)}\ge d(x)+l_{(x,y)}\ge \pi(y)\ge \pi(v)</script><p>从左到右四个不等号的原因分别为：边权非负，归纳假设，$\pi(y)$和$\pi(v)$的定义。由此证明了$d(v)=\pi(v)$即为$s-v$最短路的长度，$|S|=k+1$的时候也成立。</p>
<h3 id="A-star"><a href="#A-star" class="headerlink" title="$A^\star$"></a>$A^\star$</h3><p>给定起点和终点，引入启发式函数，用$h(v,t)+\pi(v)$作为优先级。</p>
<p>$h(v,t)&lt;d(v,t)$时保证结果正确，有可能比Dijkstra更快</p>
<p>$h(v,t)=d(v,t)$时保证结果正确，最快，但需要完全正确的知识</p>
<p>$h(v,t)&gt;d(v,t)$时，并不总能得到正确结果，不过可能还是快一些</p>
<h3 id="最小生成树"><a href="#最小生成树" class="headerlink" title="最小生成树"></a>最小生成树</h3><h4 id="Prim"><a href="#Prim" class="headerlink" title="Prim"></a>Prim</h4><p>维护一个已选点的集合，迭代$n-1$次，每次将连接生成树和树外一点的最短边加入树，并且把树外断点加入集合。$O(m\log n)$</p>
<h4 id="Kruskal"><a href="#Kruskal" class="headerlink" title="Kruskal"></a>Kruskal</h4><p>将边按边权升序排列依次加入生成树，如果成环了就不加（并查集）。$O(m\log m)$</p>
<h4 id="Reverse-Delete"><a href="#Reverse-Delete" class="headerlink" title="Reverse-Delete"></a>Reverse-Delete</h4><p>按照边权降序排列边，如果删边不影响连通性就删，重复m次。$O(m\log n (\log\log n)^3)$</p>
<h4 id="Borůvka"><a href="#Borůvka" class="headerlink" title="Borůvka"></a>Borůvka</h4><p>对于每个连通块，选择所有一端在连通块内，另一端在外的边中边权最小的一个加入生成树，迭代直到只剩一个连通块收工。$O(m\log n)$</p>
<h3 id="单链路-K-聚类"><a href="#单链路-K-聚类" class="headerlink" title="单链路 K-聚类"></a>单链路 K-聚类</h3><p>问题：给定集合$U$，初始包含$n$个对象，将其分入$k$个非空集合，最大化不同集合之间距离的最小值。</p>
<p>贪心算法：用Kruskal算法，但是只加$n-k$条边。等价于找最小生成树，然后删掉最贵的$k-1$条边。</p>
<p><strong>Theorem.</strong> 贪心算法是最优的</p>
<p>待补。</p>
<h3 id="最小树形图"><a href="#最小树形图" class="headerlink" title="最小树形图"></a>最小树形图</h3><p>问题：给定有向图$G$和根节点$r$，边权非负，求根节点位于$r$的最小树形图。</p>
<p>对于每个非根节点$v$，$y(v)$表示进入$v$的所有边中最小的边权，边$(u,v)$削减后的边权记为$c’(u,v)=c(u,v)-y(v)\ge 0$。</p>
<h4 id="朱刘算法-Edmonds’-Algorithm"><a href="#朱刘算法-Edmonds’-Algorithm" class="headerlink" title="朱刘算法 / Edmonds’ Algorithm"></a>朱刘算法 / Edmonds’ Algorithm</h4><p>对于每个非根节点$v$，选择最小入边，构成边集$E^\star$</p>
<p>$E^\star$中的所有边的削减后边权均为0，如果此时$E^\star$不包含环，则找到了最小树形图。</p>
<p>如果包含一个环$C$，那么将$C$收缩为一个超级结点，并删除其自环。</p>
<p>不断执行上述过程直到得到一个最小树形图，随后展开环删边断环即可。</p>
<h4 id="正确性证明"><a href="#正确性证明" class="headerlink" title="正确性证明"></a>正确性证明</h4><p>较为复杂，可参考课件，待补。</p>
<h3 id="哈夫曼编码"><a href="#哈夫曼编码" class="headerlink" title="哈夫曼编码"></a>哈夫曼编码</h3><h4 id="算法流程"><a href="#算法流程" class="headerlink" title="算法流程"></a>算法流程</h4><p>对于一个前缀编码格式$\gamma$，ABL (average bits per letter) 是每个字符的出现频率与其编码位数的乘积的和：</p>
<script type="math/tex; mode=display">ABL(\gamma) = \sum\limits_{x\in S}f_x|\gamma(x)|</script><p>哈夫曼编码：每次贪心选取出现频率最低的两个结点，将其连接到同一个父结点上，定义父节点的出现频率为两个子节点之和。伪代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Huffman(S)</span><br><span class="line">&#123;</span><br><span class="line">    if |S| == 2</span><br><span class="line">    &#123;</span><br><span class="line">    	return tree with root and 2 leaves</span><br><span class="line">    &#125;</span><br><span class="line">    else</span><br><span class="line">    &#123;</span><br><span class="line">        let x and y be lowest-frequency letters in S</span><br><span class="line">        let S’ be S with x and y removed</span><br><span class="line">        insert new letter ω in S’ with f[ω] = f[x] + f[y]</span><br><span class="line">        T’= Huffman(S’)</span><br><span class="line">        T = add two children x and y to leaf ω from T’</span><br><span class="line">        return T</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="相关证明"><a href="#相关证明" class="headerlink" title="相关证明"></a>相关证明</h4><p>时间复杂度：$T(n)=T(n-1)+O(\log n)$，因此$T(n)=O(n\log n)$。</p>
<p><strong>Claim.</strong> $ABL(T)=ABL(T’)+f_w$</p>
<p><strong>Proof.</strong> $T$是由$T’$的$w$结点下接$x,y$结点形成的。</p>
<script type="math/tex; mode=display">\begin{align*}ABL(T) &= \sum\limits_{k\in S}f_k\cdot \small\text{dep}_T(k)\\&=f_x\cdot \small\text{dep}_T(x)+f_y\cdot \small\text{dep}_T(y)+\sum\limits_{k\in S/\{x,y\}}f_k\cdot \small\text{dep}_T(k)\\&=(f_y+f_z)\cdot (1+\small\text{dep}_{T'}(w))+\sum\limits_{k\in S/\{x,y\}}f_k\cdot \small\text{dep}_{T'}(k)\\&=f_w+f_w\cdot \small\text{dep}_{T'}(w)+\sum\limits_{k\in S/\{x,y\}}f_k\cdot \small\text{dep}_{T'}(k)\\&=f_w+\sum\limits_{k\in S'}f_k\cdot \small\text{dep}_{T'}(k)\\&=f_w+ABL(T')\end{align*}</script><p><strong>Observations.</strong></p>
<ul>
<li>在最优的前缀编码树中，出现频率最低的字符对应的结点应该出现在最底层</li>
<li>$n&gt;1$时，最低层总是有至少两个叶子节点</li>
<li>同一层中的顺序并不影响编码最优性</li>
</ul>
<p><strong>Claim.</strong> 存在最优的前缀编码树，使得出现频率最低的两个字符作为树的两个相邻的叶子节点。</p>
<p><strong>Claim.</strong> 对于给定字符集$S$，在所有前缀编码中，哈夫曼编码有最小的ABL。</p>
<p><strong>Proof.</strong> 归纳法：</p>
<p>基态：对于$|S|=2$，没有比一根两叶更短的编码了</p>
<p>归纳假设：假设对于字符集$S’$，哈夫曼树$T’$给出的编码是最优的。其中$S’$没有加入最小频率的$x,y$而将$w$作为叶节点。</p>
<p>归纳步骤：反证法。</p>
<p>令$T$是哈夫曼树，假设存在树$Z$使得$ABL(Z)&lt;ABL(T)$，不失一般性地假设$Z$中$x, y$是相邻的叶子节点。将$x,y$从$Z$中删除得到$Z’$，记其父节点为$w’$。</p>
<p>由于$ABL(Z)=ABL(Z’)+f_{w’}$，$ABL(T)=ABL(T’)+f_w$，且$ABL(Z)&lt;ABL(T)$，$f_w=f_{w’}$，得到$ABL(Z’)&lt;ABL(T’)$，与假设矛盾。</p>
<p>也可以参考<a href="http://home.cse.ust.hk/faculty/golin/COMP271Sp03/Notes/MyL17.pdf">DSAA课程给的证明</a></p>
<h3 id="最优缓存"><a href="#最优缓存" class="headerlink" title="最优缓存"></a>最优缓存</h3><p>离线缓存 vs. 在线缓存：是否已知全部访问序列</p>
<p>贪心替换：LIFO, FIFO, LRU, LFU</p>
<p>最优贪心算法：Farthest-in-future (FF)，替换掉最晚在未来的访问中出现的成员。</p>
<p>最优性证明比较微妙，建议自己看课件过一遍。</p>
<h2 id="Chapter-4-分治"><a href="#Chapter-4-分治" class="headerlink" title="Chapter 4 - 分治"></a>Chapter 4 - 分治</h2><h3 id="逆序对计数"><a href="#逆序对计数" class="headerlink" title="逆序对计数"></a>逆序对计数</h3><p>$O(n\log n)$归并排序求逆序对</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Sort-and-Count(L)</span><br><span class="line">&#123;</span><br><span class="line">    if list L has one element</span><br><span class="line">    	return (0, L)</span><br><span class="line">    Divide the list into two halves A and B</span><br><span class="line">        (rA, A) = Sort-and-Count(A)</span><br><span class="line">        (rB, B) = Sort-and-Count(B)</span><br><span class="line">        (rAB, L) = Merge-and-Count(A, B)</span><br><span class="line">    return (rA + rB + rAB, L)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="线性求第k小"><a href="#线性求第k小" class="headerlink" title="线性求第k小"></a>线性求第k小</h3><p><del>这位更是印象深刻（✟Bo门✟</del></p>
<h4 id="随机化方法"><a href="#随机化方法" class="headerlink" title="随机化方法"></a>随机化方法</h4><p>随机选个主元(pivot)，将数组分为大于/小于/等于主元的三部分，数数第k大在哪一组，然后递归继续。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Quick-Select(A, k)</span><br><span class="line">&#123;	// 1 ≤ k ≤ |A|</span><br><span class="line">    Pick pivot p uniformly at random from A</span><br><span class="line">    Partition the list into two three parts L, M and R</span><br><span class="line">    if k ≤ |L|</span><br><span class="line">    	return Quick-Select(L, k)</span><br><span class="line">    else if k &gt; |L| + |M|</span><br><span class="line">    	return Quick-Select(R, k - |L| - |M|)</span><br><span class="line">    else</span><br><span class="line">    	return p</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>记$T(n,k)$为在长度为$n$的数组中求第$k$小的比较次数，记$T(n)=\max_kT(n,k)$。</p>
<p><strong>Claim.</strong> $T(n)\le 4n$</p>
<p><strong>Proof.</strong> 强归纳：</p>
<script type="math/tex; mode=display">\begin{align*}T(n)&\le n + \frac{1}{n}[2T(n/2)+\cdots+2T(n-2)+2T(n-1)]\\&\le n + \frac{1}{n}[8(n/2)+\cdots+8(n-2)+8(n-1)]\\&\le n+\frac{1}{n}(3n^2)\\&= 4n\end{align*}</script><p>确定性算法：中位数的中位数，优化版本大概要5.4305次比较，常数太大了实际一般不用，不过借鉴选主元的思路倒是不错。</p>
<h3 id="平面最近点对"><a href="#平面最近点对" class="headerlink" title="平面最近点对"></a>平面最近点对</h3><p>分治典中典。</p>
<p>问题：平面上$n$个点，找到点对间最小欧氏距离。</p>
<p>分治算法：按$x$坐标排序，分为数量相等的左右两部分。拆分：递归地分成两部分求子区域的最近点对距离；合并：左半边，右半边，以及左右两部分之间的点对距离。</p>
<p>记左右两部分内部的最近点对距离为$\delta$，合并时，只需要考虑横坐标在中点$±\delta$的点就足够了。对于中心区域的每个点$i$，我们也只需要考虑$y_i-\delta&lt;y_j\le y_i$的点$j$，因为每个点都要考虑所以只保证半边就行。为了方便比较$y$坐标，按$y$坐标再进行排序，这里排序可以用类似归并的方法，将低层递归排序后的点集归并即可，复杂度是$O(n)$的。</p>
<p>对于点$i$，记它需要比较的点集为$C_i$，$C_i$可能的分布范围是一个长为$2\delta$</p>
<p>宽为$\delta$的矩形，且$i$位于上长边的中点。将该矩形切分为8个${\delta\over2}*{\delta\over2}$的小正方形，那么每个小正方形内至多只能有一个点，除去$i$之后最多只有7个点。反证：每个小正方形内如果存在两个点，那么它们的距离最大值是$\delta\over\sqrt 2$，比之前设定的单边最小距离$\delta$还要小，引出矛盾。所以对于每个点$i$，我们只需要比对至多$7$个点。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Closest-Pair(p1, ..., pn)</span><br><span class="line">&#123;</span><br><span class="line">    Compute vertical line L such that half the points</span><br><span class="line">    are on one side and half on the other side.</span><br><span class="line">    </span><br><span class="line">    δ1 = Closest-Pair(left half)</span><br><span class="line">    δ2 = Closest-Pair(right half)</span><br><span class="line">    δ = min(δ1, δ2)</span><br><span class="line">    </span><br><span class="line">    Delete all points further than δ from line L.</span><br><span class="line">    </span><br><span class="line">    Sort remaining points by y-coordinate.</span><br><span class="line">    </span><br><span class="line">    Scan points in y-order and compare distance between</span><br><span class="line">    each point and next 7 neighbors. If any of these</span><br><span class="line">    distances is less than δ, update δ.</span><br><span class="line">    </span><br><span class="line">    return δ</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="整数乘法"><a href="#整数乘法" class="headerlink" title="整数乘法"></a>整数乘法</h3><p>竖式乘法：$\Theta(n^2)$</p>
<p>基础分治乘法：$x\cdot y =(2^ma+b)\cdot(2^mc+d) = 2^{2m}ac+2^m(ad+bc)+bd$。$T(n)=4T({n\over 2})+O(n)$，依然$\Theta(n^2)$</p>
<p>Karatsuba分治：$x\cdot y = 2^{2m}ac+2^m(ac+bd-(a-b)(c-d))+bd$。$T(n)=3T({n\over2})+O(n)$，降到了$\Theta(n^{\log_23})=\Theta(n^{1.585})$</p>
<h3 id="分块矩阵乘法"><a href="#分块矩阵乘法" class="headerlink" title="分块矩阵乘法"></a>分块矩阵乘法</h3><p>$\begin{bmatrix}<br> C_{11} &amp; C_{12}\\<br> C_{21} &amp; C_{22}<br>\end{bmatrix}=\begin{bmatrix}<br> A_{11} &amp; A_{12}\\<br> A_{21} &amp; A_{22}<br>\end{bmatrix}\times\begin{bmatrix}<br> B_{11} &amp; B_{12}\\<br> B_{21} &amp; B_{22}<br>\end{bmatrix}$</p>
<p>基础乘法：$C_{ij}=(A_{i1}\times B_{1j})+(A_{i2}\times B_{2j})$。$T(n)=4T({n\over2})+O(n^2)$，$T(n)=O(n^3)$</p>
<p>Strassen分治：用7次矩阵乘法计算$P_1\sim P_7$，再用于计算$C_{ij}$。$T(n)=7T({n\over 2})+O(n^2)$，$T(n)=O(n^{2.81})$</p>
<h3 id="卷积与FFT"><a href="#卷积与FFT" class="headerlink" title="卷积与FFT"></a>卷积与FFT</h3><h4 id="多项式表示"><a href="#多项式表示" class="headerlink" title="多项式表示"></a>多项式表示</h4><p>系数表示：$A(x) = \sum\limits_{i=0}^{n-1}a_{i}x^{i}$，$B(x) = \sum\limits_{i=0}^{n-1}b_{i}x^{i}$</p>
<p>多项式乘法(线性卷积)：$A(x)\times B(x) = \sum\limits_{i=0}^{2n-2}c_ix^i$，其中$c_i=\sum\limits_{j=0}^{i}a_jb_{i-j}$。暴力$O(n^2)$</p>
<p>点值表示：$A(x)=\{(x_i,y_i)|i\in[0,n-1]\}$，$B(x)=\{(x_i,z_i)|i\in[0,n-1]\}$</p>
<p>多项式乘法：$A(x)\times B(x) = \{(x_i,y_i\times z_i)|i\in[0,2n-1]\}$，$O(n)$但需要$2n$个点表示$A(x)$和$B(x)$</p>
<h4 id="系数转点值"><a href="#系数转点值" class="headerlink" title="系数转点值"></a>系数转点值</h4><p>对于$n-1$次多项式$A$，给定系数$\{a_i\}$，输出多项式在$n$个点处的值。</p>
<p>我们选取$n$阶单位根$w^0,\cdots,w^{n-1}$，其中$w=e^{2\pi i/n}$，那么$(w^k)^n=(e^{2\pi i/n})^n=(e^{\pi i})^{2k} = 1$。并且有$n\over 2$阶单位根为$v^0,\cdots,v^{n/2-1}$，其中$v=w^2=e^{4\pi i/n}$。</p>
<p>将多项式拆成奇数次幂和偶数次幂两部分：</p>
<script type="math/tex; mode=display">\begin{align}A_{even}(x)&=a_0+a_2x+a_4x^2+\cdots+a_{n/2-2}x^{(n-1)/2} \nonumber \\A_{odd}(x)&=a_1+a_3x+a_5x^2+\cdots+a_{n/2-1}x^{(n-1)/2} \nonumber \end{align}</script><p>则有：</p>
<script type="math/tex; mode=display">\begin{align}A(x)&=A_{even}(x^2)+xA_{odd}(x^2)\nonumber \\A(-x)&=A_{even}(x^2)-xA_{odd}(x^2) \nonumber \end{align}</script><p>代入$n$阶单位根，有：</p>
<script type="math/tex; mode=display">\begin{align*}A(w^k)&=A_{even}(v^k)+w^kA_{odd}(v^k),\ 0\le k<n/2\\A(w^{k+n/2})&=A_{even}(v^k)-w^kA_{odd}(v^k),\ 0\le k<n/2\end{align*}</script><p>那么我们就把求长度为$n$的多项式$A$在$w^k$和$w^{k+n/2}$两处的点值的问题$O(1)$转移到了求$v^k$点处两个长度为$n\over 2$的多项式的点值。对于求$n$个单位根的问题，我们在$O(n)$时间将其拆分成了两个规模折半的问题，$T(n)=2T(n/2)+O(n)$，即$T(n)=O(n\log n)$</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">FFT(n, a0, a1, …, an-1)</span><br><span class="line">&#123;</span><br><span class="line">    if (n == 1)</span><br><span class="line">    	return a0</span><br><span class="line">    </span><br><span class="line">    (e0,e1,…,en/2-1) = FFT(n/2, a0,a2,a4,…,an-2)</span><br><span class="line">    (d0,d1,…,dn/2-1) = FFT(n/2, a1,a3,a5,…,an-1)</span><br><span class="line">    </span><br><span class="line">    for k = 0 to n/2 - 1</span><br><span class="line">    &#123;</span><br><span class="line">        ω[k] = exp(2πik/n)</span><br><span class="line">        y[k] = ek + ω[k] dk</span><br><span class="line">        y[k+n/2] = ek - ω[k] dk</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return y</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="点值转系数"><a href="#点值转系数" class="headerlink" title="点值转系数"></a>点值转系数</h4><p>只需要将$w^{-1}$作为单位根的底数即可，同样是$O(n\log n)$的。</p>
<h2 id="Chapter-5-动态规划"><a href="#Chapter-5-动态规划" class="headerlink" title="Chapter 5 - 动态规划"></a>Chapter 5 - 动态规划</h2><p>这个就比较灵性，考课件原题也不难，考其他的推不出来就寄，待补。</p>
<h2 id="Chapter-6-难问题"><a href="#Chapter-6-难问题" class="headerlink" title="Chapter 6 - 难问题"></a>Chapter 6 - 难问题</h2><h3 id="多项式时间归约"><a href="#多项式时间归约" class="headerlink" title="多项式时间归约"></a>多项式时间归约</h3><p>如果问题$X$可以通过以下步骤解决，那么认为问题$X$可以多项式时间归约到问题$Y$：</p>
<ul>
<li>使用多项式数量的标准计算步骤</li>
<li>使用多项式数量的解决问题$Y$的算法</li>
</ul>
<p>问题$X$可以多项式时间归约到问题$Y$，记作$X\le_P Y$。</p>
<ul>
<li>如果$X\le_P Y$，且$Y$多项式可解，则$X$多项式可解</li>
<li>如果$X\le_P Y$，且$X$多项式不可解，则$Y$多项式不可解</li>
<li>如果$X\le_P Y$且$Y\le_P X$，记作$X\equiv_P Y$，$X$多项式可解当且仅当$Y$多项式可解</li>
</ul>
<h3 id="简单等价归约"><a href="#简单等价归约" class="headerlink" title="简单等价归约"></a>简单等价归约</h3><p>独立集问题：给定图$G$和整数$k$，是否存在大小至少为$k$的点集，使得其中的每个点互不相邻？</p>
<p>顶点覆盖问题：给定图和整数$k$，是否存在大小不超过$k$的点集，使得所有边至少和点集中的一个点相连？</p>
<p><strong>Claim.</strong> 独立集问题 $\equiv_P$ 顶点覆盖问题</p>
<p><strong>Proof.</strong> 证明$S$是一个独立集当且仅当$V-S$是一个顶点覆盖。</p>
<h3 id="特殊到一般的归约"><a href="#特殊到一般的归约" class="headerlink" title="特殊到一般的归约"></a>特殊到一般的归约</h3><p>集合覆盖问题：给定一个集合$U$，以及集合$U$的一系列子集的集合$S$，问是否能选出$S$中不超过$k$个成员，使得其并集等于$U$？</p>
<p><strong>Claim.</strong> 顶点覆盖问题 $\le_P$ 集合覆盖问题</p>
<p><strong>Proof.</strong> 对于任一顶点覆盖问题，将其边集$E$作为集合覆盖问题的全集$U$，对于每个顶点，记录与其相连的边的集合，所有顶点各自相连的边集作为$S$的成员，将顶点数量限制$k$作为集合数量限制$k$，这样就构造了一个集合覆盖问题。</p>
<h3 id="利用Gadgets的归约"><a href="#利用Gadgets的归约" class="headerlink" title="利用Gadgets的归约"></a>利用Gadgets的归约</h3><p>3-SAT：合取范式，每个子句由三个文字(分别对应一个变量)进行或运算得到，问可满足性。</p>
<p><strong>Claim.</strong> 3-SAT $\le_P$ 独立集问题</p>
<p><strong>Proof.</strong> 对于给定3-SAT问题，将每个变量映射到图上的两个顶点，表示$x_i$和$\overline x_i$并建边$(x_i,\overline x_i)$；对于每个子句，在其三个文字对应的变量对应的顶点间建边，得到图$G$。子句数量为$|\Phi|$，则令图$G$上所求独立集的大小设为$|\Phi|$。3-SAT有解当且仅当图$G$存在一个大小为$|\Phi|$的独立集。</p>
<p>由于独立集大小和子句数量一致，那么$G$中的每个三角都会有恰好一个点被选入独立集，将该点对应的变量设为真，就得到了一个3-SAT的解。</p>
<h3 id="三类问题的归约"><a href="#三类问题的归约" class="headerlink" title="三类问题的归约"></a>三类问题的归约</h3><p>决定问题：是否存在大小不超过$k$的顶点覆盖？</p>
<p>搜索问题：找到一个大小不超过$k$的顶点覆盖</p>
<p>优化问题：找到最小的顶点覆盖</p>
<p><strong>Theorem.</strong> 顶点覆盖问题 $\equiv_P$ 搜索顶点覆盖问题</p>
<p><strong>Proof.</strong> </p>
<p>$\le_P$：决定问题是搜索问题的特例，搜索问题有解说明决定问题为真</p>
<p>$\ge_P$：为了找到一个大小不超过$k$的顶点覆盖：</p>
<ul>
<li>确定是否存在大小不超过$k$的顶点覆盖</li>
<li>用$O(n)$时间找到点$v$，使得$G/\{v\}$有一个大小不超过$k-1$的顶点覆盖</li>
<li>将$v$纳入顶点覆盖</li>
<li>在$G/\{v\}$中递归寻找一个大小不超过$k-1$的顶点覆盖。</li>
</ul>
<p><strong>Theorem.</strong> 搜索顶点覆盖问题 $\equiv_P$ 最小顶点覆盖问题</p>
<p><strong>Proof.</strong></p>
<p>$\le_P$：搜索问题是优化问题的特例，优化问题解可作为搜索问题解</p>
<p>$\ge_P$：二分答案</p>
<h3 id="P与NP"><a href="#P与NP" class="headerlink" title="P与NP"></a>P与NP</h3><p>P：存在多项式时间算法的决定性问题的集合</p>
<p>NP：存在多项式时间校验器(certifier)的决定性问题的集合(非确定多项式时间)</p>
<p>校验器：并不直接说明问题是否有解，而是检验给定的证书(certificate)是否能说明原问题有解</p>
<p>证书：用于说明原问题可能有解的输入</p>
<p><strong>Claim.</strong> $P⊆NP$</p>
<p><strong>Proof.</strong> $\forall X\in P$，$\exists$多项式算法$A(s)$可解$X$，证书为空，校验器为$A(s)$</p>
<p>EXP：存在指数时间算法的决定性问题的集合</p>
<p><strong>Fact.</strong> $P\ne EXP ⇒ (P\ne NP)\vee(NP\ne EXP)$</p>
<h3 id="NP-Complete"><a href="#NP-Complete" class="headerlink" title="NP-Complete"></a>NP-Complete</h3><h4 id="P-NP-NPC"><a href="#P-NP-NPC" class="headerlink" title="P, NP, NPC"></a>P, NP, NPC</h4><p>如果问题$X$可以通过以下步骤解决，那么认为问题$X$可以多项式时间(Cook)归约到问题$Y$：</p>
<ul>
<li>使用多项式数量的标准计算步骤</li>
<li>使用多项式数量的解决问题$Y$的算法</li>
</ul>
<p>如果对于任意问题$X$的实例$x$，我们都能构造问题$y$的实例$Y$，使得$x$有解当且仅当$y$有解，则认为问题$X$可以多项式时间(Karp)转化到问题$Y$。</p>
<p>NP-Complete：满足对于任意$NP$问题$X$，都有$X\le_P Y$的$NP$问题$Y$的集合</p>
<p><strong>Theorem.</strong> $NP$完全问题$Y$满足$Y\in P$当且仅当$P=NP$。</p>
<p><strong>Proof.</strong></p>
<ol>
<li>当$P=NP$时，$Y\in P$因为$Y\in NP$。</li>
<li>假设$Y\in P$，对于任何$X\in NP$，由于$X\le_P Y$，得到$X\in P$，即$NP⊆P$，由于$P⊆NP$，得到$P=NP$。</li>
</ol>
<p>NP-hard：每个$NP$问题都能多项式时间归约到的问题集合。</p>
<h4 id="如何证明NPC"><a href="#如何证明NPC" class="headerlink" title="如何证明NPC"></a>如何证明NPC</h4><p>电路可满足性问题：与或非门构成的组合电路，是否可以调整输入使输出为1？</p>
<p><strong>Theorem.</strong> 电路可满足性问题是$NP$完全问题</p>
<p><strong>Proof.</strong> </p>
<p>任何拥有定长输入，输出真/假的确定性算法可以用这样的电路表示，如果算法是多项式时间的，电路也是多项式尺寸的。</p>
<p>考虑$\forall X\in NP$，以及多项式时间校验器$C(s,t)$，为确定$s\in X$是否成立，只需要知道是否有一个长度为$p(|s|)$的证书$t$使得校验器输出真。</p>
<p>将$C(s,t)$视作一个输入长度$|s|+p(|s|)$的算法，并且将其转换为多项式尺寸的电路$K$，前$s$位固定输入为$s$，后$p(|s|)$位输入证书$t$，电路$K$可满足当且仅当$C(s,t)$输出真。</p>
<p>证明问题$Y$是$NP$完全问题的方法：</p>
<ol>
<li>说明是$NP$问题</li>
<li>选一个$NP$完全问题$X$</li>
<li>证明$X\le_P Y$</li>
</ol>
<p><strong>Theorem.</strong> 3-SAT 是 $NP$完全问题</p>
<p><strong>Proof.</strong> 已知3-SAT$\in NP$，仅需证明电路可满足性问题$\le_P$3-SAT</p>
<p>对于任意电路$K$，对于每个电路元素$i$创建一个3-SAT变量$x_i$</p>
<p>对于与或非三种运算分别构建子句：</p>
<script type="math/tex; mode=display">\begin{align*} x_2&=\neg x_3 &⇒ &x_2\vee x_3, \overline x_2\vee\overline x_3 \\ x_1&=x_4\vee x_5 &⇒ &x_1\vee \overline x_4, x_1\vee\overline  x_5, x_1\vee x_4\vee x_5 \\x_0&=x_1\wedge x_2 &⇒ &\overline x_0 \vee x_1, \overline x_0\vee x_2, x_0 \vee \overline x_1 \vee \overline x_2\end{align*}</script><p>随后将$K$硬编码的输入赋值给变量$x_i$，并将输出结点对应的变量$x_0$赋值为1。</p>
<p>最后，添加恒0变量来补全每个子句到三个文字，转化完成。</p>
<h4 id="一些NPC问题的例子"><a href="#一些NPC问题的例子" class="headerlink" title="一些NPC问题的例子"></a>一些NPC问题的例子</h4><p>集合覆盖，顶点覆盖，独立集，电路可满足性，SAT，3-SAT，哈密尔顿路径，哈密尔顿环路，TSP，三维匹配，三染色，子集和，背包</p>
<p>有很多$NP$问题要么是$P$要么是$NPC$，但也有反例： FACTOR, DISCRETE-LOG, GRAPH-ISOMORPHISM……</p>
<p><strong>Theorem.</strong> 除非$P=NP$，不然就存在既不是$P$也不是$NPC$的$NP$问题。</p>
<h2 id="Chapter-7-网络流"><a href="#Chapter-7-网络流" class="headerlink" title="Chapter 7 - 网络流"></a>Chapter 7 - 网络流</h2><p>流量网络$G=(V,E,s,t,c)$</p>
<p>流和割的定义：略</p>
<h3 id="Ford-Fulkerson算法"><a href="#Ford-Fulkerson算法" class="headerlink" title="Ford-Fulkerson算法"></a>Ford-Fulkerson算法</h3><p>正向边容量减去流量，反向边全权值设为流量</p>
<p>残量网络：边集为 有剩余容量的边 和 流量非零的反向边</p>
<p>增广路：残量网络中$s-t$的一条简单路径，处理后每条边容量都减去瓶颈容量，反向边都加上瓶颈容量。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Augment(f, c, P)</span><br><span class="line">&#123;</span><br><span class="line">    b = bottleneck(P)</span><br><span class="line">    foreach e ∈ P</span><br><span class="line">    &#123;</span><br><span class="line">        if (e ∈ E) f(e) = f(e) + b</span><br><span class="line">        else f(eR) = f(eR) - b</span><br><span class="line">    &#125;</span><br><span class="line">    return f</span><br><span class="line">&#125;</span><br><span class="line">Ford-Fulkerson(G, s, t, c)</span><br><span class="line">&#123;</span><br><span class="line">    foreach e ∈ E: f(e) = 0</span><br><span class="line">    Gf = residual network of G with respect to flow f</span><br><span class="line">    </span><br><span class="line">    while (there exists an augmenting path P)</span><br><span class="line">    &#123;</span><br><span class="line">        f = Augment(f, c, P)</span><br><span class="line">        update Gf</span><br><span class="line">    &#125;</span><br><span class="line">    return f</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>时间复杂度$O(mnC)$，因为每次增广至少提升一个流量，找到一个增广路需要$O(m)$时间。由于和容量相关，FF算法对于输入规模而言并不是多项式的。</p>
<p>输入规模：$m,n,\log C$，算法可能需要进行$2C$次迭代。</p>
<h3 id="最大流与最小割"><a href="#最大流与最小割" class="headerlink" title="最大流与最小割"></a>最大流与最小割</h3><h4 id="流量引理"><a href="#流量引理" class="headerlink" title="流量引理"></a>流量引理</h4><p>$f$是任意流，$(A,B)$是任意割，那么流的大小等于割之间的流的合成量</p>
<script type="math/tex; mode=display">\begin{align*}v(f)&=\sum\limits_{e\ out\ of\ s}f(e)=f^{out}(s)=f^{out}(s)-f^{in}(s)\\&=\sum\limits_{v\in A}(f^{out}(v)-f^{in}(v))\\&=\sum\limits_{e\ out\ of\ A}f(e)-\sum\limits_{e\ into\ A}f(e)\\&=f^{out}(A)-f^{in}(A)\end{align*}</script><h4 id="弱对偶性"><a href="#弱对偶性" class="headerlink" title="弱对偶性"></a>弱对偶性</h4><p>$f$是任意流，$(A,B)$是任意割，那么流的大小至多是割的容量</p>
<script type="math/tex; mode=display">\begin{align*}v(f)&=f^{out}(A)-f^{in}(A)\\&\le f^{out}(A)\\&=\sum\limits_{e\ out\ of\ A}f(e)\\&\le \sum\limits_{e\ out\ of\ A}c_e\\&=c(A,B)\end{align*}</script><h4 id="最优性的推论"><a href="#最优性的推论" class="headerlink" title="最优性的推论"></a>最优性的推论</h4><p>$f$是任意流，$(A,B)$是任意割，如果$v(f)=c(A,B)$，那么它们分别是最大流和最小割。</p>
<ol>
<li>存在一个割$(A,B)$使得$v(f)=c(A,B)$</li>
<li>$f$是最大流</li>
<li>对于$f$，没有增广路</li>
</ol>
<p>1→2：弱对偶性的推论</p>
<p>2→3：逆否命题：如果对于$f$有增广路，那么可以增加$f$，所以$f$不是最大流</p>
<p>3→1：$f$没有增广路，$A$是残量网络中$s$可以到达的点的集合，因此$s\in A$而$t\notin A$</p>
<h3 id="Capacity-Scaling算法"><a href="#Capacity-Scaling算法" class="headerlink" title="Capacity-Scaling算法"></a>Capacity-Scaling算法</h3><p>设置一个阈值$\Delta$，初始值为$2^{\lfloor\log C\rfloor}$，每次只考虑瓶颈容量在$\Delta$以上的增广路，随后将$\Delta$折半直到为0。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Capacity-Scaling(G, s, t, c)</span><br><span class="line">&#123;</span><br><span class="line">    foreach e ∈ E: f(e) = 0</span><br><span class="line">    Δ = largest power of 2 ≤ C</span><br><span class="line">    Gf = residual network with respect to flow f</span><br><span class="line">    </span><br><span class="line">    while (Δ ≥ 1)</span><br><span class="line">    &#123;</span><br><span class="line">        Gf(Δ) = Δ-residual network of G with respect to flow f</span><br><span class="line">        while (there exists an augmenting path P in Gf(Δ))</span><br><span class="line">        &#123;</span><br><span class="line">            f = Augment(f, c, P)</span><br><span class="line">            update Gf(Δ)</span><br><span class="line">        &#125;</span><br><span class="line">        Δ = Δ / 2</span><br><span class="line">    &#125;</span><br><span class="line">    return f</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Lemma.</strong> 外层循环$1+\lfloor\log_2C\rfloor$次终止</p>
<p><strong>Lemma.</strong> $f$是每次$\Delta$缩减循环后的流，最大流的值不会超过$v(f)+m\Delta$</p>
<p><strong>Lemma.</strong> 每次缩减循环中，至多有$2m$条增广路</p>
<p>因此该算法时间复杂度$O(m^2\log C)$</p>
<h3 id="Edmonds-Karp-算法"><a href="#Edmonds-Karp-算法" class="headerlink" title="Edmonds-Karp 算法"></a>Edmonds-Karp 算法</h3><p>利用BFS找边数最少的增广路</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Edmonds-Karp(G, s, t, c)</span><br><span class="line">&#123;</span><br><span class="line">    foreach e ∈ E: f(e) = 0</span><br><span class="line">    Gf = residual network of G with respect to flow f</span><br><span class="line">    </span><br><span class="line">    while (there exists an augmenting path P in Gf)</span><br><span class="line">    &#123;</span><br><span class="line">        P = Breath-First-Search(Gf)</span><br><span class="line">        f = Augment(f, c, P)</span><br><span class="line">        update Gf</span><br><span class="line">    &#125;</span><br><span class="line">    return f</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Lemma.</strong> 最短增广路的长度不会减少</p>
<p><strong>Lemma.</strong> 至多$m$次最短路增广后，最短增广路的长度严格上升</p>
<p>找最短增广路$O(m)$，至多有$n-1$种不同的长度，对每种长度至多增广$m$次。因此该算法时间复杂度$O(m^2n)$</p>
<h3 id="Dinitz’s-算法"><a href="#Dinitz’s-算法" class="headerlink" title="Dinitz’s 算法"></a>Dinitz’s 算法</h3><ul>
<li>建立分层图$L_G$</li>
<li>从$s$开始在$L_G$中搜索，直到卡住或者到达$t$</li>
<li>如果到达$t$，增广，更新分层图，从$s$再开始</li>
<li>如果卡住，那就从分层图中删除该结点，跳回到上个结点重来</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Dinitz-Normal-Phase(Gf, s, t)</span><br><span class="line">&#123;</span><br><span class="line">    LG = level graph of Gf</span><br><span class="line">    P = empty path</span><br><span class="line">    Advance(s)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Advance(v)</span><br><span class="line">&#123;</span><br><span class="line">    if (v = t)</span><br><span class="line">        f = Augment(f, c, P)</span><br><span class="line">        remove bottleneck edges from LG</span><br><span class="line">        P = empty path</span><br><span class="line">        Advance(s)</span><br><span class="line">    if (there exists (v, w) ∈ LG)</span><br><span class="line">        add edge (v, w) to P</span><br><span class="line">        Advance(w)</span><br><span class="line">        Retreat(v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Retreat(v)</span><br><span class="line">&#123;</span><br><span class="line">    if (v = s) return</span><br><span class="line">    else</span><br><span class="line">        delete v and incident edges from LG</span><br><span class="line">        remove last edge (u, v) from P</span><br><span class="line">        Advance(u)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dinitz(G, s, t, c)</span><br><span class="line">&#123;</span><br><span class="line">    foreach e ∈ E: f(e) = 0</span><br><span class="line">    Gf = residual network of G with respect to flow f</span><br><span class="line">    </span><br><span class="line">    while (there exists an augmenting path P in Gf)</span><br><span class="line">    &#123;</span><br><span class="line">    	Dinitz-Normal-Phase(Gf, s, t)</span><br><span class="line">    &#125;</span><br><span class="line">    return f</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>每个阶段初始化需要$O(m)$的BFS；增广至多$m$次，耗时$O(mn)$；回溯至多$n$次，耗时$O(m+n)$；至多$mn$次前进，耗时$O(mn)$。</p>
<p>每个阶段耗时$O(mn)$，至多有$n-1$个阶段，因此该算法时间复杂度$O(mn^2)$</p>
<h3 id="二分图匹配"><a href="#二分图匹配" class="headerlink" title="二分图匹配"></a>二分图匹配</h3><p>原图所有边容量设为$\infty$，将二分图的一方用容量为1的边全部连接到源点，另一方用容量为1的连到汇点得到图$G’$，$G’$的最大流就是最大匹配数。</p>
<p>赫尔婚姻定理：二分图$G$两点集$L,R$大小相同。$G$有完美匹配当且仅当对于所有$L$的子集$S$都有$|N(S)|\ge|S|$。</p>
<h3 id="不相交路径"><a href="#不相交路径" class="headerlink" title="不相交路径"></a>不相交路径</h3><p>两条不共用任何边的路径是不相交路径。</p>
<p>设置每条边容量为1，也就是最多只能被一条增广路通过，最大流就是不相交的路径数量，但并不一定是简单路径。</p>
<p>$s-t$割：每条$s-t$路径都用到了其中的至少一条边</p>
<p>Menger定理：最大的$s-t$不相交路径数等于最小$s-t$割所包含的边数。</p>
<p>如果是求无向图上的不相交路径数，那就每条无向边建两条有向边代替即可。</p>
<h3 id="多源多汇"><a href="#多源多汇" class="headerlink" title="多源多汇"></a>多源多汇</h3><p>把一个超级源点用$\infty$容量的边连到所有源点上，汇点同理。</p>
<h3 id="供需网络"><a href="#供需网络" class="headerlink" title="供需网络"></a>供需网络</h3><p>图$G$中，边有容量，点有需求/产出，在circulation中为每条边赋流量，使得每个点的入流量与出流量的差值为需求/产出。</p>
<p>在图$G’$中，把超级源点用产出值为容量的边连到所有产出的点上，需求点同理。图$G$有一个circulation当且仅当图$G’$最大流为所有需求的和。</p>
<p>图$G$不存在circulation，当且仅当图的一个点分割$(A,B)$中，$A$到$B$的容量和小于$B$中点的合需求量。</p>
<p>如果有下限要求，那一开始就把供方需求+2，接收方需求-2，再拆成两条边建，权值分别为(下限)和(上限与下限的差)</p>
<h3 id="调查设计"><a href="#调查设计" class="headerlink" title="调查设计"></a>调查设计</h3><p>从超级源点到受访者建边，容量上下限是受访者可以接受的问题数量；</p>
<p>从产品到超级汇点建边，容量上下限是产品调查结果的需求数量；</p>
<p>从受访者到产品建边，容量上限为1，同一个人对同一产品只能填写一次问卷；</p>
<p>从超级汇点到超级源点建边，容量无限制。所有点的供需均为0。</p>
<p>如果找到了integer circulation，说明有可行的调查方案</p>
<h3 id="航班调度"><a href="#航班调度" class="headerlink" title="航班调度"></a>航班调度</h3><p>每个航班拆成两个点，两点之间建立一个容量上下限均为1的边。</p>
<p>源点连接每个航班的入点，源点提供$c$组乘务人员，每个航班的出点用$[0,1]$的边连接汇点，需求$c$组乘务人员。从源点到汇点连接一条$[0,c]$的边，表示闲置乘务组。</p>
<p>如果航班可以首尾相连，将前一班的出点连接到后一班的入点，容量为$[0,1]$。</p>
<p>最小化所需乘务组数量时，可以二分$c$。航班数为$k$时，时间复杂度$O(k^3\log k)$。</p>
<h3 id="图像分割"><a href="#图像分割" class="headerlink" title="图像分割"></a>图像分割</h3><p>看看就好，现在也不用网络流做图像分割。</p>
<p>相邻格点间建双向边，容量为其一为前景另一为背景的罚值；</p>
<p>从源点到每个点建边，容量是该点和前景的相似度；</p>
<p>从每个点到汇点建边，容量是该点和背景的相似度。</p>
<p>在这个图上跑最小割就OK。</p>
<h2 id="Chapter-8-随机化"><a href="#Chapter-8-随机化" class="headerlink" title="Chapter 8 - 随机化"></a>Chapter 8 - 随机化</h2><p>随机化真的是一门具有极高美学价值的艺术。</p>
<h3 id="访问调度"><a href="#访问调度" class="headerlink" title="访问调度"></a>访问调度</h3><p>如果同时有多个进程请求访问资源，那就都不能访问资源。<del>两个和尚没水喝</del></p>
<p>$n$个进程，每个进程每个时刻有$1/n$概率可以访问资源，那么不存在race condition的概率随$n$增加从$1/2$收敛到$1/e$。</p>
<p>所有进程都能在$2en\ln n$轮中完成访问的概率至少为$1-1/n$。</p>
<h3 id="全局最小割"><a href="#全局最小割" class="headerlink" title="全局最小割"></a>全局最小割</h3><p>无向图，不给源点汇点，求全局的最小割。</p>
<p>网络流解法：选一些源点，对其他所有点$v$求最小$s-v$割</p>
<p>收缩算法：随便选一条边，收缩这条边并将两个端点合并为超级顶点，删掉自环保留其他边(包含重边)，重复该过程直到只剩两个超级结点，返回此时的割。</p>
<p><strong>Theorem</strong>. 收缩算法以不低于$2/n^2$的概率给出最小割的正解</p>
<p>为了提高正确率，多跑几遍：当运行了$n^2\ln n$次时，还找不到正解的概率不超过$1/n^2$。</p>
<p>实际上，全局最小割的随机算法可以达到$O(m\log^3 n)$，甚至比最大流算法还快。</p>
<h3 id="最大3-SAT"><a href="#最大3-SAT" class="headerlink" title="最大3-SAT"></a>最大3-SAT</h3><p><strong>Claim.</strong> 给定一个有$k$个子句的3-SAT问题，随机赋值可以满足的期望子句数是$7k/8$。</p>
<p>由于是期望值，所以我们总是能通过随机生成一个满足高于$7k/8$个子句的解。于是我们持续随机，直到找到一个满足不低于$7k/8$个子句的解。</p>
<p>已被证明：除非$P=NP$，否则没有比$7/8-$渐进更高的随机渐进算法了。</p>
<h3 id="蒙特卡洛与拉斯维加斯"><a href="#蒙特卡洛与拉斯维加斯" class="headerlink" title="蒙特卡洛与拉斯维加斯"></a>蒙特卡洛与拉斯维加斯</h3><p>蒙特卡洛：能在多项式时间内跑完，但不一定给出正确结果</p>
<p>e.g. 全局最小割</p>
<p>拉斯维加斯：能保证给出正确结果，但不一定能在多项式时间内跑完</p>
<p>e.g. 随机快排，最大3-SAT算法</p>
<h3 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h3><p>中心化控制：Round-Robin给每个处理器均衡安排任务</p>
<p>分布式控制：每个任务都以一定概率随机给任何处理器</p>
<p>问题：有多大概率某个处理器过载了？</p>
<p>利用切诺夫界和布尔边界等工具分析，没有处理器接受超过$\Theta(\log n/\log \log n)$个任务的概率不低于$1-1/n$。</p>
<p><img src="https://hliangzhao.cn/static/resources/mathbasis/markov.png" style="zoom: 67%;" /></p>
<p>(切诺夫界示意图，从图片搜索引擎拿的，我也不知道对不对)</p>
<p>如果总任务数$m=16n\ln n$，那么每个处理器的负载在一半到两倍平均值的概率不低于$1-2/n$。</p>
<p><del>不知道处理器会不会过载，反正我写到这里已经过载了</del></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>CS311 人工智能 期末复习</title>
    <url>/2023/06/12/CS311_Final_Review/</url>
    <content><![CDATA[<p>$\huge\text{Outline}$</p>
<ol>
<li>人工智能概述</li>
<li>搜索</li>
<li>启发与元启发</li>
<li>对抗搜索</li>
<li>约束满足问题</li>
<li>逻辑</li>
<li>机器学习概述</li>
<li>线性回归与对数回归</li>
<li>支持向量机</li>
<li>感知机与神经网络</li>
<li>决策树与朴素贝叶斯</li>
<li>集成学习与聚类</li>
<li>强化学习</li>
<li>自然语言处理</li>
</ol>
<hr>
<h2 id="Chapter-1-人工智能概述"><a href="#Chapter-1-人工智能概述" class="headerlink" title="Chapter 1 - 人工智能概述"></a>Chapter 1 - 人工智能概述</h2><p>第一课略，大致是概念的介绍和AI发展的介绍。</p>
<h3 id="智能体"><a href="#智能体" class="headerlink" title="智能体"></a>智能体</h3><p><strong>智能体的特征</strong></p>
<ul>
<li><p>通过探测器感知环境</p>
<p>perceiving its environment through sensors</p>
</li>
<li><p>根据环境利用执行器执行操作</p>
<p>acting upon that environment through actuators</p>
</li>
</ul>
<p>智能体运行周期：感知(perceive)，思考(perceive)，行动(act)</p>
<p>智能体是Architecture和Program的互补兼容。</p>
<p><strong>Rationality的评价标准：PEAS</strong></p>
<ul>
<li>Performance</li>
<li>Environment</li>
<li>Actuators</li>
<li>Sensors</li>
</ul>
<p><strong>智能体的类型</strong></p>
<ul>
<li><p>Simple reflex agents</p>
<p>只根据当前状态决策行动，需要完全可观测环境，且正确行动只与当前观测有关。</p>
</li>
<li><p>Model-based reflex agents</p>
<p>智能机内部状态由历史观测决定，可以处理部分可观测环境</p>
<p>建立环境模型：环境如何独立演变 + 行动如何影响环境</p>
</li>
<li><p>Goal-based agents</p>
<p>拥有目标信息，考虑每种行动对接近目标的贡献</p>
</li>
<li><p>Utility-based agents</p>
<p>Utility function评估智能体性能，选择最大化期望utility的行动</p>
</li>
<li><p>Learning agents</p>
<p>Learning element：根据输入进行提升</p>
<p>Performance element：选择执行的行动</p>
<p>Critic：由固定的性能评估标准决定智能体的表现</p>
<p>Problem Generator：允许智能体进行探索</p>
</li>
</ul>
<p><strong>智能体的状态</strong></p>
<ul>
<li><p>原子表示Atomic Representation</p>
<p>每个环境状态都是不具有内部结构的黑盒</p>
<p>Search, games, Markov decision processes, hidden Markov models, etc</p>
</li>
<li><p>因子表示Factored Representation</p>
<p>每个状态都有一些属性，可以用一组变量来表示</p>
<p> Constraint satisfaction, and Bayesian networks. </p>
</li>
<li><p>结构表示Structured Representation</p>
<p>状态之间的关系可以显式表达</p>
<p>First order logic, knowledge-based learning, natural language understanding. </p>
</li>
</ul>
<h3 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h3><p><strong>环境的类型</strong></p>
<ul>
<li><p>完全可观测Fully observable/部分可观测Partially observable</p>
</li>
<li><p>确定Deterministic/随机Stochastic</p>
<p>下一步的环境是否只由Agent的行动和当前环境决定。</p>
</li>
<li><p>Episodic/Sequential</p>
<p>前者说明每一步行动不影响下一步，后者说明会影响。</p>
</li>
<li><p>静态Static/动态Dynamic</p>
<p>环境在智能体运行时是否变化(半动态：环境不变，但评分变动)</p>
</li>
<li><p>离散Discrete/连续Continuous</p>
</li>
<li><p>单智能体Single-agent/多智能体Multi-agent</p>
</li>
<li><p>已知Known/未知Unknown</p>
<p>设计者是否拥有对环境的知识</p>
</li>
</ul>
<h2 id="Chapter-2-搜索"><a href="#Chapter-2-搜索" class="headerlink" title="Chapter 2 - 搜索"></a>Chapter 2 - 搜索</h2><h3 id="搜索概述"><a href="#搜索概述" class="headerlink" title="搜索概述"></a>搜索概述</h3><p><strong>通过搜索解决问题</strong></p>
<ol>
<li><p>定义问题</p>
<p>(a)目标形式化</p>
<p>(b)问题形式化</p>
</li>
<li><p>两步解决问题</p>
<p>(a)离线搜索不同行动</p>
<p>(b)执行搜索结果</p>
</li>
</ol>
<p><strong>问题形式化</strong></p>
<ul>
<li>初始状态</li>
<li>状态：所有由初始状态，通过任意行动序列可达的状态集合(状态空间)</li>
<li>行动：对于一个状态，智能体可以执行的所有行动(行动空间)</li>
<li>转化模型：描述每个行动对当前状态造成的影响</li>
<li>目标检测：决定给定状态是否已经达到目标</li>
<li>路径开销：根据性能标准为动作序列赋上数值开销的函数</li>
</ul>
<p><strong>状态空间 vs. 搜索空间</strong></p>
<ul>
<li><p>状态空间是实际状态的集合</p>
</li>
<li><p>搜索空间是抽象成搜索树/图的可行解集合</p>
</li>
<li><p>搜索树描述了行动序列</p>
<ul>
<li><p>根节点：初始状态</p>
</li>
<li><p>分支：行动</p>
</li>
<li><p>结点：行动的结果</p>
<p>每个结点有：父节点，子节点，深度，路径开销，在状态空间对应的状态</p>
</li>
</ul>
</li>
<li><p>扩张Expand：对于给定结点，创建所有子结点的函数</p>
</li>
</ul>
<p><strong>搜索空间的三个区域</strong></p>
<ol>
<li>Explored (a.k.a. Closed List, Visited Set) </li>
<li>Frontier  (a.k.a. Ready list, Open List, the Fringe) </li>
<li>Unexplored</li>
</ol>
<p>搜索就是从3到2再到1的过程，搜索策略决定了顺序。</p>
<p><strong>搜索策略</strong></p>
<p>搜索策略由选定结点进行扩张的顺序来定义，评价标准：</p>
<ul>
<li>完备性Completeness</li>
<li>时间复杂度Time complexity</li>
<li>空间复杂度Space complexity</li>
<li>最优性Optimality</li>
</ul>
<p>时间复杂度和空间复杂度的评估：</p>
<ul>
<li>$b$ - 搜索树最大的分支数量</li>
<li>$d$ - 解的深度</li>
<li>$m$ - 状态空间的最大深度</li>
</ul>
<h3 id="无信息搜索"><a href="#无信息搜索" class="headerlink" title="无信息搜索"></a>无信息搜索</h3><p>不使用domain knowledge的搜索。</p>
<ul>
<li><p>Breadth-first search / 广度优先 / BFS</p>
<p>优先探索最浅的结点</p>
</li>
<li><p>Depth-first search / 深度优先 / DFS</p>
<p>优先探索最深的结点</p>
</li>
<li><p>Depth-limited search / 深度限制 / DLS</p>
<p>带深度限制的DFS</p>
</li>
<li><p>Iterative-deepening search / 迭代加深 / IDS</p>
<p>不断放宽深度限制(提高深度上限)的DLS</p>
</li>
<li><p>Uniform-cost search (UCS) / 统一代价 / UCS</p>
<p>优先探索开销最小的结点（参考Dijkstra）</p>
</li>
</ul>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>完备性</th>
<th>时间</th>
<th>空间</th>
<th>最优性</th>
<th>实现</th>
</tr>
</thead>
<tbody>
<tr>
<td>BFS</td>
<td>有限分支则完备</td>
<td>$O(b^d)$</td>
<td>$O(b^d)$</td>
<td>每步开销都为1则最优</td>
<td>Queue</td>
</tr>
<tr>
<td>DFS</td>
<td>有限状态空间则完备</td>
<td>$O(b^m)$</td>
<td>$O(bm)$</td>
<td>否</td>
<td>Stack</td>
</tr>
<tr>
<td>UCS</td>
<td>有限开销则完备</td>
<td>$O(b^{C^*/\epsilon})$</td>
<td>$O(b^{C^*/\epsilon})$</td>
<td>是</td>
<td>Heap</td>
</tr>
</tbody>
</table>
</div>
<p>* 其中$C^*$是最优解的开销，每一步行动至少开销$\epsilon$</p>
<h3 id="有信息搜索"><a href="#有信息搜索" class="headerlink" title="有信息搜索"></a>有信息搜索</h3><p>使用领域知识来获取关于当前状态与目标距离的信息。</p>
<h4 id="贪心BFS"><a href="#贪心BFS" class="headerlink" title="贪心BFS"></a>贪心BFS</h4><p>把到目标的估计费用$h(n)$当作唯一标准贪心搜索</p>
<h4 id="A-搜索"><a href="#A-搜索" class="headerlink" title="A*搜索"></a>A*搜索</h4><p>$f(n)=$到当前结点的费用$g(n)$+当前结点到目标的估计费用$h(n)$</p>
<p>$f(n)$是经过结点$n$的最优路径费用的估值</p>
<p>完备性：是</p>
<p>时间复杂度：指数级</p>
<p>空间复杂度：每个结点都在内存里，最大的问题</p>
<p>最优性：是</p>
<h4 id="可接受的启发函数-Admissible-heuristics"><a href="#可接受的启发函数-Admissible-heuristics" class="headerlink" title="可接受的启发函数(Admissible heuristics)"></a>可接受的启发函数(Admissible heuristics)</h4><p>如果启发式函数从不高估到达目标的费用，那么就是可接受的(admissible)，并且使用该启发式函数的A*得到的解是最优的。</p>
<p>证明：</p>
<ul>
<li><p>Suppose $G_o$ is the optimal goal.</p>
<p>Suppose $G_s$ is some suboptimal goal.</p>
<p>Suppose $n$ is on the shortest path to $G_o$. </p>
</li>
<li><p>$f(G_s) = g(G_s)$ since $h(G_s) = 0$</p>
<p>$f(G_o ) = g(G_o )$ since $h(G_o ) = 0$</p>
<p>$g(G_s)&gt;g(G_o )$ since $G_s$ is suboptimal</p>
</li>
<li><p>Then $f(G_s) &gt; f(G_o ) . . . (1)$</p>
<p>$h(n)\le h^*(n)$ since h is admissible</p>
<p>$g(n)+h(n)\le g(n)+h^* (n) = g(G_o ) = f(G_o )$</p>
<p>Then $f(n) \le f(G_o ) . . . (2)$</p>
</li>
<li><p>From (1) and (2) $f(G_s)&gt;f(n)$, so A* will never select $G_s$ during the search and hence A* is optimal.</p>
</li>
</ul>
<h4 id="IDA-搜索"><a href="#IDA-搜索" class="headerlink" title="IDA*搜索"></a>IDA*搜索</h4><p>把迭代加深方法加到A*搜索上。</p>
<h3 id="局部搜索"><a href="#局部搜索" class="headerlink" title="局部搜索"></a>局部搜索</h3><p>不关心到目标的路径，优化问题可以使用局部搜索。</p>
<p>只维护当前状态，并通过移动到相邻状态，试图优化。</p>
<ul>
<li>不需要维护搜索树</li>
<li>内存占用小</li>
<li>在连续或较大的状态空间中找到较好解</li>
</ul>
<h4 id="爬山算法"><a href="#爬山算法" class="headerlink" title="爬山算法"></a>爬山算法</h4><p>贪心局部搜索，只选择最优的邻居进行探索，到达峰值时停止(可能是局部峰值)</p>
<p>每个结点代表一个状态和一个值</p>
<p>变种：</p>
<ul>
<li>Sideways moves 允许转移到与当前状态同等优的解</li>
<li>Random-restart 多试几次取最优</li>
<li>Stochastic 随机选择不同的上坡算子</li>
</ul>
<p>改进：</p>
<ul>
<li>Hill climbing：取决于地形，多重开几次还是不错的</li>
<li>Local beam search：同时维护前k优的解，探索其邻居</li>
<li>Stochastic beam search：随机选择k个解(不一定是前k优)，探索其邻居</li>
</ul>
<h4 id="遗传算法"><a href="#遗传算法" class="headerlink" title="遗传算法"></a>遗传算法</h4><p>Stochastic beam search的变种。</p>
<p>自然选择，种群，个体，基因，健壮函数，交叉互换，后代，变异</p>
<h4 id="模拟退火"><a href="#模拟退火" class="headerlink" title="模拟退火"></a>模拟退火</h4><p>温度指数级下降，以一定概率接受较劣解，温度越高跳出当前解的可能性越高。</p>
<p>接受概率：$P = e^{-\Delta E/T}$</p>
<h2 id="Chapter-3-启发与元启发"><a href="#Chapter-3-启发与元启发" class="headerlink" title="Chapter 3 - 启发与元启发"></a>Chapter 3 - 启发与元启发</h2><h3 id="启发式函数进阶"><a href="#启发式函数进阶" class="headerlink" title="启发式函数进阶"></a>启发式函数进阶</h3><h4 id="启发式函数与效率"><a href="#启发式函数与效率" class="headerlink" title="启发式函数与效率"></a>启发式函数与效率</h4><p>如果一个启发式函数始终不小于另一个启发式函数，称其为dominate，前者拥有更好的效率。好的启发式函数可以降低$b^\star$，分支数量化了启发式搜索的效率。</p>
<p>对于一堆admissible的启发式函数$\{h_i\}$，能够dominate所有函数的是$\max\{h_i\}$。</p>
<h4 id="好的启发式函数上哪找？"><a href="#好的启发式函数上哪找？" class="headerlink" title="好的启发式函数上哪找？"></a>好的启发式函数上哪找？</h4><ol>
<li>从放宽条件的问题入手，例如8-puzzle允许块之间重叠，得到的步数总是要比原问题少的。</li>
<li>从子问题入手，例如8-puzzle只把一部分块归位而不管其他的。该问题中，函数$h_{\text{sub}}$(只考虑四块的启发式函数极大值并集)是dominate函数$h_{1step}$的。</li>
<li>根据经验生成，可以选定当前状态的几个特征作为变量，用神经网络/决策树来学这些变量对应的权重，用线性函数表示启发式函数</li>
</ol>
<h3 id="元启发式函数进阶"><a href="#元启发式函数进阶" class="headerlink" title="元启发式函数进阶"></a>元启发式函数进阶</h3><p>与问题相互独立的启发式方法，可以组合使用。</p>
<blockquote>
<p>One general law, leading to the advancement of all organic beings, namely, multiply, vary, let the strongest live and weakest die.</p>
<p>Charles Darwin, The Origin of Species</p>
</blockquote>
<p>演化计算：繁殖，变异，选择</p>
<h2 id="Chapter-4-对抗搜索"><a href="#Chapter-4-对抗搜索" class="headerlink" title="Chapter 4 - 对抗搜索"></a>Chapter 4 - 对抗搜索</h2><h3 id="Minimax搜索"><a href="#Minimax搜索" class="headerlink" title="Minimax搜索"></a>Minimax搜索</h3><p>其中某一方，按照双方都足够聪明的情况进行DFS(DLS)，从搜索树所有分支中选择对各自最优的。</p>
<p>在可以搜索到终局的情况下，对于一个状态$s$，minimax函数：</p>
<script type="math/tex; mode=display">f(s)=\left\{\begin{align*}&\text{Utility(s)}&\text{if Terminal-test(s)}\\ &\max_{a\in\text{Actions(s)}}f(\text{Result(s,a)})&\text{if Player(s)=MAX}\\&\min_{a\in\text{Actions(s)}}f(\text{Result(s,a)})&\text{if Player(s)=MIN}\end{align*}\right.</script><p>然而博弈是有时限的，指数级时间复杂度不可能搜完，所以：</p>
<ul>
<li>将终局评估改成非终局评估</li>
<li>使用迭代加深搜索IDS</li>
<li>剪枝</li>
</ul>
<h3 id="alpha-beta-剪枝"><a href="#alpha-beta-剪枝" class="headerlink" title="$\alpha-\beta$ 剪枝"></a>$\alpha-\beta$ 剪枝</h3><p>$\alpha$：$\text{MAX}$结点目前已经探索的结点中最大的一个。当前结点不会探索比$\alpha$估值还低的结点。</p>
<p>$\beta$：$\text{MIN}$结点目前已经探索的节点中最小的一个。当前结点不会探索比$\beta$估值还高的结点。</p>
<h4 id="什么时候要剪呢？"><a href="#什么时候要剪呢？" class="headerlink" title="什么时候要剪呢？"></a>什么时候要剪呢？</h4><p>$\text{MAX}$视角：$\text{MIN}$在再下一步的结点中，发现了比$\alpha$还低的值，那$\text{Min}$肯定会选这个分支，导致$\text{MAX}$的估值小于$\alpha$，为了避免这种局面，当下一层的$\text{MIN}$发现了一个比$\alpha$还小的值时，说明对手足够聪明的情况下，$\text{MAX}$在这一分支会被对手限制到不如$\alpha$的局面，剪掉。</p>
<p>$\text{MIN}$视角：$\text{MAX}$在再下一步的结点中，发现了比$\beta$还大的值，那$\text{MAX}$肯定会选这个分支，导致$\text{MIN}$的估值大于$\beta$，为了避免这种局面，当下一层的$\text{MAX}$发现了一个比$\beta$还大的值时，说明对手足够聪明的情况下，会选择这个新的分支规避$\beta$的限制，故剪掉。</p>
<h4 id="“自裁式”实现"><a href="#“自裁式”实现" class="headerlink" title="“自裁式”实现"></a>“自裁式”实现</h4><p>上面的说法更像是当前结点主动剪子结点。但还有一种“自裁式”的剪法，就是某个结点发现自己太好了，肯定会被足够聪明的上一层剪掉，就自裁了。</p>
<p>搜索的时候，父结点把自己的$\alpha-\beta$给子结点，探索完一个子结点后，做如下操作：</p>
<p>当前节点是$\text{MAX}$，如果$\text{MIN}$子结点给出的估值比当前最高的还高，那就检查有没有超过当前节点的$\beta$，如果超过了当前节点的$\beta$，说明当前这一支太好了，会被更高层的$\text{MIN}$掐掉，所以这个$\text{MAX}$结点就被整个剪掉了；如果没超过$\beta$而且还比当前最高还高，那就更新当前的最高值和$\alpha$。</p>
<p>当前节点是$\text{MIN}$时同理，如果这个$\text{MIN}$结点能把最优解掐到不足$\alpha$，那$\text{MIN}$结点的$\text{MAX}$父节点肯定不乐意啊，所以一整个$\text{MIN}$结点就被剪掉了。</p>
<p><img src="https://s2.loli.net/2023/06/13/TnYsVXi8B56aeuJ.png" alt="image.png"></p>
<center>Minimax搜索伪代码</center>

<h4 id="换序剪枝"><a href="#换序剪枝" class="headerlink" title="换序剪枝"></a>换序剪枝</h4><p>$\alpha-\beta$ 剪枝的效果受访问顺序影响，有可能导致剪枝的结点最后才被访问，这就剪了个寂寞。</p>
<p>最差的顺序相当于没有剪枝，复杂度是$O(b^m)$。</p>
<p>最好的顺序则是把最“聪明”的结点都放在最先访问，实际复杂度是$O(b^{m/2})$，直接开了个根号。</p>
<p>如何找到一个好的顺序呢？除了动用领域知识，还可以保存历史表，以前发现最好的几步可能在之后还是最好的几步，或是保存状态以供重复时使用。</p>
<h4 id="实际情况"><a href="#实际情况" class="headerlink" title="实际情况"></a>实际情况</h4><p>上面的$\alpha-\beta$剪枝伪代码还是要一直搜到叶子结点，依然是不现实的，所以将$\text{Util(s)}$函数更换为可以评价中局的启发式函数$\text{eval(s)}$。</p>
<h3 id="期望Minimax搜索"><a href="#期望Minimax搜索" class="headerlink" title="期望Minimax搜索"></a>期望Minimax搜索</h3><p>对于带有随机性的博弈，期望Minimax搜索在$\text{MIN}$和$\text{MAX}$之外又加入了$\text{Chance}$层，会返回当前所有可能发生的情况合起来的期望。</p>
<script type="math/tex; mode=display">f(s)=\left\{\begin{align*}&\text{Utility(s)}&\text{if Terminal-test(s)}\\ &\max_{a\in\text{Actions(s)}}f(\text{Result(s,a)})&\text{if Player(s)=MAX}\\&\min_{a\in\text{Actions(s)}}f(\text{Result(s,a)})&\text{if Player(s)=MIN}\\&\sum\limits_{r}P(r)f(\text{Result(s,r)})&\text{if Player(s)=Chance}\end{align*}\right.</script><p>其中$r$代表了所有的随机事件。</p>
<h2 id="Chapter-5-约束满足问题"><a href="#Chapter-5-约束满足问题" class="headerlink" title="Chapter 5 - 约束满足问题"></a>Chapter 5 - 约束满足问题</h2><h3 id="CSP概述"><a href="#CSP概述" class="headerlink" title="CSP概述"></a>CSP概述</h3><p>也是搜索问题，但是我们更关心目标本身。</p>
<p>CSP的状态是因子表示的，也就是由一组变量表示。</p>
<p>一个目标测试(goal test)是对于这组变量(的子集)的一组限制。</p>
<p><strong>CSP问题的三个要素</strong></p>
<ol>
<li>变量集合$X$</li>
<li>变量定义域的集合$D$</li>
<li>约束的集合$C$</li>
</ol>
<p>CSP的解：在定义域$D$中，对变量$X$找到一个合适的赋值方案$s$，满足所有的约束$C$。这样的解称为一致的赋值(consistent assignment)。</p>
<p>变量类型：离散/连续</p>
<p>限制类型：一元(unary)，二元(binary)，全局(global)，偏好/软限制(preferences/soft constraints)</p>
<h3 id="解决CSP"><a href="#解决CSP" class="headerlink" title="解决CSP"></a>解决CSP</h3><p>暴力太慢，配合推理(inference)和搜索(search)来加速。</p>
<p>Inference主要是约束传播(constraint propagation)，是指一个变量的合法取值变少时，其他变量的合法取值也会变少。</p>
<p>Search的DFS和BFS都是老朋友了，新来了个BTS。</p>
<p>回溯搜索(Backtracking search, BTS)也是一种DFS，满足以下条件：</p>
<ul>
<li>一次赋一个变量的值：赋值顺序是可交换的</li>
<li>赋值的时候就注意和之前的赋值不能冲突</li>
</ul>
<p><del>感觉和DFS没区别啊= =</del></p>
<h3 id="改进BTS的三种方法"><a href="#改进BTS的三种方法" class="headerlink" title="改进BTS的三种方法"></a>改进BTS的三种方法</h3><h4 id="最小剩余值-Minimum-Remaining-Value"><a href="#最小剩余值-Minimum-Remaining-Value" class="headerlink" title="最小剩余值(Minimum Remaining Value)"></a>最小剩余值(Minimum Remaining Value)</h4><p>Q：先给哪个变量赋值？</p>
<blockquote>
<p>先挑硬柿子捏</p>
</blockquote>
<p>每次挑剩余选择最少的结点赋值。</p>
<h4 id="最小限制值-Least-Constraining-Value"><a href="#最小限制值-Least-Constraining-Value" class="headerlink" title="最小限制值(Least Constraining Value)"></a>最小限制值(Least Constraining Value)</h4><p>Q：给这个变量赋哪个值？</p>
<blockquote>
<p>少给后人添麻烦</p>
</blockquote>
<p>每次挑对别人限制最少的结点赋值。</p>
<h4 id="前向检查-Forward-Checking"><a href="#前向检查-Forward-Checking" class="headerlink" title="前向检查(Forward Checking)"></a>前向检查(Forward Checking)</h4><p>Q：世界末日是可预见的吗？</p>
<blockquote>
<p>关心每个人的未来</p>
</blockquote>
<p>每次赋值后检查所有未赋值变量定义域是否为空。</p>
<p>在前向检查的时候用到了约束传播的思想，用已赋值的变量去限制未赋值的变量，看还有没有合法赋值，不过这里并不做未赋值变量之间的检查。</p>
<h3 id="一致性"><a href="#一致性" class="headerlink" title="一致性"></a>一致性</h3><h4 id="点一致性-一元限制"><a href="#点一致性-一元限制" class="headerlink" title="点一致性(一元限制)"></a>点一致性(一元限制)</h4><p>如果一个点的定义域内所有的值都满足所有的一元限制，那它拥有点一致性</p>
<h4 id="弧一致性-二元限制"><a href="#弧一致性-二元限制" class="headerlink" title="弧一致性(二元限制)"></a>弧一致性(二元限制)</h4><p>两个变量$X\rightarrow Y$具有弧一致性，当且仅当对$X$的每个值都有对应的$Y$的值满足二元条件。</p>
<p><strong>弧一致性检验</strong></p>
<p>AC-3算法，复杂度$O(n^2d^3)$。</p>
<p>$\text{REVISE()}$函数根据给定的两个变量，将第一个变量定义域中找不到第二个变量定义域对应值的值删掉，只有删了至少一个值的时候才会返回真，说明需要对前者的邻居再进行$\text{REVISE}$，复杂度$O(d^2)$，$d$是定义域大小。</p>
<p>$\text{AC-3()}$函数维护一个初始包含所有弧的队列，每次取出一个做$\text{REVISE}$，如果前变量的定义域缩小了，那就用它接着更新它的其他邻居，直到所有弧都出队(被满足)，或是有一个点的定义域被删干净了(不满足)。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">function AC-3(csp)</span><br><span class="line">returns False if an inconsistency is found, True otherwise</span><br><span class="line">inputs: csp, a binary CSP with components (X, D, C)</span><br><span class="line">local variables: queue, a queue of arcs, initially all the arcs in csp</span><br><span class="line">while queue is not empty do</span><br><span class="line">    (Xi, Xj) = REMOVE-FIRST(queue)</span><br><span class="line">    if REVISE(csp, Xi, Xj)then</span><br><span class="line">        if size of Di = 0 then return False</span><br><span class="line">        for each Xk in Xi.NEIGHBORS- &#123;Xj&#125; do</span><br><span class="line">            add (Xk,Xi) to queue</span><br><span class="line">return true</span><br><span class="line"></span><br><span class="line">function REVISE(csp, Xi, Xj)</span><br><span class="line">returns True if we revise the domain of Xi</span><br><span class="line">revised = False</span><br><span class="line">for each x in Di do</span><br><span class="line">    if no value y in Dj allows (x, y) to satisfy the constraint between Xi and Xj then</span><br><span class="line">        delete x from D;</span><br><span class="line">        revised = True</span><br><span class="line">return revised</span><br></pre></td></tr></table></figure>
<h4 id="路径一致性-多元限制"><a href="#路径一致性-多元限制" class="headerlink" title="路径一致性(多元限制)"></a>路径一致性(多元限制)</h4><p>弧一致性的多元推广。</p>
<h2 id="Chapter-6-逻辑"><a href="#Chapter-6-逻辑" class="headerlink" title="Chapter 6 - 逻辑"></a>Chapter 6 - 逻辑</h2><p><del>经过了数理逻辑导论和离散数学的洗礼</del>我觉得这部分还是得复习一下，至少要知道Resolution和Forward/Backward Chaining怎么证。</p>
<h3 id="铺垫"><a href="#铺垫" class="headerlink" title="铺垫"></a>铺垫</h3><p>原子命题，复合命题，逻辑算符，重言式与矛盾式</p>
<p>Inference: Modus Ponens</p>
<p>Common Rules: Addition, Simplification, Disjunctive-syllogism, Hypothetical-syllogism</p>
<p>Entailment, Semantics: KB ⊨ α</p>
<p>Inference, Syntax: KB ⊢ α</p>
<p> Sound &amp; Complete, Validity &amp; Satisfiability </p>
<h3 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h3><p>使用Resolution rule：一堆$\vee$连接的文字中的某个文字的否命题与其同时成立，则可以将该文字剔除。</p>
<script type="math/tex; mode=display">l_1\vee\cdots\vee l_k\quad \overline{l_i}\over l_1\vee\cdots\vee l_{i-1}\vee l_{i+1}\vee\cdots\vee l_k</script><p>一般转成合取范式(CNF)再用Resolution rule。</p>
<h3 id="Forward-Backward-chaining"><a href="#Forward-Backward-chaining" class="headerlink" title="Forward / Backward chaining"></a>Forward / Backward chaining</h3><p>在霍恩子句上用Modus Ponens。</p>
<p>前向链接：把已知逻辑式塞到所有规则的前提里，把结论塞回知识库，直到解决问题。对命题逻辑是完备的。</p>
<ul>
<li>数据驱动，自动化，无意识推理</li>
<li>可能做很多无用功</li>
</ul>
<p>后向链接：为了得到问题的结论，需要得到问题的前提，递归证明前提。可以做记忆化。时间上是线性的，对霍恩子句是完备的。</p>
<ul>
<li>目标驱动，适用于解决问题</li>
<li>复杂度会远远小于$O(|\text{Knowledge Base}|)$</li>
</ul>
<p><del>一阶逻辑？ Nobody cares(</del></p>
<h2 id="Chapter-7-机器学习概述"><a href="#Chapter-7-机器学习概述" class="headerlink" title="Chapter 7 - 机器学习概述"></a>Chapter 7 - 机器学习概述</h2><blockquote>
<p>A computer program is said to learn from experience E with respect to some class of tasks T and performance measure P, if its performance at tasks in T, as measured by P, improves with experience E.</p>
<p>Tom Mitchell. Machine Learning 1997.</p>
</blockquote>
<h3 id="无监督学习"><a href="#无监督学习" class="headerlink" title="无监督学习"></a>无监督学习</h3><p>无监督学习：训练样本没有标签</p>
<p>应用：聚类，切割</p>
<p>算法：K-means, Gaussian mixtures, hierarchical clustering, spectral clustering, etc.</p>
<h3 id="监督学习"><a href="#监督学习" class="headerlink" title="监督学习"></a>监督学习</h3><p>监督学习：训练样本带有对应的标签</p>
<p>应用：分类(样本→离散)，回归(样本→连续)</p>
<p>分类算法：Support Vector Machines, neural networks, decision trees, K-nearest neighbors, naïve Bayes, etc.</p>
<h3 id="K近邻"><a href="#K近邻" class="headerlink" title="K近邻"></a>K近邻</h3><p>两个相似的样本应该拥有相同的标签。</p>
<p>每个样本视为$d$维空间的点，距离用欧氏距离表示。</p>
<p>训练算法：直接把样本和标签丢到训练集就行</p>
<p>分类算法：给定一个测试样本，看看距离它最近的$k$个样本标签是什么，哪个标签样本数多，测试样本就被分到哪个标签。</p>
<p>优点：</p>
<ul>
<li>简单</li>
<li>实际效果好</li>
<li>不需要建立模型，或者做假设，又或者调参</li>
<li>有新样本很快就扩展了</li>
</ul>
<p>缺点：</p>
<ul>
<li>需要很大的空间来存整个训练集</li>
<li>慢，给定$n$样本$d$特征，需要$O(nd)$才能跑出来</li>
<li>维数灾难：样本分布位于中心附近的概率，随着维度的增加，越来越低；而样本处在边缘的概率，则越来越高。</li>
</ul>
<h3 id="Train-Validation-and-Test"><a href="#Train-Validation-and-Test" class="headerlink" title="Train, Validation and Test"></a>Train, Validation and Test</h3><p>样本内误差：</p>
<script type="math/tex; mode=display">E^{\text{train}}(f) = \sum\limits_{i=1}^n \text{loss}(y_i,f(x_i))</script><p>损失函数$\text{loss()}$可以是分类误差(不一样时1)，也可以是均方误差(差值平方和)</p>
<p>目标是最小化训练误差，同时希望样本外误差(测试误差)最小。</p>
<h3 id="过拟合和欠拟合"><a href="#过拟合和欠拟合" class="headerlink" title="过拟合和欠拟合"></a>过拟合和欠拟合</h3><p><img src="https://s2.loli.net/2023/06/13/DzvuyEiZMP172UW.png" alt="image.png" style="zoom:50%;" /></p>
<p>这幅图蛮重要的，嗯。</p>
<p><strong>如何避免过拟合？</strong></p>
<ul>
<li>减少特征数量：特征选择</li>
<li>模型选择</li>
<li>正则化(regularization)：削弱部分特征的重要程度</li>
<li>做交叉验证(cross-validation)，检验测试误差</li>
</ul>
<p><strong>正则化</strong></p>
<p>最小化：$\sum_{i=1}^{n} \operatorname{loss}\left(y_{i}, f\left(x_{i}\right)\right)+C \times R(f)$</p>
<p>目标是避免高阶多项式的出现</p>
<h3 id="Train-Validation-and-Test-1"><a href="#Train-Validation-and-Test-1" class="headerlink" title="Train, Validation and Test"></a>Train, Validation and Test</h3><p>把数据集分成三部分，训练集给样本给标签，验证集给样本看结果用来调参，测试集用来评估最终性能。</p>
<h4 id="K-fold交叉验证"><a href="#K-fold交叉验证" class="headerlink" title="K-fold交叉验证"></a>K-fold交叉验证</h4><p>把数据集分成等大的$k$个子集，每次把其中一个挑出来用来当测试集算误差，最后把所有的误差再加起来。</p>
<h4 id="混淆矩阵-Confusion-matrix"><a href="#混淆矩阵-Confusion-matrix" class="headerlink" title="混淆矩阵(Confusion matrix)"></a>混淆矩阵(Confusion matrix)</h4><div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>Actual</th>
<th>Label</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Predicted</strong></td>
<td>True Positive</td>
<td>False Positive</td>
</tr>
<tr>
<td><strong>Label</strong></td>
<td>False Negative</td>
<td>True Negative</td>
</tr>
</tbody>
</table>
</div>
<p><strong>Accuracy</strong>: $\text{(TP+TN)/Total}$</p>
<p><strong>Precision</strong>:  $\text{TP/(TP+FP)}$</p>
<p><strong>Sensitivity</strong>:  $\text{TP/(TP+FN)}$</p>
<p><strong>Specificity</strong>:  $\text{TN/(TN+FP)}$</p>
<h2 id="Chapter-8-线性回归与对数回归"><a href="#Chapter-8-线性回归与对数回归" class="headerlink" title="Chapter 8 - 线性回归与对数回归"></a>Chapter 8 - 线性回归与对数回归</h2><h3 id="线性回归"><a href="#线性回归" class="headerlink" title="线性回归"></a>线性回归</h3><p>$f(x) = \beta_0 + \sum\limits_{j=1}^d \beta_jx_j$，其中$\beta_j\in \mathbb R,\ j\in \{1,\cdots,d\}$</p>
<p>学习线性模型其实就是学习$\beta$。</p>
<p>最小化损失函数$R$：</p>
<script type="math/tex; mode=display">R=\frac{1}{2n}\sum\limits_{i=1}^n(y_i-f(x_i))^2=\left.\frac{1}{2 n} \sum_{i=1}^{n}\left(y_{i}-\beta_{0}-\sum_{j=1}^{d} \beta_{j} x_{i j}\right)\right)^{2}</script><p>如果用矩阵形式表示：</p>
<p><img src="https://s2.loli.net/2023/06/13/LYKqpsglET7nU3W.png" alt="image.png" style="zoom: 50%;" /></p>
<h4 id="正规方程"><a href="#正规方程" class="headerlink" title="正规方程"></a>正规方程</h4><p>我们有$R(\beta) = \frac{1}{2n}||(y-X\beta)||^2 = \frac{1}{2n}(y-X\beta)^T(y-X\beta)$，求偏导有</p>
<script type="math/tex; mode=display">\frac{\partial R}{\partial \beta}=-\frac{1}{n}X^T(y-X\beta),\ \frac{\partial^2R}{\partial \beta^2}=\frac{1}{n}X^TX</script><p>二阶偏导为正，说明正定，令一阶偏导为0求得$\beta_\min = (X^TX)^{-1}X^Ty$</p>
<p>优点：不用定义收敛率，也不用迭代</p>
<p>缺点：需要保证$X^TX$可逆；当维数$d$很高的时候求逆是$O(d^3)$的，很慢。</p>
<h4 id="梯度下降"><a href="#梯度下降" class="headerlink" title="梯度下降"></a>梯度下降</h4><p>同时让$\beta$的每个分量沿着梯度下降：</p>
<p>$\beta_i = \beta_i-\alpha \frac{\partial R}{\partial \beta_i}$，其中$\alpha$是学习率。</p>
<p>优点：高维依然很管用</p>
<p>缺点：需要迭代，有时候迭代很多代才收敛；需要调参$\alpha$</p>
<h4 id="实际考虑"><a href="#实际考虑" class="headerlink" title="实际考虑"></a>实际考虑</h4><ul>
<li>一般会把数据做个归一化，把数据变小点</li>
<li>学习率不能太大，也不能太小</li>
<li>损失函数应该随着迭代递减</li>
<li>如果优化程度在$\epsilon$之内说明收敛了</li>
<li>什么时候$X^TX$不可逆？<ul>
<li>样本过少，特征过多</li>
<li>特征之间线性相关</li>
</ul>
</li>
</ul>
<h3 id="对数回归"><a href="#对数回归" class="headerlink" title="对数回归"></a>对数回归</h3><p>做分类，线性回归也不是不行，只是表现一般，而且预测值有时候又不在$[0, 1]$之间。</p>
<p>对数回归不是一个回归方法，而是一个分类方法，虽然怪怪的但是课件原话。</p>
<script type="math/tex; mode=display">g(x) = \text{SIGMOID}(z) = \frac{e^z}{1+e^z}</script><p><img src="https://s2.loli.net/2023/06/13/xFzXuBYUosTMe4w.png" alt="image.png" style="zoom:50%;" /></p>
<p>对数回归用的$f$就不太一样了，相当于是把输出映射到了$[0,1]$</p>
<script type="math/tex; mode=display">f(x)=g(\beta_0+\sum\limits_{j=1}^d\beta_jx_j),\ R=\frac{1}{2n}\sum\limits_{i=1}^n(y_i-f(x_i))^2</script><p>分类的时候，离哪边近就分到哪边。</p>
<p>旧损失函数$\text{Loss}=\frac 1 2(f(x)-y)^2$这个时候就不是简单的二次函数了，可能有很多局部最优，所以对旧损失函数的梯度下降寄了。为了全局最优，对损失使用凸函数罢！</p>
<script type="math/tex; mode=display">\text{Cost}(f(x),y)=\left\{\begin{align*}&-\log(f(x))\quad&\text{if } y = 1\\&-\log(1-f(x))\quad&\text{if } y = 0\end{align*}\right.</script><p>所以有损失函数：</p>
<script type="math/tex; mode=display">\text{Loss}(f(x),y)=-y\log(f(x))-(1-y)\log(1-f(x))</script><script type="math/tex; mode=display">R(\beta)=\frac{1}{n}\sum\limits_{i=1}^n\text{Loss}_i</script><p>好了，我们又可以梯度下降了。</p>
<h2 id="Chapter-9-支持向量机"><a href="#Chapter-9-支持向量机" class="headerlink" title="Chapter 9 - 支持向量机"></a>Chapter 9 - 支持向量机</h2><h3 id="线性模型"><a href="#线性模型" class="headerlink" title="线性模型"></a>线性模型</h3><p>线性模型的分类靠超平面：$f(x)=\left \langle w,x\right \rangle+b=0$</p>
<p>支持向量机要求所有点都在正负超平面之外(含超平面)，正负超平面：$\left \langle w,x\right \rangle+b=±c$</p>
<p> 不过我们可以通过放缩变成：$\left \langle w,x\right \rangle+b=±1$</p>
<p>在正负超平面上的俩决策临界点连线垂直三个超平面，所以有$x^+-x^-=\lambda w$</p>
<p>又有$\lambda=\frac{2}{||w||_2^2}$，正负超平面之间的距离就是$M=\frac 2 {||w||_2}$</p>
<p>现在的目标就是最大化$M$，满足</p>
<script type="math/tex; mode=display">\left \langle w,x_i\right \rangle+b\left\{\begin{align*}&\ge 1\quad &\text{if } y_i&=1\\&\le -1\quad &\text{if } y_i&=-1\end{align*}\right.</script><p>再换句话，就是求$w,b$来达到$\min\limits_w\frac{||w||^2_2}{2}$，条件是$y_i(\left \langle w,x_i\right \rangle+b)\ge 1$</p>
<p><del>过程太复杂不想写了aaaaa</del></p>
<p>等明天醒了补！</p>
<p><strong>解题步骤</strong></p>
<ul>
<li>解对偶优化问题，算出$\alpha^\star$</li>
<li>用$\alpha^\star$算出$w(\alpha^\star)$和$b(\alpha^\star)$</li>
<li>用这个式子分类：$\text{sign}(\sum\limits_{i=1}^n\alpha_i^\star y_ik(x_i,x)+b(\alpha^\star))$</li>
</ul>
<h3 id="非线性模型"><a href="#非线性模型" class="headerlink" title="非线性模型"></a>非线性模型</h3><p>把输入空间映射到特征空间，特征空间维数越高，数据越可能线性可分。</p>
<p>映射完之后该咋做咋做就好了，映射用的函数叫核函数。</p>
<p>线性核，多项式核，高斯核</p>
<h2 id="Chapter-10-感知机与神经网络"><a href="#Chapter-10-感知机与神经网络" class="headerlink" title="Chapter 10 - 感知机与神经网络"></a>Chapter 10 - 感知机与神经网络</h2><h3 id="感知机"><a href="#感知机" class="headerlink" title="感知机"></a>感知机</h3><p>$f(x_i)=\text{sign}(\sum\limits_{j=0}^dw_jx_{ij})$</p>
<p>如果数据线性可分那就好办，否则不收敛</p>
<p>从一个随机的超平面开始，用训练数据来调整的迭代方法</p>
<p>发现$y_if(x_i)\le 0$时，更新全部$w_j=w_j+y_ix_{ij}$</p>
<p>感性理解，就是把每个分量拉回来对应的$x$值</p>
<p>$w_j$决定了$x_j$对结果的权重，可能得到很多解</p>
<h3 id="神经网络"><a href="#神经网络" class="headerlink" title="神经网络"></a>神经网络</h3><p>感知机用的是分段函数，换成SIGMOID，也可以换成别的激活函数比如tanh</p>
<p>简单的例子：用OR，NAND，AND感知机拼成XOR网络</p>
<h4 id="反向传播算法"><a href="#反向传播算法" class="headerlink" title="反向传播算法"></a>反向传播算法</h4><p>明天醒的时候再看</p>
<h2 id="Chapter-11-决策树和朴素贝叶斯"><a href="#Chapter-11-决策树和朴素贝叶斯" class="headerlink" title="Chapter 11 - 决策树和朴素贝叶斯"></a>Chapter 11 - 决策树和朴素贝叶斯</h2><h3 id="决策树"><a href="#决策树" class="headerlink" title="决策树"></a>决策树</h3><p>还是做分类的。不需要实数输入，所以不需要数值化特征。</p>
<ol>
<li>主要的决策：下一个用哪个标准分类？</li>
<li>用同质性作为衡量标准：如果分类两边样本数量相等同质性最高，如果分完只剩一类了那就最低。</li>
<li>熵函数 $\text{Entropy}(S)=-p_+\log p_+ -p_-\log p_-$是个关于x=0.5对称的凸函数</li>
</ol>
<p>收获函数$\text{Gain}(S,A)=\text{Entropy}(S)-\sum\limits_{v\in\text{Value(A)}}\frac{|S_v|}{|S|}\text{Entropy}(S_v)$</p>
<p>把子结点人数占比作为权重，子结点熵值作为权值，父节点熵值减去子结点熵值的加权平均就是熵值收获。</p>
<p>很容易过拟合，两种解法：要么别长出来，要么先长出来再剪(这个更好，用一个验证集检验剪枝后有没有比之前更差)。</p>
<p><strong>CART</strong>用$Gini=1-p_+^2-p_-^2$代替信息熵。</p>
<p><strong>实际问题</strong></p>
<ul>
<li>先降维，保留特征性最强的特征</li>
<li>用集成方法：随机森林</li>
<li>先均衡数据集：对主要数据欠采样，对少数数据过采样</li>
</ul>
<p><strong>优点</strong>：</p>
<ul>
<li>简单可解释</li>
<li>可以转成分类规则</li>
<li>对于分类数据很好</li>
<li>构造简单</li>
<li>不用归一化数据</li>
</ul>
<p><strong>缺点</strong>：</p>
<ul>
<li>不稳定，一个样本不同树可能就不同</li>
<li>单变量，不处理组合特征</li>
<li>某些结点的选择可能取决于之前的选择</li>
<li>需要平衡数据</li>
</ul>
<h3 id="朴素贝叶斯"><a href="#朴素贝叶斯" class="headerlink" title="朴素贝叶斯"></a>朴素贝叶斯</h3><script type="math/tex; mode=display">p(A|B)=\frac{p(B|A)*p(A)}{p(B)}=\frac{p(B|A)*p(A)}{p(B|\overline A)p(\overline A)+p(B|A)*p(A)}</script><p>希望通过$p(y|x)$来找到$f(x)=y$的映射。</p>
<h4 id="判别模型"><a href="#判别模型" class="headerlink" title="判别模型"></a>判别模型</h4><p>对$p(y|x)$建模，然后给条决策边界来分类。</p>
<h4 id="生成模型"><a href="#生成模型" class="headerlink" title="生成模型"></a>生成模型</h4><p>对$p(x|y)$和$p(y)$建模，然后用贝叶斯算使得$p(y|x)=\frac{p(x|y)p(y)}{p(x)}≈p(x|y)p(y)$最大的$y$值作为结果。</p>
<p>输入$x$维数比较高的时候，可以默认不同维特征之间相互独立。</p>
<p><strong>解题步骤</strong></p>
<ul>
<li>对每个标签$y$算$p(y)$</li>
<li>对每个标签$y$和每个特征$a_i$算$p(a_i|y)$</li>
</ul>
<p>$m-$估计概率：$p(a_j|y)=\frac{n_c+m*p}{n_y+m}$</p>
<p>其中$p$是事先约定的值，不知道怎么取可以用特征$y$可能的取值数量的倒数</p>
<h2 id="Chapter-12-集成学习与聚类"><a href="#Chapter-12-集成学习与聚类" class="headerlink" title="Chapter 12 - 集成学习与聚类"></a>Chapter 12 - 集成学习与聚类</h2><h3 id="集成学习"><a href="#集成学习" class="headerlink" title="集成学习"></a>集成学习</h3><p>用同样的训练数据，训练独立的弱学习者，策略有三：</p>
<ul>
<li>Boosting</li>
<li>Bagging</li>
<li>Random Forests</li>
</ul>
<h4 id="Boosting"><a href="#Boosting" class="headerlink" title="Boosting"></a>Boosting</h4><p>在带权重的训练数据上训练弱学习者，表现好的学习者给更多权重</p>
<p>难样本给更高权重，简单样本给更低权重</p>
<p>错误率决定了最终的贡献比：</p>
<script type="math/tex; mode=display">\alpha_m=\frac 1 2 \log(\frac{1-err_m}{err_m})</script><p><img src="https://s2.loli.net/2023/06/14/tpjgqJIMOQrNUAb.png" alt="image.png" style="zoom: 33%;" /></p>
<p>数据集上的权重从均权开始，错的人越多权值变得越大，越少就变小</p>
<script type="math/tex; mode=display">w_i=w_i*\exp[-\alpha_my_iG_m(x_i)]</script><h4 id="Bagging"><a href="#Bagging" class="headerlink" title="Bagging"></a>Bagging</h4><p>Bootstrapping是重采样，按照经验分布进行采样</p>
<p>Bagging和Boosting都基于Bootstrapping</p>
<p>都使用了重采样来生成弱分类器</p>
<p>Bagging = Bootstrap aggregation</p>
<p>每次就选等大的一部分数据用来训练一个弱分类器。</p>
<h4 id="随机森林"><a href="#随机森林" class="headerlink" title="随机森林"></a>随机森林</h4><p>不拆数据了，拆特征维数，每次只用一部分特征来分类，多长几棵树投票。</p>
<p>一般拆出来训练的特征维数$m\le\sqrt d$</p>
<h3 id="聚类"><a href="#聚类" class="headerlink" title="聚类"></a>聚类</h3><p>无监督学习，分成$k$个聚类</p>
<h4 id="K-means"><a href="#K-means" class="headerlink" title="K-means"></a>K-means</h4><p>最小化聚类内部的均方差：</p>
<script type="math/tex; mode=display">J=\sum\limits_{j=1}^k\sum\limits_{x_i\in C_j}||x_i-\mu_j||^2</script><p>$\mu_j$是第$j$个聚类中的平均值</p>
<p>优点：容易实现</p>
<p>缺点：得知道$K$；维数灾难；没有理论基础</p>
<h4 id="K-means的一些问题"><a href="#K-means的一些问题" class="headerlink" title="K-means的一些问题"></a>K-means的一些问题</h4><p><strong>怎么取$k$？</strong></p>
<p>多试几个，选”elbow-point”</p>
<p>G-means算法</p>
<ol>
<li>用一个小$k$开始</li>
<li>从$k$个聚类中心点跑K-means</li>
<li>看看聚类是否环绕这些中心正态分布</li>
<li>如果OK就不管，如果不是那就拆成两个聚类中心</li>
<li>继续迭代，直到大家都正态分布</li>
</ol>
<p><strong>怎么评价模型？</strong></p>
<p>内部评价：高聚类内部相似度，低聚类外部相似度数据检验，可以用 Davies-Bouldin index评估聚类的紧密型</p>
<p>外部评价：利用对外部数据的知识库做评估(是否符合客观规律)</p>
<p><strong>如果不想要圆形聚类呢？</strong></p>
<p>其他方法：spectral clustering, kernelized K-means, DBSCAN, BIRCH, etc.</p>
<p><strong>怎么初始化？</strong></p>
<p>K-means对聚类中心的选取高度敏感，收敛速度和聚类效果都有影响。</p>
<p>比较安全的技巧是新聚类中心和之前的聚类中心安排得尽量远</p>
<p>解决方案是多重开几次选最好的。</p>
<p><strong>其他的限制？</strong></p>
<p>对一些样本做硬赋值，高斯混合模型允许软赋值(不同的赋值有概率)</p>
<p>对离群的例子高敏感，K-median在这方面的鲁棒性更好</p>
<script type="math/tex; mode=display">\Huge \mathscr{Good\ luck!}</script>]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Artificial Intelligence</tag>
      </tags>
  </entry>
  <entry>
    <title>MA212 概率论与数理统计 期末复习</title>
    <url>/2023/01/10/MA212_Probability_Statistics_Final/</url>
    <content><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><blockquote>
<p>本文为南方科技大学MA212概率论与数理统计课程2022秋季学期后半学期的知识点整理，大部分内容摘选自MA212-03班的课件，编者仅进行了一定转述和搬运工作。由于复习材料的目的性强，本文对考点有一定的强调和浓缩，忽略了一些非考点，但也并不能视为与考纲完全相符，同时可能存在一定错误。阅读本文并不能让你两三天速通概统，本文的定位在于用一篇文章看完课件内容，因此建议读者在学完该部分内容后借本文复习概念，并结合题目练习。</p>
<p>祝你在这门课程取得优秀成绩！</p>
<p>咕桃</p>
<p>2023.1</p>
</blockquote>
<p>本文使用<strong>CC BY-NC-SA</strong>协议，即您可以对本文在注明作者的情况下进行非商业目的的重新编排、节选，或以本文为基础进行创作，依此创作的成果亦须使用该协议。</p>
<p>由于编者能力有限，恳请各位读者在阅读过程中勘误，如果您对其中内容有疑问或发现错误，抑或是希望联系编者，欢迎通过该QQ联系：<a href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=3425811925&amp;website=www.oicqzone.com">3425811925</a>，非常感谢！</p>
<p><img src="https://s2.loli.net/2023/01/10/P7CdEvfXxBheuwi.png" alt="image.png" style="zoom:25%;" /></p>
<h1 id="Chapter-3"><a href="#Chapter-3" class="headerlink" title="Chapter 3"></a>Chapter 3</h1><h2 id="§3-6-联合分布随机变量函数"><a href="#§3-6-联合分布随机变量函数" class="headerlink" title="§3.6 联合分布随机变量函数"></a>§3.6 联合分布随机变量函数</h2><p><strong>r.v. 函数的分布</strong></p>
<p>设$(X, Y)$是二维连续型随机向量，其联合概率密度函数为$f(x,y)$。 则$Z=g(X,Y)$的累积分布函数为</p>
<script type="math/tex; mode=display">F_Z(z)=P\{Z\leq z\}=P\{g(X,Y)\leq z\}=\iint\limits_{g(x,y)\leq z}f(x,y)dxdy=\int_{-\infty}^{z}f_Z(u)du</script><p>求导可得其概率密度函数$Z\sim f_Z(z)$</p>
<p><strong>连续卷积公式</strong>：r.v. $(X,Y)\sim f(x,y)$，$Z=X+Y$</p>
<p>$F_Z(z)=\int_{-\infty}^{\infty}\int_{-\infty}^{z-y}f(x,y)dxdy=\int_{-\infty}^{\infty}\int_{-\infty}^{z}f(u-y,y)dudy=\int_{-\infty}^{z}\int_{-\infty}^{\infty}f(u-y,y)dydu$</p>
<p>求导得：$f_Z(z)=\int_{-\infty}^{\infty}f(z-y,y)dy=\int_{-\infty}^{\infty}f(x,z-x)dx$</p>
<p>若$X,Y$独立，$f(x,y)=f_X(x)\cdot f_Y(y)$，则</p>
<p>$f_Z(z)=\int_{-\infty}^{\infty}f_X(z-y)f_Y(y)dy=\int_{-\infty}^{\infty}f_X(x)f_Y(z-x)dx$</p>
<p><strong>独立正态r.v.之和</strong>：独立r.v. 集$\{X_n\}$，$X_i\sim N(\mu_i,\sigma_i^2)$</p>
<p>则其非零线性组合$\overset{n}\sum\limits_{i=1}a_iX_i\sim N(\overset{n}\sum\limits_{i=1}a_i\mu_i,\overset{n}\sum\limits_{i=1}a_i^2\sigma_i^2)$</p>
<p>即：独立正态r.v.的非零线性组合仍服从正态分布</p>
<p><strong>非独立正态r.v.之和</strong>：</p>
<p>若$(X,Y)\sim\mathbf N(\mu_1,\mu_2,\sigma_1^2,\sigma_2^2,\rho)$，则$(C_1X+C_2Y)\sim \mathbf N(C_1\mu_1+C_2\mu_2,C_1^2\sigma_1^2+C_2^2\sigma_2^2+2C_1C_2\sigma_1\sigma_2\rho)$</p>
<p><strong>离散卷积公式</strong>：$P\{Z=k\}=\sum\limits_{i}P\{X=i\}P\{Y=k-i\}=\sum\limits_{i}P\{X=k-i\}P\{Y=i\}$</p>
<p><strong>离散r.v.函数的分布</strong>：对于$Z=g(X,Y)$，$P\{Z=z_k\}=\sum\limits_{g(x_i,y_j)=z_k}p(x_i,y_i)$</p>
<p><strong>r.v.商的分布</strong>：$(X,Y)\sim f(x,y)$，$Z=\frac{X}{Y}$，$F_Z(z)=P\{\frac{x}{y}\leq z\}=\iint\limits_{\frac{x}{y}\leq z}f(x,y)dxdy$</p>
<p>$F_Z(z)=\int_{0}^{\infty}\int_{-\infty}^{yz}f(x,y)dxdy+\int_{-\infty}^{0}\int_{yz}^{\infty}f(x,y)dxdy$</p>
<p>设$u=x/y$，$dx=ydu$</p>
<p>$F_Z(z)=\int_{0}^{\infty}\int_{-\infty}^{z}f(uy,y)ydudy+\int_{-\infty}^{0}\int_{z}^{-\infty}f(uy,y)ydudy$</p>
<p>$F_Z(z)=\int_{-\infty}^{z}\int_{0}^{\infty}f(uy,y)ydydu+\int_{z}^{-\infty}\int_{-\infty}^{0}f(uy,y)ydydu=\int_{-\infty}^{z}\int_{-\infty}^{\infty}f(uy,y)|y|dydu$</p>
<p>求导得$f_Z(z)=\int_{-\infty}^{\infty}f(zy,y)|y|dy$</p>
<p><strong>Jacobi行列式</strong>：$J(u, v)=\frac{\partial(x, y)}{\partial(u, v)}=\det\left[ \begin{array}{ll}<br>\frac{\partial x}{\partial u} &amp; \frac{\partial x}{\partial v} \\<br>\frac{\partial y}{\partial u} &amp; \frac{\partial y}{\partial v}<br>\end{array}\right]$</p>
<p>若连续可微变换$T(u,v)=(x(u,v),y(u,v))$为双射，且$J(u,v)≠0$，则</p>
<p>$\iint_\Omega f(x,y)dxdy=\iint_{\Omega^{\prime}}f(x(u,v),y(u,v))|J(u,v)|dudv$</p>
<p>则逆变换$U=g_1(X,Y),V=g_2(X,Y)$的联合密度为：</p>
<p>$f_{UV}(u,v)=f_{XY}(x(u,v),y(u,v))|J(u,v)|$</p>
<p><strong>正态分布与线性变换</strong>：</p>
<p>两个独立标准正态r.v.的线性变换服从二元正态分布。</p>
<p>更一般地，若两个r.v.的联合分布为二元正态分布，则其非奇异线性变换还是二元正态分布。</p>
<p><strong>构造生成标准正态分布r.v.</strong>：构造独立r.v. $U_1\sim U[0,1]$，$U_2\sim U[0,1]$</p>
<p>则$X=\sqrt{-2logU_1}\cos(2\pi U_2)，Y=\sqrt{-2logU_1}\sin(2\pi U_2)$是独立标准正态r.v.</p>
<h2 id="§3-7-极值和顺序统计量"><a href="#§3-7-极值和顺序统计量" class="headerlink" title="§3.7 极值和顺序统计量"></a>§3.7 极值和顺序统计量</h2><h3 id="r-v-极值的分布"><a href="#r-v-极值的分布" class="headerlink" title="r.v.极值的分布"></a>r.v.极值的分布</h3><p><strong>max分布</strong>：$\{X_n\}$为独立r.v.集，$F_{max}(z)=P\{\bigcap\limits_{i=1}^{n} (X_i\leq z)\}=\prod\limits_{i=1}^{n}F_{X_i}(z)$</p>
<p><strong>min分布</strong>：$\{X_n\}$为独立r.v.集，$F_{max}(z)=P\{\bigcup\limits_{i=1}^{n} (X_i\leq z)\}=1-\prod\limits_{i=1}^{n}(1-F_{X_i}(z))$</p>
<p><strong>n个独立同分布r.v.的极值的密度</strong>：$f_{max}(z)=nf(z)[F(z)]^{n-1},\ f_{min}(z)=nf(z)[1-F(z)]^{n-1}$</p>
<p>指数分布的<strong>串联系统</strong>仍服从指数分布，失效率为各部件失效率之和。</p>
<p><strong>顺序统计量$X_{(k)}$的密度</strong>：$f_k(x)=\frac{n!}{(k-1)!(n-k)!}f(x)F^{k-1}(x)[1-F(x)]^{n-k}$</p>
<p>若$X_i\sim \mathbf U[0,1]$且相互独立，则$X_{(k)}\sim \mathbf{Beta}(k,n-k+1)$</p>
<h1 id="Chapter-4"><a href="#Chapter-4" class="headerlink" title="Chapter 4"></a>Chapter 4</h1><h2 id="§4-1-随机变量的期望"><a href="#§4-1-随机变量的期望" class="headerlink" title="§4.1 随机变量的期望"></a>§4.1 随机变量的期望</h2><p><strong>数学期望(离散型)</strong>：</p>
<p>若级数$\sum\limits_{k=1}^{\infty}|x_k|p_k&lt;+\infty$，则数学期望$E(x)\overset{\Delta}=\sum\limits_{k=1}^{\infty}x_kp_k=\sum\limits_{k=1}^{\infty}x_kP\{X=x_k\}$</p>
<p>否则无法说明级数$\sum\limits_{k=1}^{\infty}x_kp_k$收敛，期望不存在</p>
<p><strong>数学期望(连续型)</strong>：</p>
<p>r.v.$X$的cdf为$f(x)$，若$\int_{-\infty}^{\infty}|x|f(x)dx&lt;+\infty$，则数学期望$E(x)=\int_{-\infty}^{\infty}xf(x)dx$</p>
<p>否则$\int_{-\infty}^{\infty}|x|f(x)dx=+\infty$，期望不存在(标准柯西分布：$f(x)=\frac{1}{\pi(1+x^2)}$)</p>
<p><strong>Markov不等式</strong>：</p>
<p>r.v.$X$非负，且$E(X)$存在，则$P\{X\ge t\}\leq\frac{E(X)}{t}$</p>
<p><strong>函数的期望</strong>：</p>
<p>对于普通函数$y=g(x)$，其期望$E(Y)=E(g(X))=\sum\limits_{k=1}^{\infty}g(x_k)p_k$ 或 $\int_{-\infty}^{\infty}g(x)f(x)dx$</p>
<p>对于二元函数$z=g(x,y)$，其期望$E(Z)=E(g(X,Y))=\sum\limits_{i=1}^{\infty}\sum\limits_{j=1}^{\infty}g(x_i,y_j)p_{ij}$或$\int_{-\infty}^{\infty}\int_{-\infty}^{\infty}g(x,y)f(x,y)dxdy$</p>
<p><strong>数学期望的基本性质</strong>：</p>
<ul>
<li>设$a\leq X\leq b\ (a.e)$，则$a\leq E(X)\leq b$</li>
<li>对于常数$c$，$E(cX)=cE(X)$</li>
<li>对于r.v. $X,Y$，$E(X+Y)=E(X)+E(Y)$</li>
<li>对于<strong>独立</strong>r.v. $X,Y$，$E(XY)=E(X)E(Y)$</li>
</ul>
<p><strong>数学期望的几个推论</strong>：</p>
<ul>
<li>若$X=c\ (a.e)$，则$E(X)=c$</li>
<li>线性组合的期望等于期望的线性组合</li>
<li>$\{X_n\}$相互独立，则$E(\prod\limits_{k=1}^{n}X_k)=\prod\limits_{k=1}^{n}E(X_k)$</li>
</ul>
<p><strong>超几何分布等式</strong>：$N$件产品，$M$件次品，摸出次品个数的期望值(前置证明：每次摸中次品概率相同)</p>
<p>$\sum\limits_{k=0}^{n}k\frac{C^k_MC^{n-k}_{N-M}}{C^n_N}=\frac{nM}{N}$</p>
<h2 id="§4-2-方差与标准差"><a href="#§4-2-方差与标准差" class="headerlink" title="§4.2 方差与标准差"></a>§4.2 方差与标准差</h2><p><strong>方差</strong>：$Var(X)\overset{\Delta}=E[(X-E(X))^2]$</p>
<p><strong>标准差</strong>：$\sqrt{Var(X)}$</p>
<p><strong>方差的计算</strong>：$Var(X)=E(X^2)-[E(X)]^2$</p>
<p><strong>方差的基本性质</strong>：</p>
<ul>
<li>$X=c\ (a.e)⇌Var(X)=0$</li>
<li>对于常数$a,b$，$Var(aX±b)=a^2Var(X)$</li>
<li>对于r.v. $X,Y$，$Var(X±Y)=Var(X)+Var(Y)±2E[(X-E(x))(Y-E(Y)]$</li>
<li>对于相互独立的$\{X_n\}$，$Var(\sum\limits_{k=1}^{n}X_i)=\sum\limits_{k=1}^{n}Var(X_i)$</li>
</ul>
<p><strong>正态r.v.的标准化</strong>：$X\sim \mathbf N(\mu,\sigma^2)$，$X^\star=\frac{X-\mu}{\sigma}$，$X^\star\sim \mathbf N(0,1)$</p>
<p><strong>Chebyshev不等式</strong>：</p>
<p>期望$\mu$、方差$\sigma^2$均存在，则$\forallε&gt;0$，有$P\{|X-\mu|\ge ε\}\leq\frac{\sigma^2}{ε^2}$</p>
<p>证明用Markov不等式，$Y=(X-\mu)^2$，$E(Y)=\sigma^2$</p>
<h2 id="§4-3-协方差与相关系数"><a href="#§4-3-协方差与相关系数" class="headerlink" title="§4.3 协方差与相关系数"></a>§4.3 协方差与相关系数</h2><p><strong>协方差</strong>：$Cov(X,Y)\overset{\Delta}=E[(X-E(X))(Y-E(Y))]=E(XY)-E(X)E(Y)$</p>
<p><strong>协方差的基本性质</strong></p>
<ul>
<li><p>若r.v. $X,Y$相互独立，则$Cov(X,Y)=0$，但协方差为0不一定独立</p>
</li>
<li><p>$Cov(X,Y)=Cov(Y,X)$，$Cov(X,X)=Var(X)$</p>
</li>
<li><p>$Var(X±Y)=Var(X)+Var(Y)±2Cov(X,Y)$</p>
</li>
<li><p>双线性性：</p>
<ul>
<li><p>$Cov(aX,bY)=abCov(X,Y)$</p>
</li>
<li><p>$Cov(X_1+X_2,Y)=Cov(X_1,Y)+Cov(X_2,Y)$</p>
</li>
<li><p>$U=a+\sum\limits_{i=1}^{n}b_iX_i$，$V=c+\sum\limits_{j=1}^{m}d_jY_j$，则</p>
<p>$Cov(U,V)=\sum\limits_{i=1}^{n}\sum\limits_{j=1}^{m}b_id_jCov(X_i,Y_j)$</p>
</li>
</ul>
</li>
</ul>
<p><strong>相关系数</strong>：$\rho_{XY}\overset{\Delta}=\frac{Cov(X,Y)}{\sqrt{Var(X)Var(Y)}}$，$|\rho_{XY}|\leq1$，取等当且仅当$Y\overset{a.e}=a+bX$</p>
<p><strong>均方误差</strong>：对于线性近似$\widehat Y=a+bX$，均方误差$e=E[(Y-\widehat Y)^2]$</p>
<p>$e_{min}=Var(Y)(1-\rho^2_{XY})$，此时$b_0=\frac{Cov(X,Y)}{Var(X)}$，$a_0=E(Y)-b_0E(X)$</p>
<p><strong>相关</strong>：正相关，负相关，不相关。不相关不一定独立，独立一定不相关。</p>
<p><strong>协方差矩阵</strong>：对于n维r.v.$\{X_n\}$，记$c_{ij}=Cov(X_i,X_j)\ (i,j=1,2,\cdots,n)$</p>
<p>将$c_{ij}$写成矩阵的形式$C$，则称其为$\{X_n\}$的协方差矩阵。协方差矩阵为<strong>非负定对称阵</strong>。</p>
<p><strong>n维正态r.v.</strong>：令</p>
<script type="math/tex; mode=display">X=\left[\begin{array}{c}
x_{1} \\
x_{2} \\
\vdots \\
x_{n}
\end{array}\right], \quad \mu=\left[\begin{array}{c}
\mu_{1} \\
\mu_{2} \\
\vdots \\
\mu_{n}
\end{array}\right], \quad C=\left[\begin{array}{cccc}
c_{11} & c_{12} & \cdots & c_{1 n} \\
c_{21} & c_{22} & \cdots & c_{2 n} \\
\vdots & \vdots & \ddots & \vdots \\
c_{n 1} & c_{n 2} & \cdots & c_{n n}
\end{array}\right]</script><p>其中$C$为n阶正定矩阵，若n维r.v.$\{X_n\}$的密度函数为</p>
<p>$f\left(x_{1}, x_{2}, \cdots, x_{n}\right)=\frac{1}{(2 \pi)^{n / 2}|C|^{1 / 2}} \exp \left\{-\frac{1}{2}(X-\mu)^{T} C^{-1}(X-\mu)\right\}$</p>
<p>则称$\{X_n\}$服从参数为$(\mu,C)$的n维正态分布，记为$(X_1,X_2,\cdots,X_n)\sim \mathbf N(\mu,C)$。</p>
<p><strong>n维正态r.v.的重要性质</strong>：</p>
<ul>
<li><p>$\mu$称为均值向量，$C$为协方差矩阵，对角线为对应r.v.方差。</p>
</li>
<li><p>$X_i\sim\mathbf N(\mu_i,c_{ii}),\ (i=1,2,\cdots,n)$，反之若$\{X_n\}$相互独立且$X_i\sim\mathbf N(\mu_i,\sigma_i^2),\ (i=1,2,\cdots,n)$，则</p>
<p>$\{X_n\}\sim\mathbf N(\mu,C)$，其中$\mu=[\mu1\ \mu2\ …\ \mu_n]^T$，$C=diag\{\sigma_1^2\ \sigma_2^2\ …\ \sigma_n^2\ \}$</p>
</li>
<li><p>若$\{X_n\}\sim\mathbf N(\mu,C)$，则$\{X_n\}$的任一线性组合$\sum\limits_{k=1}^{n}l_iX_i$服从一维正态分布</p>
</li>
<li><p>正态r.v.的线性变换不变性：若$\{X_n\}\sim\mathbf N(\mu,C)$</p>
<p>$\left\{\begin{array}{c}<br>Y_{1}=a_{11} X_{1}+a_{12} X_{2}+\cdots+a_{1 n} X_{n} \\<br>Y_{2}=a_{21} X_{1}+a_{22} X_{2}+\cdots+a_{2 n} X_{n} \\<br>\quad \vdots \\<br>Y_{m}=a_{m 1} X_{1}+a_{m 2} X_{2}+\cdots+a_{m n} X_{n}<br>\end{array}\right.$</p>
<p>则$\{Y_m\}$仍服从多维正态分布。</p>
</li>
</ul>
<h2 id="§4-4-条件期望"><a href="#§4-4-条件期望" class="headerlink" title="§4.4 条件期望"></a>§4.4 条件期望</h2><p>不考，不过明明是很重要的内容来着。</p>
<h2 id="§4-x-常用分布的分布及数字特征"><a href="#§4-x-常用分布的分布及数字特征" class="headerlink" title="§4.x 常用分布的分布及数字特征"></a>§4.x 常用分布的分布及数字特征</h2><p><img src="https://s2.loli.net/2022/12/30/xOTFlhpsguVoaZD.jpg" alt="常用分布的分布及数字特征.jpg"  /></p>
<h1 id="Chapter-5"><a href="#Chapter-5" class="headerlink" title="Chapter 5"></a>Chapter 5</h1><h2 id="§5-1-大数定律"><a href="#§5-1-大数定律" class="headerlink" title="§5.1 大数定律"></a>§5.1 大数定律</h2><p><strong>依概率收敛</strong>：</p>
<p>设$\xi,\xi_1,\xi_2,\cdots,\xi_n,…$是一系列r.v.，若$\forall\varepsilon&gt;0$，有$\lim\limits_{n→\infty}P\{|\xi_n-\xi|\ge \varepsilon\}=0$，则称$\{\xi_n\}$依概率收敛于$\xi$，记为$\xi_{n} \stackrel{P}{\longrightarrow} \xi $。</p>
<ul>
<li>$\lim\limits_{n→\infty}P\{|\xi_n-\xi|\ge \varepsilon\}=0⇌\lim\limits_{n→\infty}P\{|\xi_n-\xi|&lt; \varepsilon\}=1$</li>
<li>随着n的增大，绝对误差$|\xi_n-\xi|$较大的可能性越来越小</li>
<li>若$\xi_{n} \stackrel{P}{\longrightarrow} \xi$，$g$是连续函数，则$g(\xi_{n}) \stackrel{P}{\longrightarrow} g(\xi) $</li>
</ul>
<p><strong>几乎处处收敛(了解)</strong>：</p>
<p>若r.v.列$\{\xi_n\}$满足$\forall\varepsilon&gt;0$，$P\{\lim\limits_{n→\infty}|\xi_n-\xi|&lt;\varepsilon\}=1$，则称$\{\xi_n\}$几乎处处收敛于$\xi$，记为$\xi_n\stackrel{a.s.}{\longrightarrow}\xi$或$\xi_n→\xi,\ a.s.$</p>
<p><strong>伯努利大数定律</strong>：</p>
<p>设$n_A$是n次独立重复实验中事件$A$发生的次数，且$P(A)=p$，则$\forall\varepsilon&gt;0$，有$\lim\limits_{n→\infty}P\{|\frac{n_A}{n}-p|\ge \varepsilon\}=0$</p>
<p><strong>切比雪夫大数定律</strong>：</p>
<p>$\{X_n\}$为独立r.v.列，且具有相同的期望$\mu$和方差$\sigma^2$，则$\forall\varepsilon&gt;0$有$\lim\limits_{n→\infty}P\{|\frac{1}{n}\sum\limits_{i=1}^{n}X_i-\mu|\ge\varepsilon\}=0$，即$\bar X_n \stackrel{P}{\longrightarrow} \mu$，可由Chebyshev不等式证明：$P\left(\left|\bar{X}_{n}-\mu\right|&gt;\varepsilon\right) \leq \frac{\operatorname{Var}\left(\bar{X}_{n}\right)}{\varepsilon^{2}}=\frac{\sigma^{2}}{n \varepsilon^{2}} \rightarrow 0,$</p>
<p><strong>辛钦大数定律(弱大数定律)</strong>：</p>
<p>$\{X_n\}$是独立同分布r.v.列，期望$\mu$存在，则$\{X_n\}$服从大数定律，$\forall\varepsilon&gt;0$，有$\lim\limits_{n→\infty}P\{|\frac{1}{n}\sum\limits_{i=1}^{n}X_i-\mu|&lt;\varepsilon\}=1$</p>
<p><strong>强大数定律(了解)</strong>：</p>
<p>若$\{X_n\}$两两独立且同分布，期望$\mu$存在，则$\bar X_n\stackrel{a.s.}{\longrightarrow}\mu$</p>
<h2 id="§5-2-中心极限定理"><a href="#§5-2-中心极限定理" class="headerlink" title="§5.2 中心极限定理"></a>§5.2 中心极限定理</h2><p><strong>中心极限定理</strong>：</p>
<p>若$Z_n=\frac{\sum_{k=1}^{n} X_{k}-\sum_{k=1}^{n} \mu_{k}}{\sqrt{\sum_{k=1}^{n} \sigma_{k}^{2}}}$的分布函数$F_n(x)$对任意$x$满足</p>
<p>$\begin{aligned}<br>\lim _{n \rightarrow \infty} F_{n}(x) &amp; =\lim _{n \rightarrow \infty} P\left\{\frac{\sum_{k=1}^{n} X_{k}-\sum_{k=1}^{n} \mu_{k}}{\sqrt{\sum_{k=1}^{n} \sigma_{k}^{2}}} \leq x\right\} \\<br>&amp; =\int_{-\infty}^{x} \frac{1}{\sqrt{2 \pi}} e^{-\frac{t^{2}}{2}} d t=\Phi(x)<br>\end{aligned}$</p>
<p>则称$\{X_k\}$服从中心极限定理。</p>
<p><strong>中心极限定理(独立同分布)</strong>：</p>
<p>$\begin{aligned}<br>\lim _{n \rightarrow \infty} F_{n}(x) &amp; =\lim _{n \rightarrow \infty} P\left\{\frac{\sum_{k=1}^{n} X_{k}-n \mu}{\sqrt{n} \sigma} \leq x\right\} \\<br>&amp; =\int_{-\infty}^{x} \frac{1}{\sqrt{2 \pi}} e^{-\frac{t^{2}}{2}} d t=\Phi(x)<br>\end{aligned}$</p>
<p><strong>中心极限定理的实际含义</strong>：</p>
<p>对于均值为$\mu$，方差$\sigma^2&gt;0$的i.i.d.r.v.列$\{X_n\}$，有$\sum\limits_{k=1}^{n}X_k\overset{近似}\sim\mathbf N(n\mu,n\sigma^2)$，或$\bar X_n\overset{近似}\sim\mathbf N(\mu,\frac{\sigma^2}{n})$</p>
<p><strong>棣莫弗-拉普拉斯中心极限定理</strong>：</p>
<p>设$\{\eta_n\}$为服从参数为$n,p(0&lt;p&lt;1)$的二项分布r.v.列，则对任意$x$有</p>
<p>$\lim _{n \rightarrow \infty} P\left\{\frac{\eta_{n}-n p}{\sqrt{n p(1-p)}} \leq x\right\}=\int_{-\infty}^{x} \frac{1}{\sqrt{2 \pi}} e^{-\frac{t^{2}}{2}} d t=\Phi(x)$</p>
<p>对于r.v.$\eta_n\sim \mathbf b(n,p)\ (n=1,2,…)$，有$\frac{\eta_{n}-n p}{\sqrt{n p(1-p)}}\overset{近似}\sim\mathbf N(0,1)$，于是当$n$充分大时，可以认为$\eta_n\overset{近似}\sim\mathbf N(np,np(1-p))$</p>
<h1 id="Chapter-6"><a href="#Chapter-6" class="headerlink" title="Chapter 6"></a>Chapter 6</h1><h2 id="§6-2-数理统计：基本概念"><a href="#§6-2-数理统计：基本概念" class="headerlink" title="§6.2 数理统计：基本概念"></a>§6.2 数理统计：基本概念</h2><p><strong>简单随机抽样</strong>：</p>
<p>在相同条件下对总体$X$进行$n$次重复、独立观察。要求各次取样结果互不影响，每次取出的样品与总体有相同的分布，满足这两条性质的样本称为简单随机样本。</p>
<p><strong>样本均值</strong>：$\bar X=\frac{1}{n}\sum\limits_{i=1}^{n}X_i$</p>
<p><strong>样本方差</strong>：$S^2=\frac{1}{n-1}\sum\limits_{i=1}^{n}(X_i-\bar X)^2$</p>
<p><strong>样本标准差</strong>：$S=\sqrt{\frac{1}{n-1}\sum\limits_{i=1}^{n}(X_i-\bar X)^2}$</p>
<p><strong>样本k阶矩</strong>：$A_k=\frac{1}{n}\sum\limits_{i=1}^{n}X_i^k$</p>
<p><strong>样本k阶中心距</strong>：$B_k=\frac{1}{n}\sum\limits_{i=1}^{n}(X_i-\bar X)^k$</p>
<p><strong>顺序统计量</strong>：$X_{(1)},X_{(2)},\cdots,X_{(n)}$</p>
<p><strong>极小值</strong>：$X_{(1)}=min\{X_1,X_2,\cdots,X_n\}$</p>
<p><strong>极大值</strong>：$X_{(n)}=max\{X_1,X_2,\cdots,X_n\}$</p>
<p><strong>样本矩的特征</strong>：设$\{X_n\}$为来自总体$X\sim F(x)$的样本，总体k阶矩$\mu_k\overset{\Delta}=E(X^k)$都存在，则</p>
<ul>
<li>$X_1^k,X_2^k,\cdots,X_n^k$独立，与$X^k$同分布</li>
<li>$E(A_k)=\frac{1}{n}\sum\limits_{i=1}^{n}E(X_i^k)=\frac{1}{n}\sum\limits_{i=1}^{n}E(X^k)=\mu_k$</li>
<li>由辛钦大数定律，$n→\infty$时，$A_k\stackrel{P}{\longrightarrow}\mu_k$，连续函数$g(A_1,A_2,\cdots,A_k)\stackrel{P}{\longrightarrow}g(\mu_1,\mu_2,\cdots,\mu_k)$</li>
</ul>
<p><strong>样本均值与样本方差的数字特征</strong>：$E(\bar X)=\mu$，$Var(\bar X)=\frac{\sigma^2}{n}$，$E(S^2)=\sigma^2$</p>
<h2 id="§6-3-抽样分布"><a href="#§6-3-抽样分布" class="headerlink" title="§6.3 抽样分布"></a>§6.3 抽样分布</h2><p><strong>$\chi^2$-分布</strong>：</p>
<p>设$X_1,X_2,\cdots,X_n$是来自总体$X\sim\mathbf N(0,1)$的样本，令</p>
<script type="math/tex; mode=display">\mathcal {X}^2=X_1^2+X_2^2+\cdots+X_n^2</script><p>称$\mathcal {X}^2$服从自由度为$n$的$\chi^2$-分布，记为$\mathcal {X}^2\sim\chi^2(n)$。</p>
<p><strong>$\chi^2$-分布的可加性</strong>：</p>
<p>设$\chi_1^2\sim\chi^2(n_1)$，$\chi_2^2\sim\chi^2(n_2)$且相互独立，则$\chi_1^2+\chi_2^2\sim\chi^2(n_1+n_2)$</p>
<p><strong>$\chi^2$-分布的数字特征</strong>：</p>
<p>设$\chi^2\sim\chi^2(n)$，则$E(\chi^2)=n$，$Var(\chi^2)=2n$</p>
<p><strong>$t$-分布</strong>：</p>
<p>设$X\sim\mathbf N(0,1)$，$Y\sim\chi^2(n)$，且$X,Y$相互独立，令</p>
<script type="math/tex; mode=display">t=\frac{X}{\sqrt{Y/n}}</script><p>称$t$服从自由度为$n$的$t$-分布，记为$t\sim t(n)$。当$n$较大时，可以认为$t(n)=N(0,1)$</p>
<p><strong>$F$-分布</strong>：</p>
<p>设$U\sim\chi^2(n_1)$，$V\sim\chi^2(n_2)$，且$U,V$相互独立，令</p>
<script type="math/tex; mode=display">F=\frac{U/n_1}{V/n_2}</script><p>称$F$服从自由度为$(n_1,n_2)$的$F$-分布，记为$F\sim F(n_1,n_2)$</p>
<p><strong>$F$-分布的性质</strong>：</p>
<ul>
<li>若$F\sim F(n_1,n_2)$，则$\frac{1}{F}\sim F(n_2,n_1)$</li>
<li>若$T\sim t(n)$，则$T^2\sim F(1,n)$。($t$-分布的平方服从$F$-分布)</li>
</ul>
<p><strong>$\alpha$分位点</strong>：</p>
<p>设$X\sim f(x)$，若$\forall0&lt;\alpha&lt;1$，存在常数$x_\alpha$满足</p>
<script type="math/tex; mode=display">P\{X\leq x_\alpha\}=\int_{-\infty}^{x_\alpha}f(x)dx=\alpha</script><p>则称$x_\alpha$为分布密度$f(x)$的$\alpha$分位点，也即$F(X_\alpha)=\alpha$</p>
<ul>
<li>$\mathbf N(0,1)$的$\alpha$分位点记为$u_\alpha$</li>
<li>$t(n)$的$\alpha$分位点记为$t_\alpha(n)$</li>
<li>$\chi^2(n)$的$\alpha$分位点记为$\chi^2_\alpha(n)$</li>
<li>$F(n_1,n_2)$的$\alpha$分位点记为$F_\alpha(n_1,n_2)$</li>
<li>三反公式：$F_\alpha(n_1,n_2)=\frac{1}{F_{1-\alpha}(n_2,n_1)}$</li>
</ul>
<p><strong>抽样分布定理一</strong>：</p>
<p>设$X_1,X_2,\cdots,X_n$是来自总体$X\sim\mathbf N(\mu,\sigma^2)$的样本，则$\bar X\sim\mathbf N(\mu,\frac{\sigma^2}{n})$</p>
<p><strong>抽样分布定理二</strong>：</p>
<ol>
<li>$\bar X$，$S^2$相互独立</li>
<li>$\frac{(n-1)S^2}{\sigma^2}\sim\chi^2(n-1)$</li>
</ol>
<p><strong>抽样分布定理三</strong>：</p>
<p>设$X_1,X_2,\cdots,X_n$是来自总体$X\sim\mathbf N(\mu,\sigma^2)$的样本，则</p>
<script type="math/tex; mode=display">\frac{\bar X-\mu}{S/\sqrt{n}}\sim t(n-1)</script><p><strong>抽样分布定理四</strong>：</p>
<p>设$X_1,X_2,\cdots,X_n$是总体$X\sim\mathbf N(\mu_1,\sigma_1^2)$的样本；$Y_1,Y_2,\cdots,Y_m$是总体$Y\sim\mathbf N(\mu_2,\sigma_2^2)$的样本，且两样本相互独立，两样本均值和样本方差分别为$\bar X,\bar Y,S_1^2,S_2^2$，则</p>
<script type="math/tex; mode=display">\frac{S_1^2/\sigma_1^2}{S_2^2/\sigma_2^2}\sim F(n-1,m-1)</script><p><strong>抽样分布定理五</strong>：</p>
<p>设$X_1,X_2,\cdots,X_n$是总体$X\sim\mathbf N(\mu_1,\sigma_1^2)$的样本；$Y_1,Y_2,\cdots,Y_m$是总体$Y\sim\mathbf N(\mu_2,\sigma_2^2)$的样本，且两样本相互独立，两样本均值和样本方差分别为$\bar X,\bar Y,S_1^2,S_2^2$，则</p>
<script type="math/tex; mode=display">\frac{(\bar X-\bar Y)-(\mu_1-\mu_2)}{S_\omega\sqrt{\frac{1}{n}+\frac{1}{m}}}\sim t(n+m-2)</script><p>其中$S_\omega^2=\frac{(n-1)S_1^2+(m-1)S_2^2}{n+m-2}$，$S_\omega=\sqrt{S_\omega^2}$</p>
<p><strong>指数分布与$\chi^2$-分布</strong>：自由度为2的$\chi^2$-分布就是参数为$\frac 1 2$的指数分布</p>
<h1 id="Chapter-7"><a href="#Chapter-7" class="headerlink" title="Chapter 7"></a>Chapter 7</h1><h2 id="§7-1-点估计"><a href="#§7-1-点估计" class="headerlink" title="§7.1 点估计"></a>§7.1 点估计</h2><p><strong>矩估计法</strong>：</p>
<p>设总体$X\sim F(x;\theta_1,\theta_2,\cdots,\theta_m)$，其中$\theta_1,\theta_2,\cdots,\theta_m$为未知参数，$X_1,X_2,\cdots,X_n$为来自总体$X$的样本，设总体矩$\mu_k=E(X^k)\ (k=1,2,\cdots,m)$都存在，则$\mu_k$是$\theta_1,\theta_2,\cdots,\theta_m$的函数。</p>
<p>由辛钦大数定律，样本k阶矩$A_k\stackrel{P}{\longrightarrow}\mu_k,\ n→\infty\ (k=1,2,\cdots,m)$</p>
<p>从而可以使用$A_k$估计$\mu_k$，进而得到$\theta$的估计。</p>
<ol>
<li>设$\mu_i=\mu_i(\theta_1,\theta_2,\cdots,\theta_m),\ i=1,2,\cdots,m$</li>
<li>反解方程组得$\theta_i=\theta_i(\mu_1,\mu_2,\cdots,\mu_m),\ i=1,2,\cdots,m$</li>
<li>用样本矩代替总体矩，得到矩估计$\widehat \theta_i=\widehat\theta_i(A_1,A_2,\cdots,A_m),\ i=1,2,\cdots,m$</li>
<li>若$\widehat\theta$是位置参数$\theta$的据估计，则$g(\theta)$的矩估计为$g(\widehat\theta)$。</li>
</ol>
<p><strong>二阶矩估计的结论</strong>：</p>
<p>用$A_1,A_2$代替$\mu_1,\mu_2$，得到$\mu$和$\sigma^2$的矩估计量分别为：</p>
<p>$\widehat \mu=A_1=\bar X$</p>
<p>$\widehat \sigma^2=A_2-A_1^2=\frac{n-1}{n}S^2\overset{\Delta}=\widetilde S^2$，称为修正的样本方差。</p>
<p><strong>最大似然估计(MLE)</strong>：</p>
<p>设$X_1,X_2,\cdots,X_n$是来自总体$X\sim f(x;\theta)$的样本，令</p>
<script type="math/tex; mode=display">L(\theta)=L(\theta;X_1,X_2,\cdots,X_n)=\prod\limits_{i=1}^{n}f(X_i;\theta)</script><p>$L(\theta)$称为<strong>似然函数</strong>，若存在统计量$\widehat\theta=\widehat\theta(X_1,X_2,\cdots,X_n)$使得$L(\widehat\theta)=\max\limits_{\theta\in\Theta}L(\theta;x_1,x_2,\cdots,x_)$，则称其为$\theta$的最大似然估计(MLE)。</p>
<p><strong>最大似然估计常见求法</strong>：</p>
<ol>
<li>求似然函数，构建(对数)似然方程组</li>
<li>对各未知参数求偏导，使其偏导为0</li>
<li>求解(对数)似然方程组，得到MLE</li>
</ol>
<p>在似然函数不可导时，回到原始定义，即找到让似然函数值最大的$\widehat\theta$即可</p>
<h2 id="§7-2-估计量的评价标准"><a href="#§7-2-估计量的评价标准" class="headerlink" title="§7.2 估计量的评价标准"></a>§7.2 估计量的评价标准</h2><p><strong>无偏性</strong>：</p>
<p>若估计量$\widehat\theta=\widehat\theta(X_1,X_2,\cdots,X_n)$的数学期望存在，且$\forall\theta\in\Theta$有$E_\theta(\widehat\theta)=\theta$，则称$\widehat\theta$为$\theta$的无偏估计</p>
<p>，否则为有偏估计。</p>
<p>称$b_n(\widehat\theta)=E_\theta(\widehat\theta)-\theta$为估计量$\widehat\theta$的偏差，若$\lim\limits_{n→\infty}b_n(\widehat\theta)=0$，则$\widehat\theta$为$\theta$的渐进无偏估计。</p>
<p>对任意总体$X$，若期望$\mu$与方差$\sigma^2$存在，则$\widehat\mu=\bar X$，$\widehat\sigma^2=S^2$都是无偏估计，而修正后的样本方差$\widetilde S^2$是$\sigma^2$的渐进无偏估计。</p>
<p>同一参数的不同无偏估计的线性组合(总比例为1)还是无偏估计。</p>
<p><strong>估计量的均方误差</strong>：</p>
<p>设$\widehat\theta(X_1,X_2,\cdots,X_n)$为待估参数$\theta$的估计量，称$E_\theta(\widehat\theta-\theta)^2$为$\widehat\theta$的均方误差。</p>
<p>$E_\theta(\widehat\theta-\theta)^2=Var(\widehat\theta)+[E(\widehat\theta)-\theta]^2$</p>
<p><strong>有效性</strong>：</p>
<p>设$X_1,X_2,\cdots,X_n$是总体$X\sim F(x,\theta);\theta\in\Theta$的样本，</p>
<script type="math/tex; mode=display">\widehat\theta_1=\widehat\theta_1(X_1,X_2,\cdots,X_n),\widehat\theta_2=\widehat\theta_2(X_1,X_2,\cdots,X_n)</script><p>都是$\theta$的无偏估计，即$E(\widehat\theta_1)=E(\widehat\theta_2)=\theta\ (\forall\theta\in\Theta)$。若$\forall\theta\in\Theta$有$Var(\widehat\theta_1)\leq Var(\widehat\theta_2)$，则称$\widehat\theta_1$较$\widehat\theta_2$有效。</p>
<p><strong>相合性(一致性)</strong>：</p>
<p>设$\widehat\theta_n=\widehat\theta(X_1,X_2,\cdots,X_n)$是位置参数$\theta$的点估计，若$\forall\theta\in\Theta$满足：$\forall\varepsilon&gt;0$有</p>
<script type="math/tex; mode=display">\lim\limits_{n→\infty}P\{|\widehat\theta_n-\theta|\ge \varepsilon\}=0</script><p>即$\widehat\theta_n\stackrel{P}{\longrightarrow}\theta\ (n→\infty)$，则称$\widehat\theta_n$是$\theta$相合估计。</p>
<p>对任意总体$X$，若期望$\mu$与方差$\sigma^2$存在，则$\widehat\mu=\bar X$，$\widehat\sigma^2=S^2$都是相合估计。</p>
<p><strong>关于相合估计的一般结论</strong>：</p>
<ul>
<li><p>由辛钦大数定律，$\theta$的矩估计$\widehat\theta$是相合估计</p>
</li>
<li><p>$\theta$的MLE$\widehat\theta$一般也是相合估计</p>
</li>
<li><p>$\theta$的相合估计不一定是无偏估计</p>
</li>
<li><p>若$\widehat\theta$是$\theta$的无偏估计，则由Chebyshev不等式有</p>
<script type="math/tex; mode=display">P\{|\widehat\theta-\theta|\ge \varepsilon\}\leq \frac{Var(\widehat\theta)}{\varepsilon^2}</script><p>故当$\lim\limits_{n→\infty}Var(\widehat\theta)=0$时，$\widehat\theta$是$\theta$的相合估计(充分条件)</p>
</li>
</ul>
<h2 id="§7-3-区间估计"><a href="#§7-3-区间估计" class="headerlink" title="§7.3 区间估计"></a>§7.3 区间估计</h2><p><strong>区间估计</strong>：</p>
<p>设总体$X\sim F(x;\theta)\ (\theta\in\Theta)$。若对给定的$0&lt;\alpha&lt;1$，存在两个统计量</p>
<script type="math/tex; mode=display">\underline\theta=\underline\theta(X_1,X_2,\cdots,X_n),\ \overline\theta=\overline\theta(X_1,X_2,\cdots,X_n)\ (\underline\theta\leq \overline\theta)</script><p>使得$\forall\theta\in\Theta$，有</p>
<script type="math/tex; mode=display">P\{\underline\theta\leq \theta\leq \overline\theta\}\ge 1-\alpha</script><p>则称随机区间$(\underline\theta,\overline\theta)$为$\theta$的置信水平为$1-\alpha$的<strong>置信区间</strong>，$\underline\theta,\overline\theta$分别称为<strong>置信下限</strong>和<strong>置信上限</strong>。</p>
<p>$1-\alpha$置信区间的含义是随机区间$[\underline\theta,\overline\theta]$至少以$1-\alpha$的概率套住$\theta$的真值。</p>
<ul>
<li><p>可靠性：置信度$1-\alpha$应尽量大，即要求估计尽量可信(可靠)。</p>
</li>
<li><p>精确性：区间长度应尽量小，即估计的精度要尽可能地高。</p>
</li>
<li>上述两个要求是相互矛盾的：先保证可靠性，在此前提下尽可能提高精度。</li>
</ul>
<p><strong>求未知参数置信区间的一般过程</strong>：</p>
<ul>
<li><p>找出参数$\theta$的一个较好的点估计$\widehat\theta=T(X_1,X_2,\cdots,X_n)$。</p>
</li>
<li><p>找出枢轴量函数$W(T,\theta)$，使得$W$的分布不依赖于未知参数</p>
</li>
<li><p>对于给定置信水平$1-\alpha$定出两个常数$a,b$使得</p>
<script type="math/tex; mode=display">P\{a\leq W(T,\theta)\leq b\}=1-\alpha</script></li>
<li><p>根据等价形式得到$\underline\theta\leq \theta\leq \overline\theta$，则$[\underline\theta,\overline\theta]$就是$\theta$的一个置信水平为$1-\alpha$的置信区间</p>
</li>
</ul>
<p><strong>单正态总体参数的区间估计</strong>：</p>
<p>单个正态总体$X\sim \mathbf N(\mu,\sigma^2)$，$X_1,X_2,\cdots,X_n$是一个样本。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">待估参数</th>
<th style="text-align:center">其他参数</th>
<th style="text-align:center">枢轴量及其分布</th>
<th style="text-align:center">置信区间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$\mu$</td>
<td style="text-align:center">$\sigma^2$已知</td>
<td style="text-align:center">$\frac{\bar X-\mu}{\sigma/\sqrt n}\sim \mathbf N(0,1)$</td>
<td style="text-align:center">$\left [\bar X-\frac{\sigma}{\sqrt n}u_{1-\frac{\alpha}{2}},\bar X+\frac{\sigma}{\sqrt n}u_{1-\frac{\alpha}{2}}\right]$</td>
</tr>
<tr>
<td style="text-align:center">$\mu$</td>
<td style="text-align:center">$\sigma^2$未知</td>
<td style="text-align:center">$\frac{\bar X-\mu}{S/\sqrt n}\sim t(n-1)$</td>
<td style="text-align:center">$\left[\bar{X}-\frac{S}{\sqrt{n}} t_{1-\frac{\alpha}{2}}(n-1), \bar{X}+\frac{S}{\sqrt{n}} t_{1-\frac{\alpha}{2}}(n-1)\right]$</td>
</tr>
<tr>
<td style="text-align:center">$\sigma^2$</td>
<td style="text-align:center">$\mu$已知</td>
<td style="text-align:center">$\sum\limits_{i=1}^{n}(\frac{X_i-\mu}{\sigma})^2\sim \chi^2(n)$</td>
<td style="text-align:center">$\left[\frac{\sum\limits_{i=1}^n (X_i-\mu)^2}{\chi^2_{1-{\alpha\over 2}}(n)},\frac{\sum\limits_{i=1}^n (X_i-\mu)^2}{\chi^2_{\alpha\over 2}(n)}\right]$</td>
</tr>
<tr>
<td style="text-align:center">$\sigma^2$</td>
<td style="text-align:center">$\mu$未知</td>
<td style="text-align:center">$\frac{(n-1)S^2}{\sigma^2}\sim \chi^2(n-1)$</td>
<td style="text-align:center">$\left[\frac{(n-1) S^{2}}{\chi_{1-{\alpha\over  2} }^{2}(n-1)}, \frac{(n-1) S^{2}}{\chi_{\alpha \over 2}^{2}(n-1)}\right]$</td>
</tr>
</tbody>
</table>
</div>
<p><strong>双正态总体参数的区间估计</strong>：</p>
<p>正态总体$\mathbf N(\mu_1,\sigma_1^2)$和$\mathbf N(\mu_2,\sigma_2^2)$的两组相互独立的样本$X_1,X_2,\cdots,X_m$和$Y_1,Y_2,\cdots,Y_n$。</p>
<p>样本均值和样本方差分别是$\bar X,S_1^2$和$\bar Y,S_2^2$，记$S_\omega^2=\frac{\left(m-1\right) S_{1}^{2}+\left(n-1\right) S_{2}^{2}}{\left(m+n-2\right)}$。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">待估参数</th>
<th style="text-align:center">其他参数</th>
<th style="text-align:center">枢轴量及其分布</th>
<th style="text-align:center">置信区间</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">$\mu_1-\mu_2$</td>
<td style="text-align:center">$\sigma_1^2,\sigma_2^2$已知</td>
<td style="text-align:center">$\frac{\bar{X}-\bar{Y}-\left(\mu_{1}-\mu_{2}\right)}{\sqrt{\frac{\sigma_{1}^{2}}{n_{1}}+\frac{\sigma_{2}^{2}}{n_{2}}}} \sim \mathbf N(0,1)$</td>
<td style="text-align:center">$\left[\bar{X}-\bar{Y}- \sqrt{\frac{\sigma_{1}^{2}}{m}+\frac{\sigma_{2}^{2}}{n}}u_{1-\frac{\alpha}{2}}, \bar{X}-\bar{Y}+\sqrt{\frac{\sigma_{1}^{2}}{m}+\frac{\sigma_{2}^{2}}{n}}u_{1-\frac{\alpha}{2}}\right]$</td>
</tr>
<tr>
<td style="text-align:center">$\mu_1-\mu_2$</td>
<td style="text-align:center">$\sigma_1^2=\sigma_2^2$未知</td>
<td style="text-align:center">$\frac{\bar{X}-\bar{Y}-\left(\mu_{1}-\mu_{2}\right)}{S_{\omega} \sqrt{\frac{1}{n_{1}}+\frac{1}{n_{2}}}} \sim t\left(n_{1}+n_{2}-2\right)$</td>
<td style="text-align:center">$\left[(\bar{X}-\bar{Y}) - S_{\omega} \sqrt{\frac{1}{m}+\frac{1}{n}}t_{1-\frac{\alpha}{2}}(m+n-2),(\bar{X}-\bar{Y}) + S_{\omega} \sqrt{\frac{1}{m}+\frac{1}{n}}t_{1-\frac{\alpha}{2}}(m+n-2)\right]$</td>
</tr>
<tr>
<td style="text-align:center">${\sigma_1^2}/{\sigma_2^2}$</td>
<td style="text-align:center">$\mu_1,\mu_2$未知</td>
<td style="text-align:center">$\frac{S_{1}^{2}}{S_{2}^{2}} \cdot \frac{\sigma_{2}^{2}}{\sigma_{1}^{2}} \sim F\left(n_{1}-1, n_{2}-1\right)$</td>
<td style="text-align:center">$\left[\frac{S_{1}^{2}}{S_{2}^{2}} \cdot \frac{1}{F_{1-\frac{\alpha}{2}}\left(m-1, n-1\right)}, \frac{S_{1}^{2}}{S_{2}^{2}} \cdot \frac{1}{F_{\frac{\alpha}{2}}\left(m-1, n-1\right)}\right]$</td>
</tr>
<tr>
<td style="text-align:center">${\sigma_1^2}/{\sigma_2^2}$</td>
<td style="text-align:center">$\mu_1,\mu_2$已知</td>
<td style="text-align:center">$\frac{\sum_{i=1}^{n_{1}}\left(\frac{X_{i}-\mu_{1}}{\sigma_{1}}\right)^{2} / n_{1}}{\sum_{i=1}^{n_{2}}\left(\frac{Y_{i}-\mu_{2}}{\sigma_{2}}\right)^{2} / n_{2}} \sim F\left(n_{1}, n_{2}\right)$</td>
<td style="text-align:center">$\left[\frac{\sum\limits_{i=1}^{m}\left(X_{i}-\mu_{1}\right)^{2} / m}{\sum\limits_{i=1}^{n}\left(X_{i}-\mu_{2}\right)^{2} / n} \cdot \frac{1}{F_{1-\frac{\alpha}{2}}(m, n)}, \frac{\sum\limits_{i=1}^{m}\left(X_{i}-\mu_{1}\right)^{2} / m}{\sum\limits_{i=1}^{n}\left(X_{i}-\mu_{2}\right)^{2} / n} \cdot \frac{1}{F_{\frac{\alpha}{2}}(m, n)}\right]$</td>
</tr>
</tbody>
</table>
</div>
<p><del>这玩意能背下来就有鬼了= =</del></p>
<p><strong>单侧置信区间</strong>：</p>
<p>将上表中的区间两端值取出，将$\frac{\alpha}{2}$全部更换为$\alpha$，即可得到置信水平为$1-\alpha$的单侧置信限。</p>
<p><strong>大样本下非正态总体参数的区间估计</strong>：</p>
<p>根据中心极限定理，当$n$充分大时有$\frac{\bar X-\mu}{\sigma/\sqrt n}\overset{近似}\sim\mathbf N(0,1)$</p>
<p>然后把$\mu$和$\sigma^2$用参数代回，按标准正态得到置信区间，解不等式得到参数的区间估计。</p>
<p><img src="https://s2.loli.net/2022/12/31/LhebI7dEgq9fz3N.png" alt="image.png" style="zoom:50%;" /></p>
<h1 id="Chapter-8"><a href="#Chapter-8" class="headerlink" title="Chapter 8"></a>Chapter 8</h1><h2 id="§8-1-假设检验概述"><a href="#§8-1-假设检验概述" class="headerlink" title="§8.1 假设检验概述"></a>§8.1 假设检验概述</h2><p><strong>建立假设</strong>：</p>
<p>对问题提出原假设(零假设)，记为$H_0$，其对立面称为对立假设(备择假设)，记为$H_1$或$H_\alpha$。</p>
<p>原假设一般有符号$=$，$\leq$或$\ge$。</p>
<p>假设检验就是要根据样本判断是否拒绝$H_0$。</p>
<ul>
<li>双侧假设检验：$H_0:\theta=\theta_0$，$H_1:\theta\ne\theta_0$</li>
<li>右侧检验：$H_0:\theta\leq \theta_0$，$H_1:\theta&gt;\theta_0$</li>
<li>左侧检验：$H_0:\theta\geq \theta_0$，$H_1:\theta&lt;\theta_0$</li>
</ul>
<p><strong>检验统计量</strong>：由样本对原假设进行检验总是通过一个统计量完成，称为检验统计量。</p>
<p><strong>拒绝域</strong>：使原假设被拒绝的样本所组成的区域称为拒绝域，即拒绝$H_0$的样本值的取值区域，其补集称为接受域。</p>
<p><strong>第一类错误</strong>：在原假设$H_0$为真的情况下拒绝$H_0$，一般设置为更严重的错误。</p>
<p><strong>第二类错误</strong>：在原假设$H_0$为假的情况下接受$H_0$。</p>
<p><strong>显著性检验</strong>：控制犯第一类错误的概率在一个较小的数$\alpha$以内，倾向于保护$H_0$</p>
<p>显著性检验倾向于“宁可错杀也不可放过$H_0$”，一般原假设也是依此选定：</p>
<ul>
<li><p>判断病人得两种病中的哪种，需要控制把重症误判成轻症的错误率，因此倾向于把轻症$H_1$判成重症$H_0$，而非把重症$H_0$当轻症$H_1$放过。</p>
</li>
<li><p>想检验某结论成立，应提出$H_0$：结论不成立，然后说明样本取值在拒绝域内，即概率反证法。</p>
<p>e.g. 是否有显著提高？$H_0$：没有显著提高，代入数据若能拒绝$H_0$说明确实有显著提高。</p>
</li>
</ul>
<p>“如果连$H_0$都保护不住的结论，其真实性势必应当受到怀疑。”</p>
<h2 id="§8-2-正态总体参数的假设检验"><a href="#§8-2-正态总体参数的假设检验" class="headerlink" title="§8.2 正态总体参数的假设检验"></a>§8.2 正态总体参数的假设检验</h2><p><strong>双边u检验法</strong>：</p>
<p>已知$\sigma_0^2$，关于$H_0:\mu=\mu_0$的检验问题</p>
<p>拒绝域：$|\bar X-\mu_0|$的值偏大，Ⅰ类风险$P_{H_0}\left\{\frac{|\bar X-\mu_0|}{\sigma_0/\sqrt n}&gt;u_{1-\frac{\alpha}{2}}\right\}=\alpha$</p>
<p><strong>单边u检验法</strong>：</p>
<ol>
<li><p>已知$\sigma_0^2$，关于$H_0:\mu\leq\mu_0$的检验问题</p>
<p>拒绝域：$\bar X-\mu_0$的值偏大，Ⅰ类风险$P_{H_0}\left\{\frac{\bar X-\mu_0}{\sigma_0/\sqrt n}&gt;u_{1-\alpha}\right\}=\alpha$</p>
</li>
<li><p>已知$\sigma_0^2$，关于$H_0:\mu\geq\mu_0$的检验问题</p>
<p>拒绝域：$\bar X-\mu_0$的值偏小，Ⅰ类风险$P_{H_0}\left\{\frac{\bar X-\mu_0}{\sigma_0/\sqrt n}&lt;u_{\alpha}\right\}=\alpha$</p>
</li>
</ol>
<p><strong>双边t检验法</strong>：</p>
<p>未知$\mu,\sigma^2$，关于$H_0:\mu=\mu_0$的检验问题</p>
<p>拒绝域：$|\bar X-\mu_0|$的值偏大，Ⅰ类风险$P_{H_0}\left\{\frac{|\bar X-\mu_0|}{S/\sqrt n}&gt;t_{1-\frac{\alpha}{2}}(n-1)\right\}=\alpha$</p>
<p><strong>单边t检验法</strong>：</p>
<ol>
<li><p>未知$\mu,\sigma^2$，关于$H_0:\mu\leq\mu_0$的检验问题</p>
<p>拒绝域：$\bar X-\mu_0$的值偏大，Ⅰ类风险$P_{H_0}\left\{\frac{\bar X-\mu_0}{S/\sqrt n}&gt;t_{1-\alpha}(n-1)\right\}=\alpha$</p>
</li>
<li><p>未知$\mu,\sigma^2$，关于$H_0:\mu\geq\mu_0$的检验问题</p>
<p>拒绝域：$\bar X-\mu_0$的值偏小，Ⅰ类风险$P_{H_0}\left\{\frac{\bar X-\mu_0}{S/\sqrt n}&lt;t_{\alpha}(n-1)\right\}=\alpha$</p>
</li>
</ol>
<p><strong>双边$\chi^2$检验法</strong>：</p>
<p>未知$\mu,\sigma^2$，关于$H_0:\sigma^2=\sigma_0^2$的检验问题</p>
<p>拒绝域：$S^2$不在$\sigma_0^2$附近波动或幅度太大，Ⅰ类风险$P_{H_0}\left\{\frac{(n-1)S^2}{\sigma_0^2}&lt;\chi^2_{\frac{\alpha}{2}}(n-1)\ or\ \frac{(n-1)S^2}{\sigma_0^2}&gt;\chi^2_{1-\frac{\alpha}{2}}(n-1)\right\}=\alpha$</p>
<p>已知$\mu$未知$\sigma^2$，关于$H_0:\sigma^2=\sigma_0^2$的检验问题</p>
<p>拒绝域：$P_{H_0}\left\{\frac{1}{\sigma_0^2}\sum\limits_{i=1}^{n}(X_i-\mu)^2&lt;\chi^2_{\frac{\alpha}{2}}(n)\ or\ \frac{1}{\sigma_0^2}\sum\limits_{i=1}^{n}(X_i-\mu)^2&gt;\chi^2_{1-\frac{\alpha}{2}}(n)\right\}=\alpha$</p>
<p><strong>单边$\chi^2$检验法</strong>：</p>
<ol>
<li><p>未知$\mu,\sigma^2$，关于$H_0:\sigma^2\leq\sigma_0^2$的检验问题</p>
<p>拒绝域：$P_{H_0}\left\{\frac{(n-1)S^2}{\sigma_0^2}&gt;\chi^2_{1-\alpha}(n-1)\right\}=\alpha$</p>
</li>
<li><p>未知$\mu,\sigma^2$，关于$H_0:\sigma^2\geq\sigma_0^2$的检验问题</p>
<p>拒绝域：$P_{H_0}\left\{\frac{(n-1)S^2}{\sigma_0^2}&lt;\chi^2_{\alpha}(n-1)\right\}=\alpha$</p>
</li>
<li><p>已知$\mu$未知$\sigma^2$，关于$H_0:\sigma^2\leq\sigma_0^2$的检验问题</p>
<p>拒绝域：$P_{H_0}\left\{\frac{1}{\sigma_0^2}\sum\limits_{i=1}^{n}(X_i-\mu)^2&gt;\chi^2_{1-\alpha}(n-1)\right\}=\alpha$</p>
</li>
<li><p>已知$\mu$未知$\sigma^2$，关于$H_0:\sigma^2\leq\sigma_0^2$的检验问题</p>
<p>拒绝域：$P_{H_0}\left\{\frac{1}{\sigma_0^2}\sum\limits_{i=1}^{n}(X_i-\mu)^2&lt;\chi^2_{\alpha}(n-1)\right\}=\alpha$</p>
</li>
</ol>
<p><strong>双总体均值差的检验</strong>：</p>
<p>已知$\sigma_1^2,\sigma_2^2$，$U=\frac{\bar X-\bar Y-\delta}{\sqrt{\frac{\sigma_1^2}{n}+\frac{\sigma_2^2}{m}}}\sim \mathbf N(0,1)$</p>
<ol>
<li><p>关于$H_0:\mu_1-\mu_2=\delta$的检验问题，拒绝域$|U|\ge u_{1-\frac \alpha 2}$</p>
</li>
<li><p>关于$H_0:\mu_1-\mu_2\ge\delta$的检验问题，拒绝域$U\leq u_\alpha$</p>
</li>
<li><p>关于$H_0:\mu_1-\mu_2\le\delta$的检验问题，拒绝域$U\geq u_{1-\alpha}$</p>
</li>
</ol>
<p>未知$\sigma_1^2,\sigma_2^2$但$\sigma_1^2=\sigma_2^2$，$T=\frac{\bar X-\bar Y-\delta}{\sqrt{\frac{1}{n}+\frac{1}{m}}S_\omega}\sim T(n+m-2)$，其中$S_\omega=\sqrt \frac{\left(n-1\right) S_{1}^{2}+\left(m-1\right) S_{2}^{2}}{\left(n+m-2\right)}$</p>
<ol>
<li><p>关于$H_0:\mu_1-\mu_2=\delta$的检验问题，拒绝域$|T|\ge t_{1-\frac \alpha 2}(n+m-2)$</p>
</li>
<li><p>关于$H_0:\mu_1-\mu_2\ge\delta$的检验问题，拒绝域$T\leq t_\alpha(n+m-2)$</p>
</li>
<li><p>关于$H_0:\mu_1-\mu_2\le\delta$的检验问题，拒绝域$T\geq t_{1-\alpha}(n+m-2)$</p>
</li>
</ol>
<p><strong>双总体方差比的检验</strong>：</p>
<p>未知$\mu_1,\mu_2$，$F=\frac{S_1^2}{S_2^2}\sim F(n-1,m-1)$</p>
<ol>
<li><p>关于$H_0:\sigma_1^2=\sigma_2^2$的检验问题，拒绝域$F\ge F_{1-\frac{\alpha}{2}}(n-1,m-1)$或$F\le F_{\frac \alpha 2}(n-1,m-1)$</p>
</li>
<li><p>关于$H_0:\sigma_1^2\ge \sigma_2^2$的检验问题，拒绝域$F\le F_\alpha(n-1,m-1)$</p>
</li>
<li>关于$H_0:\sigma_1^2\le \sigma_2^2$的检验问题，拒绝域$F\ge F_{1-\alpha}(n-1,m-1)$</li>
</ol>
]]></content>
      <categories>
        <category>Math</category>
      </categories>
      <tags>
        <tag>Probability &amp; Statistics</tag>
      </tags>
  </entry>
  <entry>
    <title>MA212 概率论与数理统计 半期复习</title>
    <url>/2023/01/10/MA212_Probability_Statistics_Midterm/</url>
    <content><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><blockquote>
<p>本文为南方科技大学MA212概率论与数理统计课程2022秋季学期前半学期的知识点整理，大部分内容摘选自MA212-03班的课件，编者仅进行了一定转述和搬运工作。由于复习材料的目的性强，本文对考点有一定的强调和浓缩，忽略了一些非考点，但也并不能视为与考纲完全相符，同时可能存在一定错误。阅读本文并不能让你两三天速通概统，本文的定位在于用一篇文章看完课件内容，因此建议读者在学完该部分内容后借本文复习概念，并结合题目练习。</p>
<p>祝你在这门课程取得优秀成绩！</p>
<p>咕桃</p>
<p>2023.1</p>
</blockquote>
<p>本文使用<strong>CC BY-NC-SA</strong>协议，即您可以对本文在注明作者的情况下进行非商业目的的重新编排、节选，或以本文为基础进行创作，依此创作的成果亦须使用该协议。</p>
<p>由于编者能力有限，恳请各位读者在阅读过程中勘误，如果您对其中内容有疑问或发现错误，抑或是希望联系编者，欢迎通过该QQ联系：<a href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=3425811925&amp;website=www.oicqzone.com">3425811925</a>，非常感谢！</p>
<p><img src="https://s2.loli.net/2023/01/10/P7CdEvfXxBheuwi.png" alt="image.png" style="zoom:25%;" /></p>
<h1 id="Chapter-1"><a href="#Chapter-1" class="headerlink" title="Chapter 1"></a>Chapter 1</h1><h2 id="§1-2-样本空间"><a href="#§1-2-样本空间" class="headerlink" title="§1.2 样本空间"></a><strong>§1.2 样本空间</strong></h2><h3 id="试验"><a href="#试验" class="headerlink" title="试验"></a>试验</h3><p><strong>随机试验(试验)</strong>：</p>
<ul>
<li>可以在相同的条件下重复进行</li>
<li>试验前知道所有可能结果</li>
<li>试验前无法确定会出现哪个结果</li>
</ul>
<p><strong>样本空间 $𝛀$</strong>：试验的全部样本点构成的集合</p>
<p><strong>样本点$\omega$</strong>：不可分的试验结果</p>
<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p><strong>随机事件(事件)</strong>：满足一定条件的样本点的集合</p>
<p><strong>基本事件</strong>：一个样本点构成的单点集</p>
<p><strong>必然事件</strong>：每次试验都总发生的事件</p>
<p><strong>不可能事件</strong>：每次试验都不会发生的事件</p>
<p><strong>事件域</strong>：$\mathcal A = \{ A | A ⊂𝛀 , A 是 事 件 \}$</p>
<p><strong>事件运算</strong>：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>$A⊂B$</th>
<th>$A∪B$ 和</th>
<th>$A∩B$ 积</th>
<th>$A-B$ 差</th>
</tr>
</thead>
<tbody>
<tr>
<td>$A$发生必导致$B$发生</td>
<td>$A、B$ 至少有一个发生</td>
<td>$A、B$同时发生</td>
<td>$A$发生$B$不发生</td>
</tr>
</tbody>
</table>
</div>
<ul>
<li>若$A⊃B$，则$A-B$为<strong>真差</strong></li>
<li>若$A∩B=\phi$，则$AB$<strong>互不相容(互斥)</strong></li>
<li>若$A∪B=𝛀$且$A∩B=\phi$，则$AB$互为<strong>逆事件/对立事件</strong>，记作$A=B^C=\bar B$</li>
</ul>
<p><strong>事件运算定律</strong>：</p>
<p>交换、结合、分配、德摩根</p>
<p><strong>可列</strong>：无穷集S可与自然数集建立双射，可表示为$S=\{s1,s2,…\}$，“最小的无穷”</p>
<p><strong>至多可列</strong>：可列/有限</p>
<h2 id="§1-3-概率测度"><a href="#§1-3-概率测度" class="headerlink" title="§1.3 概率测度"></a>§1.3 概率测度</h2><h3 id="频率"><a href="#频率" class="headerlink" title="频率"></a>频率</h3><p>设 $A$ 为一随机事件 ,在相同条件下进行 $n$ 次重复试验</p>
<p><strong>频数</strong>：$n_A=n$次试验中$A$发生的次数</p>
<p><strong>频率</strong>：$f_\mathbf N(A)=\frac{n_A}{n}$</p>
<p><strong>频率的基本性质</strong>：</p>
<ul>
<li><p>$0\leq f_\mathbf N(A) \leq 1$</p>
</li>
<li><p>$f_\mathbf N(𝛀)=1$</p>
</li>
<li><p>若$A_1,A_2,…A_m$两两不相容，则</p>
<script type="math/tex; mode=display">f_\mathbf N(\bigcup_\limits{i=1}^{m} A_i)=\sum_\limits{i=1}^{m} f_\mathbf N(A_i)</script></li>
</ul>
<h3 id="概率"><a href="#概率" class="headerlink" title="概率"></a>概率</h3><p><strong>概率</strong>：事件$A$发生的可能性大小$P(A)=\lim\limits_{n \to +\infty} f_\mathbf N(A)$</p>
<p><strong>概率空间</strong>：样本空间+事件域+概率，$\{𝛀，\mathcal{A} ，P\}$</p>
<p><strong>概率的公理化定义</strong>：</p>
<ul>
<li><p><strong>非负性</strong>：$0\leq P(A) \leq 1， (\forall A \in \mathcal{A})$</p>
</li>
<li><p><strong>规范性</strong>：$P(𝛀)=1$</p>
</li>
<li><p><strong>可列可加性</strong>：对于两两不相容的事件列$\{A_k\}^\infty_{k=1}$有</p>
<script type="math/tex; mode=display">P(\bigcup_\limits{i=1}^{\infty} A_i)=\sum_\limits{i=1}^{\infty} P(A_i)</script></li>
</ul>
<p><strong>概率的基本性质</strong>：</p>
<ul>
<li><p>$P(\emptyset)=0$</p>
</li>
<li><p><strong>有限可加性</strong>：对于两两不相容的事件列$\{A_k\}^n_{k=1}$有</p>
<script type="math/tex; mode=display">P(\bigcup_\limits{i=1}^{n} A_i)=\sum_\limits{i=1}^{n} P(A_i)</script></li>
<li><p>若$A \subset B$，则$P(B-A)=P(B)-P(A)$，$P(B)\ge P(A)$</p>
</li>
<li><p>$0\leq P(A) \leq 1$</p>
</li>
<li>$P(\bar A)=1-P(A)$</li>
<li><strong>多事件的加法定律</strong></li>
</ul>
<h2 id="§1-4-概率计算：计数方法"><a href="#§1-4-概率计算：计数方法" class="headerlink" title="§1.4 概率计算：计数方法"></a>§1.4 概率计算：计数方法</h2><p><strong>古典概型(等可能概型)</strong>：仅有<u>有限个等可能</u>出现的基本结果的随机试验</p>
<p><strong>有利场合</strong>：导致事件发生的方式个数</p>
<p><strong>排列与组合</strong>：$A^k_n=\frac{n!}{(n-k)!}$，$\binom{n}{k}=C^k_n=\frac{n!}{k!(n-k)!}$，$\binom{n}{n_1\ n_2\ …\ n_r}=\frac{n!}{n_1!n_2!…n_r!}$</p>
<p><strong>乘法原理&amp;加法原理</strong>：略</p>
<p><strong>几何概型</strong>：e.g. 向平面有界区域$𝛀$投掷一个点，点落在可测量的平面区域$A$的试验</p>
<h2 id="§1-5-条件概率"><a href="#§1-5-条件概率" class="headerlink" title="§1.5 条件概率"></a>§1.5 条件概率</h2><h3 id="条件概率基础"><a href="#条件概率基础" class="headerlink" title="条件概率基础"></a>条件概率基础</h3><p><strong>Monty Hall Problem(三门问题)</strong>：</p>
<p><strong>条件概率</strong>：$A、B$是两个事件，且$P(B)&gt;0$，记<script type="math/tex">P(A|B)=\frac{P(AB)}{P(B)}</script>为在事件$B$发生的条件下事件$A$发生的条件概率</p>
<ul>
<li>$P(B)=0$时条件概率无意义</li>
<li>$B$发生带来的“信息”对$A$的“推断”的新认识</li>
<li>$A|B$不是一个事件</li>
<li>$P(A|B)\ge P(AB)$</li>
</ul>
<p><strong>条件概率的基本性质</strong>：</p>
<ul>
<li><p><strong>非负性</strong>：$P(A|B)\ge0$</p>
</li>
<li><p><strong>规范性</strong>：$P(𝛀|B)=1$</p>
</li>
<li><p><strong>可列可加性</strong>：对于两两不相容的事件列$\{A_k\}$有</p>
<script type="math/tex; mode=display">P(\bigcup_{i=1}^{\infty} A_i|B)=\sum_{i=1}^{\infty} P(A_i|B)</script></li>
</ul>
<p>样本空间$\widetilde𝛀=B\cap𝛀$，事件域$\widetilde{\mathcal{A}}=\{B\cap A|A\in\mathcal{A}\}$，概率$P_B(A)=P(A|B)$</p>
<h3 id="条件概率相关公式"><a href="#条件概率相关公式" class="headerlink" title="条件概率相关公式"></a>条件概率相关公式</h3><p><strong>乘法定律(公式)</strong>：$P(AB)=P(A|B)\cdot P(B)$</p>
<p><strong>分划</strong>：事件列$\{B_k\}$两两不相容，且$\bigcup_{i=1}^{n}B_i=𝛀$</p>
<p><strong>全概率公式</strong>：${B_k}$是$𝛀$的一个分划，对任意事件$A$有</p>
<script type="math/tex; mode=display">P(A)=\sum^{n}_{i=1}P(A|B_i)P(B_i)</script><p><strong>贝叶斯公式</strong>：通过原因概率和先验概率计算后验概率</p>
<script type="math/tex; mode=display">P(B_i|A)=\frac{P(A|B_i)P(B_i)}{\sum_{j=1}^{n}P(A|B_j)P(B_j)}</script><h2 id="§1-6-独立性"><a href="#§1-6-独立性" class="headerlink" title="§1.6 独立性"></a>§1.6 独立性</h2><p><strong>相互独立(独立)</strong>：两两独立，三三独立…</p>
<script type="math/tex; mode=display">P(A_{i_1}A_{i_2}...A_{i_k})=P(A_{i_1})P(A_{i_2})...P(A_{i_k})</script><script type="math/tex; mode=display">(1\le i_1<...<i_k\le n，k=2...n)</script><ul>
<li><p>$AB$<strong>独立</strong>与$AB$<strong>不相容</strong>不能同时成立</p>
<p>$P(AB)=P(A)P(B)≠0$</p>
</li>
<li><p>$AB$独立，则$A \bar B$独立，$\bar AB$独立，$\bar A\bar B$独立</p>
<p>$P(AB)=P(A)(1-P(\bar B))=P(A)-P(A)P(\bar B)$</p>
<p>$P(A)P(\bar B)=P(A)-P(AB)=P(A-AB)=P(A\bar B)$</p>
</li>
<li><p>两两独立是相互独立的必要不充分条件</p>
</li>
</ul>
<h1 id="Chapter-2"><a href="#Chapter-2" class="headerlink" title="Chapter 2"></a>Chapter 2</h1><h2 id="§2-1-离散随机变量"><a href="#§2-1-离散随机变量" class="headerlink" title="§2.1 离散随机变量"></a>§2.1 离散随机变量</h2><h3 id="离散型随机变量基础"><a href="#离散型随机变量基础" class="headerlink" title="离散型随机变量基础"></a>离散型随机变量基础</h3><p><strong>随机变量</strong>：令$𝛀$为一个样本空间，令$X$是定义在$𝛀$上的一个实函数 ，则称$X$为一个(一维)随机变量。随机事件可以用随机变量的取值来表示。</p>
<p><strong>离散型随机变量</strong>：随机变量$X$仅取至多可列个值</p>
<p><strong>概率质量函数/频率函数(PMF)</strong>：所有可能的取值→取各个值的概率</p>
<script type="math/tex; mode=display">P\{X=x_k\}=p(x_k)\ (k=1,2,...)</script><p><strong>频率函数的本质特征(充分必要)</strong>：</p>
<ul>
<li>$p(x_k\ge0)，k=1,2…$</li>
<li>$\sum_{k=1}^{\infty}p(x_k)=1$</li>
</ul>
<p><strong>累积分布函数/分布函数(CDF)</strong>：$F(x)=P\{X\leq x\}, -\infty&lt;x&lt;\infty$</p>
<p><strong>分布函数的本质特征(充分必要)</strong>：</p>
<ul>
<li>$F(x)$是单调不减函数</li>
<li><p>$0\leq F(X)\leq 1$且$F(-\infty)=0,F(\infty)=1$</p>
</li>
<li><p>$F(x)$右连续，即$\lim_{t→x^+}F(t)=F(x)$</p>
</li>
</ul>
<p><strong>分布函数的其他性质</strong>：</p>
<ul>
<li><p>$P\{a&lt;X\leq b\}=F(b)-F(a),\ a&lt;b$</p>
</li>
<li><p>$P\{X=c\}=\lim_{\Delta t→0^+}[F(c)-F(c-\Delta t)]=F(c)-F(c-0)$</p>
</li>
</ul>
<h3 id="离散随机变量的分布"><a href="#离散随机变量的分布" class="headerlink" title="离散随机变量的分布"></a>离散随机变量的分布</h3><p><strong>单点分布(退化分布)</strong>：事件几乎处处发生，$P(X=c)=1$，记为$X\overset{a.e}{=}c$或$X=c\ (a.e)$</p>
<p><strong>(0-1)两点分布(伯努利随机变量)</strong>：$P\{X=1\}=p，P\{X=0\}=1-p$</p>
<p><strong>伯努利试验</strong>：只产生两个结果$A,\bar A$的试验</p>
<p><strong>二项分布</strong>：$P\{X=k\}=C^k_np^k(1-p)^{n-k}\ (k=0,1,2,…n)$，记为$X\sim b(n,p)$</p>
<ul>
<li>$b(k;n,p):=C^k_np^k(1-p)^{n-k}$</li>
<li>当$k&lt;(n+1)p$时，$b(k;n,p)$随$k$增加而增加</li>
<li>当最可能出现次数$k=(n+1)p$为正整数时，中心项$b(k;n, p)= b(k-1;n, p)$</li>
</ul>
<p><strong>几何分布</strong>：前面的$k-1$次伯努利试验失败，第$k$次试验成功，故</p>
<script type="math/tex; mode=display">p(k)=P\{X=k\}=(1-p)^{k-1}p,\ k=1,2,3,...</script><p><strong>负二项分布</strong>：连续独立地试验直到成功$r$次为止，停止时做了$k$次试验</p>
<script type="math/tex; mode=display">p(k)=P\{X=k\}=C_{k-1}^{r-1} p^{r}(1-p)^{k-r}</script><p><strong>超几何分布</strong>：$n$个球，$r$黑，$n-r$白，盒中不放回地抽取$m$球，$X$代表抽到的黑球个数</p>
<script type="math/tex; mode=display">P\{X=k\}=\frac{C^k_rC^{m-k}_{n-r}}{C_n^m},\ k=1,...m</script><p><strong>泊松分布</strong>：参数$\lambda&gt;0$，r.v. $X$的取值为0,1,2…，取值概率为</p>
<script type="math/tex; mode=display">P\{X=k\}=\frac{\lambda^k}{k!}e^{-\lambda},\ k=0,1,2,...</script><p>记为$X\sim \pi(\lambda)$或$X\sim P.(\lambda)$</p>
<p><strong>泊松分布的性质</strong>：</p>
<ul>
<li>$P\{X=k\}&gt;0,\ k=0,1,2,…$</li>
<li>$\sum_{k=0}^{\infty}P\{X=k\}=\sum_{k=0}^{\infty}\frac{\lambda^k}{k!}e^{-\lambda}=e^{\lambda}\cdot e^{-\lambda}=1$</li>
</ul>
<p><strong>泊松流与泊松分布</strong>：记时间间隔$(0,t]$中出现的质点数为$X$，则$X\sim P(\lambda t)$，其中泊松强度$\lambda&gt;0$</p>
<p><strong>泊松定理</strong>：设$\lambda&gt;0$为一常数，$n$为正整数，$\lim_{n\to\infty}np_n=\lambda$，则对任一非负整数$k$有</p>
<script type="math/tex; mode=display">\lim _{n \rightarrow \infty} C_{n}^{k} p_{n}^{k}\left(1-p_{n}\right)^{n-k}=\frac{\lambda^{k} e^{-\lambda}}{k !}</script><p>当$n$很大$p$很小时，$C_{n}^{k} p^{k}(1-p)^{n-k} \approx \frac{\lambda^{k} e^{-\lambda}}{k !}$</p>
<h2 id="§2-2-连续随机变量"><a href="#§2-2-连续随机变量" class="headerlink" title="§2.2 连续随机变量"></a>§2.2 连续随机变量</h2><h3 id="连续型随机变量基础"><a href="#连续型随机变量基础" class="headerlink" title="连续型随机变量基础"></a>连续型随机变量基础</h3><p><strong>连续型随机变量</strong>：若r.v. $X$的分布函数能够表示为</p>
<script type="math/tex; mode=display">F(x)=\int_{-\infty}^xf(t)dt,\ -\infty<x<\infty</script><p>其中$f(t)\ge0$且可积，则称$X$为连续性r.v. </p>
<p><strong>概率密度函数(PDF)</strong>：$f(t)$，反映了概率集 中在该点附近的程度，不代表概率</p>
<p><strong>密度函数的本质特征</strong>：</p>
<ul>
<li>$f(t)\ge0$</li>
<li>$\int_{-\infty}^{\infty}f(t)dt=1$</li>
</ul>
<p><strong>密度函数的性质</strong>：</p>
<ul>
<li><p>$\forall x_1&lt;x_2$有</p>
<p>$P\left\{x_{1}&lt;X \leq x_{2}\right\}=F\left(x_{2}\right)-F\left(x_{1}\right)=\int_{x_{1}}^{x_{2}} f(x) d x$</p>
</li>
<li><p>在$f(x)$的连续点处有$f(x)=F’(x)$</p>
</li>
<li><p>补充几个不可导处点值不影响积分值</p>
</li>
<li>$\forall c$，$P\{X=c\}=0$</li>
</ul>
<p><strong>$p$分位数</strong>：对于$X\sim f(x)$，若$\forall 0&lt;p&lt;1$，存在常数$x_p$满足$F(x_p)=p$，则$x_p$为密度函数$f(x)$的$p$分位数</p>
<p><strong>概率函数</strong>：</p>
<script type="math/tex; mode=display">f(x)\left\{\begin{array}{c}
\text { 对离散型 } r.v\  X \text { 表示频率函数,即 } \\
f(x)=P\{X=x\}, x=x_{1}, x_{2}, \cdots \\
\text { 对连续型 } r.v\  X \text { 表示密度函数,即有 } \\
f(x) \geq 0, \int_{-\infty}^{\infty} f(x) d x=1
\end{array}\right.</script><h3 id="连续随机变量的分布"><a href="#连续随机变量的分布" class="headerlink" title="连续随机变量的分布"></a>连续随机变量的分布</h3><h4 id="正态分布"><a href="#正态分布" class="headerlink" title="正态分布"></a>正态分布</h4><p><strong>正态分布</strong> $f(x)=\frac{1}{\sigma \sqrt{2 \pi}} e^{-\frac{(x-\mu)^{2}}{2 \sigma^{2}}} $ ，其中$-\infty&lt;\mu&lt;\infty$，$\sigma&gt;0$，记为$X\sim \mathbf N(\mu,\sigma^2)$</p>
<p><strong>正态分布函数的性质</strong>：</p>
<ul>
<li><p>$f(\mu+x)=f(\mu-x)$，即$f(x)$关于$x=\mu$对称</p>
</li>
<li><p>$x&lt;\mu$，$f’(x)&gt;0$，$f(x)↑$</p>
<p>$x&gt;\mu$，$f’(x)&lt;0$，$f(x)↓$</p>
<p>极大值$f(\mu)=\frac{1}{\sqrt{2\pi}\sigma}$</p>
</li>
<li><p>$\mu$不改变形状，改变对称轴位置；$\sigma$不改变对称轴，改变图像形状</p>
</li>
</ul>
<p><strong>标准正态分布</strong>：$X\sim \mathbf N(0,1)$</p>
<script type="math/tex; mode=display">\varphi(x)=\frac{1}{\sqrt{2 \pi}} e^{-\frac{x^{2}}{2}}$$，$$\quad \Phi(x)=\int_{-\infty}^{x} \frac{1}{\sqrt{2 \pi}} e^{-\frac{t^{2}}{2}} d t</script><p>若$X\sim \mathbf N(\mu,\sigma^2)$，则$ Z=\frac{X-\mu}{\sigma} \sim \mathbf N(0, 1)$</p>
<h4 id="均匀分布"><a href="#均匀分布" class="headerlink" title="均匀分布"></a>均匀分布</h4><p><strong>均匀分布</strong>：若r.v. $X$的密度函数为</p>
<script type="math/tex; mode=display">f(x)=\left\{\begin{array}{cc}
\frac{1}{b-a}, & a<x<b \\
0, & \text {Others}
\end{array}\right.</script><p>则称$X$服从区间$(a,b)$上的均匀分布，记为$X\sim\mathbf U(a,b)$</p>
<ul>
<li>$\forall (c,c+L) ⊂ (a,b)$，$P\{c&lt;X \leq c+L\}=\int_{c}^{c+L} \frac{d x}{b-a}=\frac{L}{b-a}$</li>
</ul>
<h4 id="指数分布"><a href="#指数分布" class="headerlink" title="指数分布"></a>指数分布</h4><p><strong>指数分布</strong>：若r.v. $X$的密度函数为</p>
<script type="math/tex; mode=display">f(x)=\left\{\begin{array}{cc}
\lambda e^{-\lambda x}, & x>0 \\
0, & x \leq 0
\end{array}\right.</script><p>则称$X$服从参数为$\lambda&gt;0$的指数分布，记为$X\sim \mathbf{EXP}(\lambda)$</p>
<ul>
<li><p>$X$的分布函数为$F(x)=\left\{\begin{array}{cc}<br>1-e^{-\lambda x}, &amp; x&gt;0 \\<br>0, &amp; x \leq 0<br>\end{array}\right.$</p>
</li>
<li><p>泊松流中第一个质点出现的时间服从指数分布：$P\{Y&gt;t\}=P\{X=0\}=e^{-\lambda t}$</p>
</li>
<li><p>$\lambda$称为失效率，$\lambda^{-1}$表示平均寿命</p>
</li>
<li>无记忆性：$P\{ X&gt;s+t| X&gt;s\}=P\{ X&gt;t\}$</li>
</ul>
<h4 id="伽马分布、贝塔分布-了解"><a href="#伽马分布、贝塔分布-了解" class="headerlink" title="伽马分布、贝塔分布(了解)"></a>伽马分布、贝塔分布(了解)</h4><p><strong>伽马分布</strong>：一般地，设$X$为连续型r.v，概率密度为</p>
<script type="math/tex; mode=display">f(x)=\left\{\begin{array}{cc}
\frac{\lambda^{r}}{\Gamma(r)} x^{r-1} e^{-\lambda x}, & x>0 \\
0, & x \leq 0
\end{array}\right.</script><p>其中$r &gt; 0, \lambda &gt; 0$为常数，则称$X$服从参数为$(r,\lambda)$的$\Gamma$分布，记为$X\sim\Gamma(r,\lambda)$，此处$\Gamma(r)=\int_{0}^{\infty} x^{r-1} e^{-x} d x \quad(r&gt;0)$</p>
<p>当$r$为自然数时，$\Gamma(r)=(r-1)!$</p>
<p><strong>伽马分布的应用</strong>：假如在$(0,t]$内元件受到的冲击次数$N_t$是一个Poisson流。 当$r$是任意自然数时，元件寿命就是第$r$次冲击来到的时间， 记为$X$，则$X\sim\Gamma(r,\lambda)$，它的可靠度函数</p>
<script type="math/tex; mode=display">R(t)=P\{X>t\}=\sum_{i=0}^{r-1} P\left\{N_{t}=i\right\}=e^{-\lambda t} \sum_{i=0}^{r-1} \frac{(\lambda t)^{i}}{i !}</script><p><strong>贝塔分布</strong>：</p>
<p>贝塔密度用来刻画$[0,1]$区间上的随机变量：</p>
<p>$f(u)=\frac{\Gamma(a+b)}{\Gamma(a) \Gamma(b)} u^{a-1}(1-u)^{b-1}, \quad 0 \leq u \leq 1$</p>
<p>特别地，$a=b=1$时为均匀分布</p>
<h2 id="§2-3-随机变量的函数"><a href="#§2-3-随机变量的函数" class="headerlink" title="§2.3 随机变量的函数"></a>§2.3 随机变量的函数</h2><p><strong>随机变量的函数</strong>：对于r.v. $X$，$g(\cdot):𝑹\to 𝑹$是一个函数，将$X$代入函数$g(\cdot)$，得到新的随机变量$𝒀=g(X):\ 𝛀 → 𝑹$，即$𝒀(\omega)=g(X(\omega)),\forall \omega\in 𝛀 $</p>
<p>随机变量$𝒀$称为随机变量$X$的函数</p>
<h3 id="离散型-r-v-函数的频率函数"><a href="#离散型-r-v-函数的频率函数" class="headerlink" title="离散型 r.v. 函数的频率函数"></a>离散型 r.v. 函数的频率函数</h3><ol>
<li>列出$ Y$的可能取值</li>
<li>找出$\{ Y=y\}$的等价事件$\{ X\in D\}$</li>
<li>$P\{ Y=y\}=P\{ X\in D\}$</li>
</ol>
<p><strong>离散→离散</strong>：</p>
<p>$y=g(x_1)=g(x_2)=…=g(x_k)$，$P\{𝒀=y\}=\sum_{i=1}^{k}P\{X=x_i\}$</p>
<p><strong>连续→离散</strong>：</p>
<p>$ Y=c,a&lt; X\leq b$，$P\{ Y=c\}=P\{a&lt; X\leq b\}=F_{ X}(b)-F_{ X}(a)$</p>
<h3 id="连续型-r-v-的频率函数"><a href="#连续型-r-v-的频率函数" class="headerlink" title="连续型 r.v. 的频率函数"></a>连续型 r.v. 的频率函数</h3><ol>
<li>求$ Y$的分布函数$F_{ Y}(y)=P\{ Y\leq y\}=P\{g( X)\leq y\}$</li>
<li>转化为关于r.v. $ X$的概率计算问题(用到$y=g(x)$的性质)</li>
<li>求导得$f_{ Y}(y)=\frac{d}{dy}F_{ Y}(y)$</li>
</ol>
<p><strong>定理</strong>：设r.v. $ X$的密度函数为$f(x)$，又$y=g(x)$是严格单调函数，其反函数$h(y)=g^{-1}(y)$连续可导，则$ Y=g( X)$的密度函数为：</p>
<script type="math/tex; mode=display">{f}_({y})=\left\{\begin{array}{cl}
\left|{h}^{\prime}({y})\right| \cdot {f}({h}({y})), & {h}({y}) \text { 有意义 } \\
0, & \text { 其他 }
\end{array}\right.</script><p><strong>结论</strong>：正态r.v.的线性函数仍是正态r.v.</p>
<p><strong>推广的定理</strong>：设r.v$X$的密度函数为$f(𝒙)$,又函数$g(x)$在若干互不相交的区间 $(a_i,b_i)$上逐段严格单调, 且其反函数$h_i(y)$均连续可导,则$Y=g(X)$的密度函数为</p>
<script type="math/tex; mode=display">f_{Y}(y)=\left\{\begin{array}{cc}
\sum_{i=1}\left|h_{i}^{\prime}(y)\right| \cdot f\left(h_{i}(y)\right), & h_{1}(y), h_{2}(y), \cdots \text { 有意义 } \\
0, & \text { 其他 }
\end{array}\right.</script><p><strong>均匀分布与其他连续分布的关系</strong>：</p>
<p>设r.v. $X$的密度为$f(x)$, 分布函数为$F(x)$。其中$F(x)$在某区间$I$上严格递增,$I$的左端点处 $F=0$, 右端点处$F=1$。$I$ 可以是有界区间, 也可以是无界区间. 因此, $F^{-1}(x)$在$I$上都有定义.</p>
<ol>
<li><p>令$Z=F(X)$，则$Z\sim \mathbf U(0,1)$。</p>
</li>
<li><p>令$U\sim\mathbf U(0,1)$，$X=F(U)$，那么$X$的分布函数是$F^{-1}(x)$。</p>
</li>
</ol>
<p>应用：要生成分布函数为$F(x)$的r.v., 只需将$F^{-1}$作用在均匀分布的随机数上即可.</p>
<h1 id="Chapter-3"><a href="#Chapter-3" class="headerlink" title="Chapter 3"></a>Chapter 3</h1><h2 id="§3-1-联合累积分布函数"><a href="#§3-1-联合累积分布函数" class="headerlink" title="§3.1 联合累积分布函数"></a>§3.1 联合累积分布函数</h2><p><strong>二维随机变量(向量)</strong>：设$𝛀$为样本空间,$X=X(\omega),Y=Y(\omega)\ (\omega\in𝛀)$ 是 定义在$𝛀$上的两个随机变量，记</p>
<script type="math/tex; mode=display">(X, Y) ≜ (X(\omega), Y(\omega)) (\omega ∈ 𝜴)</script><p>称$(X,Y)$为二维随机变量（向量）。</p>
<p><strong>联合累积分布函数</strong>：设$(X,Y)$是二维r.v.，$\forall x,y\in(-\infty,\infty)$，定义</p>
<script type="math/tex; mode=display">F(x,y)≜P(\{X\leq x\}\cap\{Y\leq y\})=P\{X\leq x,Y\leq y\}</script><p>则称$F(x,y)$为二维r.v. $(X,Y)$的联合累积分布函数。</p>
<p><strong>联合累积分布函数的本质特征</strong>：</p>
<ol>
<li><p>$\forall x_0$，$F(x_0,y)$是$y$的单调不减函数</p>
<p>$\forall y_0$，$F(x,y_0)$是$x$的单调不减函数</p>
</li>
<li><p>$0\leq F(x,y)\leq 1$，且</p>
<p>$F(\infty,\infty)=1$，$F(-\infty,-\infty)=0$</p>
<p>$\forall x,y$，$F(-\infty,y)=F(x,-\infty)=0$</p>
</li>
<li><p>$F(x,y)$关于$x$和$y$分别右连续</p>
</li>
<li><p>$\forall x_1&lt;x_2,y_1&lt;y_2$有</p>
<script type="math/tex; mode=display">F(x_2,y_2)-F(x_1,y_2)-F(x_2,y_1)+F(x_1,y_1)\ge 0</script><script type="math/tex; mode=display">=P\{x_1<X\leq x_2,y_1<Y\leq y_2\}</script></li>
</ol>
<p><strong>n维随机变量及其联合分布函数</strong>：Trivial.</p>
<h2 id="§3-2-二维离散随机变量"><a href="#§3-2-二维离散随机变量" class="headerlink" title="§3.2 二维离散随机变量"></a>§3.2 二维离散随机变量</h2><p><strong>联合频率函数</strong>：$P\{X=x_i,Y=y_j\}=p(x_i,y_j)≜p_{ij}$</p>
<p><strong>边际分布函数</strong>：$F_X(x)=P\{X\leq x\}=P\{X\leq x,Y\leq \infty\}=F(x,\infty)$</p>
<p>随机变量的边际分布完全由其联合分布确定</p>
<p><strong>边际频率函数</strong>：</p>
<p>$P\{X=x_i\}=\sum_{j=1}^{\infty}p_{ij}≜p_{i\cdot}$</p>
<p>$P\{Y=y_j\}=\sum_{i=1}^{\infty}p_{ij}≜p_{\cdot j}$</p>
<p><strong>n维离散随机变量的频率函数</strong>：trivial.</p>
<p><strong>多项分布</strong>：假设进行$n$次独立试验, 每次试验有$r$种可能的结果, 各自出现的概率分别为$p_1,p_2,…p_r$。</p>
<p>令$N_i$是第$n$次试验出现第$i$种试验结果的所有次数，其中$i=1…r$。$N_1,N_2,…N_r$的联合频率函数是</p>
<p>$p\left(n_{1}, \ldots, n_{r}\right)=\left(\begin{array}{c}<br>n \\<br>n_{1}, \cdots, n_{r}<br>\end{array}\right) p_{1}^{n_{1}} p_{2}^{n_{2}} \cdots p_{r}^{n_{r}}$</p>
<p>$N_i\sim b(n,p_i)$，<script type="math/tex">p_{N_{i}}\left(n_{i}\right)=\left(\begin{array}{c}
n \\
n_{i}
\end{array}\right) p_{i}^{n_{i}}\left(1-p_{i}\right)^{n-n_{i}}</script></p>
<h2 id="§3-3-二维连续随机变量"><a href="#§3-3-二维连续随机变量" class="headerlink" title="§3.3 二维连续随机变量"></a>§3.3 二维连续随机变量</h2><h3 id="二维连续型r-v"><a href="#二维连续型r-v" class="headerlink" title="二维连续型r.v."></a>二维连续型r.v.</h3><p><strong>二维连续型随机变量</strong>：设r.v. $(X,Y)$的联合分布函数为$F(x,y)=P\{X\leq x,Y\leq y\}$，若存在非负可积函数$f(x,y)\ge 0$使得</p>
<script type="math/tex; mode=display">F(x,y)=\int_{-\infty}^{x}\int_{-\infty}^{y}f(u,v)dvdu,\ (\forall (x,y)\in R^2)</script><p>则称$(X,Y)$为二维连续型随机变量</p>
<p><strong>联合概率密度</strong>：上述$f(x,y)$称为$X,Y$的联合概率密度</p>
<p><strong>密度函数的本质特征</strong>：</p>
<ol>
<li><p>$f(x,y)\ge0\ (\forall (x,y)\in R^2)$</p>
</li>
<li><p>$\int_{-\infty}^{\infty}\int_{-\infty}^{\infty}f(u,v)dudv=1$</p>
</li>
</ol>
<p><strong>密度函数的基本性质</strong>：</p>
<ol>
<li><p>$\forall D⊂R^2$，其中$D$为由逐段光滑曲线围成的平面区域</p>
<script type="math/tex; mode=display">P\{(X,Y)\in D\}=\iint\limits_Df(x,y)dxdy</script></li>
<li><p>在$f(x,y)$的连续点处，有</p>
<p>$\frac{\partial^2F(x,y)}{\partial x\partial y}=f(x,y)$</p>
</li>
</ol>
<p><strong>约定</strong>：</p>
<p>$\left(X_{1}, X_{2}, \cdots, X_{n}\right) \sim F\left(x_{1}, x_{2}, \cdots, x_{n}\right)$，$n$维随机变量的分布函数是$F$</p>
<p>$\left(X_{1}, X_{2}, \cdots, X_{n}\right) \sim f\left(x_{1}, x_{2}, \cdots, x_{n}\right)$，$n$维随机变量的频率函数是$f$</p>
<p><strong>边际分布函数</strong>：</p>
<script type="math/tex; mode=display">F_X(x)=P\{X\leq x\}=P\{X\leq x, Y\leq \infty\}=\int_{-\infty}^{x}\int_{-\infty}^{\infty}f(u,y)dydu</script><p><strong>边际密度函数</strong>：</p>
<script type="math/tex; mode=display">f_X(x)=\int_{-\infty}^{\infty}f(x,y)dy</script><p><strong>$n$维边际密度函数</strong>：</p>
<script type="math/tex; mode=display">f_{X}(x)=\int_{-\infty}^{\infty} \int_{-\infty}^{\infty} f(x, y, z) d y d z</script><h3 id="二维联合分布"><a href="#二维联合分布" class="headerlink" title="二维联合分布"></a>二维联合分布</h3><p><strong>二维均匀分布</strong>：设$G$是平面上的有界区域,面积为$A$,若二维随机变量$(X,Y)$具有概率密度</p>
<script type="math/tex; mode=display">f(x, y)=\left\{\begin{array}{lr}
\frac{1}{A}, & (x, y) \in G \\
0, & \text { 其他 }
\end{array}\right.</script><p>则称$(X,Y)$在$G$上服从均匀分布。若$G_1$是$G$内的面积为$A_1$的子区域，则有</p>
<script type="math/tex; mode=display">P\{(X,Y)\in G_1\}=\iint\limits_{G_1}\frac{1}{A}dxdy=\frac{A_1}{A}</script><p><strong>二维正态分布</strong>：设$X,Y$的联合密度为：</p>
<script type="math/tex; mode=display">f(x, y)=\frac{1}{2 \pi \sigma_{1} \sigma_{2} \sqrt{1-\rho^{2}}} e^{-\frac{1}{2\left(1-\rho^{2}\right)}\left[\frac{\left(x-\mu_{1}\right)^{2}}{\sigma_{1}^{2}}-\frac{2 \rho\left(x-\mu_{1}\right)\left(y-\mu_{2}\right)}{\sigma_{1} \sigma_{2}}+\frac{\left(y-\mu_{2}\right)^{2}}{\sigma_{2}^{2}}\right]}</script><p>则称$(X,Y)$服从参数为$(\mu_1,\mu_2,\sigma_1^2,\sigma_2^2,\rho)$的二维正态分布，记为</p>
<script type="math/tex; mode=display">(X,Y)\sim \mathbf N(\mu_1,\mu_2,\sigma_1^2,\sigma_2^2,\rho)</script><p>其中各参数满足$-\infty&lt;\mu&lt;\infty,\sigma&gt;0,|\rho|&lt;1$，峰值$f(\mu_1,\mu_2)=\frac{1}{2 \pi \sigma_{1} \sigma_{2} \sqrt{1-\rho^{2}}}$</p>
<p><strong>二维正态分布的性质</strong>：二维正态r.v.的边际分布均为一维正态分布，若$(X,Y)\sim \mathbf N(\mu_1,\mu_2,\sigma_1^2,\sigma_2^2,\rho)$，则$X\sim\mathbf N(\mu_1,\sigma_1^2),Y\sim\mathbf N(\mu_2,\sigma_2^2)$</p>
<p>边际密度均为正态分布的随机变量，其联合分布不一定是二维正态分布。</p>
<p>由随机变量的边际分布不能确定联合分布，反之可以。</p>
<p><strong>连接函数(了解)</strong>：略</p>
<h2 id="§3-4-独立随机变量"><a href="#§3-4-独立随机变量" class="headerlink" title="§3.4 独立随机变量"></a>§3.4 独立随机变量</h2><p><strong>相互独立</strong>：设$(X,Y)\sim F(x,y),\ X\sim F_X(x),\ Y\sim F_Y(y)$，若$\forall x,y\in(-\infty,\infty)$有</p>
<script type="math/tex; mode=display">P\{X\leq x,Y\leq y\}=P\{X\leq x\}\cdot P\{Y\leq y\}</script><p>即$F(x,y)=F_X(x)\cdot F_Y(y)$，则称随机变量$X,Y$相互独立</p>
<p>若$(X,Y)$相互独立，对于“合理”的集合$A,B⊂R$，$\{X\in A\},\{Y\in B\}$相互独立</p>
<p><strong>离散r.v.相互独立</strong>：两个离散r.v.相互独立的充要条件是$p_{ij}=p_{i\cdot}\cdot p_{\cdot j}$</p>
<p><strong>连续r.v.相互独立</strong>：$f(x,y)\overset{a.e.}=f_X(x)f_Y(y)$</p>
<p>若$(X,Y)$的密度函数能分解为$f(x,y)=g(x)h(y)$，$g(x)\ge0$且$h(y)\ge0$且支撑区域可分离，则$X,Y$相互独立</p>
<p><strong>二维正态分布的性质</strong>：设$(X,Y)\sim \mathbf N(\mu_1,\mu_2,\sigma_1^2,\sigma_2^2,\rho)$，则$X,Y$相互独立⇔$\rho=0$</p>
<p><strong>$n$维随机变量的独立性</strong>：</p>
<ol>
<li><p>$\forall x_1,x_2,…x_n\in R$，若有</p>
<script type="math/tex; mode=display">F(x_1,x_2,...x_n)=F_{X_1}(x_1)F_{X_2}(x_2)\cdots F_{X_n}(x_n)</script><p>则称$X_1,X_2,…,X_n$相互独立</p>
</li>
<li><p>设</p>
<script type="math/tex; mode=display">\begin{array}{c}
\left(X_{1}, X_{2}, \cdots, X_{m}\right) \sim F_{1}\left(x_{1}, x_{2}, \cdots, x_{m}\right) \\
\left(Y_{1}, Y_{2}, \cdots, Y_{n}\right) \sim F_{2}\left(y_{1}, y_{2}, \cdots, y_{n}\right) \\
\left(X_{1}, X_{2}, \cdots, X_{m}, Y_{1}, Y_{2}, \cdots, Y_{n}\right) \sim F\left(x_{1}, x_{2}, \cdots, x_{m}, y_{1}, y_{2}, \cdots, y_{n}\right)
\end{array}</script><p>$\forall x_1,x_2,…,x_m,y_1,y_2,…,y_n\in R$，若有</p>
<script type="math/tex; mode=display">F(x_1,...,x_m,y_1,...,y_n)=F_1(x_1,...,x_m)\cdot F_2(y_1,...,y_n)</script><p>则称$(X_1,…,X_m)$，$(Y_1,…,Y_n)$相互独立</p>
</li>
<li><p>设$(X_1,…,X_m)$，$(Y_1,…,Y_n)$相互独立，则</p>
<ul>
<li>$X_i,Y_j$相互独立</li>
<li>设$h,g$分别是$m$元和$n$元的连续函数，则$h(X_1,…,X_m),g(Y_1,…,Y_n)$相互独立。</li>
</ul>
</li>
</ol>
<h2 id="§3-5-条件分布"><a href="#§3-5-条件分布" class="headerlink" title="§3.5 条件分布"></a>§3.5 条件分布</h2><p><strong>二维离散型r.v.的条件频率函数</strong>：设$(X,Y)$的频率函数为$P\{X=x_i,Y=y_j\}=p_{ij}$</p>
<p>考虑在$\{Y=y_j\}$已发生的条件下，${X=x_i}$发生的条件概率$P\{X=x_i|Y=y_j\}$为</p>
<script type="math/tex; mode=display">P\{X=x_i|Y=y_j\}=\frac{P\{X=x_i,Y=y_j\}}{P\{Y=y_j\}}=\frac{p_{ij}}{p_{\cdot j}}</script><p>记为$P_{X|Y}(x_i|y_j)$，即为在$Y=y_j$的条件下，r.v. $X$的条件频率函数</p>
<p><strong>条件频率函数的性质</strong>：</p>
<ul>
<li><p>若$X,Y$独立，则$P_{X|Y}(x|y)=f_X(x)$</p>
</li>
<li><p>$P\{X=x_i|Y=y_j\}\ge0$</p>
</li>
<li><p>$\overset{\infty}\sum\limits_{i=1}P\{X=x_i|Y=y_j\}=1$，由上述两条可知条件频率函数也是频率函数</p>
</li>
<li><p>全概率公式：$f_X(x)=\sum\limits_{y}P_{X|Y}(x|y)f_Y(y)$</p>
<p>若$f_Y(y)=0$，则定义$P_{X|Y}(x|y)=0$</p>
</li>
</ul>
<p><strong>二维r.v.的条件分布函数</strong>：$F_{X|Y}(x|y)=P\{X\leq x| Y= y\}=\frac{P\{X\leq x, Y=y\}}{P\{Y=y\}}$</p>
<ul>
<li>对于连续型随机变量，若极限$\lim\limits_{𝜺→0^+}P\{X\leq x|y&lt;Y\leq y+𝜺\}$存在，则称其为在条件$Y=y$下$X$的条件分布函数</li>
</ul>
<p><strong>二维连续型随机变量的条件概率密度</strong>：</p>
<script type="math/tex; mode=display">\lim\limits_{𝜺→0^+}P\{X\leq x|y<Y\leq y+𝜺\}=\int_{-\infty}^{x}\frac{f(u,y)}{f_Y(y)}du</script><p><strong>条件密度</strong>：$f_{X|Y}(x|y)≜\frac{f(x,y)}{f_Y(y)}$</p>
<p><strong>条件分布</strong>：$F_{X|Y}(x|y)≜\int_{-\infty}^{x}f_{X|Y}(u|y)du$</p>
<p><strong>全概率公式 连续ver.</strong>：$f_Y(y)=\int_{-\infty}^{\infty}f_{Y|X}(y|x)f_X(x)dx$</p>
<p><strong>条件密度的性质</strong>：</p>
<ul>
<li>$f_{X|Y}(x|y)\ge0$</li>
<li>$\int_{-\infty}^{\infty}f_{X|Y}(x|y)dx=1$</li>
</ul>
]]></content>
      <categories>
        <category>Math</category>
      </categories>
      <tags>
        <tag>Probability &amp; Statistics</tag>
      </tags>
  </entry>
  <entry>
    <title>Fisher Information Matrix</title>
    <url>/2023/06/23/Fisher_Info_Matrix/</url>
    <content><![CDATA[<p>Learning a parameter vector $\theta$:</p>
<script type="math/tex; mode=display">\underset{\theta\in\mathbb R^n}{\arg\max}\ p(x|\theta)</script><p>Here $p(x|\theta)$ is the likelihood, which we need to maximize wrt. $\theta$.</p>
<p><strong>Score function</strong>:</p>
<script type="math/tex; mode=display">s(\theta) =\nabla_{\theta}\log p(x\vert\theta)</script><p><strong>Claim.</strong> The expected value of $s(\theta)$ wrt. $\theta$ is $0$.</p>
<p><strong>Proof.</strong> </p>
<script type="math/tex; mode=display">\begin{align*} \mathop{\mathbb{E}}_{p(x\vert\theta)}\left[ s(\theta)\right] &=\mathop{\mathbb{E}}_{p(x\vert\theta)}\left[\nabla\log p(x\vert\theta)\right]\\[5pt]    &=\int\nabla\log p(x\vert\theta)  p(x\vert\theta)\text{d}x\\[5pt]    &=\int\frac{\nabla p(x\vert\theta)}{p(x\vert\theta)} p(x\vert\theta)\text{d}x\\[5pt]    &=\int\nabla p(x\vert\theta)\text{d}x\\[5pt]    &=\nabla\int p(x\vert\theta)\text{d}x\\[5pt]    &=\nabla 1\\[5pt]    &= 0\end{align*}</script><p><strong>Fisher Information Matrix</strong> is the covariance of score function:</p>
<p>$\text F=\mathop{\mathbb{E}}_{p(x\vert\theta)}\left[ (s(\theta) - 0)(s(\theta) - 0)^{\text{T}}\right] =\mathop{\mathbb{E}}_{p(x\vert\theta)}\left[\nabla\log p(x\vert\theta)\nabla\log p(x\vert\theta)^{\text{T}}\right] $</p>
<p>Calculating the exact expectation can be hard, so we approximate the expectation by using <a href="https://en.wikipedia.org/wiki/Empirical_distribution_function">empirical distribution</a>. Given training data $X =\{ x_1, x_2,\cdots, x_N\}$, we have <strong>Empirical Fisher Information Matrix</strong>:</p>
<script type="math/tex; mode=display">\begin{align}\text F &=\frac{1}{N}\sum_{i=1}^{N}\nabla\log p(x_i\vert\theta)\nabla\log p(x_i\vert\theta)^{\text{T}} .\end{align}</script><p>Not sure: Calculating empirical FIM takes $O(nk^2)$ time, where $n$ is the size of training set and $k$ is the number of parameters.</p>
]]></content>
      <categories>
        <category>Math</category>
      </categories>
      <tags>
        <tag>Probability &amp; Statistics</tag>
      </tags>
  </entry>
  <entry>
    <title>基于重复因子的字符串匹配</title>
    <url>/2022/11/12/String%20matching%20based%20on%20repetition%20factors/</url>
    <content><![CDATA[<p>出处：CLRS Problem 32-1，DSAA(H) 2021 Fall Midterm Final Problem</p>
<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>记$y^i$为字符串$y$进行$i$次重复后的拼接字符串，例如$(ab)^3=ababab$。</p>
<p>对于字符串$x\in\Sigma^{\star}$，若存在字符串$y\in\Sigma^{\star}$和正整数$r$，使得$x=y^r$，则称$r$为$x$的一个<strong>重复因子</strong>。</p>
<p>记$\rho(x)$为字符串$x$的<strong>最大重复因子</strong>。</p>
<ol>
<li><p>设计算法对于输入字符串$P[1_\cdots m]$，对于$1\leq i\leq m$，求解$\rho(P[1_\cdots i])$，即$P$每个前缀串的最大重复因子。</p>
</li>
<li><p>记$\rho^{\star}(P)=max\{\rho(P[1_\cdots i])\}, 1\leq i\leq m$，即$P$所有前缀串中最大重复的因子。</p>
<p>证明：从长度为$m$的二进制串集合中任取其一，则$\rho^{*}(P)$的期望值是$O(1)$的。</p>
</li>
<li><p>证明Galil &amp; Seiferas算法的正确性：</p>
<p>该算法能在$O(\rho^{\star}(P)n+m)$的时间内，从文本串$T[1_\cdots n]$中匹配模式串$P[1_\cdots m]$的所有出现位置，且除模式串和文本串外，空间开销仅为$O(1)$。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">REPETITION_MATCHER(P, T)</span><br><span class="line">    m = P.length</span><br><span class="line">    n = T.length</span><br><span class="line">    k = 1 + ρ*(P)</span><br><span class="line">    q = 0</span><br><span class="line">    s = 0</span><br><span class="line">    while s ≤ n - m</span><br><span class="line">        if T[s + q + 1] == P[q + 1]</span><br><span class="line">            q = q + 1</span><br><span class="line">            if q == m</span><br><span class="line">                print &quot;Pattern occurs with shift&quot; s</span><br><span class="line">        if q == m or T[s + q + 1] != P[q + 1]</span><br><span class="line">            s = s + max(1, ceil(q / k))</span><br><span class="line">            q = 0</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="算法设计"><a href="#算法设计" class="headerlink" title="算法设计"></a>算法设计</h3><p>求出最长公共前后缀数组$\pi[m]$，记$k=m-\pi[m]$。</p>
<p>若$k|m$，则$k$就是最小循环节，$\rho(P)=\frac{m}{k}$。</p>
<p>$\pi[m]=0$的情况：除$P$本身外不存在循环节，$k=m$，显然$\rho(P)=1$成立。</p>
<p>$\pi[m]&gt;0$的情况：由于$k|m$又$k≠m$，则$2k\leq m$，又有$\pi[m]\ge \frac{m}{2}$，因此最长公共前后缀有交集(如图)。</p>
<p><img src="https://s2.loli.net/2022/11/12/ifog5x8TtJZ2nWA.png" alt="image.png" style="zoom: 33%;" /></p>
<p>利用公共前后缀的性质，后缀(蓝色)的末尾$k$个字符与前缀的末尾$k$个字符相等，而前缀的末尾$k$个字符又是后缀(蓝色)的末尾倒数$k+1\sim2k$共$k$个字符，由此递推，由于$k|m$，有$k|\pi[m]$，末尾$k$个字符也就是$P$的循环节了。</p>
<p><img src="https://s2.loli.net/2022/11/12/IRE4jmoYUKyQCXg.png" alt="image.png" style="zoom: 40%;" /></p>
<p>现用反证法证明不存在更小的循环节/更大的$\rho(P)$：若存在更小的循环节，则说明$P$最长公共前后缀可以更长($\pi[m]$可以更大)，然而现在保证了$\pi[m]$的正确性，因而不存在更小的循环节。</p>
<p>若$k\nmid m$，则除$P$本身外不存在循环节，$\rho(P)=1$，证明如下：</p>
<p>假设$\rho(P)\ge2$，则说明$P$有至少重复两次的循环节，那么$P$最长公共前后缀应为恰好循环$\rho(P)-1$次的循环节，此时$k$应为单个循环节长度$\frac{m}{\rho(P)}$，则$k|m$，矛盾。</p>
<p>时间复杂度：求$\pi[m]$耗时$O(m)$，判断整除等运算均为$O(1)$，整体时间复杂度$O(m)$</p>
<h3 id="期望值证明"><a href="#期望值证明" class="headerlink" title="期望值证明"></a>期望值证明</h3><blockquote>
<p>$^\star$这里貌似怪怪的，不太懂概率上界为什么是4就能说明期望有界了。</p>
<p>$^\star$我感觉最后那个概率沿着这种思路应该不能粗暴相加要用容斥，现在没时间想先留个坑。</p>
</blockquote>
<p>二进制串$P$的长度为$i$的前缀子串一共有$2^i$种。假设$r|i$，则可以构造长度为$\frac{i}{r}$的循环节，共有$2^{\frac{i}{r}}$种，选中概率为$\frac{2^{\frac{i}{r}}}{2^i}=\frac{1}{2^{i\frac{r-1}{r}}}$。则利用布尔不等式计算$\rho(P[1_{\cdots}i])&gt; r$的概率为</p>
<script type="math/tex; mode=display">\begin{aligned}
\sum_{r^{\prime}>r, r^{\prime} \mid i} \frac{1}{2^{i \frac{\left(r^{\prime}-1\right)}{r^{\prime}}}} &=\frac{1}{2^{i}} \sum_{r^{\prime}>r, r^{\prime} \mid i} 2^{i / r^{\prime}} \\
&=\frac{1}{2^{i}} \sum_{j=1}^{\left\lfloor{i/r}\rfloor\right.} 2^{j} \\
& \leq \frac{2^{i / r}}{2^{i-1}} \\
&=2^{i / r-i+1}
\end{aligned}</script><p>接下来对于每个$i\in[1,m]$，用布尔不等式加和求$\rho(P)&gt;r$的概率上界：</p>
<script type="math/tex; mode=display">\begin{aligned}
\sum_{i=0}^{m} 2^{i / r-i+1} &=2 \sum_{i=1}^{m} 2^{\left(\frac{1}{r}-1\right)^{i}} \\
&=2 \frac{1-2^{\frac{m+1}{r}-m-1}}{1-2^{\left(\frac{1}{r}-1\right)}} \\
& \leq 2 \frac{1}{2^{\left(\frac{1}{r}-1\right)}}
\end{aligned}</script><p>该式随$r$增长，较快地收敛到4，期望值是有界的且与$m$无关，因而为$O(1)$</p>
<h3 id="Galil-amp-Seiferas算法"><a href="#Galil-amp-Seiferas算法" class="headerlink" title="Galil &amp; Seiferas算法"></a>Galil &amp; Seiferas算法</h3><blockquote>
<p>This algorithm correctly finds the occurrences of the pattern $P$ for reasons similar to the Knuth Morris Pratt algorithm. That is, we know that we will only increase $q\ \rho^{\star}(P)$ many times before we have to bite the bullet and increase $s$, and $s$ can only be increased at most $n − m$ many times. It will definitely find every possible occurrence of the pattern because it searches for every time that the primitive root of $P$ occurs, and it must occur for $P$ to occur.</p>
</blockquote>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Algorithm</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/07/10/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>杂</category>
      </categories>
      <tags>
        <tag>博客搭建</tag>
      </tags>
  </entry>
  <entry>
    <title>Reinforcement Learning Seminar Ⅱ</title>
    <url>/2023/07/09/RL_Seminar_2/</url>
    <content><![CDATA[<h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><p>深圳市-福田区-景田路-中国茶宫-6层</p>
<h2 id="Markov-Decision-Process-MDP"><a href="#Markov-Decision-Process-MDP" class="headerlink" title="Markov Decision Process (MDP)"></a>Markov Decision Process (MDP)</h2><h3 id="State-Space-Form-with-Controller"><a href="#State-Space-Form-with-Controller" class="headerlink" title="State Space Form, with Controller"></a>State Space Form, with Controller</h3><script type="math/tex; mode=display">x_{t+1}=f(x_t,u_t)</script><p>Consider a space system with perturbation</p>
<script type="math/tex; mode=display">x_{t+1}=f(x_t,u_t,w_t)</script><p>where $w_t\sim P$.</p>
<p>The system $x_{t+1}=f(x_t,u_t,w_t)$ is equivalent to $x_{t+1}=D(x_t,u_t)$. </p>
<h3 id="MDP"><a href="#MDP" class="headerlink" title="MDP"></a>MDP</h3><p><strong>Assumption.</strong> $|S|,|A|\le \infty$</p>
<p>An infinite-horizon Markov Decision Process is a tuple $(S,A,r,\gamma,\mathbb P)$, where $S$ is the state space, $A$ is the action space, $r: A\times S\rightarrow [0,1]$, $\gamma\in(0,1)$ is the discount factor and $\mathbb P: S\times A\rightarrow \Delta(S)$ is the transition kernel(aka. model/dynamics).</p>
<p><strong>State-Value function</strong></p>
<p>$V:S\rightarrow [0,1]$, defined as</p>
<script type="math/tex; mode=display">V^\pi(s)\triangleq \mathbb E_{s_{h+1}\sim \mathbb P(s_h,a_h),a_h\sim\pi(s_h)}(\sum\limits_{h=1}^\infty \gamma^hr(s_h,a_h)|s_1=s)</script><p>where $\pi = (\pi_1,\pi_2,\cdots)$</p>
<p>State-Action Value Function</p>
<p>$Q^\pi(s,a) \triangleq ?$</p>
<h2 id="Value-Iteration"><a href="#Value-Iteration" class="headerlink" title="Value Iteration"></a>Value Iteration</h2><p>$\{Q_1,Q_2,\cdots,Q_\infty\}$. Goal: $Q_\infty=Q^\star$, $Q^\star\triangleq Q^{\pi^\star}$, $Q^\star(s,a)\triangleq r(s,a) + \gamma\mathbb E_{s’\sim\mathbb P(s,a)}(V^{\pi^\star}(s’))$.</p>
<script type="math/tex; mode=display">V_{k+1(s)}\leftarrow r(s,a)+\gamma\max\limits_{a'\in A}(\mathbb E_{s'\sim\mathbb P(s,a)}(Q_k(s',a')))</script><script type="math/tex; mode=display">\pi^\star(s) = \mathop{\arg\max}\limits_{a\in A} Q_\infty(s,a)</script><p><strong>Bellman Optimality Operator</strong></p>
<p>$\text T^\star: Q\rightarrow Q$ defined as</p>
<script type="math/tex; mode=display">Q_{k+1}\triangleq \text T^\star Q_k</script><script type="math/tex; mode=display">V_{k+1(s)}\leftarrow r(s,a)+\gamma\max\limits_{a'\in A}(\mathbb E_{s'\sim\mathbb P(s,a)}(Q_k(s',a')))</script><p>for all $(s,a)\in S\times A$.</p>
<p><strong>Theorem.</strong> $Q_\infty$ is the fixed point of $\text T^\star$, i.e., $Q_\infty=\text T^\star Q_\infty$</p>
<p>Proof: $Q$ is a contraction mapping of $\text T^\star$’s Banach Space</p>
<h2 id="Appendix"><a href="#Appendix" class="headerlink" title="Appendix"></a>Appendix</h2><p>$r(s,a) = \int R(s,a)d D(s,a) = \mathbb E(R(s,a))$</p>
<p>$\Delta_n$: Probability simplex</p>
<p>$\Delta_2 = \{x\in \mathbb R^3 : \mathbb 1^T x=1,x\succeq 0\}$</p>
<p>Policy: $\pi: S\rightarrow \Delta(A)$</p>
<p>Deterministic policy $\pi:S\rightarrow A$</p>
<p>Nonstationary policy $\pi: S\times T\rightarrow \Delta(A)$</p>
<p>Optimal policy $\pi^\star=\mathop{\arg\max}\limits_{\pi} V^\pi(s_1)$</p>
<p><strong>Banach space</strong></p>
<ul>
<li>Complete: Any Cauchy Sequence converges<ul>
<li>Cauchy Sequence: $\{x_k\}_{k=1}^\infty,\ \forall \epsilon\ \exists N$ s.t. $k&gt;N$, $|x_{k+1}-x_k|&lt;\epsilon$</li>
</ul>
</li>
<li>Normed: Distance can be defined (Metric space?)<ul>
<li>Metric: two-point distance, norm: distance to $O$</li>
</ul>
</li>
<li>Vector space</li>
</ul>
<p><strong>Contraction mapping</strong></p>
<p>$\text T: V\rightarrow V$</p>
<p>$\mathbb F||v||\le ||v||,\ F||v||\le\gamma||v||, \gamma\in(0,1)$</p>
<p><strong>Theorem.</strong> Banach Space Fixed Point Theorem</p>
<p>If $\text T$ is a contraction mapping on $\mathscr B$</p>
<p>$\forall x\in \mathscr B, \text T^\infty x=t_{fix}$</p>
<p>where $\text T^\infty t_{fix}=t_{fix}$ </p>
<h2 id="Assignment"><a href="#Assignment" class="headerlink" title="Assignment"></a>Assignment</h2><ol>
<li>Prove that the system $x_{t+1}=f(x_t,u_t,w_t)$ is equivalent to $x_{t+1}=D(x_t,u_t)$.</li>
<li>Prove that an infinite horizon MDP with a stationary policy $\pi$ is a Markov process. (hint: prove $s’\sim\mathbb P(s,\pi(s))$ is Markovian)</li>
<li>Prove that for an infinite horizon MDP with discount factor $\gamma\in (0,1)$, the optimal policy is stationary and deterministic, i.e., $\pi^\star = (\pi^\star,\pi^\star,\cdots,\pi^\star)$ or $\pi^\star:S\rightarrow \Delta(A)$.</li>
<li>State and prove the Banach Space Fixed Point Theorem.</li>
<li>Prove that $Q_\infty=\text T^\star Q_\infty$ using Banach Space Fixed Point Theorem. (Hint: Prove that the $\text T^\star$ in )</li>
</ol>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Artificial Intelligence</tag>
        <tag>Reinforcement Learning</tag>
      </tags>
  </entry>
  <entry>
    <title>学长团手册-线上迎新</title>
    <url>/2023/03/30/%E5%AD%A6%E9%95%BF%E5%9B%A2-%E7%BA%BF%E4%B8%8A%E6%8B%9B%E6%96%B0/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重试⚠" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="479ab5bd4fc427e7dea5cd0b54fa521cb21f0f15fa7dcfb17600df3a9781252c">b85a91f5717825cdd433e6950297816215b0db34eeb1f8ac894075ea42af3e8d15890bd1d569c2a543ae3c4ee4fa680db543d55d40e65e165a107e3e89d73ec251d25f5c96ba70b5c1c9beccfa3446a1ffb73fc3a459dfa53f15d55f3f842610c1b2a3ab9c5c925cc03350f33cc1844483a03394bb063c5b00f164065a9b49e1c0cb12b9ea0def63dd58b922393c1dc93593504b3d88d6cc0c6f9a9196116aef715a78790edd02e23471f8def5b15bd1fb418987ad901d9413c3508b7d70c64102185b715778d7b9cc1daf69b025b9df76a8f4789855eb96b2950dc5b86404abc4406e062e13b7563b3475ee1f81f40290964ecdc78e8a88ab0f75054e84d9873c6ccb18ac6fdc570cdb31b018dbcf37a17c628abca64e378577b32115651c6081e57281c7e3abad2a9a7b3809aca52c2b0fef27f7f5a0ab2273fbf123543d960ba31a772d0700d676d3591475c4d3364018ea8ed09189f36e80caaffc3f60e4ae0f9d80c8eb50ac86044c75ab67f22fcae374d8b8c72af61f7c1c7d986fad17ada3d4b72cf15eb556b4561864d38cfafe74ca31c4211f5107e9931d05f669aec55a6d2b62d94a99becc89a66e999569fbc2abd7dab50227580748477a0d189b3bd33c982c741751531f48d2c012f88ef241619ba5cbbebfa2f6c9be20163fc49516065788c327404580099de9721f3f3934bce9e7f4913e36ac563ad6748b7acebf042c80f86ff6baab6e113625925516d28d58f8c88f9a58e8efb3ebe8f0cfc14004a02086afb846c2d195df1aa2f0a37ab99f98247c09efe04c36d07d37028ad77aa3c6cf8b3ec81fc670e3c355666b84c49d8a290fd4c67d66b040b7f2c7995878db0eb8dc68035f3b1622446b0cd8cd8f798db2d5d8e009d126e5a5cc4ce7d4c38234c679b1fddaa4a4255b6b6e8037d0d6502bcbf9e459b6ee5fbc7df2a749c9aea9e8e18a2b4a8c12d8ede3cca14590628b96b35b68da4c0963ccaebbdf0016f5888fbc865a6a7d2c093a028470744d8360272e3f51c451792e86ff811bae8d9542e2c63a7035bf3cc8a4830147b8685e81fe18e6f669287afe05b89ff7c37acd2bc24090651f75a348fc0487268fbc26444faa3eea6a3c0fdc115a57d3534c3aea978f8fe8ce1429c3f7be88143427c27a2e89d696906bc86db3b2f3e7edc52c427bfe0a6d6ef71c6d4be90760c991b933b6c8844b597d2b6af7b7016eb30c545b4b8ac754516ca233577bb1953ca3b61abb1765e836c36aa05e008ddbc2b18acd938c68d5da6b9a5615d0898269a20495c1e86b170194f98652eacb0b850504ac74066d00425c34fe6415b03d386968ba3c2e9749ddd0f4abd5909f2b17d5384b4c392f151b4498e51fe89f374f7dfbe461c8e369a35efe3158df5f6a31fcecfc289dc293ba69a8019aad2407c5ed599fad075bb90155b9f86d4d5366ad430727f58a41556174226b959ae1a97781b08dc88c24b9d58e948b94122e95553935b51b4cec53d1c7e8fdd5d9e2865fff8ca683562cc4d5bc4851d6bb6f3d882e8740889be04a67bc14e0e27eb7275ca814b5edee5cba607597bc635ca72ac76c6110722d115c0cb9339bbf61c72338d8e445841567d562813959b76a18e937447ce5887781170a5d5966794774331061debbbc6bc57ffa22bf3a92c6c85a589dd16e0ef64a471f5ed88fcf42ffe16ae8ecc846f6f981d6ded01b18210142cea574d83e18d83e15e3370d73f254d30b84aa61d76ec240ef97fe77a756167ca64743b60e1acfee165b98a62ad5f2ede5047073bc357e874ab426b74b737b71bab4d0c5326673fae937f1b7a516ac3a96e6d63a52f740594e0f4bd3351dd9c0ac66ccfc619e32cc0c0219489b750aa63bb097b55123997a04402da4f896105f794eed7c369eb5262a8a2295cea54d059379e2456aa24673e8ea5bdc8afda8972d5350e23d43795abeaba9d97ab8bb7edc617f7cccd1889bbc0443a3ad6efe4715d3c9f7db206721c682c04fad144902fb577bde7c9a5c51e444f2482ac913c644bed38a909667d5974e8369c235b3068f8f6d6c87525dc5ec9c899dda875443fc11fe9a392e67d1898c58838412ebebd72f6a71b1c3807046995364b63cb5c399bb667b4300aaa6895d94fe674aedc7cf25b93412200cd953b1ee4507382baa0dd00ccffd4a168353313f4e3fad3474770bf6c3e190a05a20d8e0ce0a3794a8f8470128b63b7eb5bca30089cb443b748ca2e0c3bd33def800148af32f4f76182921ae5edd109e62d3ba7f55e527d04e1a3759b50dd1f945f3653e62b38ade48ecaa5b5cb0139e0c05c222c9ae167d7d194d7d1d39b9d29713b2a90b61b5a8ec93e61544cc308f72bc48e2c6739f45cb799a6956305c80f967e6125a5ff2d7b4dec0866bf98ea32a026a71711e1720c709379a8f16cb236bd664617571aa5901039045cff439c1083defec5e8dbb10f66db2dd1cb232a1e58f19196380ef59665c68610c8194a90cfe331bf7008a4fe62b040dcaccd8aaa81dc99493261d2e56e0081f78a0353ce53d40a17058385aa4a0264c7883df43d48c70623932cb6ed8e5b664d15d30167bd6b7eac8c12ebf189f51e52bfad273c39165bb26f032baf0c8c3469e48c44d204923c066d7ba9e73720dbfc6a50904b631ce85e37192012878049096f886608d7d2a89ade17b93c87265396a5df9b33159d616fa2610fe74f46e8a655bf7642a24a8464e6119d13a90c3135f415267daa6a2731ba9894b490e2b69301cfe8bba6ed40416b0a19238f581360ebf52617da3547e32beccef9ec70fb449764b413203f356e1897c9f43d8be0f1297cd9755dcc67aaea18f9c1f9edd328769e80bbc16e7c97ad8a95377846a6bbe979b40b492ce15fd33e597e69a9c064f4a7812c100ff768756a0923abf4e5d7689135dac4f2b67f988fdb6846f9019aa172b15def872f33bebfdd1ee20c7ee66e0ab306f3103cbe35458960ed0457562aea97c5cdb106589d90d585d3ee12d5e0f9666508efba53630fdb5df5e26f6a146840c19f7c1466ebe94c015840013d1347cf4bca2c971ec8056042a225e1a3eb34548f717b73625ee44202490d2d7cf2bf03768e9f173b785a4fdd0f40665a2032f6c9e2e86266c623134ddc8f5e7d13489309e8fc3bf0e0be516f55091ac75e9a36e7194b27af67e32326c28820ffe7621d48a5aa53ee81918c990d08044b68fe2528f9bf9935e41d410a530d1bbd41abf6e51d471a2fec5ff0d6767df54643337c3f36fee47475abdaa73bd8f7c3557aa94d445ce479b7e6f1e82746d3e8743cdc339ea6f7e6577b64c1d8f437f3b63ce83ba03ccd51d790f804f66d7bac0d68ad08bcb6f4229a5cdf466e9739b7587096552dae6075a342fc0ba0b0ad29e509fbe8485ac2cac3782fe3e75bd8695b5318a576176af0820ef2b308bafb8acbd93a81f268cb97d11cb13acfb474648f4b25951d77dc8f695cd06b5821f0ad9ce42aad253b5fc858a617dde6ee96ab4209b03e4665c6cc3dc6872793a98d4596331ab378d9a19f3f44fa191074e42efd1eb58c64f2dd207cb46ef7108a3edd00f58aad508c7e4641893be7d1484f4a376f177fea22959625a99a356207e292c9f08db2b8704065f8542b484520c4a4dbd093077db53eb2d1df6e79dbbf60b95ef13a2eeb11ba444b6428f325c0d79676071c124dc4fb59eacdd6d9e2dd108d2a32b24025287aacabb891307106a0d15cf9c0c6eed9a292c81dfe872fe197edbc0762df73cba5a6e081b816014f35fccc564bb52f21bd5ae68b01cb74f164bf4527c6a2b9d627bf3721f01fbf7cdb32769a562721395a7bf97ec677a8dc0a10e2facea7164ffc29fd2025e77187dea8daf451d8c4b662407690c6954d5f2d0f1076ff84e58084f83de62b108f93bfcce9a952db61fe829a2f1b97a1d42bef34599b18c78e1e3fdf4f9d6df847de9fb3c61abcec72067b1fd0b96e5e742294a6085ac66ddbe58871a8642dd1fc2880a09c20dedc9bf2147b784f6755cadb70e0e50870cab9b24b70c2375c112e8a62e9281be57aabe96295422a0b33257610eb760fbb45d04d231c55bb11c66821fc105cfb77f09e133ba428acff856d05dbfd44cfb6336ed1c2f76cfa1f0a207fbdcf4656666aa8bb79ab72a1f822cecc191d4f95af59b56808935dcad98519bbe6cca96617fac505e49dd2c0ebac38ca7122943cb537b3b4105859b6b0bb992a0c43fac2bf737a79b211b1107ed507d010f130ebea7dced3c6186e4b5de18733f9df990a8d483848e72998348176dd4d4ad514889510ce8e030bb6b46891b488e551052bbde27cf3482bde5bf5f79794407a6866461589a557546778272722788f58bf8dee40cba7674cbe5bd6977cfbf3932ef61850219ac6f51800d89505515e73206ec80cb3edd4cd7665167236e425567e3696dd0d00002e959ae7200518feea82bb8b009248efa4625d65f46d0f97502c3cf5110258e33ca01f659a4a6af72d4088ad6fe3ea6a8054911c3b0f94963e6415ce5043887cd23053b6d90c6fe46ef6ebe5b8cc4f1368b6cacf06e514331f6b9a527ed7621d84897fe977b1d95be7591db1fb9048f4ad172f64bb272034d0619df2efe22e379a9d2666454645f0763bdb22c1a01df2ad5073eb992b1b90ffc5877bc9670b7bb037076cc7e70f362f2e9143bf0f1c2c1a0bf93491ccc04433cc4dd12569c31a8be7d6158f4a9f8e1648c220f120fd3b8ad81ee224c329ef191746fcf3f486c709bef483eaf07a49fe8934b7db59d4c7644e605900636ae47588521035955beba75e3e6b8036bc7013481d02269ef5578e39980539c5faa50bc7ea477dd171fd83240945c633b59d68fbd6e8ad7e56c67034ce03b370f565e9ee06ebd5b360e685e19ac41b10dc97e15281585f4a60a59f90ef7f54af3de633d6eedebe1c1db39d50f0f6bd8641a1e928e89f2f8bd00ce8e4ebb1bb1692b8f53bdf19eb9764779fabbff61f18b7ad0eb4363d1a5cdd083680e14b7ea91ca801c73c0c52df39afa038778c32acf7b0fc1e6cd22146c9850945dbf73f921bfdba2349223dbc44ba6abbaff75c1561b40ea1b984ee7b0a598c15701a3d4b57d8e5f25e8a6b2bee7ab19e5e222ff9ae730892c9e3aa56920c43a645619c7b74500e969de62d967c7d0ddf5b9573c3c49c2ce75ac73fd6cad5bc6256716685036863437529cd3c5578759e98dd390d1a60bcac5bba176b5d99af71d0b22b45de7ab29dd0ab5c87c330d87be803d9b51f7a833c4cdd896170ee5eaf4c96890259f0976fa18d98c9a5ddebd4317646655ca1c7654cf6a920bf5c5164ecdd44c0ef05e108eba3de61a1bd9efcef376c70eb4f280c8f61f4a83f94bd75b4ab00f77984eab838f9caea209e313d8724e2abb873889bd11b9cf986f646f15f0c1504bad5cd95b8de3945cca15b4de682ac7c7171db4d335df6072526290f74056d2a39d85031f8ffe3d2e360cd438020391463274ece67315d4607a40f9371d204b8df55da49a6b53adb8a5870c3e503f927e45ec14cbcfdde646bf7b52562b9ec6aa8413a87e128243ba64cc1d9513a39afa2d9201a931469429b18e880fd0caa0a9c06828bca8992891ddc93fa47b51239096a47af81ccc6fc7d7f43da1da5507d3d938923e338266b6f926fc46a7dfc0403034dc2bef876a84b02f1cca3d38d03dccce2d84dcaf9cb18aa60b30ddf6cab6132e30e1df2adb4b23419d9542daad04509c2c184fe02554c9c7088184518b88ba8ee63789be5e998917551a15b8134df7e986d7fd74b8f3821edbde65cd6d045a48994204146fb5fb328fd0d14f60b3a6d7f784ddd96114d2b3201dd5a41e655843f4f6847e0431dcf6c939d2176cb2ab849174363c7c81dc0a693892c009b3057f5341ef7e2210706e10636614311f38077ecf3b83ef6e00b3c16e73a5a448b8d678c784318b13dc031d7299111f8ab796b1b3e4ea0454c4fe586fb639aa514c5cb97b40c670f87071041c3c4668fbbc1c9e30776dc7aad877672be508eb51ca8cbbfab554d793c739f3358e73024fb5758de654073540625e059da3eeae2617e3f5620f93f3456752db8c0d6af5e31286ef8cb161b4df0c68328d1a7e46ce49e324236701e8eec297dceb58b150d612af4cf403bc56323e6b96d071b9707b77bbb9da9839024b5691502432290acb2625708188095004fe30fc6020ee174ba93aa47c0ae746376f96d83673bb592fb326225159a850fc16e0211e0d5a4e5248762efdb365d174273270df6d88ad78052e5375ac8a74bee9a735f171d77295ec903d2a198937219b0c8dc75bc9f065e5ad50e5db7585e84e141da32f117dfdfe490c70cd071043c4e156963b7fffe4519941c741f4e5310cbc0213bcd4f1a5cee73d7d46f79e64fc1a5bd9c8a3e38b1af926502cae3ab05030ff616a10482b821573d19c51bff1a9c6ce9cfa76e4078d17a1c6aeb0397aa92733d511ff540b419f71d521609775d7dcce45fbd9d8d601ad2749a0c7a3050e6ee1db09e650a541cfa9b47110c33154cb635c2eb87dede0b8e9d471bbd21637fb3b3f16fad4f4ad5474cfcb5a2afef45bf49ee1af05ee444c34359db902759ef62295a133eebb1435eaaefd98a5e94e58b9fa16d5f14f1fc25bc83eab07bef8ee09d2d018594fe39a42c81e7098bb48bd96b4746da5d07a303b701aa52fa28dfc896f7a0f05533b22d4690b24e223dbe4a5321dc24d6c6861b63526d85eceb7739110e2f7d0645b256724dd0345bb35c99364c1f34c85637950c27be2166ca36933f552cc909d25e63fe8d7b72a7058d622477bc85da33854df09d9ed1befde4f3eaa04548c87fffc8a1523149b2f885f8a5538899b3b2fd0a87f41762c99c071767eb805d22f2324e745fc32c94fddffe4f80d25eae91c8d6bc6c815f929a6caa43c7e093cbefc17f72fed2bcdf94eb7a353547bb67880bb3147623be8e7adf02446f3055acb0efce4101d5d37575efce8e4c7787ac4bae1609328e89b3bf10a4514882828e24a6d3135e5c3ee1392d8c72bc69a19760af01a0f4a5374c900a6b4d0c3ac48c5923ead899f201089d3bdfbc8e47694f10cf12268ac113ffec5be013d42f44ac1d3fb08d4a56ecb8a0974dc4f57ac0c6b882293ca63153e02ac3e4095ddd83a08687dcab0652507a82ad36011cc7425d9253fff20f8ca1ad4cc0bc7976fbc147094525ae0c9a27ba11e698cf6ddbbe3d748c2d778c97e4e05432b93626e23fc13137ccf8d159a73fa8da49fa4aac2afebdb3c1e9e6228415d8c021ec2ca7b7e08dc9295a92b202d4563ed0c1cd5dbf609f4113b55b79a92dc0bc9dad0011f9e1a9f69af915723e6cc9a04396ec4741b0adf1980390c2cace48dc1c318926b616bafb543caf87e3ae8c85e140afb28fc7ad53387f097a5d4d593ceaeadd92e5e2f93036bb1ccd7dad7e8eedc8d024ce3985453b2ffd39c98d0b43e2f55287d508b45e338cbae8f6867724ba54892509737c6c915a782fc4dc403663232ce795378d1f780e848c639de574db0d8e07c89fd0bb1d6c976555aa44ad9eba48f8a487695db44f09a1b30bf24906720e9051e62658697410e3d914b4fee61da209a92debf8d6240df16f51a3bfa65cd744713527b78ab1b6b149fde09b1201f37556cab6696fb7c3ad0061e984be59a5330ba7bdcda3327700fe9a0d32a58b2abb1874201b2b9551d6c7cb8d267dcc728d5723fe0334c8af8c9c6cb64419c1478fc2340af4f6a40a01b28e6e1b1ffdc7247e604d6a38239fde74ebb1dad231a140435424cad004bf51e3db88aa4c4a7fd495a704ceb5a0f26a984334ee1ab72f8c088f0b2fe3ca29ca46cbbfdd6e04b25818751824ffd8f54c926b24fa665e2fe76a4cf32089b5aea20b4255e8a15bba25e2bac705d1252a861f04572b501e46748ce2373b3506a6448d647cd52736f3167ca3b95b3651f9153ce225e01afd3c1bbc13c74f3d2effb256e0ce3092b61eb662b77d9266a64750cb8baaa0ab107aff2f58ebcdb7fda995c5b9d7fd8b8732faae75c060a553054101f36a1ac2012c0d14f10cdbbc212a958418c728f795ae2fe520482ccf39e1d33db337bcc43d0fae1a2ba6a84927dd384173b1f5817e4c252a5ac2be44f0b126c2a7096713716b63aff83a660c12de57b781892c73811d37b0e1bb190e100a2d2c59493d9eeb9a41a5ed38c6cb73b84828f9540dfdb5acd4a91ee9a24d8e642b7c8950fccaef0560f109dd2e98986e8fa4176213d501e84a6bccd750c9a5b3bc1ceb06755e142005da14062e220bd724c3d7ebfaf4bee8146f1afa487af9a23e4cab6142eb7386ec36b90555aa94ad415725cdd7dab3584f123924ebc2f4c0d0b9d47d9983cffdcd53f60ba1c5cb515c068cc62a981550b6a37b330b45456a45b1412cce8cf8dab3328130460ca84f37a068fb85d157dedc173fdafe16d24900d136cb233ae4b89deb2f7da67da90af1a0dd543a9592900b2d0ae8477fd6fc235f7fc3da9d0c7c53e2d3954708f6bf0e4241f0a743401c3303b01bae62625fab33c085098fb89df1a705fea08c352a0be4bbcf737f99149a50a54e764301a26eeda7c3b017a69cae1cb4565f0b95843acde07d3b3a049e0bb3409052d4a4a1acf5faff0a18276386483760a5cac0b760c703ce7aed9153a470a588d609ddfc8593517fd22cec33516725039b4bff3de513e2f1895fa7db0da9d4276902a0f85b34983040b2c97242b3be3020bf662eb051a385182a7391a74f36697e52842a2931185f33766d3331adb3ebc358f977207995a3b3c340d14e6d366b70ead92563b94e710b1d59633e23337e77cfd8926815dd5988f03b394266995aca76c1d78f00f429e72ebd7a6d1eed70dddcaa9dce6258b7dd50fc86c44320c795c94486902ee7b0c2b3e4698ad15accb9ca1f001f124e48975f57f83f9c3c9077ae3ba9ff9157d4cfeb94677009662716672c21773d6f74f221378455160ea5fe6ae496839e9b48d3ba056d312821506365f4214f828f20d9b1818c2f07055d376e46dd7326dbeeee9a66021fca09a2335b12a2c41bf9c4073d9d2eb1cb96b575a8ea3357622eb38b028ed162339c1453f611e1eaec2031bc22b8660f7cf7206211cd69f805be357f4b3f9d31b0d5eda7c0465887f9eb6cdfcc53fba1587fa0cf84ca714b06409dc53e2ead937efea85ae0e35f95ff3357c2423a6956f356a89434328398ea6d4ca4322cde04d9d29a4ef700234203dcfe3040cb73dded66a299d4cedd72450e5170dcbfbd341dccd4e3a749c46409b0852ef8bfe85104b53772edc4152810dd1b732b5e5260d632cb0765a43fcb1fe6dc67cde7d8fbc357cd555700a4e7b636be8e7fe09d6c39cb393f341e70372af2201be6f806c8d9caa0c79399266da342fe627060a092132ac3a43253e56a3b93ff92608e29c6e53ed10221f8395fc17bc920cb6d31c2590143a6e9b39767f2aaa86017c0250abc63ca924db23732e7c075dde6d5e9169bd880fdfa594439aaa2bdab6efd3eeaa847dac52fe9021c47e8854b35cf6744f575116107df16678fb4cfd3bb9e62621a6580550da4889b8562c1f637ea75d8c255fbfcc2857841f10b651480e27f79a420ee68f1dcbd2546149352987c5d0940076d054b0380bcd79d317ed3d009bd501ccc592329c0f1364f6198ebad2d26315e561ce206b926e7be0c5acae3c9439189f2ac7db3074ca130de031e147e30aace5c43e50ad90651f92d1d78b4bfcaf0ea9e6aebdb31edda222a82324cc6d98bd3be91c3ba1aff2f148b0a38d24771a231603bd87406c736d402e666b964895fb120cde47d1a9bdd0bee7e2332151ae0b30a56dae0d5ba947f778bb16a0d08aca2770a92b3048d41c66333c6704c3d11551dc2f4cfa4e0626ccaf799855de6ec2d243b21736d980ab7a32cd6376cb42fe0a98d378d589fc7b617ab0bb4b7435b1374af9bf0ccfc7625e4b684a273fdce5daed767972b01102b514377443469325fc791d05ca226b1321994f926cd81949b31331b845ec343abb769ec66956640f4a0d407071d2dd8c0ebf3b6c96aca06becf32bfe71c7b0f33fa23b4cde61c4746ee3124e4b6f80db99ed4837da163f5a4c908d27e19295e9452894da83e11f22bf58c6e824ac93999c8ddb855e9e0d32d33217e10584167d6039bbc19373d8694d65892d34931060bddf469007565115e2b6a3dcb0cfcf1e46b690c683a1760aa6daa455bca0d5dfbb6fc0a507b26796b13ff79e9c7b3e3106ef10f5f53e412f09edecabee319255627764f8fe0217db2476e5c8e9be7d79efb9719ce765659b72f3dc8e710588ec84e4e931f89dfe9971df189784610194afefb34de13e2536fb22a34e16930714e05c824d17835db402eefc00debd9fa8947f9fbfb4063ca53b1efacbb47dc9089a88fca9c5b926fc6f3160c8464f687d88a5cb5db33ea3cc99b239f3edd2bb07131069b394f3c047bb3b1a452279f2ed6f77b38377d1780644e0a519b92174d86de8a3aadd696e9323b6bc5037075f11a1d1534189ddf7ba1bc82e4b873b23088ea785c60cedf67a4b944140f7e9c3c6d7a2abba8d4dcea5f31da472f97ac012baf22e07fb369038a94c6cddf88875ea3603a75d4348709d202c683494ef43090d03d89ceee8f31e17f7197ca4bdb83803787af80f7a8845875c190ae464e2e44c6aa662dd770eff406f96fddf1721ed2666a7b8af6bd0b46e55a3e4dde381c0251a1beadcd9dc0cd829bd1ff8ee9d53e0c60009a7602b70db626d6090e8d6b5c8411809fc1c03dd550f3f84c624db4e718f41df5a5fcd806acbf3780eee8d167cdbcf92383f714b1fb19c346a139cf2e0c6583e190a6598f0b817730f26159463a0d7f16712bf4339f80caa2ec2e4732b383ebf4fa089c5e732ee272864cd8ca5312bc5472962cfd1441a987e9cdc9c8b0341a3be47698b4e26de93ca12755efedf0fa0f6d509e0c3234289aefb2068af812e301c24d3f41c8c97591f5a8da2891822b7b9e122c3b3ca16d9741ffaba0d6d3afe4a144c600da8e753b99fccae3a9d3e41c4dfa419ba6da338fee470bf05cacebc53dd7a4eaa24a52b7ae58db7cb8289ba21c7bb3a12158d21858cd4970c3e4ddf88e8be9cfd6cb25deb026f716e8296a71113a18013716ecb6fca1576faa45d66e87384e6de0946c095b0cceeeee957d8814dd51213af60b3091b122641fd71907c816bb2db09cb9a8e06431cf219459db890acf5e22e34d96f0ec9d90caaa339b84a05d6a6f44d2fab684670939f7acf3c301219b58291898491ec17ba01eb2ddd9e573d948841ea32ae75979136c114af4d4ab382921df84f41b268b3021912090986872fc4d547be3489196ac05e584287edb0e69858e615ce1f234b21f5577e81409227f06df94d5a49e5397f9aa5ac1b8e6e35c7fa82d45b95e6d0f786b6318ff94b97dc5e873df8e5ee67a51c3cb6e924ee1d210e4dc6af0bf86a352c789fb5b7a4bb8b78f123444cf90ad12fad1e091f2c14357af07343a75fa7dd0e7bd1e5bc1ca674a5ea1a1392f6d9fe23661a3750bf2c9ab760ac60251871d81774609816dc201f5abd0b3bb108498a132258daa341cb704e6b6c4ef36f31030b16581387eebf0c07f045e582f66bd308215b0f7acfca4426aba5a7607f924d35ba5c081c498dcfe18f332e6fce303c73f3b8bf0b60610477d5fbf50ae70fc7728a1c5a998b04421330d7865608904efd9d3e9caf72074632984624cd689ab21b282d0574a0bc0ecea7890eeaedb47aacb7164f8ea80f8d8929607fc3d71368e5b204d0abd1d59af62fca353aa9b9a1df2037aa9913a3f7809e317ea64660a3ac1936baff16a68fc70f413facc3adec1cfde05e4cd7ca24372705c19053382bd41873fe0e0b8a11f4a7dd8b2a043c5eb5741548eb4d3b5400466522d0a86ff743174bc99da4119aa8a35f8f756369e95998c0f1e8d835b702ae14f6cae6a42126f01e8ea36967f93f56614c5eef9f0b2bb208da024ff8700ec38f3503af55007de29e66dd7587f745a55c63c10416b688a8a02b90a1369f54e2d54bd746fa84655a899d5faf40602c77e70cd2fd23dc1170c806fbe263b989ad4285d397ae51824040f83ede2dc7b498f564c9cb738053b17e855ae8cad8a48c06afeb28178fc1abeb74bd96ea69db20058681362bfd6e1a4ec822da8f4935934fe1404883c4b6dd1f8778d8fc0a621483eab58f44151f3bba24d7aa00b2607f828e6a9660717fba14657036f78f281a30d6528cdc43cbab3cc88b5b3f5fdacc5d592f69b1e582fc87df1c93e00871ec61f38297b52f673dbe186ea7e7a79bc32d7e900aa4db2992ae2e5be387e7b4b78f4f19a2972c52e1dbe68d335dc61421fb0a7bad1a0ccb8748d30e64e5182712d59bb83988f8566d3a63bf49b6db39f12f19a721ac85602baac7342bb8f0f71a0df9535bc694dd5528a5f543089ca75f26293f39a91118d68edaa6f3e6e585312ba91aa8596b75dc339c22458d707d61340efd7b1a6b8e11805390245e422ee4aa9d7efb46b4c485e2358d2e23bcfa27c5405499e6664e63e823b24714d35591f42bd8593070e877f9c66abc106410cd48b2e0aeba4adcd46ab3a841771765e13c0f25016a0439200052c575b15c607fd913e5215e5b6e43319c46f1fe4a0294b818f4663be1f11db960f596f1022b1084cfa2007ed8d369f74c2b5bd58895cf8284c7a17c06fa2b0b2b030abd8fcaf01ebc6da482fa4f5419f34ad8196b75f0df457af1f040ed4c947baeff57cd48f39b099d377618bac2944c05199cbe065bf5031e7b2a73f0b645de0f434c84462f86868a722a3a2e3aa6b5ca361573eb143fae7c82da633553e8c3e116ddbf763aed69b22c64bbdc0d4aca541663c2dadbb65551cf6cbc7b12e5a1fa38b5db78b68ee0ce47e8389be682ebc9e393d6dffa5066370464ae6d7f4c196b517741a1212dc79b0e5012e233cf1e04a2e8cdfd401580f73323a346d6503a946f6fb95d810e36642e2bfdc936616e231bf2dfe19f2a483bd3be9ebae8669fe70fac85f7d448dcc364c78ee66ac31c0526a8ee9720b24d65142e5705ca222c022fcf2498f162d005693c5f01d51ded2ebb38e52fee69587483b03fc965bf6d7be298596898a194bb2dace95086c98fcc47f41b08b8b9777e4274c9ce468ef7deccb37b05cc020f228e466bd6704e0cb101e626d4a54b3b88c630606d0b8506abe97c3ff27fe63e2d2eb92da504a773dc44cbd74282fbf684d7cbe96b7a14052156ee6b0c81265a8e518ab2d0623fcb5c0ff4aee53ba96b8a54d0a11e029db4386f50e975c8d475e2ac5aa1572155cc5fbdfece9dad0dd476ba7dd2aa24db2c1a0f10ab33390ce2e3bd9a73f8016e46ba77268ac7260ff06023f765b691e8acd14f88ee54b277a768cf3f836624c1f771e1692b60bdcc47c3e5872698e25e6bb23e5d4967caa65af774d95b938593484c13205ea059c4d65348cc1ccceb8129642133003a54e326eda8437c08dd4557ef25a6328babd5400337f54f1be5cef43bc9e774fbced96347d04f92a17f00f1eb211c9b4ef4c20758e4ae8d2dfb8bf56db55c5b338b2e1516e539ee61d78f76f61ec984b0dbe963914cfa2c5c2641def5f73328bc3de50ba4ba3867e14859cad1f6b6555bdd1e3f54aa364710564c0e948a716d5289d944eca036b72d71b9feeced0c444979b192d63660e47873fc197efb69d8f30284849aa66c4818319572dde4131dde6f174fdabc3669fd44aeb26a6a559e48057ada6373a232b7eec184d7a2667932ad328d1643e4ed81e38328776cbbc72b594b5ab935a202eb93000ec1107768e0b2bfd833cbd11b64a120059227b07af69463bb7a0099eb33840cb7729db61058e3c14c877218280eb83d7e5d</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Password required to read this article</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>学长团</category>
      </categories>
      <tags>
        <tag>学长团</tag>
      </tags>
  </entry>
  <entry>
    <title>6.17 概览与前瞻</title>
    <url>/2023/03/30/%E5%AD%A6%E9%95%BF%E5%9B%A2%E4%BC%9A%E8%AE%AE22-6-17/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重试⚠" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="16bf22781539fa004f73441c48925be1482c55f3e6662bd0e3238a1d94b6b7c1">165d50f05814027fb7fe5e4ae8a088d8cabf1ea2d88ccf0f53dc7b0b289f3333b8d2949f94994cc231f32263420b1d9d763dbc72d1004f40b159812cf1b62bfcad5ec3a77bf270dda4d0ef90d57fe411e3ee768cc6af26b003073a63e2529650ed3ceda60643f41694ac71dc381fa747f083692dec538e9986f9c4f325f546e4cf5eff1a925f8d8b1dadb45a22a725d7d1866b964bca67e9f51f8311d3bf16627957a7d66c3001ae24386c7a71b361c8244421f562e623d692a74b76ac15941f64ce2f2722ab1036a255f3057c0747743b2afb3a64011bf5806f22d813c4cce73cc8a868cd842637cb42d6fab0fbce9b61dfbb63c5cf5db55d237adf61523a8e6634e1af168f3812adaa9dd16da325bd48ad0b4bea9c4e49fcef7f737b5ee3e8ae1e215fdb8ac87bb37644628305099174c2a464e09fd05af38fdf0ae8989993e6468279b6c6425901151de925a3cfc387382e7bd5aebdb1aa37a630276647e8d8d872d53cbf8f5de4640bb2f78fbbafd151a8f7d73bac40e31f6dee342c1e92eb74b6e54196141b3b25f1e379d98660cc0b84eeb5ab51dec3b1715f85e44a36bd7619e1a5050393e6e5845c6527f8a2f9c96a728cae815fd4330add4f1ba98535d2def22b3c8cbc3316e25414b7d5311c833445492db6d284b83cc9c540bfdbe521cd3c0b595172ac0f8564c8d9284deaed38d6f68f90646cc2dc54d96f3fc783725b510feeb3e20d1981b28c1184fee6bb392ba2a8a4961ad58811ebeb8e79cb06ed89d72ff0a05a6f1118c78ffebca4fd791b927d7c5c9f402e72f245c09394f2826b34597f8568ea04e471a9545198df008ab990d1324f62cdf2f1754c42ff03754cb97cf51d2c2b49d1cb72580fa0faec4d59b18315c22c74558527d2b3005149d424e589b7e57c122bab4523f9491ca5efdcd755b3ce0333361f4b1b98b7745302d21f0cc5c0e7f6bf10de640d0cdaf1db966d7a8bf37019053810cead973c6ad3019e397cd47bbdad60c45f427d8bbecfd99f93c177643ac6c2d4ebfd09bf2291c75ea2af96d1e1ea60691ae48125f89ccf81d58de00dfd450329bb2c2a8ff0e81f610a3b1ea231c2f347dee5c03004f3b1ffebd77be16511dbc205a34f6cc41bb9c3edced16c0b6671a7f5e8926a8684e37ef021a83425476eab5ccef0f574f924fa7852eff34b4cc39db7f54b7e67b01cda7f26a917b7600fde0e6cd6dc2d96414f279ccaa0d41434a56a8a50f1fddd7ed5f398a2b3a09a666e8e7fc14891a33103931b96e5a131a3af97081adef8b21cdccac72516ad14adf25f6d6b7ada73e6de96d8bed7643e8260cbb8f7993c2c9d8ef57179e725d8177e1d2ba50aa87b62cf57033dab6223584e8ae41604f6cfa85de90e93ebc6d2b6020f35fda40343360a37d2a58811021b47a8b841bb307e42363016a8bac15fc08a9cebc6a975a237d54da1d090859d8f028c7d3051b5e354644f79e042f9f427e8aecabd98d97f1cbd46c6fb0700b1e0069f245aed9839153a8a5e03f0b4c515b8d535f1fae6a668501b86a6901d9e009eb3524c24a346f620c3d3db2b5c2c649e9d73fd27c5b4010d803d99c9afb9cd2d012489d048fd3921e2be44eefe259841f7d763b6dccbc0a4fa18a08846f77d883d4ad0b9fc1fc8ef669a527c9d82000df303193ded19f63b646828e7b5877e56b4e942c800067de76e9e22eb96e571cd43a578a540e2ed0bed2d2801edf08e017e0f1fbfa4fd73c09b49070bc58b4802a08192e58e379c864b6e9fb75e96b2dac693294faba532f4aa77a637ad6a4a9a0d7dfd62f74d4dd31045833832a7500100a258e5a00b5e79e05f7bf3e9b8d87a6bc60fdc6b251fd0a7955b5c6c479aec086db3b759186afbf0fb0a96fb123d937b8474a6c37c04cfd177c57f48c39852b946267529fea964e42f0a802e169f1470c0bfaee4792d552d29ec7af3efdac35a08b9968b0b4c0432f375ac7d2d72e8fd1c3fb0186d9cb453a8a654214643a91cc08549939446361a909350c2ea9a86435e5a43585b74725327930c0e556363c015d7f0da6688ecd0962e86ede5f4a3fa49d1f676562e35cb384ff0601638f0c24b0c181340789419e7c31b9e87241bfb1fbfaebd65466dc5123c480c79d390187b8cafa30b6f765c1e327995821080b10272e86fc52adbce356ff5d719ccb5d3b1c61b7c7e517b2eccb332869ed789102f81bb584aa4de50ad1894ebb09714592fd48e1135dccbb93715474447dfbf95f88323779bbf17368a5a7cdfd6d920b296cb58026be514a60b93fa4a573f10b57c8120910b0b693c86c6093af5bf395f1015aa57f120ddaa41a4a23771a233d9e72af40c7559f6583c2b2cc5f794e3d96eaf36784298ca9349237973ad1fa4cd0de31d01a5ba9512e3eb1d0dab4fa9df345af373f9cfe95d92b6f15dec466d5cdd1e2dac8d963222aa4c1a3d41b91c75807c66c731386232b0300c62a23a3700b76df44559138735e6e82dab3d1c58a0f36727d361e3b6b6a78c3b157b4893ecfb54da9adf52fcd3883d6305c1bd63d600c91ad638c5c58cb89411efee9ec38a40827b3fba5194c50b25f8a057d051e843ad34de9daf206ea40189f90b5477f6873669bfd2d159c33d177baa874cc36c4857104c18e8c2d4b806f3869c16d99c9843e3fd602769caad234798a08061c8cb8a3fb7aef8db645394c51f8c52a7f07b2838bcab109211ec51326a95d39baa9d66b0072c28b0eec0ddd3bbc87eaf0c146ca38e587065769e10e4c3e1cad08fe5e9040ba37d3b10bc8fad5e07486ffa40</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Password required to read this article</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>学长团</category>
      </categories>
      <tags>
        <tag>学长团</tag>
      </tags>
  </entry>
  <entry>
    <title>Reinforcement Learning Seminar Ⅰ</title>
    <url>/2023/07/02/RL_Seminar_1/</url>
    <content><![CDATA[<h2 id="Info"><a href="#Info" class="headerlink" title="Info"></a>Info</h2><p>Text editor: $\text{Textmacs}$</p>
<p>Email: <a href="mailto: yli340@uic.edu">yli340@uic.edu</a></p>
<h2 id="From-Physics-to-Control-Theory"><a href="#From-Physics-to-Control-Theory" class="headerlink" title="From Physics to Control Theory"></a>From Physics to Control Theory</h2><p>State of Newton’s System(deterministic):</p>
<script type="math/tex; mode=display">s(t) = \begin{bmatrix}x(t)\\\dot x(t)\end{bmatrix}.</script><p>State-space form of Newton’s 2nd Law:</p>
<script type="math/tex; mode=display">\begin{align*}\dot s(t) &=\begin{bmatrix}\dot x(t)\\\ddot x(t)\end{bmatrix}\\&= \begin{bmatrix}0\quad1\\0\quad0\end{bmatrix} \begin{bmatrix}x(t)\\\dot x(t)\end{bmatrix} + \begin{bmatrix}0\quad0\\0\quad1\end{bmatrix}\begin{bmatrix}0\\u\end{bmatrix}\\&=A s(t) + B\begin{bmatrix}0\\u\end{bmatrix}.\end{align*}</script><p>What’s a linear transformation? </p>
<script type="math/tex; mode=display">\mathscr A(x) = \begin{bmatrix}\mathscr Ae_1\quad \mathscr Ae_2\end{bmatrix}x.</script><p>Group, Flow, Lie Group</p>
<p>General form of state transform:</p>
<script type="math/tex; mode=display">\dot s(t) = f(s(t), u(t)).</script><h2 id="From-Deterministic-to-Stochastic"><a href="#From-Deterministic-to-Stochastic" class="headerlink" title="From Deterministic to Stochastic"></a>From Deterministic to Stochastic</h2><blockquote>
<p>Discrete System Only</p>
</blockquote>
<h3 id="Without-Controller"><a href="#Without-Controller" class="headerlink" title="Without Controller:"></a>Without Controller:</h3><p>$\dot s(t)=f(s(t)) \rightarrow s_{t+1} = f(s_t)$</p>
<p>Stochastic dynamic system:</p>
<p>$s_{t+1} = f(s_t) \rightarrow s_{t+1} \sim p(s_t)$</p>
<p>Markov System (memoryless):</p>
<p>$s_{t+1} \sim p(s_0,\cdots,s_t)=p(s_t)$</p>
<h3 id="With-Controller"><a href="#With-Controller" class="headerlink" title="With Controller:"></a>With Controller:</h3><p>$x_{t+1}=f(x_t,u_t)\rightarrow s_{t+1}\sim p(s_t,a_t)$</p>
<h2 id="Introduction-to-RL"><a href="#Introduction-to-RL" class="headerlink" title="Introduction to RL"></a>Introduction to RL</h2><p>Interact with environment</p>
<p>Logic -&gt; Supervised -&gt; RL</p>
<p>Safe RL</p>
<p>Sim2Real</p>
<h2 id="Next-Seminar-MDP"><a href="#Next-Seminar-MDP" class="headerlink" title="Next Seminar: MDP"></a>Next Seminar: MDP</h2><p>Maximize reward function</p>
<p>$\pi: S\rightarrow\Delta(A)$</p>
<p>$r: S\times A\rightarrow[0,1]$</p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Artificial Intelligence</tag>
        <tag>Reinforcement Learning</tag>
      </tags>
  </entry>
  <entry>
    <title>SUSTech 选课指南 by 咕桃</title>
    <url>/2022/08/17/SUSTech%E9%80%89%E8%AF%BE%E6%8C%87%E5%8D%97%20by%20%E5%92%95%E6%A1%83/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重试⚠" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="c5c868f1f0142dc6510e1aa380ffaeffd03ea28a2b2b051961e4106cc4029954">fbec6e22e1e03dd3eed3775c729d90238f6d16b1d576728b20d383101299de7d0db4f244acfcfab5dea9be770fac3627a8ec384359a9f9157338cd514fd10ef455e1eee3b62cbee79c9431bf210a9930f86e5b663ce66bc543b991512a4a3b5493eaa13ba27a74652247d812f356a6359afbe9eac53864a102d814fc7f3867b1e5439b025c395eac763d13a5b1f0ce709fb7ead66b0598b8b88700c84bbb7fa50c936a142a2067eb81c4b55c31da9300c0ace969d706d053f397897da880f995c13ebe215d8db3b3f26420c51470b9455b0813ed4150587702f4f6814b07168715d881e9d5b2b24d55da3338dda0e13c6521c3c9e95f06d2a9763461604e0d9c9f2025537c4da687f049aaa5df00d88ffcb5824f956f16f37d0014db0e9b4a483dc748ad1d1581d946eeb66d03f93a1a266c7bc2efcf6194021d367cce7e9a45b3a0937483d678a58d6371246885476ede7c6bd0df5c56302b510527ae931a162838bf902f99241a587c4b4be07c28ab8f8509c9a2df3f7500c8f1f8682543149bad01b5e83fa772f54ff440295a4375efe0928e4964c4858a29ef08803904f03f31882874fa0c302dca87d528c1ec8fced98d8876917a295fdca8b9d5eda277455710cf43ae346e1ddd7fd09d19bb77b5abd1f33653aa4fc430d58cc665c683444583ec314d6c91cf473e7f2fe22664c416a376be2628e4a00b927d0240067556356024295cf7e47dd96a1cfb089e95fbd91d27c8a8ac85334cd70ea942cd9a7739f5b096d81ba02b568a90a60d7817a69517393a49caa55b25e7c24fb37acf9d0636db68da61b2a251aecefa4ec41df4549acaf3cf4ff785f17369c8d80431ea7a610055f3caebd51023fa70518db4e742b958c40b2f91c5768ca6f579a8eea69a81b28b28bef2a833f694d6d8cfa6538e9e45029caf0dc30ef4be4aa0b7247374b3cbdef6f067128887540c69b74071dd8a0f645592d2e319d4027b04d96fd25014de44f8bb791638783e3a5c4d3e1a91c3a3c7132cb70d06f89b93c70fcb628d46b7a1ec16bcf545393efccc5915da16b59788abef80af7c97ed1e5742c50e44816648c74509a62e387aa7dce36f8b6bfae1c5034f8984aa4e1f137c19b4477ae9d49ef033a637c967f179778abe8522ca7ba27f755af5c79c95cea8a4e5d95e64fc8d354bdf722ba6bf99116ad01d0f753dc34eeb75022c3c78955b7f2598e4eaf4293c8646fd8335d5904e6f4e6937a154751a2349184bc124b5ebfdf30c5f31e4810d97495a62f89ca99795967e86c71bd2660b97c3aa893f270f593f3af9b4d44a07df610172b82d00968f96f24d277cd78a4af74b603337fb9c1b66f11c3604846ff0fbc996288f91066effc37cf8c664fce81ff2e46ddf444b973ceceb5d4121b33fd8e49e59138e6eb03604e8a5d0e8fbc6da338642c9e24df4cf0abe3c41e0ee821a07d65018e08a04d817d89c9a3b71b6974338dae55e945a0ba361783c0d9e9dfce44cae934d858cf61dcec8d0f1f452df41d2d0e3d1cabe05655d544742676e16fdba5017b33f8ab0c9c746e99c4a78823db87e3e58f1568620da1d7f05139a644c2723afc4dd19e1904df46de6dbe2839c2413ff57f915a705e27cec32b1da42ff1d4ccbd950fb9969cf1781199223ce2406474c7634186ce9e463e4692508d1f22d6475c9794c86065eed91cba1d7ff540e4bd4218b377ed0a76a966d074473465ca9431ab0a7f6ed8b4f36ead87f2f59438d2d496a6e065d86c10657ea617c413eef5a4f641ad9119e582a93c1358ad368fed5917bb801bf41885a1af172b987eb63c89e431d685030b4146380704abc416ef23115069febf2c300fb8f1f5b884d4f98482c09025e2f027551cab9ba3bda91436c4dbe0684282ed7c231f9e857f41a2253f7aec8210ded96c9251e05c76f8a5224e381e34a2764f2110d7a5b21eeb58c78d1d470baddb8d124d16cd1526eb009ecb2468c40fae05fb92623f7b0d4eadb0c289947175694d1eb3c6a32dc8a26ac54de60ef1da090e9b21d09e57c20bdd8934bedc2f8075416e1b1030ea401947a3905d8a2e79cbab1f401b5f3e7390961ae587e3f0b7e6fd8ff5a1f48b24ee18ad95f3c8b40b6124250d428a7cf2e9e0a28069d53d401905696ba8a071cc62b41d44ba11b4f6c38a2400a2753ff139835c23a195e15acb87998c6dd8aff00cde692eca7cb2bfe067530a804a06b1175d8f7e778a673abc87f89b4b38c1ff1eaf0ecc20a37d04cfbcf12c92dad5263f766f1c55197d3ee868707a992adea19a07155816495bc42f81aa4c08be4de5b89210293fbc0b15688a8905d1632a139022a25345ddd281de0978b8e1f9933b893d9bd3d9a2b26df05f765cf853a0ce2dcb9d14ab88398eb433368ba40fb56ef3f9630049fdd442e7a88ad4d110f5fd35f32673ca452966a947c50c0013ead1c7b29492c37add89089c72774bae0c14971854f1a9a149c8b62e993524a9e5ab3fcc788e531ac203068488ad5943980816caa2782ba4110e92ec478ff515be76558e085a662be4e1a28fc46a004567c052ed724589f3a110cd2f22b4844a9e85c9720aa4088e6cae8d97deb04e94acd4049145bc7aab4c8216e819f595d13a43ed22bada35f3e42aa2b86a21814af923656971df115c8efb0ae7bca45b05a64954acd8a05e7721de6a40e2c31966cf6c78cbe5df3bc1614037d67f84d474778c85c4354a18394396280fac2c5ad4ed230a45fe8b79d0884e2651b59e89862a124dd778039d762e65e1e96e387685e0a7c3ad5e09efe4ce1f564c515d278b0bf22e7e4e765dfdd51fbe03e44458012901e17019c79971fd62a01bfae1394a70eabf49b906a7e75a90762c470654888c28cbbb7ceb06b2e8e4e0c1ef03e6371ecc7129365e3c50261a0765da92bfee655285feff7240ea9580685c433ff4b6d6b5444c14127348644e139820866d9f8fab4855fa7983b0f61cfea04299682be49223cc5c7fc0367fa618fc1a2f4327ff06ca153b4d9c656c0f847a327628b2fa322434acbf3da0648c5319c5214e0c58f6baf1fc3d46c036472a69f2d795cd3668318d87b78af628634a91567ee9f9c5bf28d15c668481972b967081821da8b3f154510a46722fc47100df5bb0274c962e7e4b8412ea8996fc024bbc2bfc18c666ef0a86a52cf14eb3d93cfec3a78f9f53785673e736a2ec69251a10e7cb4b1506f450ae8be1df1a572b913a70dcb6343197b8b70629604a2d1445d94706de0fac2e2f6d79a25adbe189c9b3729ddccae8bd48daa91ea57fcb045e7d9b46fb6a2c2cd8fbe977bc62efd57d2e37a786959f9235282301a64d127521bee4a8f8db9ccfaaae77cf5a0c427eb5015b86c13f80bff3e596a88ce204202138a9e2028930d2a308b162745c00cc26a147b73a9d17f5cc189fca5cadf6fd11d1930068f29ab5856a58fbd383b28b1a8c907eeec99524bfa4add0901167c1b0ecf62ec04754dd090e1daed62d84b5ebec95ddd020d770b1fb2bf087c68bbe9735f508e8e712da255852c3e7542b837becfd4ee2bd930a9548c00b4c88252e52fb756d329a6d82d67ed3c86cc9077e63c4a930019bd89ac579a687bb3ba1b3fed6de259052c425908597480e94dea15bf1b6120388c33e3ba2c12d630fc5d6844d64f60e0694d7d1f12a295ac8f39342a69738c30cd086fc06d7e194b2c526f248f8aca215dd1b309f8baf3b6ea31b1f121d22b8d065778cf7466010c3d427dab99ba8469a0d25ac9674af3c96c69ce9dc52ac56ddb0ed19287a4b68ea3348dd8ef4fbd66d6dd20c6fbd5023eb29eb6c4fd5722f3df284cc61d66dd63dcc2b05db73d61fbe35e821c0ded84e5655da61a66d904e09158db9be4e846d6af7bec55972e9e2342219a3788e6d7f679d4c1d75f2d3db4f99faffb502dc4ca0cdd03f459383c55a3575716b26cacab7b9fde46426404b6500e2ca4ead9e05f1b4d455c20b25a5697a674073f16ba40741a6487ae0a96168d86faa71c5b17ba9b4f0faa817707937ba1b56e2ef5f79b546ab3bdbaeb16d44ef909253bc2eed1e18293a1a9d27e9faa54b926957d42a1dafd0e0807cb3c874fd08bc7e35cab194a2a579f52389146add38d06bdd9144f5a034ab5946b9477cd20ae85421cd6af248fac8b6b6b56e57d08cd85a6213e1ee28a66f927488b3fdc8469d8e9ae4e90936e5a7354b731ddbaaf6fc1814550da217e3915c639ec406ed6fd67c124ca8f6a5a420ef1d0828325ffd3f2002f0d9813f5230d054b0865b24f4b9e5d8297766161ebde3929bac44c7ae50a46cad48e77787107473d4663a6b43cccff5441d6ad82691e96246b9500d2dfb4d7516349d6005267d837e9e8fcacdfc12a570b48bcd538f94860c6209594692d12496c8b87c00c34ca15ebc61d5d7ab2706a782f24c6d3616ff955cda6c88e59e2c70214982a91c75067a071a9287dcc4b9fe0a23d8940698fcc56348708975bba2fe3feb009602bbc0c3c5da87775f2e5be0aa7f8b9a70c5ccbaa276b483cb9a01e84439da7976ee1b6a4a93633682ec064bf30b4d6f4206cd1142509e1a45309f9b559cfd7675ee5d4bfa472a44701297ecfd4f2db9933e104296e3739d9c0edd18ef821b67e66135d5d61983fe604a9d41e7ed3cdb8236e7619627794b4b9730f67177037886288456766d11f1b085f604f59ca1b9a7d97e5b2dfaf7634e7709bfc1d320e8ac312b096b9d937a9b312101352a36ef11c9f202c6f16f97a822c52b5371b3df9d58ef077a80e228414d30fc3615c1d3c388c4847bbef513f20f5757721f719419f8694c782404cfafcabacf19b2fd0e5d2a0f6a820e42cf178fbfe658b3dafc841d5d141eff172268e3651a3a67e3b1005b4f7c29bca0919fdbe2f893f4e620fe103b517a2e9c3f46410de56e71e9df81c804658ca15b616fde48ab75bdd35ffdad4979a4656354785397b87d8b602fca85821270a9a02a1a16ccfe0298ad05ec053cfa6be10a320d4735942cb1f5baf28628aaca47cb05f0503471886eb56a2f68ae30c79b47505820399b0c42f29f9c6ea0d8175e378f0aa100d915f131e7f9d7171b4b45517970353fb544ac4f422c96c3bbc3fa80dd0addc8794595fb5f13faba360b9b4d5869d0816116fa658cb63108f9ac9d3bc38febb91fe7395661f3a2340709cb860780deaa4a6b6edb885a774af620e4e35522e6349b588b9f055e222948930ee7e26379b939e6a70b1c76ee6b9dbd4866076560ea4857046bfdb83a3dbd24a0b8e480b5622a0cc4632140f6d77c665f50f5c523e5f810ab14304f09809eac5a66b55d4bdee0101c23428525cdccb07ac4bc721892854941c35379804878b53f771e8eacd37362b9a07d450b450ad58aa5a24a5cc64ee4f07893f819376ae1ed58f44848628e79a91413cdd6ae4fda5ec249456d498d0aaae7895a0efcfafa6c98add204f0fb26f2963a958f61e819acaff35d0b767432940aefb6ed93d939562f593f5f039b08ce720969d0b2220855626630d64889a43f3372e484552f95ab0cf7b85464027ef54005711cd1460d9285fc962cdf4c6d6470740d52092252d6bb117d0dd3e3f63b239d30bbc57f504dd7e959dd3959153d17fbc6228f5d880b16900bbd16e194be2beecddf44ca9fb7fa36c2f839c5dc272a3b3628f6ec99e563843600edbb830d39bc81401c2075923fdd59b42c9f0327c7e34f0782cc79fda0d243b67a3dd3e13484085cd6d284520aa0080e7c15cf6aa7630fb14be139063563ac2500c9f0a950f216ea075267e6088962d27d88cd23c744844819e45e55a02a715e86ec9480df35cd7ef2428fd15ca2ad0e95953b156a3a805c33c822cebc233baeb87b7d806743532ef6927e6a42efc9478407e66bc7ca1bd271b61dfcff157eea41d7f320a7639917dde10a4843062e607b2b4d715bdae8983e4ab4695659e058c77a381ca8a3ff0df61496308ce56b1c617a9d5309c01611e9358a8d61c5f9d89a915d4a395d0eab6a4617ab392d4e22bba83094ac75c7aee73efbb87306ce6a7ee7ac609105ec4a5792cf21f6c3cb0e5e5310663365d217fd15242eb9087397056f5aae46283639ffb9aa192f60073610daa5530d31476c404cc226eef412f74b49ce9c2c8e70d0ba2bcf8d14e9c396df8141636ff1e5e6c550e199d5bb9c8e808353cb0fadbbf09b8d8e9f4f6dc955abfb72a7240e06de24f9593f5a558d8a720ab7063cda6d9a6c072a838d93207f431ffd7b4fd086072d94b58f5a700cd75614348d18db0d5a39fa8ef59d996c14d169ca25fff3ebc9ba78ed9c56e98a811670f6985f70387db582c803318042604b6b3e86052529e351eec96e80a99025fdd286f63d74bbedee6b20811ee8d0fbe10ffdff15b3115782755a57484908f68a4010b2f5855969a2c1a2e416a86d4a3fc505528de0784624907e09741da23294909d40abc2b828a4311185c0de264a035bd6adbe4d951d965459d93d2c2a67efa87b762e104d3952d6beee2f84971dd66bdf4e646033cba30bce9ac01a923d5566b0aaae16379ff3d3db1dd3a352c36369449a556e048f7c353469bcfbc5310a156558163bb9182b910723213957c142f91211a6f4e2bee2bdf601329725d199e4a60775686e6e3cc3a0e91ed05e6ed7bc5a7b11dd76efe51396a3b43b50039846cba918a897553949808d6f103687882455f96bae4e20364a661a8ee56f75b4878dd8009bbd5539ec0d2c24b24935d37c3798091515476e3e95451cb71490580ee9a4b249b767153325ec267d7fd912b055ddf7e8c45dbfbe5a3c93a1064b4aa1692a99a4774ac87a299928731d62edaec20c7fc9e8d914c176bd226bef267edcea20e0ee33223e5936d1a6d21c3c2751f44bcd6ae6800b65b4cc2849d0b0e63bf56c3875813cfc84100d8542716a53ccef479c9ed33758bcaa93d5a838b5cade011d3773647dbc1b8f15b419c6dd3d3528386494e8d23351e945bb16bd5c282915559402a2f8583f9dd26fdf3346604e7cb3fbcb27eb5c2f0c85e8c0d56f4bf901de86bfb8e2f6712cd8c6d7b7c7c53bdcdea188d7e268b1f2c959bb2f4717299aacedaef6ede1b978732b3be9d6357ab5a802fd5222f59b7d556d0432681fcf79d9848b3bb1a9a112c5a5ac6ed060b5e6fb3fdcbe6d08ef613d3c78f0b420b16603004eff9166cf12434d7445e26e0d5e279367f642fad90e87b783494b8f194acce3d2510cafd615e7c71b889ea92c38ff0620e6490fe331bd49c95a615dfeab778225599e4a8d35361f718ba67e72274e1986cf835ae34d5f597df884a8a75f21d1672f1cb56caedf3052431ee105a2eb14cf228579692efdc0157c17dd7d0a19a3bb4d05df004578638ac2b57b9d5a0a2b955226bf05173b5eb98e43f89d7e9d448707944980c96974441041e24ce744f0aaf41b27248f9bb8bf3c9b4c078a606545f3597748ee626d2f91cdebdcc80b5d50b4d01287e81538a60bbe3f4b88fbd392e307b07ee5641c4857d42e83bcd5999cc17ac4db12e42f666528c4dfc69c9ae8412d0f3e89457c1fbc57b1c4319475a9d087c06190c2fdf610294d9b35f5b1b0d37744ade7d1860a010e1d80c0e9ac9a0e150f89be6192dc1c2168b72f71e2094e3fdfeeadee4319eeb7dea3ecaec8722b02d8f582a08daa17bb8d8eb2747230e6f5349aa5f928275ce6351e9d4e06a31f3d5c0451c6ecdc9468dd552489bdef8e24c38e52bef7bf00ef38397097e9740aeb336ada52176c629479c2a29c93cb653bd4c0bc3aca0ca529d2c6f0a9924ff28a9489299a6e93aa7afd291ab2b4669045a7ca79641268ff9b8bed844009cd5e4f406a3661132d74f11b2a2a37fa5d2ac08b7af714d1c901a8fb1d20be0b1d67c2905c5973d94dd4e9ebba8db4360c6ec31a875009cbec1679d034d5fa91e05a460a535ac9dc403a9137987f821ea7c1700f19edfaf2ccf7bee16eb8c0eb940824b759ab2d781acf35124f73dc56479a2c7e513dc7562b35132a0e628b09e63242f5d6848d82990a58e3024a7aa4cd54452788fb837621d3921297e99bc91451b032096c8b6304f92c27c337e989ed94c41b868ce11aacf3380b975535202ba57bb827b537dac4d5671f610d27732c490d1964bffd34727cc2a33e3c7f119d215c2985566e1527590d230859d92fb799e7c85367c2235d95489af0da44d75c6502b4249f046addd0230624fd931caef0289bb109200096e8a6beb8f9bc7451a2b17938a44abc3959a63c914665b530de94b12081eff1497c2bf8ddc26d8c0bf6143549ff20ce05e776279a1fa51d1c9e36fe706c67fdf4478da563f8e79067fdcb57de09644718971241430437d53f2a0522f8b53d1d0d85c266bfefb90b0e96b50461f659ea8879a168213400aa9e4e82e7c4d72978b2aa4adb3b832ed5ee47103d8515e8f365be654dcb4d1f87607857f0672b92614257c0f117c01f7ab7fc80a2a48ff63d9a60223b2e7ee7800d4d17de56af90d2f476e4acc98b540620829ab61aef3c1d7974dd16fb25dee9fcda094be59e2907a5f459145f2ca5306ee97defa8fd9d67bc585a11fe188df0785d5305a0fdf9020d7e86377629d6e6947aa1fd863438ac481324f83776299f785849f371b79233956fe138f50f39c3cbfd188787cecf1af20df2064121771d833c6841dea7d4de03e2eabab2d24841b1768f1d96767b7b9f68b4125d58cfe32f1ff2870b6756116664f0aa0acdfcc3364108dfb8f1c868eb2e13ae86e156e03fb4113cc045f636e4aa6dbe383d91b88eeb74e91fe5125572bb84afeab08da4c3f9b89ecbbd6a3038da2cb596bf3e35039eddb5ab3d4b3ae0253c85b4845167342885ec4a2a10521f9df4f984cc9176d4ce1f7a8d8e22ea7e48063a11957e9533d5f0e0a162de7360f9a6a0ce59e5f2ad5fae788d68b20796419f714c5b6a4efb00a21d667ac00ec7308e76ac34c1868a6912c78347b5477e0b9f40ffd6554a1627fbd79a0f38b345243fecd9874075bec7a702f2b9c5b4fa2f9a4cf7d7af3d6c12ec4661e9ba47a38df5a1ded3a72e0081a73289df2e898fc0df7df4e8fae3aee21088915d9f6ccc8b2703598efc47db8fb26e956af51c3f6a12eb4280eafce74bffcbd05173c621442f497f9dc59601fd25d2562f8bae3edad65b80c8240132afd33f9fa078ff16dc270115872c4b5ecc60a7caa9190c4fe69a22be5180b55787f65266ff674685c48bda848d1ac5cebf6beef06a75fd2932dadd32bc7a0679202b3b872a40ad59d9b494dc533e6fec8dc175ab588f514743a7bfe348715b7a059af81e6a80e3e86b2ba74e3f1f7fceab5c6028a673bfcb4005cd0a58b40c294477242b6fd46a861885b8b059746b8fe908bddc110e8f5a1548c965f3e735fab57074e2f2bf45d29b590310405fdf4aac68a6c4b4af1691e4bef3290c3a0bd643200b22a0e5cb57f0ae852cec6af5bfd3d0f4c387b0286f15d48e625984e094e59d26968b256bb8a69341ecf477cfa1667f71b20157f345b47158059d15095fb0f8996dedec32d62a6238527166051883b4499a49f326caec140360364e3ba8806a5b2259de97eed6c854aeb60ad3f4e6a1da3514884d47d7690bc499de0b94f3476e48e0ffd8fb733303645ed1582e6d5fe3aebdff8390db969e7f18365d93b5b06c15cf3676cc656af6300444a807bc3401d11c719ed21b0e259d847b552a1f20f7ac7e7fdacb50565aa3e7989a46a0dd7241224435a4f51adcfe6a0d4437dee024dad0bde58e3796216fbf878416c3134b9805f5c2f02a04aa3141fcee9ff154c2f2adf7a4c10b823c67bf255f480d81bf8705a9ea140d605e5d9a97e9bd6825ac41cbe858c05504235d93f6350667908ab10d2094bdbf17eb943208c150e211ff6b6e8055c5bb93b9f2f89a7981e7cd7b130d56a039c55a0777ca9668799db1d5b9641b82b74796f83de30289557eecfc7bcbecc8f004fc39c52bfcb7509db0d53e95b0ede614f52e8768e9826c85848a8a4be0f5c12f70c9056618fe8ce5af5ae5daed91ff07340edef528e3aa9359af43decdde58ab6851496c4985a8923058370b829298cbbf5977f48dbd4d95f35a0e139a2271d18eb134f3f294d4c14b31e771914edf244992add5b89d48a9bc9443e41a474d93be5fd37f4d97f4992ffbd9243609125c92288dceb6c4b344dbf6ac84d2bee0b9d231bd136124eda4cac5880b509f10e49b1dbc555b89539a5371c3574684377a9a5d64ef5eee488f864eadd57039d2ee9092f549e819152da08cee857c41245d1a4b12e063c13f9bea8dcae14a6615b80f8b9ac66533f5060e9559fa9c92ec2a111b06909539d83902eba77ed7e0e4f6e506d81e970777c4cf9e0a84863c03c34c9f2dd422e843389f9748d9b18e6474fc218eb17e57596093def0ef224192911cab0ff581714f98288a5727b95a82d7e5d9f789dfd8bdd79e13e9c3cca6dbf8a4e4eb1e7eeb85a1a5707ba050008310b56e84119ddd20701403cab9ea2f337b6489f0e2c08bc48c589a474dffe7c0ea472934217100d086a1a38f57509727dded319bac9283bf2f1cef1ba65c7a3f2f9bcb007dc5d26243e2ed308b975914f7604a7053f567c4e43599eb84f3795c101dd6575edb3702bdf2c7fafb79b0a188c535bef5a133778bc9a76e98c4a0fd9817a26d6a3393c12696a22009c35068c2509b1bbad9b6e400c295277724f1865b5a8c0c4106debed7b7ed538573a8101d84f58f8f52a85c726804da27e7804bdac9848669a09f678bbadf660447553b971b13606d6359b3183421cfc62a4e23eabf3a575fa3450a4299ec62402be389255e1ababf974059f52f075f03383584e712c259e7afa54be1296481ccf6b837d15ee8302c4437f52d76c4e66636d81cb714aacafb292cf359cfd68ba252356808fad84f4dfbec6f4cd3b4dd56005563eb37c4f196e8fcc09954b463dd29965509e3ae820632c146dce86114ae0084db90ea2f44231f6e89edbfdcce8d462ef576a9494583b7b7fdab2b4324b9c36b6776fcc40d532ec3e021418e015da218f4a6584b9fd752346bc95f1494a91f1d6e1c3a636b86f2e84aa66f753e76b1331740bc82c16bba1ea1a692a7b4444c43d6808556813ae1b9078e09bdf90c1701f77f5a81f82225946b7337cd2287ccceccdcab3f675c8cc888ccd3893a2cedb44f7a24aeddca5366d9460deb82e1fca10f3408254d7d896b9eeab5dc6ab21fdbaf9cd35b10703cc2b1198e68d91f63e237cfabe894e195df132fee5dad877b60106d2f07c37569a38ee68ceb234956adb91e8f0201b14967a3280341de81ffe21cb2544c11b1f5e2b808cc796d67b507b794fea54e4239f22381c0fd2041a31b6f3ff273776e7c014cbc21c53aee5aa77dd46efe22b5bdf971e340feaeabf8fd07d67474592c93fdf0e12e9b9e783f003766fb1d6ab713d0724d913babec7aa5850f5e2fec2664ebf75dfde992456a95918f65931cc3fee9820317d150c8754700f4134383154ad8c69b31aff0a95497291e1147459a1379f9b98de7ced9bf05558349783fc6df9d7a298917ba423839a2291e243578a05f7bd954ba64d87e0a5d16d407aaad0e3f8e6fe63156ed6a156879ec1ff4c3ed2b803b23bfae52a78629c039dadd776c219544c5027dc4767b9c383219da29945608cf9f45a930aa654ab45512bec4998badc08a00d013eaba2c82f42afbeffc3f236eb84e743bb00e842b6877664129aa6e99ac3f4980d5b42817f54997b2239f53a61af8bd09f07ba4a7220635b2aac89ce9bea5c785ec653e10640ab018f6b54511d457dd88a8294a1e66339872a5b2c201b824ca03d509645d79987191677d026e1d15f88436ddfa3325a516dcd559fedee317c4bad6f73ea340c1a25aa6827f96b10fcb47b4a304f13916a9c26e4f41e02e0ae1bf1e3ca6078b42d7f9d9d5b5db4b076d8b960fb49ad80ff27177e9bef40acb5753b669e3739cf55abd2ed330b58451aa0a31f9f11f9eba8cb9fbf4e376ed4e076df1633e59d8219cb17873d6d6c6a941b7a2d6f0569bd29a98a0a96538bf937d4f711a1e0789a49ebbc0fa7dc37b4ea1cc93b484d530996dcbecc04f1a4b178db845ecd5257c2787164c0edbe8cbf335ee2a26f50d0ebff671bd986b96bb400a39bb99e6dbc910e026d917e90ed50a06d3286dad3d03c5dd930bef375d06989a84528ced2f866f928782a2e4c011f29d259753c66e0ac8d129edafe41ccefad0579d76fde032eb0f5f23b2455ecc1d34bf1553f8604c6ce21b052b88190248abe1ab2280e08a4b7357fad139fd2b35735042842572c23bcbcba736dd4d2ace2d76f15e8444908751be4f3214fcbf393cc18195eaec4e6bcf74185b43a7b2d79a936f5af16e2b50e7ce6a7b5574c767925375c3ef1bc178de79304576da79d263b7d23e7c5e05797548fa4070c644c9b5335320bf9e603721cb71b41b6d11135180a6e832ed6d6f9164baaa2a20da2ab916e616a0c8601a3a3ceb77ae2317d59aae7842b07690d3e2bd0f10451e964fcf13d857ec24c7bd2196cf0c03c5d9221ce34b6c5a18131e2578152574c1db3bd92096d23951fd0cc30c156cfbe53bc035335335bdcc04489df5fef753981a9318e9bb6426b4ffe688c366358d5122a88bf9a4b96a28548d09a09a164f9dd0b1fa3445782e57871e666bc41ffedabd719c15de2be53f08720280bd5e901bd9d34107c5101263b672e7caf2abfa398bbbb5871b85f6ad766000d25ebc43b90cc0bc77c1ba9d5a6b3dc2b6345f2f224d880e1274d4bcca52c8cc2a59af6d29d00ea1d946df62911e53e496a54dabf9177d51fb99b3ef42db0dc85bdf9a4cd0c0a94c8392871978f120a0a6714a5db6cb9de0a87e59a3dd32494dd4ec2a2f191f36f2a7048f6c35bebfb21d62d81a24cbc38c6a8e99351d9013b4961181470ff60d8831a34c80a43e0a3819ded64790175a7338ea0f4bb2ad4e473ed34f0cbecdec4b2920d156269e1967888c0058c6a0ff4e9c832d85706a4a307f39c6fbb5e04c4f3702190b52e118156968592d015de18e9465901fe5193a054a69e576643c38d677348c95e0d76b4ed8b3121f2264cb259b0d88df0e85af1cf250df6c04807af75c8db48bd67f40e2d1e103a829dd6224f813a97bcacb0e0db948b4f99d6cb27a4b6635a2f9a5aa5b897e2a878b36a1ad8b3bdd46d335cc1fb48c7baff33284057a41451ceb87419645f4a56f5ed0d19d6a35716befb7a99a0d02c388af8514b1de90bcbe427a7237f031e2569ccb6a47f9c5854161d8ab31bdefeb51deb179525ad9d6bfcecc65133de8d84d3e35ee49a177dcbfd100a5fd6558d46b14eaa12de84a2d1f51ca7cadb76fe7d518f688b91527dd2b1ffd1e3a7f94f364e78acdac7b6dc87692f1ac76713bc1b2c8a0bd2e857455c6c115087febf09e763c2aea092c4ae0e75219c23aa6fcb82336e51099e6b936cf63df2323da8de7d08eae84f5523145f486b1d6b1c2e91cc910d96c95550aef9f9638ebff3bd36e5d94a55bb99357846338f5d1be2515b70747aa744dfb25059a4ac941cbd74956a84e7ca4938718aab5871923e50e153b2775351cc0730b5b21ceef1888dc8ba7ed962046563429108b5ee22daaabe5efe765eae6a4fbf2318ae3836c4c9b11c337a9d5d87af7f3bcf3b9b931d26e48d14afca1da9d3e60a592a5d23a37ddfee6ec860de478b19b33a972eaa2c992cb3eddabd6798cae789fdcbfbc451274a4484fd6c613a6320df8de69fd425884b95c50550695bb102831ad5a29ba1826f9abb256205a08af5265d159fd3622e479cccbd6a74b700b0404f0bc3c5e59a5b253270fb3747e816ef84d41c122f6ecc6540b12b1d486d6a05b88d0a5103ae5aaf6ccc6ac8b5a2b97d78ca5981928081304aaf92cc5ed62d709e478f036cd37f62d58f08873dbdd0665a5cef515f43be8d304989a0f28e651744d50f67a6330e4500c8be03478ce0a917e998352bdf65d487fcc2d61b5bcbcce3f39070f43d36476c12983913784b340ef1470cdf869371cd2a34874f7d70e88bdcfd6529f770355130f550c55fd98908d92752d5a4dc0e22c3803b10639dd58d9e6411af7b5a2ab228d80c6e9677714c219f16ccb21ba472f8bb89d541c08cee8278c2133d1e2e8c379932b0b49ea7d95074db255ac1e069075f7d22536d3c9ad41afde6578d595174b323c743f687b8337a68de26a8fca10a5d0f976d7cfab778e9bb37d82b691123ce0124e8b962fd3d0af911493470e3d8382ff95b70e21b675e13a6c7ab0a24782292b90d65315b93014e81cbbcff787c226bd5d7bc14a45873a65593b2a6ae597fd8154c34003010cb2f48ca0a98b72b43004e2f4ba2a78919077b2e8248e43dc5a23f476adefaa681d7bdffa9c4b7d287ce1d6c56c71fd8a44dca6f64f5a5813655039a850732e8df689486116b813015b6f943a20e6388e421601be02e027c7b2f32ed47537cea5641666dabdbd73b34e9985dc69dc4e45db0620bca48c4d973e928acf9a12a46d47827466b1c53d141e6b3c27fe075d3830f98e89b4be82aafcb8673f49eccf2f2cc9ca5902a93ae767d853c21d789e68eb5d77052bb9a348aebfbe5b35117ad29b50dfde6830b563b267d76dfccdc9a5003e1dd7806c6369c9cc85e4e4443b9f8e5a418574eb661401e884959888075e72b27fee1e71770c4f217243bb97c8c8688e24e2c8467fb66f636bf1a622982a081b3befe7b96100a6e3f77d753085dba56c66c8e9d473c088ff92493b202bbe1a79bb07db5905ac8e6cd4a57b6799ea9ed1f0b01be4b10cf3546b435e7327c50a3654639dda51cfcd607b0ada7dfb39fef5dd4ffd4a5443cd8632e0f353c84f5115291abfb3cae79f382983885e4d8f16446495ade37d5c518a491b42b1fff2d3a4a9cfee47d3c59ba265451415fd624ab0ddfed4489e9d9bdd76d84ed5435d88db9926b43fcc66fc28305a905293280cc57dfb88f7770313e472c829b86197989e5f7a2840a11cc2aeadc3957d37287d5e7ead0d07581e55b5a40fb883322a301735d16df97813f498ee687674af8a0ab1ef2ace9f97c32f753df52efbfe741e361e9bb0a393968d9f7bbaeb3681387f181e3e9cc2afd06c4290817c604c1080fea8440bffc939f8c971751f3f082fa27a4e99127fcc412d9d9d0f5e3af04a6a46c118a534c779c9dc92c2f0aabdffe87451df4a90425f56b8343ff3f80b347888bd8a40cb912f362d04350bf3a20c1333ff21fd402dbae7c51c7ce637e9bc494f80c1e8339985c7916e1d9c1a944670c500838a4f6a977c90bb2b069b607e29b9657a1a1abd09ae29ac7c704bcc78a4e4944defaccc7af373a8e55336eab4d561441a88b4941ac7a3c282518b1a1e852fda094345c6db4a4238e0a5366202b875a6d616d7a91c908e2d02053eae0c2a0347266030f032b5b45d121b5bd3529594fa0677a97703f3258d8824bb6ddefa5c8ce339e60bb12bfb0ef82430a89affeed3eba2c5b69e8ff7b8ef51c220b1eb649cf3a144cb916fe32de6bd287335ae5a39b30e7088c1bb18ab0d9256f852d27c6ea1c38f10d4f4aa7c7ecde929e9fb48a5425a496b9fdf6b8452adb78f965bea16cf68f53beb6774af112b84b54ed9473a84891c8fec604fe29e69d397e06369683b48b78881d9bfa610deeed99172d23aed4fa59ff0785b0a4e2fabccfd732fbeeb4b6468a4c238c0c00725071b0c0aaac796878c2adf141e222b59589f3e4112674a49cde77e1a5eec315c2f90cb03a6b8377b9190d68bb814250e48ed8ab24795c7e5c772224e754d89c8c67fa1b718a3c7c186cb75ca56bc46cd3f134e757d28054a0597c8e52534c243a6319093a0d0f610b1c6f62f231b2cffb61f6a03c29bf53d39204f530caebad3804e26c22a390af0b33f90126ff9f20bd3a60ab81ad3f1411233cfa184dbe812748638b9f058acc7bfcb8de74de168e7374a65d94630c9cff4695d1354c734563ebed3cb390a794d1cafd69f0ed04479fcda4205c6a603166e9e421416806f09fa9d2710d0c85c511f9e667dcc3ece7ddb3cec52357a98f5b197009ee0789c09d5246f3920687defa1344543321b5077f4edb1847b23f8f4075b10d802e070273de8fd8c1ec31919ae6f7476593990c202036a3f9e39c1b40ee538c4f29fffef81dd2eb611ba544d51d158ddabefaf356f5eb22a8a56a22b6002f5fb3cffb09fc70f46b3b3352850884362ecaa48f558fb2847355d27a4327af52c4f7403bf3ebfee697cda67b08358a9b23efc1cfbe7b3552b7ff33f5b9c2607c93b199a9c34f8e77de6d70b6a2f00f2b64501002395aea22eeff096b81d6cf1e147ee0896ef8c3e0dc4197c4cc8cbf70b1e56caaa07ea236c849d002de29b00510de36e04034b86cfd77f7f0cc1323422a8f024f11791beeea23aaaf36721fc647d4c4dc82f7596c3b142966c251e649835d9804ea33012a6a38469da85f14eb8e543d4da3a301ab63b2f0253635d2d3bee64b55a1ea7cfaa5eb31a7d0e55b65d6f89520d2ff0b0316f7015af31f6cf04fc5c7a45f6996a226764c0b51d794f5649a9a86846c5dd51fe173ee710cc00b07d987d168613600541e188f8915538a0de2819a8e24b4d721e92c79d56bc27a5c4bd960fce8bbd16c9ecb6d6a94a7f1bb9445d223f53ce03c3a5e607f16d91b20a477bf40554902d088a5ef8b04d5822ffce2ad2876bec2ae4acc64aacb057e2fa3250c5d677df2b9b13f216e4513bcf45663e43f29b79abbf45802d1fc50dad2bb661816e33074de356506288c8fd70fc59478dfd3165e5947eeaa10cfd7a7a6cf501c0fa38e76ac4626ab94e871cc2945702482a2f2f6e63e537e02ec3c0ecd152c89c6759f32d69e876faeb756ad5a50b47b21338dcec2f7c1eec470f412d4105b1e090593cdf3996290962981cce682dd469772a159b47fd76e5709b34b7a42b41a14b361b6097df52ff45ab3ac20f32261a51db3c2660e9acc8833136016d92c3f29560ad4c222c386cc0d9f547693d2412e564969a1e5e92deb8f8457db0cf0da87c9bb43e10f3d278a37e350e0c6014b74677a651e7f57db39ceaa9cc9cdccd0ee098e06cc829174d57bffdc99c13cbee88edb03c9ffa29f3570c9939d798043e0d29263903bc576761065f39965172cf1fe3143b801fdb4f47b61df514edf79243840a1dacd1b438e459bb8e91aab6420e112a2db83d2780c6185602fd0f99e00c2ab7370af2f060cf2edbde054980c61c2660d2a3d813dfc9ca64d7478375b5877341497fb10eeb2e51ee934fbb1bd1c9a93aa095f63175c48c234126309f1de28f355fd14f7f17b0f9935e0bf20f1401edf4f8ca4b310b71e754ec654b66a24172cbce7f4fee2a83c0a35c03405b3bd4e20c1cc05ae5e029366521837b5149e41a013489325430c463ab9eee5f18aa0e34593630a0dd63de272549f19876f6f32fc17658ba4bf7face48c222599263b3bd6eb55a4cb7801983a035f9e944be5db1ff2cb0e1ea54297ec7a98014e71bf196208d5900bcaa35efb112e6e22c63127b15e9087a8cc9d220076a229084061151ae614c12eba80f5620b4cb436190e4d794a9e0f00a2c373f38c9e1cf98500886557fe8003df9511e45cfca3d0d0f2503c32fc046944b89b34dd3a01286c7eaf0c13300ad649dbd5c081d3cc6808867928f5bf8ac022865d446a0d78b7402cd0c538e05779a18b2b8201f2e946fc102a57bd567c2633d0c27a23774e7c0064cb70afdb55c1f034c70adb94fc37cf53ae16bbb9c570270a02533fa8b7c95dd1447a8cdba9ee4b62888d723623fb97db36034b6cfe7fecad29a38bbc9cb83b0981ae558e682f10243cc718256f00b2c38dba71b5fc8dd02b213d1f60d9a809f07a53f7f0a9ce947dc7f93b585d5d6cf6b534d0b8e9392a7f0f4f4d19f82aed469f15eed42f52c4e96c31b1b32f851c2dba6069d63c04b753ea9362609f804a7af70255134aef1ad99fa12e0a4e84b4907f1c7fd2a406f06e6929cfd7e14f76d6755944178f5543d16140b3592daf8f4b04f2c48f0b4dc9a43730ec1639d100fddd5c0e653a66db12eac326cc9947050555aca0d37f4a8b1954ec03b8ad2de25f2e92c4c8cde8004fc9e96d06ec1c11fc142c02d3d67b4aa7f264851f7681a6f77ff3acc0d2068b0bc1ed63b0bee508242712c5fcc60b9aea0cc9137b54abe1376c0a3472d9669a9e163c470505c186d12036de8888c07a813716951c62f8079103acd1ea59cf6bc06882d4aad3738eed7aae4f752cd7f068524412d93e117f838985360743a165deb3b7c890676e6e3c513e2a53c6f30102fc361ed06c399ceb80d8b7dde0bf55446ea8665e5f984138e2a82fb9e175939d57ff40049f66f305b4d070ba95c81cceca28385c5587f790b63d1f5e1c76c811514514bc00b4d6839779cf5af1aa1ebd244e4855dd807a87356b48ea9b47828899fc992503b4b980eed25946589bda5e357ff8f2bc7e47f7c42ec488ff585e6bb9644e6d096d9a523b5f7d82d81a0c271cf769c4d4d8c81af5449d3bc86a3bcc7bfdb7f4afee84146a1df2962c2d7dc39f4b8c338f1fdf24f6cc303d49ab3a641fff50a61aa1484f9c8a8f737ff2ec56dddee96ca97e772fa9880980f3475fac869e164b10f5dca435d08a7233bb57e6b6053e3077fd956f0a065325aa392a19c9d0eae614a7188d05b21ccdcad57a5ecd6fc058862b42d93d3cb210fab12c009ceb19d5cadd540bf35b0fcd5e3bcbbe046994a24704f668b6cf44404c31b0f291f734e603642d6368b1e1b8075d1e32ae7f2424a24876de51fbc95f8964cd286da6140ee112ef0309292219c25d9d8854532ae23dcda166d62ed9f3c4a7adda4dd606de2143fdefc857f06e6a825fa6a6a83d4c550ff7776a0825813e04156ddae167c2c0c6b26c46462f133a97ea180f33e49d2bdf700333bf1a588e5c2b933307d2454208b824f82a8de504db54f63ac40c36c251b1ae989ce0b43ae23f89617469be9663b660d7cfd68199d110061c4010eec05e3f201b51fa49a3a8802d58ae702d88a80f1c2a1bdf21e7ef11241a9919aa7683ebd89de1bf54439eda83e8b47c7e2ad2a259089d02e4b6bd7ed60d08f9b8045079bb0765e20b39c469618c11e02f426312b74f8ce2ac00c06bbbee36e77caec6f13ed9d8750e0ecae489252740cf59f172273285699396e55437c7285f7b7be41396c5a0fc435b23a9fc5e76cd58641e34e8c5c433e6b9f5142258275ded22d1a944c6b99380becfb759d0a27a98e9aae5a2160345e3dd12f4eb080f8723e17af80874557308d80bfb02c6f699db9e4ff1e971bc597ea46a1095a508e2b6a53c89ad48606aad6668e7241a417f6ac883498ae74c6ba41862d2bc525ffa10787273c15cf9f64663cb91a289dd0777018f6d279ea0901c0237a130387b450597e378d17f15c716324167d9928546a335cc58cc829931eb4e920c1f4d76683f0ae24b422aa059bc8e58a0b7d2f74d573add8a61bf61cbc753a32182a30aaa9de4f3915f310d5c7a8548cecbbf07ac438d9e092ec1ad85da5ee73cb0818c0701b59f88cea4ebda45e46ac32ff48c94119f30cca46e1147b1e551a0116e70c667606a1b69904a8977ae2ae92311391699ef10e90d928a3dd714ea6553035730e251ed2005adbcfd2951fab3194483704f46253bf2d7c58263a1f64f6d661a7e564305186b67841468f56d0105c79b4737895d60111dd43a7029666eef42c9b804e4b80f73a07aeabd8d9566401434e7b156e3b6d2aaf4539563ad38691405a7e18030585f3acb955b0d0a794e418813a8d983b5c7d2e02c6b003c1177111dd74f57c16e9adb48b3940898c2fd49739cab996aff822203b587c10f96addd65ed8f658fae68272193d07f0a55736e17cc3e0dbc9b2d0a1a6000f5ede40d01c83c2a6267c6bc48d38de27f636dfdebb233040cca21fbbc362a55e4279288a3be84ca97845b3afffa1b3f62972bfc373fd6c127468c5a4af79a165f7eb543275a7ed0b83c3d0e8c9dea940a0e2b4503e91e073103e4dabac37d323d39ead8fe08562b51ac2321571feb21d5e5cf55b54d3248490709fea529c106c31354721660948f6331884eff1e0f583dd21ca2caf13cda3702767346918e3bb0dfa8aaee2ddb8dc824584463cee7e97930f3dc7a921e5896adb1dfef06d78ff5041923c1cf5b7731d37e087ebdacc72d5065c628b977e904c54a975399d9ca90ee6535fe633cf943d0d1bb4303708ca76b23165da6023488ffcd47db4b885357dfa79f7613c4675a10344c814a55cb21338ec6cc1713e0373bc58e30a97a6d791d65de2a5f39fc4b1a984d7f8dc782079a7737268e05ea248f275485a85ebf38f114e910dde2a35936112738442630eeab6e842d8ec49a7a3eb7d2aab2e5299f723b3c0592180250f2de4edd136792d0a1e9ae42bfae874c04f8d22b7722c603145d08d99fd3a84c1436a1aab7a3e9f783b6886eecd09c06a712607dae5727d85f8f6569f8a3ca2b800820f50d3a12ee90f815075e4dd58af14111cb99d94633faa7a050dea58ea333b95cf72ccc192fd4260836b4f33d22ac5d52492c5b4a37e8bb7a808e348ddaa0881d3af5cb4cf24eb7e6ed478370f5c150280fbb3a5c70e63feae791be1bb5bc705e5bb8437b55ee8ba0acf1098f33ac392ea36c0c69f3dc0fc1de79bc243dcb5943fac0f0639252fb66003c413a03bf024eac657b738d33ce79ebf795407f106149d2e51e8d25f25374adb92f40c58fcad96f6c5f99a51f81e979784a9bdbef3ba7745219589fa1334f13e51c93174735f43848f1b0a7095958f98a4d58a49442633a50930c669adf5b0be08cdc30a9a0d480d6872f42145dfc2fa408dc2d17580d051751b3ba0c0ebc9fb5c24473ccffca65aca779a532aaf83352e8bfcc84d502003a2e7841d16a1d7ddb2a3905d57f8b30ff2b17183077436ddceffaf71df575c31417db2ccddd9a49be8dc8175cf8ff2e207d6890c353255de07e4a1dcad12cedcdd224809c54d45a3eee0a5145f2fce6661adb36d8d37cb7baf243f87ee45af44dc01c65801c25f8f69e99c110d8f9ea5f927abb12068167d7e988588f8cf5b96d7ef9c2da4189e21668197bd56635acf4cbefb61d5afa9fa39dbc3c625f9602f0f1c08f11d6286fcd5cf3d6e3f3b5b0a46de1fdc8194e2fa06027149b70ad335d25e59c62d2dca28f38a659bc41dd80bb065c7347f38ce95851127123135d75fd3068e51b8e341234f8c533e00c2e7675c00c30a841cf074a74cf3ebfe08eeffdf340529d2655a17646ad416d760741ca71cc16404e6ca759af6935f33408fee5725343d648bc87138a4d9872e16b020b1898dc448edd28a1b63748d6a9710e602a0a7237f6da5fd7537290905d8ca919b7b4058665c9d60c33dd9f9708551b31eb0ff8717d77c11251f193c87f938d58ca7266da527fcdd182bd7e12361c8e32d3b89bdd2feafe3ef8f81f75e243d17f6701f8fb944f244d9c6b01ffeb4fcc5dc8921126a7e0ada96f9950e17c9a02e282a6d59409340784d4d1f33cbb7c088c83583c09f97eab708fa380d6ab8e03ec6faac6d9807adae52a429263c3279d40a6c329936daff33cef684177e62c6f159c6a6f26549ca246a54994d1c3463093f76eb6775f9f13b514368b274fd840b6617da7a66f6736b80c628d16c83457ecad01682b28a89f0e35b460ad58100837fc89464cbd7213b11b6da5816a1c0b11bd1cce162ef42b3be3e841a45f74231272e4e41a41ca6f3efd0c85e71b1d3f700a94e71e58d6ff0e656aa305faa94d92152c1a61ca494af0cd569c769cacf4ca4bfff03fd464c331518fe949d64d94ec79a24b91604d818420aaeb5b42e4762920b2268d0e2cc56260aa78deea11b5779af1bd2e2c397c11b169dc01d4b3f41037013c08320db62cb5137a3743a32cdcd6606ef1a4dbc6cc793f7e0cde32e4dc77bc2409b3e593634b91441c58188ea9c0a556eadf5adee657d96b5d1a772f0602e81c4e9376abc2a21c8efaebfe0644b2520b58567714163c9b997be3f29c3d823a16bf39783b844a0076361525be3b6683496ba05a3e17f8b75abd3032092276e4eb759b42ddd5a45bb89c8dba2a0dab4303f556a02546092f023958c16df169ae1d91b723843ca4834ec57557fdea996a00741ee52204c4539c5f32a38077b1fa1c2b3efc27ac4e4fcf7684c4939e43b8a7c3f2368161e8a222b1d662d93b28c796a2e08fe53b8cd2846d294f8181e7d79752c9d73718f7e45f623fa1f8bcff5d9fadbb51794fee892fd76dbb0e56acd499affa60f4af9fc461920a806e1e47ec74b713c191c8c13bd47b6e77405c31f740cf8b3418e24ee1d1f95452db2a75469524ac76fd42fd89cc452058e3429d5910b1cc4172a8b7a95e08390d8e6db9f5c5d4a149bdb4bfd1cc0f1624bf8d16221c09744ca40e7d046e2e4b23b0148b1aa69e08075e0a65b6d29e40c8bdcfc534f2b08df7836b9fb7d1a9b83b9d28d571b7ba4b83fe3578ec6a206458cb7838e37f47d49f30066c2151bc8e3c0aad9b60300acf734b5436974d9a6287910f374a2ed5d1a409bd742f1f225362173817046f63e3af3a5775400fa5def1226411ad0398912dc56166645f33680a53eebaf35100b8bafac5c6113a0b98928a65dd840cdc55d4bd5197755ad468bd06b7792627d15ff5b1c268214c4fd6afb202153f7f2def352834aeb97c626a5429e77ec4289c75abba66e8c7c1c115b00bd0d57e333bfef624aa184e33773e0bfca73c89f211eef20268881da168ddb57e1f6e723116ad115de284498d348200ae999004bbbe54f7cbd87ae4509da1197db6860a00f0d7110b4991b3fc832f5a2762034a262f2872f863b6308a9615ed1819cdcda4c2aa52b2b55907941f7677d90288a43f2b9382e0cfd490432f562e60c164bdf01753981702ad250121f33e1c67a565faed300e1a2721db520fe3dc4ca31b6eac7c339680d4aa518adacdeffcb5e8bcb6d66850b52e9c41c91681383658a149b286bf41e17a5227e9339f6341b8cab09a9fe7904e4516977899d3f2fa277e624b67fd2e71d5ae50f744876eec08a58b45853bffbe63a5c3856cb5be8275d8e5d9ea8cca8eae2a771e425770e6e0921e1ef56cb57c76ed63b79d6ada2b98173983ce64efc9d60191c0d7376ad9c39b9c71adf26857e6be2af24719bc92fc9de1cc913df3c6369276cba8d65e2acec7c0b0f92bbd9b91b5eefbe5292f6ef09b0b2dec895f45f6c352624bfa557afef2bef8f57fbd42c35242aacbe0cd001e87eed36ed570b630edca071d5bce7b79853365159e97fd37ace4812db5e88f2228157c1c2686b9c1107139219ce5e3b6cbb1c34ff4dac2b2a3e60a4abefcb6095ee818fc0d5a88546803cf80653f0e20ff233bd16912a097fe6f23ecccf9eef3d61b4f4aff039a171a50c268de7555fe262f629577cd243f53d195260fe2fe994581634ee6388c680c3fc4d4cf4854ab17668647d85440f8c70f293531021d04883aa07d0c87baeba77f90d661b1dacc20c20403c3179a4ef3cf7e77eb1c2f157986fb1d956b5a96b831cf123f35b921ce0dcede50fac9b36df8ba3d080e95b27689897763e7347c3fc59a7c8fe552aa1680e11e7f0832be06ac18f90c2fdf7eec2c3ba47a2f68d5e530c7692277dd6869d58eb0945166d17da16ae781e3a30cc0c0af5c61de1481a39e87f28a9d354f592af89bb65ed8b4423ac70300da73fbbc00c836cd91a38c664ee467ffea65fd6970bf2f8406853d7110feb9742c949f6300c403bc393295ded0d0e8ff06c17df9f4495fb8404c5a05dbdd4e90a70d9714a340f1ab29602d5041843065642eb09629f5a74f16edb60cd156fc65199a6852d2881a08b955bba0c0f5e24bc56097dafeb68c82e2802d85cff904f2495a985c120b3d6a17edfab8907a6b6b83112337812330169a7375b3732cea95e36acae4661c211175b9c962d04381727841a684b3ed81ebbac771868f6bbf0ffaec42d7643e2fe67617115055e384ea20c038a60e45e4832f84fe6e8672881778ca587da4a5646fd099586ab5432612df9356b5a0e095cbe345a11d056ccb731834b18751916a78a854f864ec0f9b6921dbd9ff37aa7637bc7ab6f1befc37f42f2a8c878f0db1080382c8a7dd53cb2d7c80ea5d2f11a8de05f4fdd1fa60900cb90ae4a98a245c5fe95a1f44303dfa59f763b5ef1c3fdabf9e240e2a535fe60f896630d3703f9bcbecb9324f4e34d8fc388f637b65e37a569076d4211f7d594470f5f46a61c7e1b28d8b4a58996b30eb818bc97f4ed6409bf08b8e1ef20cc7bfcc430af20817838152c51e6692850dae3009724b48cf872e735fb934a39cd122f745c8f85997868676616fb63a4f52588425e1f2dbb4919a68f0aef2ba680a3013aee0dcb8bdb7fd7ad962c9c2a74ac9ff22c2702467dcba4f58e842754f587d373b821ca9ad56ef3347557ac6e0d8d83a0ae7165630635362afbce1363e490a9359566642f5a9ea65acfd1f95b0d4faa35d327faaaf15b3c8d1967cda4a9afd597567a1c4f505524ceaef77145fa613df147dd13d477c35e1626f35081c15e39903da4156650e317cf199cb4edd17a1989ccee89358eb8661d76a6041aab27a820f62422db318ef28f70af801ab4a5bcf7874cea00ac4d7e69bc33387e13703bcc71551446e75d545a414ff463d4b721113437e50835e74d7d87a1e1aa59d4460fb55753fa955a6292b77e7872f2b5eba756d7c0dced2b4b1b972481e90f574e7ab002b1f4d86111a1b2c0d6cff50ab04992bc248163da57f39a87ebafc78e42429a60af210bcf16a60f55a03600928246268779b69a10bf3ebe7de70ded44e231ba68f501c8dcb4abbdb31326fa73dbd60469eb001fc946fff18d32247fe3450bb3f20c5ce4a715bcad7fd55e51af8eeeb3f27b3b930a10c2df5d0409f018945da3f2e6090beaa0c598159fbe80fe66c7750012304650007ddd3fb221610dde7dbe702b5919d5676a8fae676acabcc4bbf770940fb741559bf815b03c6bd304fee6cb5d88e7cfa2777c06970c5b154c4f0ce25c89247f5a29bdad46c9dab84d3a96946fe8d8d033a9b17effdac38dc08725342505ace2b84e64b616cf5f40c2f5acd754fe76d37f06875b247f083e06907dd1711ba3bfbbc5c769ad9104968e2bb2bfb4da06d93d38340d498f92a9b04e2e9eeb31dd1af60d7571528ce85dd75adfae7c6b0e1a76acece8910772e351b374a6f0ef1c15d49717bfe71232fe87e32fb34742264a039ffe4606cb1ca9bc63a073e064c7b83406e0781fd63bc2924f3cec09dbbcce91117b731f07934ffd80018ec14c1e0ebe6c1c68579325e5eea13c8c6b64a371a3aedf131e2f090f1af15abba933799c71ed9c17a3fd78ffa6855ff8011db2b16cd9f1328a6818128c67982f9741f6deb9bc7f313b15fe65a6ae0b15136486f117ccee54b5b020505e31406d160e507e28f4513ccc4043553dee150f9095e89c3b6c74110eef09ee2e12ba194a5ed326e3867ac79562b2807372bc6546e6e050d12244bc8435aa2363b6f49e7883e7ca66e0a6ba8705b8ec7072fbce24987b53a1f25dd046f53f6be77a0fd177c78873cc67035dbce7bea194c6452a186f70426f9b8986d1eb575056bd67b83d83f6b94cd2a1b70c6946183adb9cb288664a7005e4e68e556027c59febc3effe67f9b0b2ede817f431d1da641cfcee9eb7b7de8731c9624c8cea7771595d4212ab35219b0512fc0d065e84fa47fa79fad609881ebfc80e6ee16726cbe3aa45aa51454e0b236297b7a80b8d38b9dd2bc053c8c7c0f0bae2fc2141c3eb272f1d6bb43185e045b5b326a2f2b8e06e88f3485d0cd35cc128b4c90994426c4658fb43ae6f77ddc12f679f6d40221024aed17d7e056cf4ceaab34f247fd2e69a8fcf126a4dfcf2053f5007ace9014e7ec4173448f9a93f8c0efdf5bf1b23a7790663c0f4845fc23f955310e0d0e2ae79194eac7392e498a959a80b744acce0aadc879cc0d34f12bbae0112ffbf9a0a81c5ad6b837f4face40edae13ac71affbe6be80cbedffa63098d034907a30dac26105e92548b04ceba6aa68888e9b9081c9fd1615ee4dee8567d6e7270d4899be3587a0ffe5fb145c2c411aac4ab67ac2a1cdaeb25e0343aa93d67d4bd0d93b9916b5c653a51c4658f6fce1885d6143991e571abc9c2616f60f07ef0bc812598c5826c17acae350461a8b6695cf140e15693c58626a1aa41cd7df5a754e3f95db2e71b0c462fe226b503d2e2f67023ca694189d426b8226e3a8c50a7292e824964f41d0f9416cbff0a5cc5b045b5d7bcc607c96ae752aa67513df75f6a331b98b72c404dc1adcc09e1770a4c2e682bc963b0873c27a381245835a5865668eadf1acf7af05a9109d997aaef1ce78a0ca614f5367ddc794375f1f554d2cfeba89a5106e7f33179d9818e2d3ea4c0dfc97088dc9113c370c8c455fbecd8edd063b570f455366de3976d22402d3c486fce19422bed8880464a17737da956a701abe3682c900728d7a37a4acfe45e232300c600dfcdb4c01805abdb837fbc66115a9efb49d53895e7d1227b32aa4cd1ed6d93a7537f3fa254b5d69754ad2ea2b34e9ea354317a880281d87e08236170e50f410b3b62ab3712b6d4af052ee2d8f82931fbde5da240d841b61ff522050c0a4a74180c2c119ee5c9f87cfdd76f6c90020170d9924485c9c0c2be958c3eab08cfee2f76925b2fb921d602aa431630e2f04e23f583547604b391e5f9af47b138ab70547410dfab6f3292ae70d81892898789457eddd6e6b61fe5bbeca0b01b68e815b820f30a9439d81921202dd37f2ab76a8df517ab6933becfcfaf2730612dd52a614055437938d1d8265d4df0e174122a35d005b137e9765b1a481c3c8f7ee05bb9ab810e2a998c5ff5141c7d217d90611a17d7c45f219c9c68ca505755590895b8444455f58b6191a7c88511de721957a40044c957ba06e2d7ef4985818fa8fd0e6b4e63e844c39f0a78995870fafa9526b8ea3135af08b151e5a71f0e6430b5a7c854d832c52b344b96f89ee11cea1bbc1b02e584773bd2904dbaa4ab9f2bd0a14a873256e121f61651a5b281bb768d6c33dd46e09c7181807d7731e3fb7f11401d2c0b3ff3d2b606f420ff90934e3297f31590aa0c0933da2990109c494f932c2a4a29147f2311512bcfca3ec2680153dfdd108f9366b9aca01e2a824ce622297459c5457b481f6db45628faf3cb0f92abe761ccd7926bb0e84f493610aaccf8d2ffe92366f0fca04875ce2df5568612dbda9dfe83fbf492b0d85013193844eb3663393527affca2d2d2fd50913a1bc3a93d5f3fb8a83eab34445621e97bed6dbdcae8338c658ab55270385cb5bd1cab8e9190673d9b7102dd4150c535060b75ad2f8d131e70660b51b2cb1a19bcfaaac6677a0d34749135717677ef580cad3ec74e14269b4520f95a525f8ae00387460d58e4c7e6e3754f59bd50eb74a2def137ffa0045f64bf6ae338a8d430b52eb226749a1d00a913dc018e87e1040a065649c296db29649aee7dc94287434ad9ceb65064a5634f98823f90c3c2dded66885133a8af236f46ead4b70294434d60697bfe7e793b5c7caf9f61b8d71c3105b95110961140327a0199ce4e2b520a5e2d94b678413ba7dc6a4c31f82070a137a4e0af9536d09a3a6c1e6a2cbc0c4a7a5e446d82254d82af582dc8a92c1109f5e63b74102e1f1d28179ce017df564b00ae2e8e83968b0f429f702a03a0be507f06f344f715d2bef3a356f370a82593587ee86e24a0391654b31eb5b151a3fcbe30f3b57b06a5f5a1f3e68d71a89ce99a192832577429465b1dc3e62b77876423423bb83a1f7dd7ceebae50e46b93ec66371cde445b01033e1d02692a9d85652e0706bf0b217679a91ff96aa2689053f59a7a7ce1b4d834762fbb935b35d8cab5a9fa758edc4d343f3cc07e912afafc626ddf653da8eebdff6ff85b04f95227faab38b999cfb7fe87ceee37c960e2dcc2c2d18ecce82701e60b4c78bc1771728a308b90a2b8197f29cdd93ed22d0a70628b898ee7be0f6975856e72d432f38acde184b12074ff7fca57dea1c1e236794a2dea83f7d7744cb898a148f42829e1e7584558a33ac03be8623eb88b6078bcd8b636b1d52f05f7102a8fbb5e5ff282c979deb228ec0a3023d18c70179c8d868c7bebbb69ecc0dccdb5cb2dafbc84561585d13076665faf55134725672f001320d1e14a3e197e097cedc539754ffa889cfa7fd8d0cbf1ba799c1082c72861a2078d21116d833a066c6bb0c511ed1642d338fc3c54988cb6bc4bf60de316e75ef9c1fe96116ccd7d36d09c0858d6032b3ea94adc9e4cf2ecd3310c89af888e83d3a92c6be8fe4bb7060aef8023f1e4ed329878fa5ddb8c48c7d3b2b648192f6d8474a4962b968b5d20a2a7c1bf0f4f413ed5ef46bf8f68f92eba75bc3a50c33e136a1cb3e5abb8386693f76eb99f1bc7e7833883c7d446a5afa826910c709030dad19f06576dffe6b210614344e9b336d356fa209fbbc107db5b9d0631a54700c36379a1b82d8dff30891d2b27e4d5cf9e5142aac8324d7c946252e68dc1cb2829fd1f599d1e8df027032e046c6c0b4885593853241bd6aeb14e5f7fb36d1579c977a9192ccee3295b238959fc41d718be47574641e72c79ff0fe5a59de64dc9eb355d2088f18d0cd9087deb60b545a98b2d0e4a1a51457665208dd38c67e0a1376cfd1aaf5643c1deda5290df6e5fe254a01690c7f51b2c1ab88537c7e25d66ed22d253499caf77bb7cad802358f5fc2a9a6ce6dc19fc2d4ee0e1d331c2ac99ca93b2995865720c9bdd22e313ff951368385a64a32f9ddbe74ea365612954e729fcc91f80138748d704cc7369d7db3aa1f8d281f47fa7c06ac8c7a4ec5fe2fa0fcd2bfc8ce5a5cd61ccda045c77202d9648996be3c81e5ebc7405bf37090a41a7f0c6e92c08665ee02f9835b04ccfeb51533652b72110c9483a67efb47645e390ec7e38972db16a210eb375d5912455a1ea7d329e8dc9b7675d070a95dea507fd76453cfaa1505ae87329a0627ce3f042ee4a8ea870e17adee0784bcbdae446cc386097e9f45ef8b16925f135f9f60e45939633ae649e6d051c25dc10dff764da5d31ec02b2d4624923531039d8de15fc2105f7654878f5cdac0062a95629a8f3e9266ee83160e1a040e50c0a670c67278ff58da9f46b22040b995b5577204f3fbff3162ab524707d98241632bee22149a8f66d0756ae674d8759a268d3e21457a20d166fc5a417a15ea61bfdc3bad07a50ac669ac5aa2bd681d933a72078a669c1b3c70b296085ad28acc3a75269a1bd41fa62f2b59f79c6e1148e30ef7300378ee7ef35720e2fc68e1a802390ef33f6055189d0dfdbf233a075e1dd11b83af3c7cd3c00ed9da4e86bccd47e34403da631c5395a58c1f39077a5caf030045ae618949362fc49d3c8b550f123ef801669f30d758bd771d0472e6cb69e43442975939dac6504752020d5783ae90afebc07f2100ab9a77c77cb80306070e3ca7134357aaabed49ac390ecb8642200b3a7544c0a95eb4a1ef9cea9821fd0e15eebbe5fd307ced8c39dedf6ff2a993cfa63b664f203c1c7ec9de8c0d2db3332fcd9e3c32704e3bf5e1f029c1769b7c573651e2511c8c5231dd91edd32252728b398718c34f10945dc57aa8a05d2a09ee7297d97824d6deffd1f13a55bb7a435f4b7928e2d298f9b295f4c8d6ebc362c63fefa5da55e0182dcaa19022f7b101c2ff0552ef66de9f4d0a78d047495d4bb7a63e45d4e21d709eea08ddaa67872c3b93d778fa22c530849a49baa825b0c5a07cc12fdd24e700abddedb42005885875c6f721f9ae7b339902e35ca5af5bc093cb6f899a55edb9d134ddfcaae3f59ab4133e20275a3443f929f5dfb19449f104be028460fabd90cc393fff6405ce1d9ac3018ee87ad10c2cd9a45774bfaab6ea6b09d7397e44b13ff1e73576c03fd8bed1df849c9e527e634c6a9b68b6d3b61122576fcee163288e0593f9081217cd586dc67462cc29b10d007913ca0fb8d579093ad44c0025f725cb54522d5b06372e8c57dbf7f81d235e48ccc75201fc82edf9980a4423633345fe25f00e76e5d5fd6ab7786dfce110ec71f22cd844eabbaaf9ed558a1424fa6dce6a78c65cec64dc92f21981cfeb78fd85477bac9f1b41e24000394f6949ad3837dc805ae6bdd2e3e3d999ed5bbfb0e2bb3845dab3358a3f67db360ea68e1c6528589b3040ee45576b24574f732fcc52747405d03fd4d1d97fcebdfa9405ac087f37ba40bca5de4ed02977c3f2662650df39ea44164b22b29680a8dbaf80f2a643ce41cb1393af39894cd5c705d8ea58be4e409a13ffe28c2c784ed321a759800d36152a8debd92deeaf459cc14caf99e0a24715ecf95f8647a832e2e565b96e8fdaea4232e890110b9f9da0426aa14c5f4d42c49bdce7d9812fb090560a1dc96d29fd943c39fe0deed73c48e70687ac2e68e07e17c7361c25738f711db9b7632197691031114bda18254f8aa8860fec8a92576aded9fa15c2be998b2a780bde5740d2f0d934693d5ce041be824c0b6b9441e068c6861fe37776512090ba13dc884873c32452f1caccdc67c6ba14ce17056203d857d8df2a04ff7317fdbcc4ebb4b50afb971a70c2be233658639ebb6e45c24fbd8b01fb2c54420b41617c56f0b7fa03878537333c77b3d4c6311ccd6d672c4eed3a28dfe54924461bab1e460153ee5b6cf1030b15026f6f05a4509dbc88de51343dc6baeeda2cde48ef5bfa2c262f86e27a2c617071348fd1a5b9a1c0dcdade8e517ac72437352fb140ab11a0ef9b097aae879ed25ea45d5b9ecd9fd86849e638456fac1e8aa372f4fb944835812e726e4cb7eda78fbd4fabf2d98c95fbeaeeba5fcb57bc18731e1e572a2bbe3d0e5a0359fc221a25a88a433895b45aaf2f1bfd6ffe28658290c8c934b3e0273ef5f48969afabb07b9ef651dd0ba98694790bb8c35f1cc78e3811a36d2f5e94a9cd9568fc20b9a74a1e76dae12c7a678c4696d11bd1762e412cf9842d76ade037714ff451dec3c3e87156c9cfe10d04a9cbfeee9732ad7d801839d1c5bcd4d96d79c6fd70df1acd1be36eca2b1d100582b3a6332fdcb909c7d069b367e23238745a77ce8b9dea716cdb917003e6ba253bcba3dfb8f34b60758601b11e4d4d2365c644a3509cb4285be25c750d62ea134e9bc1bc77de26f2202f83f13d62f286de9f9ea48beeba4a166eded9d2e6bf054079f73c5603580656e9d3d79b5d147015b88ac7e8ccf0af686883a9b913e9afa56dcbc88ca943a3d7fe280db29e06368123f04725abe913b475897040b0ac9315a3e9398e19fc39c2d486fc19a6d94fa5fa4bb8b4ca7f0bb5c72d1f6c9528ede0c844ee543722e961707772e69b6482ec7342dcbf97a4be4393422755c61c1e287053642131cb74eebc45605bfe775c5b5b8c7ac29aae7e0f925b188ae7dbe23247877060d09082d681be7cdc68ec59a6092b8ab1fc20e7c4dde08e1a28754aa0303451056faaa5668d78c276a67eead5c45a6f683146e6735e9aa89e80885d9dd79a069ae3345616dfb7a4f53b3fdf03f88900a780aa2da26c11c8b9c9b838fe4f3693b8a795729edcbf400bfbff2be05b27f04bf2b47160c00297705e8e73384918e1376c6c8b251a84ec3d25c2a297868bd53ce829f9adc1a59ebe37cd95347ef7ce614a9429fd9ec452085cf32a73675adcfdf6ccd81fe6b90403d50d558d0e347e9d99c85c964b65498c0fab0e7e794ac34930e7357bd625b668034fc99320cd3616dc80ae31ee18a326cca5fe637a73c6e64eef4b5f895752e07b63c94bc590a24d4b0f98f3c277aff99fea420d24689ea1db284f7c904df8a7dddf219bf04c5438b47ee2eade9091252bf65bf08565bbc798288b8d8e3fe29601c47f415edfc447b148ec6c7ba94c68c28a209b42bbf2c97315aae1206dc2dbd2f1d8d1cec768b2cf30514b9ece0f41f92bf381a52e038aadf2cff65c0ebcf362bcb752bdf9da4c24479e5fa2b9a277aa3660eb981b69e6562c2d884f16b8e69154a1da1f633b8bcaeed8507322d501b5724ac7a63e94c95a5df254e56b45e30efd008c584355b49c11e02cdf687fd65c68ce063c1da434785a094b0404d3db1cd1e63ada6cadb73cf028d015a3e900d633379f35e466c342010159f239a0afe50b0191b4757d92e896e49eed28106d215c730c54f65d2511c980158979a01d11ffceda38c41e0854b8aa326ab93e797f082fd6313e5abbb6be7e8fa70def5473fccea31591dc21b02ef9969109398bd46b4d22e4a8e50a10341c2319602079193d95b17a44860e479998975a98cede40d9a1c0a59e6ee417457b2c71cfb46313d817783fe8b8a98ead19efa3eec4e07dcbbd351c771712a60a542d4522530bc151955816f802632f1e4614279d022db8063abf27b664273951292ac692be42a76db008bece761efa209428d060b56a497f80036cd09c59941dd0a2db2d08cf9633448a4729cebdb9cacc40a0d62fc9ff93ecc029f4ec18aac2a531551fd4e1cb03bb60d7ee134ba0554bf1c847788396550aac714baf2d7b0534e875ddf1bc13000d43598d4175788340b72873262b8d494fe4037219ac914e2075a816b50091fbabcc33fb938248861ba287965ea4fb10a1cd579f94059f1f3af7f70fc677c8d439d977457499b959ee772741bea9deae3b82328f1b18b98525fb5babe3a38125788bf4414abdb0720d707df3c6a44b9be65e24fa1c67ed42071153d829d89bf4aba07c834f952a1d72ee0a5a9fcd2419d945cf13dc9018eaa19c86de3d9fd34205c422dc6f1c51b78992cf2c404906ad4ef79aee8baff96ea9ff53d4c364b548b989369ad1301fddf831d84d59b1cc417fb087d38ae0de9877716b27b6d2d330788f5a8f1cfff9018be8787142d140d8235a52e1089f3ee8cc39cbce308a40fad64b07897dfb7fcd7d6af5f69b39f578a17aeefd489c771de885d8a7960e7625f7169c65e5de2bb19e6ede7df27db40057bc2af382a73a900cf113f2cfd861fb9d0f48865e0dc6a40e0fd22af617d4f76d71b7121b1d6c7e636d2985d5292b6a252342f1df24a66f9cd934902275e5aa60d66f2c4dc1e20fe06326ae5838f22695d61d8f2f4a5db807e6804da5258f99f23bef7aceb1dc579937b7710b3d3e9e39c6358cdb144fbb00b8caf9d1013334a403ddd9c49f783a7b9ca9081510aa0b669942238df970aa52c818eca61770b4a7d2830822e411317bd83c05c9b3b072851f0bcc694e242e53e65b7022d36488bf2fb398f4eb5c1d6149bd4df2b95003dfb61e52bfd1be72615b009d22de09b1ea5885737c4416e4f79c485fe754f4ab908d992235fc37469e2e60c553dc345bc2aa679079143b277ea9b9ef11226b1805367aacfa5f4dbfb264388eba3ebbed74586b6f322cc6d4a8ec7b8ce650e1b12ed78a1c8aa354ff71f4df539063b28c1ff3d8305cdea709d2e9f362d7da35a42a6d3e8872f432cfa0665ef7e668d94ac69aa7df77f90158f9900a2d9e0ecb41d76e1c8ba5e0105165103bb20224c07e31050329f54a9ea2c10256410a5276dc6abbf6c7dc9c069e31b3ecf3d50bd969e81de942df18111a026b50f6d5f68e0d4cddcbe2837c5b169fede9c899de4b3e28c635259e3b675a04f176599bdc01461af1494e73834ece5c93d53d4c9811e6ed6fdcd527b6a3541b46e74d22f424f09231c0aaab48c84d3752a17897d8978552cbc7376b7f757af32653cbda31f7c71ddd7196ee2c307b7d4a319b36c7db5083b052603af409ea3019fe6cd645765401dc95db81dd417284d9a31b4fd532fb718c1ad1d09caf55df590fc25e972abbd44bf64f3e1ece17d2c7ac92d4e7dec44f381d97318cc03da40b3b6eb43e867e05f62671e7ff09b8b60d127951787b354e8d24862bad40eacc00c72e8a91b0df2be99b8703d9eaed7182fc2ff98bf1eb7478d7f03b910f9ab270d3754286d293e2fe553c3c75417ab5266f99e634eb16f89991ff538a705d497dc94cb6154671e115c91bb8d26b5a48ced8e871062d2f4574719ef494bf3cbd71aa3c477ee66c0e64d5ad8c1d525c6e3ec16da0a264c8d5af1a65a551dbfb8883af551109a6b09b4179739b307f8c0d37c6ba074e8dc0a6740e51479e1bbec00859b77b19fd5d74e53224ac8e9d0ea594e98f889bd59f76b3fa23063cf21bd99dc9a48a3fa03a7286960548e201639ad03cfdcaf99f849dd050d223371eb99f2d1d1886115e22f87a072086bc0afa8b3222bdbbf66217ebfea446b01465d9dd7a615541e10e78827880ea6c084487e3cfce66af43fda80c9397087942ffcad107f89aa7093ea6c6d5bac95f26a9843cb14877bf9905388b0fa48b897ccae307d8d9d6be2c3bcbda9d2f02cb3ac3cdf2aa540695e2da63cd7e7d999cf83f033418b551e485ee00ca503cdd215c1737f3c797883d1b48c30d74aea759c25c7da39c26c1e67438c4bfa2c657711baaf867bcd5eecfcfa9e13418828b44676930d03623a483fc17b4b585ffe50cac215a2b770f11723120dce247c3e1d2758f8a3de1ac802926cecc116cfaaba2eb5590fcd0b6f255be4fae175577698fd7aebdd69ff39fb632a29f32edcd641cc3f7fa8b45013fd43b7abccbd3444bfb17821ab0408c96a485582dd8721d90d0d4dac1f6a87ac3dc052b6e0e32fa7b2513825ed1c3afc386523d534421b8a2ec9f57207f2979008901ea2a7104a970a99fe81580aac7f56dca3d8763cf9e1d4c1ec7b337bcd9e3592687c20e6de2ad3820b74bb091f33a3e61da48f21bd252e097df2b57a11351adea8851fc3d6fe9671e5c38e817455144f8f95e571a4b8f1f56a3526361ea411943e6314149e2146d113c1baca7c2765632c49453d9c6d8d8f94d7d2ea39d19ce1140905140449a931ee2b2722f2f86abef258e4109010b7a2ba7d25a0f0f7ba6813f1d7d1a3b19913d5ff4468448b09322fee3a0150cb40023aaac1f69ee7fc80d28c5fc95dc1f15594cc156bb9e6820283f6ec4cb92e9aa99734d4dfb33c32c4f3067b9b1c2fb72ba6e8bc8ea161cf040187f46155453bc8faf8d1556f360ff5ad9b2730e1532fc1592733daf56c0637de7e6fa70c887d9b65e616715178ce99d6f726052395b038f1a4b11d351a8c934c611a38cf3a4aa952a5ff292b6b812fd81ecbf9d7c9927bf4cdf537d70a976f1166e28a659898ef6b667e7aa1a9d1a88474e34c18908acca16f1a51469b775d7d9bcf3f6c493f2105107d0ff6413cca2db6c3bde46568f0f8d8576ca55f1308314ff6159c895c5da2e33568f85925c2f7be7f74d7a0fd67b696422cdefc44675f4f07d2c4db8e91ed837f9023bd2aeff8cef2e395e2407dd8307cb93c019b4f37f33b7563b20eb616b22168ee0bcff5cc517c66ab8d65b79bd25b72c6a245bafffb83c2bb4015cfdd0e6e4bf12d66c723272a92e0a400e7858acaa3bd79ecdde4bf503394e3dd932be5cbc89478b9f2172ab2e453c3833c3a419364b0d91a2d71f9ee6cbec02c3cba889a8dc076d4bfb3f9d592e58d816b9fdf3cf2fba3b71624b8c75b442a8dfff6d4aff8eabc1d8ef8222b05f37836a89d9474f72310b0398a57620efd3d99c6c82687668096e1e4e6f1e64fe80a7ef9faab61df423da8fb6b12f453540186830f176a4b6605f22469530277d7a9f2054161254121056a280b50c2dc33238d35808ab44963ee340d2963c2e7891b2d718a810060f277db6c6c3f55cb0681495055507c3d2dd4eed335cd763ff2508b74d67b95b429b1a1c35cb2b00908f49db187a3db3aecc2423c23cf54c0cbb6841f96199c907d3fa887bc09f6ecdab3f7eca66a928fe9877f8ac5c5a5618b9b44e21764ce42ffc303bb594543c2a5fb1428a4ca43514428f99f3aa9eb573336bc92933f8e13345b4c4a8fd3a7c6e5cfedb8390ae7633a53bf2c2a5deb2bda53b2a4ece583d7486fd82c26cebb09500688a67f5cd025f91c069a999a06f23e7c975f845197a50a9876fdc78c1d7b3b10d66ee5596d206f315493bb5fb79885b9301ce977c412272cd434d47933e8856adcc591c1f1c1586ca201a2852881f5d0feeb4dbea5af28eccf56ee006389c5287f57063047a14c5ff7671a1d8622fcb38a2d09f912cbe13962b6e020b58427350012e3fbd1c06fbf0854765fdd26517e1afc2662c94a9b53cbe8b0a05f30cdd7bffbb3b39e4f4e8082f8f825bed06cbdbcac947d012aeb04c97cb8a7a1a313e5e06f1110627a4209a1880d54d32befadfbfd3faf0dd561bec474da01a88d51e813056ac029f7a4ec5a803903a7881ec1afcb0af6c4cd06d0a3bfed276922eb92ef2d1ae7b284070661e982e43d2956102d4ef89cd74a15d00481e4abb1e8016debc566c40ecd566758480c8ec95360b156bf3769e56fee7752c18b438ec43d883e2432201dc5b0aabe069ce6e09b7148b4c4094612c8c7e4629a02b9a578044c907ccee0ced4d39e7936f40f9c7bd7d3643a13297066ac57314686f3bce8faadb720abbd90ca690c92c85f4a51db11ce55d56aba1f984fe6ea2569169c1ef6b7770a38167ab28aa86852f2de923b14dabd289b71f3d55e968bfaf8f2ebf76dc24b67fb7ada589b31faf90693d8130df7255b836368c706ac8f62e4ffa6e98313cd9b54889e0558f304e00496204ffa45329c5fb51dd0ac323e464c680d0445bc28438a75bf73e5d438b314bc8b16e3297b9fb5fc28e7c59608a7343d32919b6d8f2cf9299013b8cf57c4f5a73c9e5e4c8b3a4a9099f8f94d807f8632920cf480007ba97c6e43ac96f54037fb0e3a3f6b8ea10c004548fcf632cbc5b7be511c617d93b341a60d3b65655744d64fb7342653e8cd68358205537a67a3f2b1e2ed27481f1583224a599da86b11f0c95f81f3c32fc1e5c05e87cfef6ba0dd66f8f18e4bd3d325b3a7962b2effdf2cd1b89df4ef2fa467abf4dc943332919ab6b8fe7745d6f26b0cef22e7e12dffc7259e19e803f667e56a408c6d955e6a33eff2919dcc6640d206d806b85fbabc0296438ee8837f52b6a15ab7327b5b7ea4839e5e89af6251806892e3b9b8124ffbfa72e89a28e9eb076a12e28cf86303ba03abd3c52c04bf5061e89d6271457ee6168f07ae69443fddc79047f22de0377a01e1f4d2d2eee95e304086c61d7f48f540d6ed5a1c9f83c68993e0aeb4c9b96360b9a37fe0e95c30f2a22473df84aedef93c4977f64fe6407a41050b6a8a0e6401cdfcb44957df2bdc7903968cee307430cdd93c78f57cc7918c7385864f52b2817a6a93036b83a7f807d8603c40c5a97ee8a1ba3f718492598d1f5ca6a54211233ef43eccb80b5ea8fc9697dd6ad4e2c1d733e3690bc54bd25546f790db4957eb316ecbb280175619244973ea5a6ae3431df4070b95ce1ae44953a7bf214e1c8a733efdefc83875a25aa50fe2be7f0115faa049d57308f3217d5dd3cb2d29577eade8f2b3afe062aba0429e4f1ff9d4d20efca0ddca3d67f48b8e143ad0d24595ea5ba5e3d075a632d45d97ab9c5f7eeb30ce13a2c26767b9749323c552078f228e77142fb87de61554877fdd21a3fb130e53f6dedd329db23597e5b30e3bb140161ab59a3b1e9c2faf9179c094cb3a46eaa89b1cc0b5bd1729a069d042ef6af0c2f787b38df80d82c256967a4116f716dfdee250f20ddcb469aed161dd1813daf4bdd18a9232a182e67b1138d33c450f6d47bff9c39760997d7a4a2def170325b3c5e706627f8184280baab426512e311a0d1a49a46c0145bd14595ac93bc480d9cdeb698b8484c2e3e650da6c3700dda10a2d2a282bc18bf2c9b4966af3faa93224797d70b28fd08bf13534b69d482bc009e89dc95688e3bef0ac228a47f28b81059a67293f15413199f33d99fce3c344b54</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">阅读该指南需要获得作者的许可</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>SUSTech</category>
      </categories>
      <tags>
        <tag>妮可指南</tag>
      </tags>
  </entry>
  <entry>
    <title>7.2 树德学长团培训 PartⅠ</title>
    <url>/2022/07/10/%E5%AD%A6%E9%95%BF%E5%9B%A2%E4%BC%9A%E8%AE%AE22-7-2/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重试⚠" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="8075695463b5671e24f7b1713da9bec5a33a8acec1ae06e1876a2d265abda8ba">165d50f05814027fb7fe5e4ae8a088d8cabf1ea2d88ccf0f53dc7b0b289f3333d74f2de33e539b091090e807495808ece201338b2f7b581712d926053403ef1ab31d0cc27c948f5933c813367b273e7290fb86acc1dfa1697d9fe5732ebc9cea098394032df1573965274c060f87f4c517ab84bae6a35c2a1e07929531d306c89acf91ba7a43e7682a4d582367e6b5ed70d0e136225b6a20155489b140dc5d16c591aff08204028558da0a5d09f3dc2ac843f460daa6fa5e918d446e92ddccb94805ef03c905149a9112c6750b7340087bb4b1a57f9d41bb8518d950c9204ef400bbd97338ce89f0bf8f9351a89cf9d1480b4a84b66e43bbc79b2116b84822b412cf727ba315d22319414480ef476a40cd5fa974228f4a8cd80b205f5f3fc9197b1fc5bc4eae926a10cc221820299629a3d94eb2ac405302c40cc427d5d5a1cdfa27ab7c416c7f0f16edb0f59d803903e765026be9783b62973ed3cd7679a68b5beff477b6e34a880567b0662ed127b2167848ede0da42e5fb0dd547122365db7dc2264c9dd148fdc740c0eb853651f30e56107699062e89ccba91961f1fa4e500c466c704025f5673f187c5cd80add87ae1dee9c64665048ee408d7459c6036c07f109b2afb629d419ee00ead8f79e92d11589763a1f88c3bf1fe2bbbfbbc4d422d0f7cbefd862a01e2a6b023cc29bd02a9c276c7582019bcc48f53f76e64c1544d6f14335237987ff0a77c9e972c101140f711a9ca79dfd3fb63aaef951641b202b9ec52c0d1b47c1bc2b1e47ea1f8c00cd84eb6b4784da15abaca05075af91ac830efe41a9befaee0dbf37416488ec7743df7472733aeec34e8cbb433d3b4987d7219ac4692603437d77baf8278055d8a8a64746c14851c0ba4c7118637f074f07412014834008e40c151cc7870dc53f270764ce42842a6b3b3a2846cdc1e2e24876c7c2ab4442abe337900434cd32a8da365e75318d5c7b4e70c2d0943bab34d3232f6436a497cb1fcebb858ffae7488c7c29143f1bddeb2b15bdc010dfa2a7ea7ed228fbf12f1c0e46da3d82c6d267c376f16c4a71016f1c35bd6a8d16e918ebffc01e3c6ccb1f72a087c49290086cfd3a60d906543b6a486b571418cb9aff78933ecca86face58c2865f313a368ff029e0153e60c7f379d6699aabdfa3bc96bac777b4da7b07201b72dc9f4da7660a55e0cb4a4af21e71346e1d08909cfeea07e82678d844c75c2fed37c600b246ca503a6f3d887a6edd3be33d9758b9a68b01cedee05abf7ba83b4824f9805c772ff08067a6ecde6805cd5947f1d756277e51f3c0914425865d601d5b244cb198dc6bbf24e7664d853d2d4899a190247615c41c33d7e5db594293e57b49a17679da0035510996521a3e082946fd228e789396a58a2715ccfc908cf74f19b59c077793d492349a5c4dc8451b25b30335b7b3989784159a42c831d8cdd0f9976c24e716bf09a4bfc1a16d4d40ce2ca436955388620522436f2a5e662fe22097c6f1d3c3f215801800017216e9e2caf24aabd54d241249d561352a67d41c7d300f3fbb2b67f27e57546adbaf1c9df94252b7de2a56eb3e4072391370a2d37ba69fcc24855ded73e54fed0a3244771702d1f2361140dac033b34c0d04501fa68bcb81395fabbe1240a3583ad6bda50b9df69f234cd0531e102ef3d96044d38ae843f3d0d1ddea6d3956445769ba5e4bb52486755ebd86dbb22bb1502cf5d9f92e6422836d9609732a45553c7b5f2725d2db5bdd88e43b7bf4aa27694da7f1d1b1e9028576aa50a58c8fd515cc44197ef79f52996998205564215942d89f6fbd51b8a0bb88c7c4c90e18cbbaf418d0ee9f3cd94a84f8b8c883a956a4d08441fc7c8a65714a060a05045e0f4270a2f49c04a210e0b51766c50616fe04ce9a8a3b590e2315b001f2d313609af02195ada486ad5b3eb8656fa1751105634358fb2735663a7362df11e6198b5df7e07317741c3a4af32d502a1e5e25d8894d88952ca156c41a5183bbcdde71de58ce7c28bca9cbe390eebc64384a20df86a67d9e1df111e844d03363b9617abeee4730eb452488a2fadb1dd42050265e0349b05fdb4a3c2850d3074ce0efa73128073c0c76429317f7278aac2d75cac05b3778a93680f3c6ab7eb324235345b4d09b98ba53f2982ccac2d784c25a3b63d6a5d81c904478dfb154628244f3c40e5f55a6df52588b4df76bbe6b1cf28c6fd4a9309bafb7fe10c1c1197dc62543dd2588d75af78339751be083eda79b08ee058dacc2ddb810fc553b032d4329b20c7aaf9aa17ba954ebdfdbe108fdc9fc96fed57c4c2186a310736dbe7bbb1a35ec9b489c24a3474817e4f431e0714f20a116e6b72f57e4e477766dd7fc381ee985744d5ed64f050018429ab74eced64eb1418f4895551d0baf4a5a7fd91f5f0cfe3ea5d5fd70a8e73d5d2b0c112cf9c112c2beb2846276bb4d3b9e1a75bb68217d79856d0aee33fb1fe327e5b700268a8c9b7713562229e95fdd40829e5cb31c2d109b96958f3432fe0ae6e305f5af47ff80b94d06dabcf35c93f228b65bf06a9e1b396fc68d3f450d856dbf2eb2fabfedfd47099c335d6a25ba2a76373b22119f4d127ce5cfa54c73b750d2674940aadb2d2cbfa75291ed69a3989f36cd4cddadaf648d49b4cce8b90b217a12b512835642dbf7ec1529b743a89c91100a1c94a5c2bbb301779ac97cfe48feed3af06e96314eecec24cd503efcdd61b0b1f60ac1028e410b27cb538be36e816088f8edf1cf93ed9bb922c6c04bd8a819960515bb166acca3816597525b5e2ad3bae3745dfc79494f8dab50c1e0dda1cc3c6a3a5fc7de2d74504687b8328e7dec5f76160f69d7361ade3fe077f1bf02041df325b92ba523d44d548e30cd1af1ce3f5208367585ae6e73530aa1467eab95aea32f594bbd7b91e189dd2205786869a784117114cca8c307150de87a3126f7b22087c756adc32ee71391b10395af92cd0ef1e0c514f8b5e03832c9835eecea50f2aeee9daf2c81cdf67fd92deee515d5256458a9f75d8b57a8173da40146dd6f48e865ec75bc6513d24a14659eb033e28cb5f3e293aa2f1ac7f318b617b809b242e58fa62e30f40fc3cc20a2fc2afe6c8e67367699446c84965edc838ce36e13521341a1f5e3f7977449a572c7ec4dbe9277cc627bb4e5925e1884d9c766f0e25c61c994cbe3e8a5efeaf84e93fb275b3bcbd2386c20e582e319c7a3c2e951944a5f8669f15ce909aa72d5bc5d8d186b2bd3eac02701bd785bc2c376c31eba31b709f2697a45cc6d968806ffed902758b940e93158803996dfd2baef4531d5d4984b00942b8661cb7c7f1eacb58d1a00a701055a460be26fd60c7d674e1ba9df42da5e1956a861037a7b1ff2763ac633153a26a07c53b84184c927cf234de1ee2aea84c40110e79168395035a7ab49fc553f7633266500d4a6d6010bf87311fb0dd06bb904855f5fee1f5f8ba757c117dc7767d69c69c001cfd91c29373293de94f0c41d4ea2934de183fb66087d1e2ea34067ced43ca6e746384a4c1ee696213bd8dfffe1c1dc8f43611647841f6330bb6b2c240e42b7082cfc69848f81c45edc661f846a727dd48d0663998fcfc2d17db9e4142fe20cdf5494970868332eebeb3a87f95c70d6f8598f5b14ff8f8d156855ce2ca00f97ab469dee4bc5e8b24a5b64a063bc052041759d550f0844bb03100cf626e38e16d45cb85a81470440f6041420865547ee417740b80e24c48cc11d2c873337ee70da8b7c6ff6c793da39937f4d8889520b0c97b7c190b571c5a8a09fbf5bfb2ba9ee4e77c7d6ab232504ea81261f3f48c44422b626ff0ec947fe28507649e9ad26e5c776f528a30b4fd6c190fe07491481ff29cec055714b713e9215b0895ddae4bed1556d3717e4cdc01538661f4a56a738defefd9f637afdf761ad63ee0fe87b8150ee55a2f77d7c99900fb93f3d4179751a5d60ecf1a743e54e0f29f00d0ed1adf24ac41689f7ccb741ff95bfc23d2cedac3e15f3bc125e43363e742aa9d313aa1d040bae34764a9361283c00bd1651d9189dd993849f0e9cb8c47d77958d5198cfa760d50ab09d0b34cd961bceba20453fbd15cfc35811c72ea7f8b210cb558377091d9830df21da78f94abe08cc2e1946e0f4bb7267f64ea15d5f49f3b82cfa3c1465a6b19b126fa5c22d4e362fa766bdea132b44f95db4b7aa7b5b1b1f0753aded6b858a7b5ed7709aba2575623da42b686f5f00bf1b1da5b2545b8956d2116f14c123ed1f4aa3292f85d8d1d41bf26bf2256a46782bf922800602c11c3b91fc31c61699c5c1b31c839ce3117944709201f0493d1dd1fbb8602d2004e7f61ca6db08c800172430b7dfacbc636766ba1bfaf89badff38520d1949d4b56b209ad87408ee4bc52108f41a2d2c3fda20e85b3f109fdd24e1aeff1b72eb5655d4d7206d4a3360bc6e9a401c5cebd272296f42632daf1d0392b589901e8013219443eae1cc1078043538e6f936c1be7030fa96f688dad114368251b501d30eba22f54852a3f227380e4d60da51337dd8a56388bd3b4b50352ae3fabbfe9467469def175cfe5cf2d5c59d6eb03e509d987c0269b518d89d95eecaa3070e1c000b3ae39b4f0b12bd8113c85707f28320a99cba0cba5f1fdce987e233d59bcc012e03426861e8721ba40950743a61f5af82de7cacc61a0e96e8789077923180de4fca996383b37a10b6a2977694f11a22d469b445c45fafe95f415db4d7622d04115d6fc6d0c0949e5e6247705da0a098396803f2772f7740b02355bfb670c359c9761b1fe01b214b9c2c80e5dc886957825808f36d2025ce0b9515502785a9b93c41fb745f40a050b2e7575fa7cefaf23e73f21527e76e9562ff91a577100e29896ccc2895446a868dfcc1d065a1bf4cf4bca931b2aa76c1337e37f110ff9a9d6f602ede2fce63b3952319f088db167871d9a09a48b61b1928cd38d7a240b78dbfb652eba346e5baa38bc90a1b64390f038ca110af</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Password required to read this article</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>学长团</category>
      </categories>
      <tags>
        <tag>学长团</tag>
      </tags>
  </entry>
  <entry>
    <title>学长团记录</title>
    <url>/2022/11/06/%E5%AD%A6%E9%95%BF%E5%9B%A2%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重试⚠" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="869800b3866acc2e562159214bf9d907aab07773e6d2a3cd3a1b474a41a13a39">165d50f05814027fb7fe5e4ae8a088d8cabf1ea2d88ccf0f53dc7b0b289f33337c5ff3e33f9fda8760e22a713cf49319fc9c4c144fa48547ff2f9dd0c87dd1b018989d16b92927a9da5da069bb9b19066136f1c903c117bd87fff074977cdfeeab5f82b40dbc8a335f54f3a123bf10b48437a568060138adb2324e2dfb4e6d8826e28306ca13500f9fbc83b5e66d61e65fd902cb1fe5cb4005dd959c1a4a14b692a6bf5334799429c5d8b03c87ba4dc71f921da323df04baee495cebd6445589eb6a5e3eed1f7667d52ea2999215954978af5669ee626dd8d4c825589e5065fc6702af85d7ddb6962770d91e0ffb85461e131def205630ee635c32a4969d80dc97c932bd9cd712fe040b9ecae5d2c5d8e8f31774a35be86a44da86eb7ad8b0de956d20e860124b02551164766a05c96bf764913c12f6b2cc0940be5b167ee5b1beb2f36a28cc36fcee2bb6bb8f499879920cd8af0c6a8794f0fd99dadf8a79aeda05888ff3b36ef8baa31574181c1bdff3423ac6702ab88253cf6390f50ecd73b67c5d52c9186445bf829c7a34eda9afee385ff658cbdfc19d735149064ff28ef123865abd69f62beece3eb4d1b5ebb1cd3d047b930ec2d4b80baadb23881f016bcbd5986ee5e3fdc4e2eb7b1b512f3101ec8708495591b970211dbe65b49d274563020809dafb0d2d0b3b0b7e42e66c02cde9a35f99cf6233251dc8f5979d5a78df72af84b250ce2744b5ec6723cf9efeafbd61670d0c72d4c1bf72b54a883a322d7475ac29a507a650ebd34fdc9658da613f38083f53e3c90fe48ddb79c48bb159885f54a0b7374c8855f4b8cf71f5906fcf42a65478079dcab862e9b4ed0dfd4cc48e1fd469714f4fb6e8efe6407e9fbea654a2a6147e873da991d5cd141a8c2026796a3a109ba11766832d252c0934889c02b78f3229c2953b7ec95a866d90743b63b44992e9a44e1e6fe23d295607d3926d0b9b4740862b2b6946e13b79</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">Password required to read this article</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>学长团</category>
      </categories>
      <tags>
        <tag>学长团</tag>
      </tags>
  </entry>
  <entry>
    <title>SUSTech 培养方案指南 2023 by 咕桃</title>
    <url>/2023/07/28/2023%E5%9F%B9%E5%85%BB%E6%96%B9%E6%A1%88%E8%A7%A3%E8%AF%BB%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<h1 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h1><p><strong>教工部官方页面：</strong><a href="https://tao.sustech.edu.cn/page/id-184.html"><strong>南方科技大学2023级本科人才培养方案</strong></a></p>
<blockquote>
<p><strong>本博客适用于南方科技大学2023级新生</strong></p>
<p>南科大会在每个年级入学前发布对应年级的培养方案，内容包含：</p>
<ul>
<li>通识课程培养方案</li>
<li>各系下设专业情况</li>
<li>所有专业在1+3/2+2进系时对于先修课程的要求</li>
<li>所有专业对于不同课程的推荐修读学期</li>
<li>所有专业在毕业时对于修读课程的要求</li>
</ul>
<p>本文意在简单讲解培养方案该怎么读，培养方案上有哪些东西没写出来，以及如何结合培养方案来进行大一的选课。如果本文能对你有所帮助，在下当不胜荣幸。</p>
<p>——咕桃</p>
</blockquote>
<h1 id="Part-Ⅰ-通识培养方案"><a href="#Part-Ⅰ-通识培养方案" class="headerlink" title="Part Ⅰ. 通识培养方案"></a>Part Ⅰ. 通识培养方案</h1><p>这是对于所有专业都适用的通识课要求，其中需要重点看(各专业培养方案不会重点提)的主要是下面几个部分</p>
<h2 id="思想政治教育模块"><a href="#思想政治教育模块" class="headerlink" title="思想政治教育模块"></a>思想政治教育模块</h2><p>一共10门课17学分，要求全部修读，其中有5门理论课程(姑且这么叫吧)和5门实践课。</p>
<p>理论课程是需要在选课系统里进行积分选课的，需要平时每周去上课。</p>
<p>实践课程则是每个学期末书院会安排实践课论文的提交，以及青马班/寒假母校行/重走长征路这一类的假期实践活动可以算入实践课时长，认证时长后才能提交论文，这个等大一上期末书院会具体讲解。</p>
<p><del>妮可在选上双一流之后，思政课形势稳中向好，期末考查形式可能会逐渐向严发展，建议尽早完成修读</del></p>
<h2 id="基础素质培养模块"><a href="#基础素质培养模块" class="headerlink" title="基础素质培养模块"></a>基础素质培养模块</h2><h3 id="体育类"><a href="#体育类" class="headerlink" title="体育类"></a>体育类</h3><p>一共6门课4学分，需要在选课系统上选择(种类非常丰富建议多选几种体验)，最后两门体育课是没有学分的。</p>
<p>不一定要每学期都选，但毕业需要读完六门体育课，建议跟大多数人一起大一到大三六学期学完。</p>
<h3 id="军训类"><a href="#军训类" class="headerlink" title="军训类"></a>军训类</h3><p>军训通过则大一上期末会自动加进你的已修课程，无需选课。</p>
<p>军训期间正常表现，不要太皮就能过，以及会有一次开卷军事理论考试，正常做态度不太离谱都能过。军训需要重训的是极个别同学。</p>
<h3 id="综合素质类"><a href="#综合素质类" class="headerlink" title="综合素质类"></a>综合素质类</h3><p>不需要在教务系统选课，默认大一完成。</p>
<p>成长通识会在大一学年的周四下午，由书院安排进行成长通识课程，大概是关于大学中如何更好地发展进行的系列教学。</p>
<p>劳动教育也是在大一的周四下午由书院安排，包括但不限于做手工、法制教育等形式的劳动和劳动科普。</p>
<p>这两门课都需要写一篇论文反馈成果，不过都比较轻松。</p>
<h3 id="美育类"><a href="#美育类" class="headerlink" title="美育类"></a>美育类</h3><p>也叫艺术类，需要在选课系统选课，培养方案上列出的课程数量较少，具体可以在选课系统的<strong>开课院系</strong>筛选<strong>艺术中心</strong>即可，选一门两学分的就可以了。</p>
<h2 id="基础能力培养模块"><a href="#基础能力培养模块" class="headerlink" title="基础能力培养模块"></a>基础能力培养模块</h2><h3 id="计算机类"><a href="#计算机类" class="headerlink" title="计算机类"></a>计算机类</h3><p>目前选课系统暂未显示有开设计算机导论课程，因此入学是否有计算机分级考试<u>尚不明确</u>，2022年的计算机分级考试已取消。</p>
<p>计算机课程有五门，其中CS109 计算机程序设计基础为较高阶课程，教学语言为Java，难度较CS110 Java 程序设计基础略高一些。CS110~CS113四门课程设定难度相近，且不同专业会要求不同的进系先修计算机课程，请具体查看各个专业的进系先修要求。</p>
<p>在部分专业培养方案中，修读CS109可以代替CS110~CS113，但<strong>部分专业不接受代替方案</strong>，请仔细阅读培养方案的进系先修要求！</p>
<h3 id="写作类"><a href="#写作类" class="headerlink" title="写作类"></a>写作类</h3><p>需要选课系统自选，只有写作与交流一门pf课，<strong><em><u>非常非常非常</u></em></strong>建议大一修读，会教你如何调整论文格式、如何参考文献、如何作报告、如何用好电子图书馆…务必认真学！不要折磨你的队友，让他收你的论文烂摊子熬夜到三点（</p>
<p>虽然只是pf课，但绝对是非常实用的一门课程，你学的越早，折磨队友折磨的越少。</p>
<h3 id="外语类"><a href="#外语类" class="headerlink" title="外语类"></a>外语类</h3><p>需要选课系统自选。可以确定今年仍然会进行英语分级考试，根据考试结果将同学分为三类以安排最合适的课程。</p>
<ul>
<li><p>A类(不到10%)：</p>
<p>仅需修读SUSTech English Ⅲ 和 English for Academic Purposes(EAP) 和至少一门CLE选修课</p>
</li>
<li><p>B类(大部分同学)：</p>
<p>需修读SUSTech English Ⅱ，SUSTech English Ⅲ 和 EAP 和至少一门CLE选修课</p>
</li>
<li><p>C类：</p>
<p>需修读SUSTech English Ⅰ，SUSTech English Ⅱ，SUSTech English Ⅲ 和 EAP</p>
</li>
</ul>
<p>语言中心(CLE)课程有必修有选修，入学分级考试决定你必修上什么，以及需不需要上选修。</p>
<p>SUSTech English一周两节四学分，EAP一周一节两学分，多学和少学各有优势：</p>
<p>多学两门SUSTech English，给分都很漂亮，可以用来提绩点，不用上选修</p>
<p>少学两门SUSTech English，可以腾出更多的时间和学分选其他课，并且提前结束语言课修读</p>
<h2 id="人文社科基础模块"><a href="#人文社科基础模块" class="headerlink" title="人文社科基础模块"></a>人文社科基础模块</h2><p>毕业要求8学分，国学类2学分，人文2学分，社科2学分，剩余2学分在人文/社科中任选，大一没时间/没学分可以考虑大三大四。</p>
<h2 id="自然科学基础模块"><a href="#自然科学基础模块" class="headerlink" title="自然科学基础模块"></a>自然科学基础模块</h2><p>这是毕业要求，在大四前修读完就行，但是其实很多课都是进系的先修，只有个别不要求，大一没时间可以大三大四补上。</p>
<p>以下每一行选一个就可以了(括号内从易到难)：</p>
<p>(高等微积分，高等数学，数学分析)</p>
<p>(线性代数，高等代数)</p>
<p>(大学物理，普通物理学)</p>
<p>基础物理实验</p>
<p>(大学化学，化学原理)</p>
<p>(生命科学概论，地球科学概论，生物学原理)</p>
<blockquote>
<p>地概与生概难度不太好比较，此处顺序不代表前者比后者难</p>
</blockquote>
<h2 id="通专衔接模块"><a href="#通专衔接模块" class="headerlink" title="通专衔接模块"></a>通专衔接模块</h2><p>通识-专业衔接模块，随便选两学分自己感兴趣的就行。</p>
<h2 id="自然科学基础模块及基础能力培养模块计算机类课程介绍"><a href="#自然科学基础模块及基础能力培养模块计算机类课程介绍" class="headerlink" title="自然科学基础模块及基础能力培养模块计算机类课程介绍"></a>自然科学基础模块及基础能力培养模块计算机类课程介绍</h2><p>这个部分详细介绍了各个通识课程适合的对象，以及教学的大致内容，大家可以参考专业培养方案以及自己的兴趣方向辅助你进行选择。</p>
<h1 id="Part-Ⅱ-各系下设专业情况"><a href="#Part-Ⅱ-各系下设专业情况" class="headerlink" title="Part Ⅱ. 各系下设专业情况"></a>Part Ⅱ. 各系下设专业情况</h1><p>这个在通识培养方案里有，可以看看有没有自己感兴趣的专业awa</p>
<p><img src="https://s2.loli.net/2023/07/28/XUMKN6OwQCgsYt1.png" alt="image.png"></p>
<h1 id="Part-Ⅲ-进系先修要求解读"><a href="#Part-Ⅲ-进系先修要求解读" class="headerlink" title="Part Ⅲ. 进系先修要求解读"></a>Part Ⅲ. 进系先修要求解读</h1><p>每个专业培养方案前面都会简单把通识培养方案重复一遍，这里就跳过了，让我们从专业先修开始吧。</p>
<h2 id="进系模式"><a href="#进系模式" class="headerlink" title="进系模式"></a>进系模式</h2><p>南方科技大学专业选择主要有两个模式：1+3进系和2+2进系，两种选择没有本质差别，也有各自的优点。</p>
<h3 id="1-3进系"><a href="#1-3进系" class="headerlink" title="1+3进系"></a>1+3进系</h3><p>这种模式其实是后来添加的，目前暂时是主流。</p>
<ul>
<li>提前进系，选导师比较自由</li>
<li>更早进行专业课学习（不过其实没进专业也能选专业课</li>
</ul>
<h3 id="2-2进系"><a href="#2-2进系" class="headerlink" title="2+2进系"></a>2+2进系</h3><ul>
<li>有更多的时间了解各个专业（多一年了解不同专业的吐槽</li>
<li>先修课压力较小(平均每学期所需的先修课更少)，可以专心卷绩点</li>
<li><del>可以以通识通修专业的身份卡一些课程的bug降低难度</del></li>
</ul>
<h2 id="先修要求"><a href="#先修要求" class="headerlink" title="先修要求"></a>先修要求</h2><h3 id="简单看一眼"><a href="#简单看一眼" class="headerlink" title="简单看一眼"></a>简单看一眼</h3><p>因为作者是计算机科学与工程系-计算机科学与技术专业本科生，因此这里以2023级计算机科学与技术专业培养方案为例解读。</p>
<p><img src="https://s2.loli.net/2022/08/11/Tmjx3VKvHRLrpIn.png" alt="__U6R__@__S0B5~YPDJQMMS.png" style="zoom:50%;" /></p>
<p>这张表其实说的很清楚了，我就不再重复讲一遍，讲点培养方案没说的。</p>
<h3 id="如果你爱某个专业爱得深沉"><a href="#如果你爱某个专业爱得深沉" class="headerlink" title="如果你爱某个专业爱得深沉"></a>如果你爱某个专业爱得深沉</h3><p>别急，大一一年多跟对应专业的教授聊一聊，一定确认自己喜欢这个专业，想做相关的课题再留下来。</p>
<p>如果你已经确定，那么就一定确认进系前按照培养方案修读完了<strong>所有的先修课</strong>，大部分专业<strong>不允许</strong>不满足进系先修的同学进专业，差一门也不行。</p>
<p>一定想清楚自己进系前怎么排课，比如进系需要电路基础，就必须要第一学期学电路基础的先修：线性代数，第二学期再选电路基础</p>
<p>以及，专业先修不要求你读的课，就没有太大必要大一去选，计系这种需要笔试+面试才能进的系是会看你的先修课成绩的，所以能少选就少选(但是要比15学分高，不要为了专精几门课收到学业警示啊你个混蛋)。</p>
<h3 id="如果你还不清楚自己喜欢什么"><a href="#如果你还不清楚自己喜欢什么" class="headerlink" title="如果你还不清楚自己喜欢什么"></a>如果你还不清楚自己喜欢什么</h3><p>高数大物线代，这几乎是每个专业都会要求的课程，所以可以无脑选。</p>
<p>你可以同时<strong>参考多个专业的培养方案</strong>来安排自己的课程，例如选择<strong>计算机程序设计基础</strong>这种很多专业都有要求的课程。作者在大一结束时，由于在计系要求外多修了很多课，其实满足了十多个专业的先修要求（</p>
<p>不过需要注意的是，人类是有极限的，不要为了给自己更多的选择就每学期顶满25学分，那样的课程压力很少有人能承受住。</p>
<p>南科大为你提供了一年或两年的时间来慢慢了解自己喜欢的专业，在这段时间里可以主动联系实验室、联系教授，多聊聊你也许会发现你真正喜欢的兴趣。</p>
<h2 id="进系考查方式"><a href="#进系考查方式" class="headerlink" title="进系考查方式"></a>进系考查方式</h2><p>现在对于23级的进系考查各种解读都有，先来看看培养方案原文：</p>
<blockquote>
<ol>
<li>如本院系所有专业第一学年结束时进专业的学生总人数大于等于该院系教研系列教师（PI）总人数*2*60%，则该院系所有专业可以针对第二学年结束时申请进专业的学生执行所设置的进专业课程要求； </li>
<li>如本院系所有专业第一学年结束时进专业的学生总人数小于该院系教研系列教师（PI）总人数*2*60%，则该院系所有专业针对第二学年结束时申请进专业的学生不执行所设置的进专业课程要求； </li>
<li>如第一学年结束时申请进专业的学生人数超过该院系教研系列教师（PI）总人数的 4 倍，则该院系可以按照事先确定的规则选拔学生。确定规则时原则上考察学生的专业适应性，不以学分绩为依据（具体规则由院系制定并提前公布）。</li>
<li>针对第二学年结束时进专业的学生不执行设置要求的院系，如果第二学年结束时申请进专业的学生人数和第一学年结束时已经进专业的学生人数累计超过该院系教研系列教师（PI）总人数的 4 倍，则该院系可以按照事先确定的规则在申请进专业的学生中进行选拔学生。确定规则时原则上考察学生的专业适应性，不以学分绩为依据（具体规则由院系制定并提前公布）。</li>
</ol>
</blockquote>
<p>$\frac{申请人数}{PI人数}$这个比值是对1+3和2+2两种进系方式能否进行考察的判定标准，以下分几种情况：</p>
<ol>
<li><p>第一年&lt;1.2，第二年累计≤4</p>
<p>PI人数最充裕的情况，第二年申请进系可以不满足先修课要求。</p>
</li>
<li><p>第一年<1.2，第二年累计>4</p>
<p>1+3默默无闻，2+2人数激增，则院系可以对2+2进行选拔(但也没说要满足先修)。</p>
<p>适用于大家第一年全部潜水，都想不读进系先修第二年进系的情况(^^</p>
<p>不过如果不是上百人合谋的话，大约是不可能发生的吧(笑)</p>
</li>
<li><p>第一年≥1.2</p>
<p>2+2需要满足先修课，最正常的情况。</p>
<p>如果第二年累计&gt;4院系还是可以设置选拔的。</p>
</li>
<li><p>第一年&gt;4</p>
<p>某些大系特供的条例，1+3人数爆满是允许院系设置选拔的。</p>
<p>像这种申请人数多到不行的院系果然设置一点门槛才是对的吧喂= =</p>
</li>
</ol>
<h1 id="Part-IV-专业课安排"><a href="#Part-IV-专业课安排" class="headerlink" title="Part IV. 专业课安排"></a>Part IV. 专业课安排</h1><h2 id="专业课程教学安排一览表"><a href="#专业课程教学安排一览表" class="headerlink" title="专业课程教学安排一览表"></a>专业课程教学安排一览表</h2><p>这部分是培养方案最不讲谜语的部分，说的都很清楚，这里主要提几个问题，大家可以带着问题，结合选课系统看培养方案</p>
<ol>
<li>这门课是必修的吗？在什么时候一定要上？</li>
<li>这门课是全英文吗？有哪些老师教？</li>
<li>这门课多少学分？有没有实验课？作业和project占多少总评？</li>
<li>这门课建议什么时间上？春秋都开吗？有没有先修？先修排哪个学期？</li>
</ol>
<p>对着培养方案上的课，一口气把上面的问题全回答出来，你差不多就做好了选专业课的准备了。</p>
<p>一点补充：</p>
<p><strong>专业基础课</strong>、<strong>专业核心课</strong>和<strong>集中实践课程</strong>在毕业时都需要全部修读，合称为<strong>专业必修课</strong>；</p>
<p><strong>专业选修课</strong>则是给定毕业所需学分要求(有时候也有几门课中选几门修读的要求)，学生可以在列表中根据自己的兴趣、研究方向自行进行选择修读的课程。</p>
<h2 id="课程结构图"><a href="#课程结构图" class="headerlink" title="课程结构图"></a>课程结构图</h2><p>其实想了解一个专业上什么课，最简单的办法是翻到最后看课程结构图，简单明了，排课的时候这张图也很管用。</p>
<h1 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h1><p>介绍到这里你应该就能完全读懂培养方案了。</p>
<p>毕竟培养方案厚是厚，但是每个专业就那么几页，重复的部分挺多的，去年我无聊的时候把整本书翻了一遍（</p>
<p>比较建议选课前多翻翻，考虑一下自己的选课和意向专业之间的对应关系，规划能力还是很重要的。</p>
]]></content>
      <categories>
        <category>SUSTech</category>
      </categories>
      <tags>
        <tag>妮可指南</tag>
      </tags>
  </entry>
  <entry>
    <title>CS329 Machine Learning Notes</title>
    <url>/2023/09/12/CS329_Notes/</url>
    <content><![CDATA[<h2 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h2><ol>
<li>Introduction</li>
<li>Preliminary</li>
<li>Distributions</li>
<li>Linear Models for Regression</li>
<li>Linear Models for Classification</li>
</ol>
<h2 id="Chapter-1-Introduction"><a href="#Chapter-1-Introduction" class="headerlink" title="Chapter 1 - Introduction"></a>Chapter 1 - Introduction</h2><h3 id="Concepts"><a href="#Concepts" class="headerlink" title="Concepts"></a>Concepts</h3><ul>
<li><strong>Machine Learning</strong>—minimization of some loss function for generalizing data sets with models.</li>
<li><strong>Datasets</strong>—annotated, indexed, organized</li>
<li><strong>Models</strong>—tree, distance, probabilistic, graph, bio-inspired</li>
<li><strong>Optimization</strong>—algorithms can minimize the loss</li>
</ul>
<h3 id="Linear-Optimization-Model"><a href="#Linear-Optimization-Model" class="headerlink" title="Linear Optimization Model"></a>Linear Optimization Model</h3><script type="math/tex; mode=display">
Y=AX+W,\quad W\sim \mathbf N(0,R)\\
L(x)=\frac 1 2 (Y-AX)^\text TR^{-1}(Y-AX)\\</script><p>Find $X^\star$ to minimize the loss function:</p>
<script type="math/tex; mode=display">
\begin{align*}
&X^\star=\min\limits_X(Y-AX)^\text TR^{-1}(Y-AX)\\
&\text {Let } \frac{\partial}{\partial X^\text T}(Y-AX)^\text TR^{-1}(Y-AX)=0\\
&\Rightarrow X^\star = (A^\text T R^{-1}A)A^{\text T}R^{-1}Y
\end{align*}</script><h3 id="Euclidean-Distance-Optimization"><a href="#Euclidean-Distance-Optimization" class="headerlink" title="Euclidean Distance Optimization"></a>Euclidean Distance Optimization</h3><p>Point $x_0$, model $\mathbf b^\text Tx=d$.</p>
<script type="math/tex; mode=display">
x^\star = \min\limits_{x}(x-x_0)^\text T(x-x_0), \text{s.t.}\ \mathbf{b}^\text Tx-d=0</script><p>We have:</p>
<script type="math/tex; mode=display">
\begin{align*}
d&=\mathbf b^\text T(x_0-\lambda \mathbf b)\\
\lambda &= \frac{\mathbf b^\text Tx_0-d}{\mathbf b^\text T\mathbf b}
\end{align*}</script><p>Lagrange optimization:</p>
<script type="math/tex; mode=display">
\begin{align*}
L(x,\lambda)&=\frac 1 2 (x-x_0)^\text T(x-x_0)+\lambda(\mathbf b^\text Tx-d)\\
\frac{\partial L}{\partial x^\text T}&=x^\star-x_0+\lambda \mathbf b=0\\
x^\star&=x_0-\frac{(\mathbf b^\text Tx_0-d)\mathbf b}{\mathbf b^\text T\mathbf b}
\end{align*}</script><h3 id="Convex-Optimization"><a href="#Convex-Optimization" class="headerlink" title="Convex Optimization"></a>Convex Optimization</h3><h4 id="Unconstrained-optimization"><a href="#Unconstrained-optimization" class="headerlink" title="Unconstrained optimization"></a>Unconstrained optimization</h4><h5 id="Gradient-descent"><a href="#Gradient-descent" class="headerlink" title="Gradient descent"></a>Gradient descent</h5><script type="math/tex; mode=display">
f(x_{t+1})=f(x_t)-\eta\nabla f(x_t)^\text T(x-x_t)</script><h5 id="Gauss-Newton’s-Method"><a href="#Gauss-Newton’s-Method" class="headerlink" title="Gauss-Newton’s Method"></a>Gauss-Newton’s Method</h5><p>Use a second-order approximation to function:</p>
<script type="math/tex; mode=display">
f(x+\Delta x)\approx f(x)+\nabla f(x)^\text T\Delta x+\frac 1 2 \Delta x^\text T\nabla^2f(x)\Delta x</script><p>Choose $\Delta x$ to minimize above:</p>
<script type="math/tex; mode=display">
\Delta x=-[\nabla^2f(x)]^{-1}\nabla f(x)</script><p>Descent direction:</p>
<script type="math/tex; mode=display">
\nabla f(x)^\text T\Delta x= -\nabla f(x)^\text T[\nabla^2f(x)]^{-1}\nabla f(x)<0</script><h5 id="Batch-Gradient-Descent"><a href="#Batch-Gradient-Descent" class="headerlink" title="Batch Gradient Descent"></a>Batch Gradient Descent</h5><p>Minimize empirical loss, assuming it’s convex and unconstrained.</p>
<ul>
<li>Gradient descent on the empirical loss</li>
<li>Gradient is the average of the gradient for all samples</li>
<li>Very slow when $n$ is very large</li>
</ul>
<script type="math/tex; mode=display">
w^{k+1}\leftarrow w^k-\eta_t(\frac1 n \sum\limits_{i=1}^n\frac{\partial L(w,x_i,y_i)}{\partial w})</script><h5 id="Stochastic-Gradient-Descent"><a href="#Stochastic-Gradient-Descent" class="headerlink" title="Stochastic Gradient Descent"></a>Stochastic Gradient Descent</h5><p>Compute gradient from just one or a few samples</p>
<script type="math/tex; mode=display">
w^{k+1}\leftarrow w^k-\eta_t \frac{\partial L(w,x_i,y_i)}{\partial w}</script><h4 id="Constrained-optimization"><a href="#Constrained-optimization" class="headerlink" title="Constrained optimization"></a>Constrained optimization</h4><ul>
<li>Lagrange methods</li>
<li>Bayesian methods</li>
</ul>
<h3 id="Non-convex-Optimization"><a href="#Non-convex-Optimization" class="headerlink" title="Non-convex Optimization"></a>Non-convex Optimization</h3><ul>
<li>Heuristic algorithms</li>
<li>Random search</li>
</ul>
<h3 id="Algorithms"><a href="#Algorithms" class="headerlink" title="Algorithms"></a>Algorithms</h3><ul>
<li>Bayes</li>
<li>KNN</li>
<li>K-means</li>
<li>Decision Tree</li>
<li>SVM</li>
<li>Boosting</li>
<li>Ensemble Learning</li>
<li>Linear Statistical Learning</li>
<li>Nonlinear Statistical Learning</li>
<li>Deep Neural Networks</li>
<li>Generative Adversarial Networks</li>
<li>Bayesian Networks</li>
<li>Reinforcement Learning</li>
<li>Federated Learning</li>
</ul>
<h2 id="Chapter-2-Preliminary"><a href="#Chapter-2-Preliminary" class="headerlink" title="Chapter 2 - Preliminary"></a>Chapter 2 - Preliminary</h2><h3 id="Curve-Fitting-and-Regularization"><a href="#Curve-Fitting-and-Regularization" class="headerlink" title="Curve Fitting and Regularization"></a>Curve Fitting and Regularization</h3><p><strong>Polynomial Curve Fitting</strong></p>
<script type="math/tex; mode=display">
y(x,\mathbf{w})=w_{0}+w_{1}x+w_{2}x+...+w_Mx^M=\sum^M_{i=0}w_ix^i</script><p><strong>Sum-of-Squares Error Function</strong></p>
<script type="math/tex; mode=display">
E(\mathbf w)=\frac 1 2 \sum\limits_{n=1}^N\{y(x_n,\mathbf w)-t_n\}^2</script><p><strong>Root-Mean-Square (RMS) Error</strong></p>
<script type="math/tex; mode=display">
E_{\text{RMS}}=\sqrt{2E(\mathbf w^\star)/N}</script><p>where $\mathbf w^\star=\mathop{\text{argmin}}\limits_{\bf w}\ E(\bf w)$.</p>
<p><strong>Regularization</strong></p>
<p>Discourage the coefficients from reaching large values.</p>
<script type="math/tex; mode=display">
\tilde E(\mathbf w)=\frac 1 2 \sum\limits_{n=1}^N\{y(x_n,\mathbf w)-t_n\}^2 + {\color{red}\frac{\lambda}2 \| \mathbf w \| ^2}</script><p>where $|{\bf w}|={\bf w}^T{\bf w}=w_0^2+w_1^2+\cdots+w_M^2$. </p>
<blockquote>
<p>Note that often the coefficient $w_0$ is omitted from the regularizer because its inclusion causes the results to depend on the choice of origin for the target variable (Hastie et al., 2001), or it may be included but with its own regularization coefficient</p>
</blockquote>
<h3 id="Probabilities-Theory"><a href="#Probabilities-Theory" class="headerlink" title="Probabilities Theory"></a>Probabilities Theory</h3><h4 id="Basic-Concepts"><a href="#Basic-Concepts" class="headerlink" title="Basic Concepts"></a>Basic Concepts</h4><ul>
<li><p>Marginal/Joint/Conditional Probability</p>
</li>
<li><p>Sum/Product Rule</p>
</li>
<li><p>Probability Densities</p>
</li>
<li><p>Bayes’ Theorem</p>
<script type="math/tex; mode=display">
p(Y\vert X)=\frac{p(X\vert Y)p(Y)}{p(X)}</script></li>
<li><p>Prior/Posterior Probability</p>
</li>
<li><p>Transformed Densities</p>
<script type="math/tex; mode=display">
\begin{align*}
p_y(y)&=p_x(x)|\frac{dx}{dy}|\\
&=p_x(g(y))|g\prime(y)|
\end{align*}</script></li>
<li><p>Expectations</p>
</li>
<li><p>Variances and Covariances</p>
</li>
</ul>
<h4 id="Gaussian-Distribution"><a href="#Gaussian-Distribution" class="headerlink" title="Gaussian Distribution"></a>Gaussian Distribution</h4><ul>
<li><p>The Gaussian Distribution</p>
<script type="math/tex; mode=display">
\mathcal N(x|\mu,\sigma^2)=\frac 1 {(2\pi\sigma^2)^{1/2}}\exp\left\{-\frac 1 {2\sigma^2}(x-\mu)^2\right\}</script></li>
<li><p>Gaussian Mean and Variance</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbb E[x]&=\int_{-\infty}^\infty \mathcal N(x\vert \mu,\sigma^2)x dx = \mu\\
\mathbb E[x^2]&=\int_{-\infty}^\infty \mathcal N(x\vert \mu,\sigma^2)x^2 dx = \mu^2 + \sigma^2\\
\text{var}[x]&=\mathbb E[x^2]-\mathbb E[x]^2 = \sigma^2
\end{align*}</script></li>
<li><p><a name="multigaussian">The Multivariate Gaussian</a></p>
<script type="math/tex; mode=display">
\mathcal N(\mathbf x|\mathbf\mu,\mathbf\Sigma)=\frac 1 {(2\pi)^{D/2}}\frac 1 {|\mathbf\Sigma|^{1/2}}\exp\left\{-\frac 1 2(\mathbf x-\mathbf\mu)^\text T\mathbf\Sigma^{-1}(\mathbf x - \mathbf \mu)\right\}</script></li>
</ul>
<h4 id="Likelihood-Function"><a href="#Likelihood-Function" class="headerlink" title="Likelihood Function"></a>Likelihood Function</h4><p>For a data set of independent observations $\mathbf x = (x_1,\cdots,x_N)^\text T$ of a Gaussian Distribution, its likelihood function is</p>
<script type="math/tex; mode=display">
p(\mathbf x \vert \mu,\sigma^2)=\prod\limits_{n=1}^N\mathcal N(x_n\vert\mu,\sigma^2)</script><p>Log Likelihood Function: </p>
<script type="math/tex; mode=display">
\ln p(\mathbf x|\mu,\sigma^2)=-\frac 1 {2\sigma^2}\sum\limits_{n=1}^N(x_n-\mu)^2 - \frac{N}2 \ln \sigma^2-\frac{N}2 \ln(2\pi)</script><p>By maximizing the log likelihood function, we have</p>
<script type="math/tex; mode=display">
\mu_{ML}=\frac 1 N \sum\limits_{n=1}^N x_n,\quad \sigma^2_{ML}=\frac 1 N  \sum\limits_{n=1}^N (x_n-\mu_{ML})^2</script><p>corresponding to the <strong>sample mean</strong> and the <strong>sample variance</strong>.</p>
<h4 id="Properties-of-mu-ML-and-sigma-2-ML"><a href="#Properties-of-mu-ML-and-sigma-2-ML" class="headerlink" title="Properties of $\mu_{ML}$ and $\sigma^2_{ML}$"></a>Properties of $\mu_{ML}$ and $\sigma^2_{ML}$</h4><p>The MLE will obtain the correct mean but will underestimate the true variance by a factor $\frac{N-1}{N}$ (bias).</p>
<script type="math/tex; mode=display">
\begin{align*}
\mathbb E[\mu_{ML}]&=\mu\\
\mathbb E[\sigma^2_{ML}]&=(\frac{N-1}N)\sigma^2\\
\widetilde \sigma^2&= (\frac N{N-1})\sigma^2_{ML}\\
&=\frac 1{N-1} \sum\limits_{n=1}^N (x_n-\mu_{ML})^2
\end{align*}</script><h4 id="Curve-fitting-re-visited"><a href="#Curve-fitting-re-visited" class="headerlink" title="Curve fitting re-visited"></a>Curve fitting re-visited</h4><p>Given $x$, the corresponding value of $t$ has a Gaussian distribution with a mean equal to the value $y(x, \mathbf w)$.</p>
<script type="math/tex; mode=display">
p(t\vert x,\mathbf w,\beta)=\mathcal N(t\vert y(x,\mathbf w),\beta^{-1})</script><p>where $\beta$ is the precision parameter corresponding to the inverse variance of the distribution: $\beta^{-1}=\sigma^2$.</p>
<p>Training data:</p>
<ul>
<li>Input values $\mathbf x=(x_1,\cdots,x_N)^\text T$</li>
<li>Target values $\mathbf t=(t_1,\cdots,t_N)^\text T$</li>
</ul>
<p><a name="likeli">Likelihood function</a>:</p>
<script type="math/tex; mode=display">
p(\mathbf t\vert \mathbf x,\mathbf w,\beta)=\prod\limits_{n=1}^N\mathcal N(t_n\vert y(x_n,\mathbf w),\beta^{-1})</script><p>Log likelihood function:</p>
<script type="math/tex; mode=display">
\ln p(\mathbf t\vert \mathbf x,\mathbf w,\beta)=-\frac\beta 2 \sum\limits_{n=1}^N\{y(x_n,\mathbf w)-t_n\}^2+\frac N 2 \ln \beta -\frac N 2 \ln(2\pi)</script><ul>
<li>The last two terms do not depend on $\bf w$, omitted.</li>
<li>Dividing a positive constant $\beta$ does not alter $\mathbf w_{ML}$, replace $\frac \beta 2$ with $\frac 1 2$.</li>
</ul>
<p>So <strong>maximizing the likelihood function</strong> is equivalent to <strong>minimizing the sum-of-squares error function</strong> $\sum\limits_{n=1}^N\{y(x_n,\mathbf w)-t_n\}^2$.</p>
<p>After obtaining $\mathbf w_{ML}$, we can further maximize the likelihood function w.r.t. $\beta$:</p>
<script type="math/tex; mode=display">
\frac 1 {\beta_{ML}}=\sum\limits_{n=1}^N\{y(x_n,\mathbf w_{ML})-t_n\}^2</script><p>Substitute $\mathbf w_{ML}$ and $\beta_{ML}$ back to get <a name="predictive_distribution"><strong>predictive distribution</strong></a>:</p>
<script type="math/tex; mode=display">
p(\mathbf t\vert \mathbf x,\mathbf w_{ML},\beta_{ML})=\prod\limits_{n=1}^N\mathcal N(t_n\vert y(x_n,\mathbf w_{ML}),\beta^{-1}_{ML})</script><h4 id="MAP-Maximum-Posteriori"><a href="#MAP-Maximum-Posteriori" class="headerlink" title="MAP: Maximum Posteriori"></a>MAP: Maximum Posteriori</h4><p><a name="prior">The prior distribution</a>:</p>
<script type="math/tex; mode=display">
p(\mathbf w\vert \alpha)=\mathcal N(\mathbf w|\mathbf 0,\alpha^{-1}\mathbf I)=(\frac\alpha{2\pi})^{(M+1)/2} \exp\{-\frac\alpha 2 \mathbf w^\text{T}\mathbf w\}</script><p>Review: <a href="#multigaussian">the Multivariate Gaussian</a>:</p>
<p>where $\alpha$ is the precision of the distribution(<em>hyperparameter</em>), and $M+1$ is the total number of elements in the vector $\bf w$ for an $M^\text{th}$ order polynomial.</p>
<p>Bayes’ Theorem: the posterior distribution for $\bf w$ is proportional to the product of the prior distribution and the likelihood function.</p>
<p><a name="posterior">The posterior distribution</a>:</p>
<script type="math/tex; mode=display">
\begin{align*}
&p(\mathbf w \vert\mathbf x,\mathbf t,\alpha,\beta)&\propto\quad&p(\mathbf t\vert \mathbf x,\mathbf w,\beta)&p(\mathbf w\vert\alpha)\\
&\text{posteriori}&\propto\quad&\text{likelihood}&\text{priori}
\end{align*}</script><p>Take the logarithm of the rhs, we already know the <a href="#likeli">likelihood function</a> and <a href="#prior">prior distribution</a> mentioned above, therefore maximizing posterior is to minimizing the following:</p>
<script type="math/tex; mode=display">
\frac\beta 2\sum\limits_{n=1}^N\{y(x_n,\mathbf w)-t_n\}^2+\frac\alpha 2 \mathbf w^\text{T}\mathbf w</script><p><strong>Maximizing the posterior distribution</strong> is equivalent to <strong>minimizing the regularized sum-of-squares error function</strong>, with regularization parameter $\lambda = \frac\alpha\beta$.</p>
<h4 id="Bayesian-Curve-Fitting"><a href="#Bayesian-Curve-Fitting" class="headerlink" title="Bayesian Curve Fitting"></a>Bayesian Curve Fitting</h4><p>Assume that the parameters $\alpha$ and $\beta$ are fixed and known in advance.</p>
<p>In Bayesian treatment, the predictive distribution can be written as:</p>
<script type="math/tex; mode=display">
p(t\vert x,\mathbf x, \mathbf t)=\int p(t\vert x,\mathbf w)p(\mathbf w\vert\mathbf x,\mathbf t)\text d\mathbf w</script><p>$p(t\vert x,\mathbf x, \mathbf t)$ is the <a href="#likeli">likelihood function</a> with omitted dependence on  $\alpha$ and $\beta$ .</p>
<p>$p(\mathbf w\vert\mathbf x,\mathbf t)$ is the <a href="#posterior">posterior distribution</a> which can be found by normalizing the rhs.</p>
<blockquote>
<p>For problems such as curve-fitting, this posterior distribution is a Gaussian and can be evaluated analytically. Similarly, the integration can also be performed analytically.</p>
</blockquote>
<p>The predictive distribution is given by a Gaussian of the form</p>
<script type="math/tex; mode=display">
p(t\vert x,\mathbf x,\mathbf t)=\mathcal N(t\vert m(x),s^2(x))</script><p>where the mean and variance are given by</p>
<script type="math/tex; mode=display">
\begin{align*}
m(x)&=\beta\phi(x)^\text T\textbf S\sum\limits_{n=1}^N \phi(x_n)t_n\\
s^2(x)&=\beta^{-1}+\phi(x)^\text T\textbf S\phi(x)
\end{align*}</script><p>Here the matrix $\textbf S$ is given by</p>
<script type="math/tex; mode=display">
\textbf S^{-1}=\alpha \textbf I + \beta\sum\limits_{n=1}^N\phi(x_n)\phi(x)^\text T</script><p>where $\textbf I$ is the unit matrix, the vector $\phi(x)$ with elements $\phi_i(x)=x^i$ for $i=0,\cdots,M$.</p>
<ul>
<li>The variance and the mean depend on $x$.</li>
<li>$\beta^{-1}$ represents the uncertainty in the predicted value of $t$, expressed in the <a href="#predictive_distribution">maximum likelihood predictive distribution</a> through $\beta^{-1}_{ML}$.</li>
<li>$\phi(x)^\text T\textbf S\phi(x)$ arises from the uncertainty in $\mathbf w$ and is a consequence of the Bayesian treatment.</li>
</ul>
<h3 id="Model-Selection"><a href="#Model-Selection" class="headerlink" title="Model Selection"></a>Model Selection</h3><p>S-fold Cross Validation</p>
<p><img src="https://s2.loli.net/2023/10/08/sa2LJItkVQEUCeS.png" alt="image.png" style="zoom: 50%;" /></p>
<p><em>leave-one-out</em>: $S=N$</p>
<h3 id="Curse-of-Dimensionality"><a href="#Curse-of-Dimensionality" class="headerlink" title="Curse of Dimensionality"></a>Curse of Dimensionality</h3><script type="math/tex; mode=display">
y(\mathbf x,\mathbf w)=w_0+\sum\limits_{i=1}^D w_ix_i+\sum\limits_{i=1}^D\sum\limits_{j=1}^Dw_{ij}x_ix_j+\sum\limits_{i=1}^D\sum\limits_{j=1}^D\sum\limits_{k=1}^Dw_{ijk}x_ix_jx_k+\cdots</script><p>For a polynomial of order $M$, the growth in the number of coefficients is $D^M$.</p>
<p>In spaces of high dimensionality, most of the volume of a sphere is concentrated in a thin shell near the surface, most of the probability mass of a Gaussian is located within a thin shell at a specific radius.</p>
<p><img src="https://s2.loli.net/2023/10/08/QfxjJAYzwHd8TVe.png" alt="image.png" style="zoom: 67%;" /></p>
<h3 id="Decision-Theory"><a href="#Decision-Theory" class="headerlink" title="Decision Theory"></a>Decision Theory</h3><h4 id="Confusion-Matrix"><a href="#Confusion-Matrix" class="headerlink" title="Confusion Matrix"></a>Confusion Matrix</h4><div class="table-container">
<table>
<thead>
<tr>
<th>Truth/Decision</th>
<th>Positive</th>
<th>Negative</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Positive</strong></td>
<td>TP</td>
<td>FN</td>
</tr>
<tr>
<td><strong>Negative</strong></td>
<td>FP</td>
<td>TN</td>
</tr>
</tbody>
</table>
</div>
<p><img src="https://s2.loli.net/2023/10/08/frI2BYLVbCgKNkc.png" alt="image.png" style="zoom:50%;" /></p>
<h4 id="Receiver-Operating-Characteristic-Curve"><a href="#Receiver-Operating-Characteristic-Curve" class="headerlink" title="Receiver Operating Characteristic Curve"></a>Receiver Operating Characteristic Curve</h4><p><img src="https://s2.loli.net/2023/10/08/Edem7OF3T8hXSaU.png" alt="image.png" style="zoom: 33%;" /></p>
<h4 id="Minimizing-the-misclassification-rate"><a href="#Minimizing-the-misclassification-rate" class="headerlink" title="Minimizing the misclassification rate"></a>Minimizing the misclassification rate</h4><p><img src="https://s2.loli.net/2023/10/08/YCeVcwDHuzB4i3k.png" alt="image.png"></p>
<script type="math/tex; mode=display">
\begin{align*}
p(\text{correct})&=\sum\limits_{k=1}^Kp(\mathbf x\in\mathcal R_k,\mathcal C_k) = \sum\limits_{k=1}^K\int_{\mathcal R_k} p(\mathbf x,\mathcal C_k)\text d \mathbf x\\
\end{align*}</script><h4 id="Minimizing-the-expected-loss"><a href="#Minimizing-the-expected-loss" class="headerlink" title="Minimizing the expected loss"></a>Minimizing the expected loss</h4><script type="math/tex; mode=display">
\mathbb E[L]=\sum\limits_k\sum\limits_j\int_{\mathcal R_j}L_{kj}p(\mathbf x,\mathcal C_k)\text d \mathbf x</script><p>Each $\mathbf x$ can be assigned  independently to one of the decision regions $\mathcal R_j$.</p>
<p>Goal is to choose $\mathcal R_j$ to minimize $\mathbb E[L]$, we should minimize $\sum\limits_{k} L_{kj}p(\mathbf x,\mathcal C_k)$ for each $\mathbf x$.</p>
<p>Common factor $p(\mathbf x)$ can be eliminated from $p(\mathbf x,\mathcal C_k)=p(\mathcal C_k\vert\mathbf x)p(\mathbf x)$.</p>
<p>Thus the decision rule that minimizes the expected loss is the one that assigns each new $\mathbf x$ to the class $j$ for which the quantity $\sum\limits_{k} L_{kj}p(\mathcal C_k\vert\mathbf x)$ is a minimum.</p>
<h4 id="Reject-Option"><a href="#Reject-Option" class="headerlink" title="Reject Option"></a>Reject Option</h4><p>Introducing a threshold $\theta$ and rejecting those inputs $x$ for which the largest of the posterior probabilities $p(\mathcal C_k\vert \mathbf x)$ is less than or equal to $\theta$. </p>
<ul>
<li>$\theta=1$: all examples are rejected.</li>
<li>$\theta&lt;\frac 1 K$: ($K$ classes) no examples are  rejected.</li>
</ul>
<p><img src="https://s2.loli.net/2023/10/08/yoqniUgpIN5b71F.png" alt="image.png" style="zoom:50%;" /></p>
<h4 id="Inference-and-Decision"><a href="#Inference-and-Decision" class="headerlink" title="Inference and Decision"></a>Inference and Decision</h4><p><strong>Generative model</strong>: Model the distribution of inputs as well as outputs. Because by sampling from them it is possible to generate synthetic data points in the input space.</p>
<p><strong>Discriminative model</strong>: model the posterior probabilities directly.</p>
<p><strong>Discriminant function</strong>: Learn a function that maps inputs x directly into decisions.</p>
<p><a name="3-ways-to-solve-decision-problems"><strong>3 Ways to Solve Decision Problems</strong></a></p>
<ul>
<li><p>(a)    By inference, determine $p(\mathbf x\vert \mathcal C_k)$ and $p(\mathcal C_k)$, then uses Bayes’ Theorem</p>
<script type="math/tex; mode=display">
p(\mathcal C_k\vert\mathbf x)=\frac{p(\mathbf x\vert\mathcal C_k)p(\mathcal C_k)}{p(\mathbf x)}=\frac{p(\mathbf x\vert\mathcal C_k)p(\mathcal C_k)}{\sum\limits_{k}p(\mathbf x\vert\mathcal C_k)p(\mathcal C_k)}=\frac{p(\mathbf x,\mathcal C_k)}{\sum\limits_{k}p(\mathbf x,\mathcal C_k)}</script><p>Equivalently, we can model the joint distribution $p(\mathbf x, \mathcal C_k)$ directly and then normalize to obtain the posterior probabilities.  (generative model)</p>
</li>
<li><p>(b)    By inference, determine the posterior class probabilities $p(\mathcal C_k\vert\mathbf x)$ directly. (discriminative model)</p>
</li>
<li>(c)    Find a function $f(x)$, called a <strong>discriminant function</strong>, which maps each input $\mathbf x$ directly onto a class label. <em>Probabilities play no role.</em></li>
</ul>
<details>
    <summary>Pros/Cons of the three approaches(extract from PRML)</summary>
    <p>Let us consider the relative merits of these three alternatives. Approach (a) is the most demanding because it involves finding the joint distribution over both <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="79" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow></math></mjx-assistive-mml></mjx-container> and <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="80" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mi>k</mi></msub></math></mjx-assistive-mml></mjx-container>. For many applications, <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="81" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow></math></mjx-assistive-mml></mjx-container> will have high dimensionality, and consequently we may need a large training set in order to be able to determine the class-conditional densities to reasonable accuracy. Note that the class priors <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="82" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo stretchy="false">(</mo><msub><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mi>k</mi></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container> can often be estimated simply from the fractions of the training set data points in each of the classes. One advantage of approach (a), however, is that it also allows the marginal density of data <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="83" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo stretchy="false">(</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container> to be determined from <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="84" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mo class="mjx-n" space="4"><mjx-c class="mjx-c3D"></mjx-c></mjx-mo><mjx-munder space="4"><mjx-row><mjx-base><mjx-mo class="mjx-sop"><mjx-c class="mjx-c2211 TEX-S1"></mjx-c></mjx-mo></mjx-base></mjx-row><mjx-row><mjx-under style="padding-top: 0.167em; padding-left: 0.344em;"><mjx-texatom size="s" texclass="ORD"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-texatom></mjx-under></mjx-row></mjx-munder><mjx-mi class="mjx-i" space="2"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c7C"></mjx-c></mjx-mo><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo stretchy="false">(</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><munder><mo data-mjx-texclass="OP" movablelimits="false">∑</mo><mrow data-mjx-texclass="ORD"><mi>k</mi></mrow></munder><mi>p</mi><mo stretchy="false">(</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow><mo data-mjx-texclass="ORD" fence="false" stretchy="false">|</mo><msub><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mi>k</mi></msub><mo stretchy="false">)</mo><mi>p</mi><mo stretchy="false">(</mo><msub><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mi>k</mi></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container>. This can be useful for detecting new data points that have low probability under the model and for which the predictions maybe of low accuracy, which is known as <em>outlier detection</em> or <em>novelty detection</em>.</p>
    <p>However, if we only wish to make classification decisions, then it can be wasteful of computational resources, and excessively demanding of data, to find the joint distribution <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="85" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c2C"></mjx-c></mjx-mo><mjx-msub space="2"><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo stretchy="false">(</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow><mo>,</mo><msub><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mi>k</mi></msub><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container> when in fact we only really need the posterior probabilities <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="86" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c7C"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo stretchy="false">(</mo><msub><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mi>k</mi></msub><mo data-mjx-texclass="ORD" fence="false" stretchy="false">|</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container>, which can be obtained directly through approach (b). Indeed, the class-conditional densities may contain a lot of structure that has little effect on the posterior probabilities, as illustrated in Figure 1.27. There has been much interest in exploring the relative merits of generative and discriminative approaches to machine learning, and in finding ways to combine them.</p>
    <p><img src="https://s2.loli.net/2023/10/08/sF7Khkg2mebAyVP.png" alt="image.png" style="zoom:50%;"></p>
    <p>An even simpler approach is (c) in which we use the training data to find a discriminant function <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="95" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D453 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D465 TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container> that maps each <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="96" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="bold">x</mi></math></mjx-assistive-mml></mjx-container> directly onto a class label, thereby combining the inference and decision stages into a single learning problem. In the example of Figure 1.27, this would correspond to finding the value of <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="97" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi mathvariant="bold">x</mi></math></mjx-assistive-mml></mjx-container> shown by the vertical green line, because this is the decision boundary giving the minimum probability of misclassification.</p>
    <p>With option (c), however, we no longer have access to the posterior probabilities <mjx-container class="MathJax CtxtMenu_Attached_0" jax="CHTML" tabindex="0" ctxtmenu_counter="98" style="font-size: 122.1%; position: relative;"><mjx-math class="MJX-TEX" aria-hidden="true"><mjx-mi class="mjx-i"><mjx-c class="mjx-c1D45D TEX-I"></mjx-c></mjx-mi><mjx-mo class="mjx-n"><mjx-c class="mjx-c28"></mjx-c></mjx-mo><mjx-msub><mjx-texatom texclass="ORD"><mjx-mi class="mjx-cal mjx-i"><mjx-c class="mjx-c43 TEX-C"></mjx-c></mjx-mi></mjx-texatom><mjx-script style="vertical-align: -0.15em;"><mjx-mi class="mjx-i" size="s"><mjx-c class="mjx-c1D458 TEX-I"></mjx-c></mjx-mi></mjx-script></mjx-msub><mjx-mo class="mjx-n"><mjx-c class="mjx-c7C"></mjx-c></mjx-mo><mjx-texatom texclass="ORD"><mjx-mi class="mjx-b"><mjx-c class="mjx-c1D431 TEX-B"></mjx-c></mjx-mi></mjx-texatom><mjx-mo class="mjx-n"><mjx-c class="mjx-c29"></mjx-c></mjx-mo></mjx-math><mjx-assistive-mml unselectable="on" display="inline"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi><mo stretchy="false">(</mo><msub><mrow data-mjx-texclass="ORD"><mi data-mjx-variant="-tex-calligraphic" mathvariant="script">C</mi></mrow><mi>k</mi></msub><mo data-mjx-texclass="ORD" fence="false" stretchy="false">|</mo><mrow data-mjx-texclass="ORD"><mi mathvariant="bold">x</mi></mrow><mo stretchy="false">)</mo></math></mjx-assistive-mml></mjx-container>. There are many powerful reasons for wanting to compute the posterior probabilities, even if we subsequently use them to make decisions. These include:</p>
    <ul>
<li>Minimizing risk.</li>
<li>Reject option. </li>
<li>Compensating for class priors.</li>
<li>Combining models. </li>
</ul>
</details>

<h4 id="Loss-functions-for-regression"><a href="#Loss-functions-for-regression" class="headerlink" title="Loss functions for regression"></a>Loss functions for regression</h4><p>For each input $\bf x$, choose a specific estimation $y(\bf x)$ of the value $t$.</p>
<script type="math/tex; mode=display">
\mathbb E[L]=\iint L(t,y(\mathbf x))p({\bf x},t)\text d {\bf x}\text dt</script><p>Take squared loss $L(t,y({\bf x}))=\{y({\bf x})-t\}^2$ for example</p>
<script type="math/tex; mode=display">
\mathbb E[L]=\iint \{y({\bf x})-t\}^2p({\bf x},t)\text d {\bf x}\text dt</script><h5 id="Method-1-Calculus-of-Variations"><a href="#Method-1-Calculus-of-Variations" class="headerlink" title="Method 1. Calculus of Variations"></a>Method 1. Calculus of Variations</h5><p>Using a calculus of variations to give $y({\bf x})$ so as to minimize $\mathbb E[L]$:</p>
<script type="math/tex; mode=display">
\frac{\partial \mathbb E[L]}{\partial y({\bf x})}=2\int \{y({\bf x})-t\}^2p({\bf x},t)\text d t =0</script><p>Solving for $y({\bf x})$, and using the sum and product rules of probability, we obtain the <a name="regression-function">regression function</a>:</p>
<script type="math/tex; mode=display">
y({\bf x})=\frac{\int tp({\bf x},t)\text d t}{p({\bf x})}=\int t p(t\vert \mathbf x)\text d t=\mathbb E_t[t\vert \mathbf x]</script><p>which is the conditional average of $t$ conditioned on $\bf x$.</p>
<h5 id="Method-2-Expanding-the-square-term"><a href="#Method-2-Expanding-the-square-term" class="headerlink" title="Method 2. Expanding the square term"></a>Method 2. Expanding the square term</h5><script type="math/tex; mode=display">
\begin{align*}
\{y({\bf x})-t\}^2&=\{y({\bf x})-\mathbb E_t[t\vert\mathbf x]+\mathbb E_t[t\vert\mathbf x]-t\}^2\\
&=\{y({\bf x})-\mathbb E_t[t\vert\mathbf x]\}^2+2\{y({\bf x})-\mathbb E_t[t\vert\mathbf x]\}\{\mathbb E_t[t\vert\mathbf x]-t\}+\{\mathbb E_t[t\vert\mathbf x]-t\}^2
\end{align*}</script><p>Substitute into the loss function and perform the integral on $t$:</p>
<script type="math/tex; mode=display">
\mathbb E[L]=\int\{y({\bf x})-\mathbb E_t[t\vert\mathbf x]\}^2p(\mathbf x)\text d \mathbf x+\int\{\mathbb E_t[t\vert\mathbf x]-t\}^2p(\mathbf x)\text d\mathbf x</script><p>When $y({\bf x})=\mathbb E_t[t\vert \mathbf x]$, loss function $\mathbb E[L]$ is minimized.</p>
<p>The second term represents the intrinsic variability of the target data and can be regarded as <strong>noise</strong>, or minimum value of the loss function.</p>
<p><strong>3 Ways to Solve Regression Problems</strong> (in order of decreasing complexity)</p>
<ul>
<li>(a)    Inference to determine the joint density $p({\bf x},t)$, then normalize to find the conditional density $p(t\vert \mathbf x)$, finally marginalize to find the conditional mean by the <a href="#regression-function">regression function</a>.</li>
<li>(b)    Inference to determine the conditional density $p(t\vert \mathbf x)$,  then marginalize to find the conditional mean by the <a href="#regression-function">regression function</a>.</li>
<li>(c)    Find a regression function $y(\mathbf x)$ directly from the training data.</li>
</ul>
<p>The relative merits of these three approaches follow the same lines as for <a href="#3-ways-to-solve-decision-problems">classification problems</a>.</p>
<details>
    <summary>Minkowski loss</summary>
<script type="math/tex; mode=display">
\mathbb E[L_q]=\iint \vert y(\mathbf x)-t\vert^q p(\mathbf x,t)\text d \mathbf x\text d t</script><p><img src="https://s2.loli.net/2023/10/08/sq5Oz4LW1bVXuvG.png" alt="image.png" style="zoom: 33%;" /></p>
<p>The minimum of $\mathbb E[L_q]$ is given by:</p>
<ul>
<li>$q\rightarrow 0$: conditional mode</li>
<li>$q=1$: conditional median</li>
<li>$q=2$: conditional mean</li>
</ul>
</details>

<h3 id="Information-Theory"><a href="#Information-Theory" class="headerlink" title="Information Theory"></a>Information Theory</h3><h4 id="Entropy-statistical"><a href="#Entropy-statistical" class="headerlink" title="Entropy(statistical)"></a>Entropy(statistical)</h4><h5 id="Discrete"><a href="#Discrete" class="headerlink" title="Discrete"></a>Discrete</h5><p>Allocate $N$ identical objects in $M$ bins.</p>
<script type="math/tex; mode=display">
W=\frac{N!}{\prod\limits_in_i!}</script><script type="math/tex; mode=display">
\text H=\frac 1 N \ln W\simeq -\lim\limits_{N\rightarrow\infty}\sum\limits_{i}(\frac{n_i}N)\ln(\frac{n_i}N)=-\sum\limits_{i}p_i\ln p_i</script><p>Entropy maximized when $\forall i,\ p_i=\frac 1 M$.</p>
<p><strong>Continuous</strong></p>
<p>Put bins of width $\Delta$ along the real line.</p>
<script type="math/tex; mode=display">
\lim\limits_{\Delta\rightarrow0}\left\{-\sum\limits_{i}p(x_i)\Delta\ln p(x_i)\right\}=-\int p(x)\ln p(x)\text d x</script><p>For fixed $\sigma^2$, when $p(x)=\mathcal N(x\vert\mu,\sigma^2)$, differential entropy is maximized</p>
<script type="math/tex; mode=display">
\text H[x]=\frac 1 2\{1+\ln(2\pi\sigma^2)\}</script><h4 id="Entropy"><a href="#Entropy" class="headerlink" title="Entropy"></a>Entropy</h4><script type="math/tex; mode=display">
\begin{align*}
\text H[x]&=-\sum\limits_x p(x)\ln p(x)\\
\text H[x]&=-\int p(x)\ln p(x)\text d x
\end{align*}</script><h4 id="Conditional-Entropy"><a href="#Conditional-Entropy" class="headerlink" title="Conditional Entropy"></a>Conditional Entropy</h4><script type="math/tex; mode=display">
\text H[y\vert x]=-\iint p(\mathbf y,\mathbf x)\ln p(\mathbf y\vert\mathbf x)\text d\mathbf y\text d\mathbf x</script><script type="math/tex; mode=display">
\text H[\mathbf x,\mathbf y]=\text H[\mathbf y\vert\mathbf x]+\text H[\mathbf x]</script><h4 id="Relative-Entropy-The-Kullback-Leibler-Divergence"><a href="#Relative-Entropy-The-Kullback-Leibler-Divergence" class="headerlink" title="Relative Entropy (The Kullback-Leibler Divergence)"></a>Relative Entropy (The Kullback-Leibler Divergence)</h4><p>KL divergence describes a distance between model $p$ and model $q$.</p>
<script type="math/tex; mode=display">
\begin{align*}
\text{KL}(p\|q)&=\text{Cross Entropy C}(p\|q)-\text {Entropy H}(p)\\
&=-\int p(\mathbf x)\ln q(\mathbf x)\text d\mathbf x-\left(-\int p(\mathbf x)\ln p(\mathbf x)\text d\mathbf x\right)\\
&=-\int p(\mathbf x)\ln \left\{\frac{q(\mathbf x)}{p(\mathbf x)}\right\}\text d\mathbf x
\end{align*}</script><ol>
<li>It is not a symmetrical quantity: $\text{KL}(p|q)\not\equiv \text{KL}(q|p)$.</li>
<li>$\text {KL}(p|q)\ge 0$, with equality IFF $p(\mathbf x)=q(\mathbf x)$.</li>
</ol>
<p>Approximate distribution $p(\mathbf x)$ using distribution $q(\mathbf x\vert\boldsymbolθ)$  governed by a set of adjustable parameters $\boldsymbol\theta$. One way to determine $\boldsymbol\theta$ is to minimize the KL divergence between the two distributions.</p>
<script type="math/tex; mode=display">
\text{KL}(p\|q)\simeq \frac 1 N \sum\limits_{n=1}^N\{\ln q(\mathbf x_n\vert\boldsymbol\theta)+\ln p(\mathbf x_n)\}</script><p>The 1st term is the negative log likelihood function for $\boldsymbol\theta$. The 2nd term is independent of $\boldsymbol\theta$. So minimizing this KL divergence is equivalent to maximizing the likelihood function.</p>
<h4 id="Cross-Entropy-for-Machine-Learning"><a href="#Cross-Entropy-for-Machine-Learning" class="headerlink" title="Cross Entropy for Machine Learning"></a>Cross Entropy for Machine Learning</h4><ul>
<li>Goal of ML: $p(\text{real data})\approx p(\text{model}\vert\theta)$</li>
<li>We assume: $p(\text{training data})\approx p(\text{real data})$</li>
<li>Operation of ML: $p(\text{training data})\approx p(\text{model}\vert\theta)$</li>
</ul>
<p>Minimizing $\text{KL}(p(\text{training data})|p(\text{model}\vert\theta))$ is equivalent to minimizing $\text C(p(\text{training data})|p(\text{model}\vert\theta))$ as $\text H(p(\text{training data}))$ is fixed.</p>
<p><strong>Example. Bernoulli model</strong></p>
<script type="math/tex; mode=display">
p(\text{model}\vert\theta)=\rho^t(1-\rho)^{1-t}</script><script type="math/tex; mode=display">
\text C=-\frac 1 N \sum\limits_nt_n\ln\rho+(1-t_n)\ln(1-\rho)</script><p>where $t_n$ is the training data and $\rho$ is the model parameter.</p>
<p><strong>Example. Gaussian model</strong></p>
<script type="math/tex; mode=display">
p(\text{model}\vert\theta)\propto e^{-\frac{(t-\mu)^2}{2}}</script><script type="math/tex; mode=display">
\text C\propto \frac 1 N \sum\limits_n(t_n-\mu)^2</script><p>where $t_n$ is the training data and $\mu$ is the model parameter.</p>
<h4 id="Mutual-Information"><a href="#Mutual-Information" class="headerlink" title="Mutual Information"></a>Mutual Information</h4><p>Mutual information describes the degree of dependence between $\mathbf x$ and $\mathbf y$ </p>
<script type="math/tex; mode=display">
\begin{align*}
\text I[\mathbf x,\mathbf y]&\equiv\text{KL}(p(\mathbf x,\mathbf y)\|p(\mathbf x)p(\mathbf y))\\
&=-\iint p(\mathbf x,\mathbf y)\ln\left(\frac{p(\mathbf x)p(\mathbf y)}{p(\mathbf x,\mathbf y)}\right)\text d\mathbf x\text d\mathbf y
\end{align*}</script><script type="math/tex; mode=display">
\text I[\mathbf x,\mathbf y]=\text H[\mathbf x]-\text H[\mathbf x\vert\mathbf y]=\text H[\mathbf y]-\text H[\mathbf y\vert\mathbf x]</script><h4 id="Information-Gain"><a href="#Information-Gain" class="headerlink" title="Information Gain"></a>Information Gain</h4><p>Given $N$ balls and a balance, one of these balls is lighter.</p>
<p>$x$: one ball is lighter</p>
<p>$y$: weighing once</p>
<p>$\text H[x]$: uncertain of balls</p>
<p>$\text H[x\vert y]$: uncertain of balls after weighing once</p>
<script type="math/tex; mode=display">
\begin{align*}
\text H[x\vert y_1,\cdots,y_t]-\text H[x\vert y_1,\cdots,y_{t+1}]&=\text H[y_{t+1}\vert y_1,\cdots,y_t]-H[y_{t+1}\vert y_1,\cdots,y_t,x]\\
&=\text H[y_{t+1}\vert y_1,\cdots,y_t]\\
&\le \text H[y_{t+1}]=\log_23
\end{align*}</script><p>Sum the equation above with $t=0,1,\cdots,T$, </p>
<script type="math/tex; mode=display">
\begin{matrix*}
\log_2N = \text H[x]-\text H[x\vert y_1,\cdots,y_T]\le T\log_23\\
T\ge \log_3N
\end{matrix*}</script><h2 id="Chapter-3-Distributions"><a href="#Chapter-3-Distributions" class="headerlink" title="Chapter 3 - Distributions"></a>Chapter 3 - Distributions</h2><h3 id="Binary-Distributions"><a href="#Binary-Distributions" class="headerlink" title="Binary Distributions"></a>Binary Distributions</h3><h4 id="Bernoulli-Distribution"><a href="#Bernoulli-Distribution" class="headerlink" title="Bernoulli Distribution"></a>Bernoulli Distribution</h4><script type="math/tex; mode=display">
\begin{align*}
\text{Bern}(x\vert \mu)&=\mu^x(1-\mu)^{1-x}\\
\mathbb E[x]&=\mu\\
\text{var}[x]&=\mu(1-\mu)
\end{align*}</script><p>Given $\mathcal D=\{x_1,\cdots,x_N\}$, $m$ heads, $N-m$ tails.</p>
<script type="math/tex; mode=display">
\ln p(\mathcal D\vert\mu)=\sum\limits_{n=1}^N\ln p(x_n\vert\mu)=\sum\limits_{n=1}^N\{x_n\ln\mu+(1-x_n\ln(1-\mu)\}</script><script type="math/tex; mode=display">
\mu_\text{ML}=\frac 1 N\sum\limits_{n=1}^Nx_n=\frac m N</script><h4 id="Binomial-Distribution"><a href="#Binomial-Distribution" class="headerlink" title="Binomial Distribution"></a>Binomial Distribution</h4><script type="math/tex; mode=display">
\begin{align*}
\text{Bin}(m\vert N,\mu)&=\left(\begin{matrix}N\\m\end{matrix}\right)\mu^m(1-\mu)^{N-m}\\
\mathbb E[m]&=\sum\limits_{m=0}^Nm\text{Bin}(m\vert N,\mu)=N\mu\\
\text{var}[m]&=\sum\limits_{m=0}^N(m-\mathbb E[m])^2\text{Bin}(m\vert N,\mu)=N\mu(1-\mu)
\end{align*}</script><h4 id="Beta-Distribution"><a href="#Beta-Distribution" class="headerlink" title="Beta Distribution"></a><a href="http://varianceexplained.org/statistics/beta_distribution_and_baseball/">Beta Distribution</a></h4><script type="math/tex; mode=display">
\begin{align*}
\Gamma(x)&\equiv\int_0^\infty u^{x-1}e^{-u}du\\
\text{Beta}(\mu\vert a,b)&=\frac{\Gamma(a+b)}{\Gamma(a)\Gamma(b)}\mu^{a-1}(1-\mu)^{b-1}\\
\mathbb E[\mu]&=\frac a {a+b}\\
\text{var}[\mu]&=\frac{ab}{(a+b)^2(a+b+1)}
\end{align*}</script><p>The Beta distribution provides the <a href="https://en.wikipedia.org/wiki/Conjugate_prior"><strong>conjugate prior</strong></a> for the Bernoulli distribution.</p>
<p>Given $\mathcal D=\{x_1,\cdots,x_N\}$, $m$ heads, $N-m$ tails.</p>
<script type="math/tex; mode=display">
\begin{matrix}
p(\mu\vert a_0,b_0,\mathcal D)\propto p(\mathcal D\vert\mu)p(\mu\vert a_0,b_0)\propto \text{Beta}(\mu\vert a_N,b_N)\\
a_N=a_0+m\quad\quad b_N=b_0+(N-m)
\end{matrix}</script><p>As the size of the dataset $N$ increases,</p>
<script type="math/tex; mode=display">
\begin{align*}
a_N &\rightarrow m\\
b_N &\rightarrow N-m\\
\mathbb E[\mu]&\rightarrow \mu_\text{ML}\\
\text{var}[\mu]&\rightarrow 0
\end{align*}</script><h3 id="Multinomial-Distributions"><a href="#Multinomial-Distributions" class="headerlink" title="Multinomial Distributions"></a>Multinomial Distributions</h3><h4 id="1-of-K-coding-scheme"><a href="#1-of-K-coding-scheme" class="headerlink" title="1-of-K coding scheme"></a>1-of-K coding scheme</h4><p>1-of-K coding scheme: $\mathbf x=(0,0,1,0,0,0)^\text T,\ \sum\limits_{k=1}^Kx_k=1$.</p>
<script type="math/tex; mode=display">
p(\text x\vert\boldsymbol\mu)=\prod\limits_{k=1}^K\mu_k^{x_k}</script><p>where $\boldsymbol\mu=(\mu_1,\cdots,\mu_K)^\text T$, $\sum\limits_k\mu_k=1$.</p>
<script type="math/tex; mode=display">
\mathbb E[\mathbf x\vert\boldsymbol \mu]=\sum\limits_{\mathbf x}p(\mathbf x\vert\boldsymbol\mu)\mathbf x=(\mu_1,\cdots,\mu_K)^\text T=\boldsymbol \mu</script><p>Given $\mathcal D=\{\bf x_1,\cdots,x_N\}$, the likelihood</p>
<script type="math/tex; mode=display">
p(\mathcal D\vert\mu)=\prod\limits_{n=1}^N\prod\limits_{k=1}^K\mu_k^{x_{nk}}=\prod_{k=1}^K\mu_k^{\left(\sum\limits_{n=1}^Nx_{nk}\right)}=\prod_{k=1}^K\mu_k^{m_k}</script><p>where $ m_k=\sum\limits_{n=1}^Nx_{nk}$ denotes the number of observations of $x_k = 1$.</p>
<p>Using Lagrange method, we obtain</p>
<script type="math/tex; mode=display">
\mu^\text{ML}_k=\frac {m_k} N</script><h4 id="Multinomial-Distribution"><a href="#Multinomial-Distribution" class="headerlink" title="Multinomial Distribution"></a>Multinomial Distribution</h4><script type="math/tex; mode=display">
\begin{align*}
\text{Mult}(m_1,\cdots,m_K\vert\boldsymbol\mu,N)&=\left(\begin{matrix}N\\m_1\cdots m_K\end{matrix}\right)\prod\limits_{k=1}^K\mu_k^{m_k}\\
\mathbb E[m_k]&=N\mu_k\\
\text{var}[m_k]&=N\mu_k(1-\mu_k)\\
\text{cov}[m_jm_k]&=-N\mu_j\mu_k
\end{align*}</script><h4 id="Dirichlet-Distribution"><a href="#Dirichlet-Distribution" class="headerlink" title="Dirichlet Distribution"></a>Dirichlet Distribution</h4><p>Conjugate prior for the multinomial distribution.</p>
<script type="math/tex; mode=display">
\begin{matrix}
\text{Dir}(\boldsymbol\mu\vert\boldsymbol\alpha)=\frac{\Gamma(\alpha_0)}{\Gamma(\alpha_1)\cdots\Gamma(\alpha_K)}\prod\limits_{k=1}^K\mu_k^{\alpha_k-1}\\
\alpha_0=\sum\limits_{k=1}^K\alpha_k
\end{matrix}</script><p>Given $\mathcal D=\{m_1,\cdots,m_K\}$, the likelihood</p>
<script type="math/tex; mode=display">
\begin{matrix}
p(\boldsymbol\mu\vert\mathcal D,\boldsymbol\alpha)\propto p(\mathcal D\vert\boldsymbol\mu)p(\boldsymbol\mu\vert\boldsymbol\alpha)\propto\prod\limits_{k=1}^K\mu_k^{\alpha_k+m_k-1}\\
p(\boldsymbol\mu\vert\mathcal D,\boldsymbol\alpha)=\text{Dir}(\boldsymbol\mu\vert\boldsymbol\alpha+\bf m)
\end{matrix}</script><p>where $\mathbf m=(m_1,\cdots,m_K)^\text T$.</p>
<p>We can interpret the parameters $\alpha_k$ of the Dirichlet prior as an effective number of observations of $x_k = 1$.</p>
<h3 id="Gaussian-Distributions"><a href="#Gaussian-Distributions" class="headerlink" title="Gaussian Distributions"></a>Gaussian Distributions</h3><ul>
<li><p>The Gaussian Distribution</p>
<script type="math/tex; mode=display">
\mathcal N(x|\mu,\sigma^2)=\frac 1 {(2\pi\sigma^2)^{1/2}}\exp\left\{-\frac 1 {2\sigma^2}(x-\mu)^2\right\}</script></li>
<li><p>The Multivariate Gaussian</p>
<script type="math/tex; mode=display">
\mathcal N(\mathbf x|\mathbf\mu,\mathbf\Sigma)=\frac 1 {(2\pi)^{D/2}}\frac 1 {|\mathbf\Sigma|^{1/2}}\exp\left\{-\frac 1 2(\mathbf x-\mathbf\mu)^\text T\mathbf\Sigma^{-1}(\mathbf x - \mathbf \mu)\right\}</script></li>
</ul>
<h4 id="Central-Limit-Theorem"><a href="#Central-Limit-Theorem" class="headerlink" title="Central Limit Theorem"></a>Central Limit Theorem</h4><p>The distribution of the sum of $N$ i.i.d. random variables becomes increasingly Gaussian as $N$ grows.</p>
<h4 id="Moments-of-the-Multivariate-Gaussian"><a href="#Moments-of-the-Multivariate-Gaussian" class="headerlink" title="Moments of the Multivariate Gaussian"></a>Moments of the Multivariate Gaussian</h4><script type="math/tex; mode=display">
\begin{align*}
\mathbb E[\mathbf x]&=\boldsymbol\mu\\
\mathbb E[\mathbf x\mathbf x^\text T]&=\boldsymbol\mu\boldsymbol\mu^\text T+\boldsymbol\Sigma\\
\text{cov}[\mathbf x]&=\boldsymbol\Sigma\\
\text{cov}[A\mathbf x]&=A\boldsymbol\Sigma A^\text T
\end{align*}</script><h4 id="Properties-of-Gaussians"><a href="#Properties-of-Gaussians" class="headerlink" title="Properties of Gaussians"></a>Properties of Gaussians</h4><ol>
<li>Linear transformation</li>
</ol>
<script type="math/tex; mode=display">
\begin{align*}
X&\sim\mathcal N(\mu,\sigma^2)\\
Y&=aX+b\\
Y&\sim\mathcal N(a\mu+b,a^2\sigma^2)
\end{align*}</script><ol>
<li><p>Product of Gaussian r.v.</p>
<script type="math/tex; mode=display">
\begin{align*}X_1&\sim\mathcal N(\mu_1,\sigma_1^2)\\X_2&\sim\mathcal N(\mu_2,\sigma_2^2)\\\
p(Y)&=p(X_1)p(X_2)\\
Y&\sim\mathcal N(\frac{\sigma^2_2}{\sigma_1^2+\sigma_2^2}\mu_1+\frac{\sigma^2_1}{\sigma_1^2+\sigma_2^2}\mu_2,\frac 1 {\sigma_1^{-2}+\sigma_2^{-2}})
\end{align*}</script><script type="math/tex; mode=display">
\left\{\begin{align*}\sigma^{-2}&=\sigma_1^{-2}+\sigma_2^{-2}\\\sigma^{-2}\mu&=\sigma_1^{-2}\mu_1+\sigma_2^{-2}\mu_2\end{align*}\right .</script><p>For multivariate Gaussians, use $\Sigma$ to replace $\sigma^2$.</p>
</li>
</ol>
<h4 id="Bayes’-Theorem-for-Gaussian-Variables-Slides"><a href="#Bayes’-Theorem-for-Gaussian-Variables-Slides" class="headerlink" title="Bayes’ Theorem for Gaussian Variables(Slides)"></a>Bayes’ Theorem for Gaussian Variables(Slides)</h4><p>Given $y=Ax+v$, $p(x)=\mathcal N(x\vert\mu,\Sigma)$, $p(v)=\mathcal N(v\vert,0,Q)$.</p>
<p>Hence we have</p>
<script type="math/tex; mode=display">
\begin{align*}
p(y)&=\mathcal N(y\vert A\mu,A\Sigma A^\text T+Q)\\
p(y\vert x)&=\mathcal N(y\vert Ax,Q)
\end{align*}</script><p>Therefore</p>
<script type="math/tex; mode=display">
\begin{align*}
p(x\vert y)&\propto p(y\vert x)p(x)=\mathcal N(y\vert Ax,Q)\mathcal N(x\vert \mu,\Sigma)\\
p(x\vert y) &= \mathcal N(x\vert Hy,L)\\
\end{align*}</script><p>where</p>
<script type="math/tex; mode=display">
\left\{ \begin{align*}
L^{-1}&=A^TQ^{-1}A + \Sigma^{-1}\\
Hy &= L\{A^TQ^{-1}y+\Sigma^{-1}\mu\}
\end{align*}\right.</script><h4 id="Conditional-Gaussian-distributions"><a href="#Conditional-Gaussian-distributions" class="headerlink" title="Conditional Gaussian distributions"></a>Conditional Gaussian distributions</h4><p>If two sets of variables are jointly Gaussian, then the conditional distribution of one set conditioned on the other is again Gaussian.</p>
<p>Given a $D$-dimensional vector $\mathbf x$ with Gaussian distribution $\mathcal N(\mathbf x\vert\boldsymbol\mu,\boldsymbol\Sigma)$, partitioned into two disjoint subsets $\mathbf x_a$ and $\mathbf x_b$.</p>
<script type="math/tex; mode=display">
\mathbf x=\left(\begin{matrix}\mathbf x_a\\\mathbf x_b\end{matrix}\right)\quad\boldsymbol\mu=\left(\begin{matrix}\boldsymbol \mu_a\\\boldsymbol \mu_b\end{matrix}\right)\quad\boldsymbol\Sigma=\begin{pmatrix}\boldsymbol\Sigma_{aa}&\boldsymbol\Sigma_{ab}\\\boldsymbol\Sigma_{ba}&\boldsymbol\Sigma_{bb}\end{pmatrix}</script><p>For conditional distribution $p(\mathbf x_a\vert\mathbf x_b)$,</p>
<script type="math/tex; mode=display">
\begin{align*}
p(\mathbf x_a\vert\mathbf x_b)&=\mathcal N(x_a\vert\boldsymbol\mu_{a\vert b},\boldsymbol\Sigma_{a\vert b})\\
\boldsymbol\mu_{a\vert b}&=\boldsymbol\mu_a+\boldsymbol\Sigma_{ab}\boldsymbol\Sigma_{bb}^{-1}(\mathbf x_b-\boldsymbol\mu_b)\\
\boldsymbol\Sigma_{a\vert b}&=\boldsymbol\Sigma_{aa}-\boldsymbol\Sigma_{ab}\boldsymbol\Sigma_{bb}^{-1}\boldsymbol\Sigma_{ba}
\end{align*}</script><p>And marginal distribution $p(\mathbf x_a)=\mathcal N(\mathbf x_a\vert\boldsymbol\mu_a,\boldsymbol\Sigma_{aa})$.</p>
<h4 id="Bayes’-Theorem-for-Gaussian-Variables-Textbook"><a href="#Bayes’-Theorem-for-Gaussian-Variables-Textbook" class="headerlink" title="Bayes’ Theorem for Gaussian Variables(Textbook)"></a>Bayes’ Theorem for Gaussian Variables(Textbook)</h4><p>Given</p>
<script type="math/tex; mode=display">
\begin{align*}
p(\mathbf x)&=\mathcal N(\mathbf x\vert\boldsymbol\mu,\boldsymbol\Lambda^{-1})\\
p(\mathbf y\vert \mathbf x)&=\mathcal N(\bf y\vert Ax+b, L^{-1})
\end{align*}</script><p>Obtain</p>
<script type="math/tex; mode=display">
\begin{align*}
p(\mathbf y)&=\mathcal N(\bf y\vert A\mu+b,L^{-1}+A\Lambda^{-1}A^\text T)\\
p(\mathbf x\vert\mathbf y)&=\mathcal N(\bf x\vert\boldsymbol \Sigma\{A^\text TL(y-b)+\Lambda\boldsymbol\mu\},\Sigma)
\end{align*}</script><p>where</p>
<script type="math/tex; mode=display">
\boldsymbol\Sigma=(\bf\Lambda+A^\text{T}LA)^{-1}.</script><h4 id="Maximum-Likelihood-for-the-Gaussian"><a href="#Maximum-Likelihood-for-the-Gaussian" class="headerlink" title="Maximum Likelihood for the Gaussian"></a>Maximum Likelihood for the Gaussian</h4><p>Sufficient statistics: $\sum\limits_{n=1}^N\mathbf x_n$ and $\sum\limits_{n=1}^N\mathbf x_n\mathbf x_n^\text T$</p>
<p>Solve the maximum likelihood</p>
<script type="math/tex; mode=display">
\boldsymbol\mu_\text{ML}=\frac 1 N\sum\limits_{n=1}^N\mathbf x_n\quad \boldsymbol\Sigma_\text{ML}=\frac 1 N\sum\limits_{n=1}^N(\mathbf x_n-\boldsymbol\mu_\text{ML})(\mathbf x_n-\boldsymbol\mu_\text{ML})^\text T.</script><p>Under the true distribution</p>
<script type="math/tex; mode=display">
\mathbb E[\boldsymbol \mu_\text{ML}]=\boldsymbol\mu\quad\mathbb E[\boldsymbol \Sigma_\text{ML}]=\frac{N-1}N\boldsymbol\Sigma.</script><p>Hence define</p>
<script type="math/tex; mode=display">
\widetilde{\boldsymbol\Sigma}=\frac 1 {N-1}\sum\limits_{n=1}^N(\mathbf x_n-\boldsymbol\mu_\text{ML})(\mathbf x_n-\boldsymbol\mu_\text{ML})^\text T.</script><h4 id="Sequential-estimation"><a href="#Sequential-estimation" class="headerlink" title="Sequential estimation"></a>Sequential estimation</h4><p><a href="https://en.wikipedia.org/wiki/Stochastic_approximation#Robbins%E2%80%93Monro_algorithm">The Robbins-Monro Algorithm</a></p>
<h4 id="Bayesian-Inference-for-the-Gaussian"><a href="#Bayesian-Inference-for-the-Gaussian" class="headerlink" title="Bayesian Inference for the Gaussian"></a>Bayesian Inference for the Gaussian</h4><h4 id="Student’s-t-distribution"><a href="#Student’s-t-distribution" class="headerlink" title="Student’s t-distribution"></a><a href="https://en.wikipedia.org/wiki/Student%27s_t-distribution">Student’s t-distribution</a></h4><h4 id="Periodic-variables"><a href="#Periodic-variables" class="headerlink" title="Periodic variables"></a>Periodic variables</h4><h4 id="Mixtures-of-Gaussians"><a href="#Mixtures-of-Gaussians" class="headerlink" title="Mixtures of Gaussians"></a>Mixtures of Gaussians</h4><script type="math/tex; mode=display">
p(\mathbf x)=\sum\limits_{k=1}^K\pi_k\mathcal N(\mathbf x\vert\boldsymbol\mu_k,\boldsymbol\Sigma_k)</script><ul>
<li><p>$\pi_k$: mixing coefficients</p>
<p> $\sum\limits_{k=1}^K\pi_k=1,0\le\pi_k\le 1$</p>
</li>
<li><p>$N(\mathbf x\vert\boldsymbol\mu_k,\boldsymbol\Sigma_k)$: component</p>
</li>
</ul>
<p>Log likelihood of mixtures</p>
<script type="math/tex; mode=display">
\ln p(\mathbf X\vert\boldsymbol \pi,\boldsymbol\mu,\boldsymbol\Sigma)=\sum\limits_{n=1}^N\ln\left\{\sum\limits_{k=1}^K\pi_k\mathcal N(\mathbf x\vert\boldsymbol\mu_k,\boldsymbol\Sigma_k)\right\}</script><p>The maximum likelihood solution for the parameters no longer has a closed-form analytical solution.</p>
<p>Alternatives: iterative numerical optimization, expectation maximization.</p>
<h3 id="Exponential-Families"><a href="#Exponential-Families" class="headerlink" title="Exponential Families"></a>Exponential Families</h3><p>The exponential family of distributions over $\mathbf x$, given parameters $\boldsymbol \eta$</p>
<script type="math/tex; mode=display">
p(\mathbf x\vert\boldsymbol\eta)=h(\mathbf x)g(\boldsymbol\eta)\exp\{\boldsymbol\eta^\text T\mathbf u(\mathbf x)\}</script><ul>
<li>$\bf x$: scalar or vector, discrete or continuous.</li>
<li>$\boldsymbol\eta$: natural parameters</li>
<li>$g(\boldsymbol\eta)$: normalization coefficient satisfying ↓</li>
</ul>
<script type="math/tex; mode=display">
g(\boldsymbol\eta)\int h(\mathbf x)\exp\left\{\boldsymbol\eta^\text T \mathbf u(\mathbf x)\right\}\text d\mathbf x=1</script><p><strong>The Bernoulli Distribution</strong>: </p>
<script type="math/tex; mode=display">
p(x\vert \mu)=(1-\mu)\exp\left\{\ln(\frac{\mu}{1-\mu})x\right\}</script><p>So</p>
<script type="math/tex; mode=display">
\begin{align*}
\eta = \ln(\frac \mu{1-\mu}), \mu=&\sigma(\eta)=\frac 1{1+\exp(-\eta)}\\
&\uparrow\text{Logistic Sigmoid}
\end{align*}</script><p><strong>The Multinomial Distribution:</strong></p>
<script type="math/tex; mode=display">
p(\mathbf x\vert\boldsymbol \mu)=\exp\left\{\sum\limits_{k=1}^Mx_k\ln\mu_k\right\}</script><p>Let $\mu_M=1-\sum\limits_{k=1}^{M-1}\mu_k$,</p>
<script type="math/tex; mode=display">
\begin{align*}
\eta_k=\ln\left(\frac {\mu_k} {1-\sum_{j=1}^{M-1}\mu_j}\right), \mu_k = &\frac{\exp(\eta_k)}{1+\sum_{j=1}^{M-1}\exp(\eta_j)}\\
&\uparrow\text{Softmax}
\end{align*}</script><p><strong>The Gaussian Distribution:</strong></p>
<script type="math/tex; mode=display">
p(x\vert\mu,\sigma^2)=\frac 1 {\sqrt{2\pi\sigma^2}}\exp\left\{-\frac 1 {2\sigma^2}(x-\mu)^2\right\}=h(x)g(\boldsymbol\eta)\exp\left\{\boldsymbol\eta^\text T\mathbf u(x)\right\}</script><p>where</p>
<script type="math/tex; mode=display">
\begin{align*}
\boldsymbol\eta &= \left(\begin{matrix}\frac{\mu}{\sigma^2}\\\frac {-1} {2\sigma^2}\end{matrix}\right) &h(x) &= \frac{1}{\sqrt{2\pi}}\\
\mathbf u(x) &= \left(\begin{matrix}x\\x^2\end{matrix}\right) &g(\boldsymbol\eta) &= \sqrt{-2\eta_2}\exp\left(\frac{\eta_1^2}{4\eta_2}\right)
\end{align*}</script><h4 id="Maximum-likelihood-and-sufficient-statistics"><a href="#Maximum-likelihood-and-sufficient-statistics" class="headerlink" title="Maximum likelihood and sufficient statistics"></a>Maximum likelihood and sufficient statistics</h4><p>Likelihood function</p>
<script type="math/tex; mode=display">
p(\mathbf{X} \vert \boldsymbol{\eta})=\left(\prod_{n=1}^{N} h\left(\mathbf{x}_{n}\right)\right) g(\boldsymbol{\eta})^{N} \exp \left\{\boldsymbol{\eta}^{T} \sum_{n=1}^{N} \mathbf{u}\left(\mathbf{x}_{n}\right)\right\}</script><p>Condition of maximum likelihood estimator $\boldsymbol\eta_\text{ML}$</p>
<script type="math/tex; mode=display">
\begin{align*}
-\nabla\ln g(\boldsymbol \eta_\text{ML})=\frac 1 N& \sum\limits_{n=1}^N\mathbf u(\mathbf x_n)\\
&\uparrow\text{Sufficient statistic}
\end{align*}</script><p>The solution for the ML estimator only depends on $\sum\limits_{n=1}^N\mathbf u(\mathbf x_n)$, which is called the sufficient statistic of the distribution.</p>
<p>For example,</p>
<p>Bernoulli distribution $\mathbf u(x) = x$, so we only keep the sum of the data points; Gaussian distribution $\mathbf u(x) = \left(\begin{matrix}x\\x^2\end{matrix}\right)$, we need to keep both the sum of data points and the sum of the square.</p>
<h4 id="Conjugate-Priors"><a href="#Conjugate-Priors" class="headerlink" title="Conjugate Priors"></a>Conjugate Priors</h4><p>Seek a prior that is <strong>conjugate</strong> to the likelihood function: the posterior distribution has the <strong>same functional form</strong> as the prior.</p>
<p>For any member of the exponential family, there exists a conjugate prior</p>
<script type="math/tex; mode=display">
\text{prior} = p(\boldsymbol\eta\vert\chi,\nu) = f(\chi,\nu)g(\boldsymbol\eta)^\nu\exp\left\{\nu\boldsymbol\eta^\text T\chi\right\}</script><p>where</p>
<ul>
<li>$f(\chi,\nu)$ is a normalization coefficient</li>
<li>$g(\boldsymbol\eta)$ is the normalization coefficient of the exponential family.</li>
</ul>
<p>Recall that</p>
<script type="math/tex; mode=display">
\text{Likelihood} =p(\mathbf{X} \vert \boldsymbol{\eta})=\left(\prod_{n=1}^{N} h\left(\mathbf{x}_{n}\right)\right) g(\boldsymbol{\eta})^{N} \exp \left\{\boldsymbol{\eta}^{T} \sum_{n=1}^{N} \mathbf{u}\left(\mathbf{x}_{n}\right)\right\}</script><p>Multiply the prior and the likelihood, the posterior is</p>
<script type="math/tex; mode=display">
\text{Posterior} \propto g(\boldsymbol\eta)^{\nu+N}\exp\left\{\boldsymbol\eta^\text T \left(\sum\limits_{n=1}^N\mathbf u(\mathbf x_n)+\nu\chi\right)\right\}</script><p>which is in the same functional form as the prior.</p>
<ul>
<li>$\nu$: effective number of pseudo-observations in the prior</li>
<li>$\chi$: value of the sufficient statistic for the pseudo-observations</li>
</ul>
<h3 id="Non-informative-Priors"><a href="#Non-informative-Priors" class="headerlink" title="Non-informative Priors"></a>Non-informative Priors</h3><p>Used when little is known about the prior distribution.</p>
<p>Have as little influence on the posterior distribution as possible.</p>
<p>Cons of choose constant as the prior</p>
<ul>
<li>If the domain of the parameter $\lambda$ is unbounded, the integral over $\lambda$ diverges, hence the prior cannot be normalized and is <strong>improper</strong>.</li>
<li>By changing the variable(e.g., $\lambda=\eta^2$), the density over the new variable may not be constant.</li>
</ul>
<p>Example: $\text{Gam}(\lambda\vert a_0,b_0)$ where $a_0=b_0=0$.</p>
<h3 id="Non-parametric-Methods"><a href="#Non-parametric-Methods" class="headerlink" title="Non-parametric Methods"></a>Non-parametric Methods</h3><p><strong>Limitation of parametric methods:</strong></p>
<p>The chosen density might be a poor model of the distribution that generates the data. Multimodal data can never be captured by a unimodal Gaussian.</p>
<h4 id="Histogram-Methods"><a href="#Histogram-Methods" class="headerlink" title="Histogram Methods"></a>Histogram Methods</h4><p><img src="https://picst.sunbangyan.cn/2023/11/21/d15a31fe2fd078f7148522e283831252.jpeg" style="zoom:50%;" /></p>
<script type="math/tex; mode=display">
p_i = \frac{n_i}{N\Delta_i}</script><p>where $\Delta$ acts as a smoothing parameter.</p>
<p>Cons: Curse of Dimensionality</p>
<h3 id="K-Nearest-Neighbors"><a href="#K-Nearest-Neighbors" class="headerlink" title="K-Nearest-Neighbors"></a>K-Nearest-Neighbors</h3><h2 id="Chapter-4-Linear-Models-for-Regression"><a href="#Chapter-4-Linear-Models-for-Regression" class="headerlink" title="Chapter 4 - Linear Models for Regression"></a>Chapter 4 - Linear Models for Regression</h2><h2 id="Chapter-5-Linear-Models-for-Classification"><a href="#Chapter-5-Linear-Models-for-Classification" class="headerlink" title="Chapter 5 - Linear Models for Classification"></a>Chapter 5 - Linear Models for Classification</h2><h3 id="Three-Approaches-to-Classification"><a href="#Three-Approaches-to-Classification" class="headerlink" title="Three Approaches to Classification"></a>Three Approaches to Classification</h3><ul>
<li>Use discriminant functions directly</li>
<li>Infer the posterior probabilities with generative models</li>
<li>Directly construct posterior conditional class probabilities</li>
</ul>
<h3 id="Discriminant-Functions"><a href="#Discriminant-Functions" class="headerlink" title="Discriminant Functions"></a>Discriminant Functions</h3><p><strong>Discriminant Functions for $N$ classes</strong></p>
<ul>
<li>use $N$ two-way discriminant functions</li>
<li>use $\frac{N(N-1)}{2}$ two-way discriminant functions</li>
</ul>
<h3 id="Least-Square-Classification"><a href="#Least-Square-Classification" class="headerlink" title="Least Square Classification"></a>Least Square Classification</h3><ul>
<li>Reduce <strong>classification</strong> to least squares <strong>regression</strong>.</li>
<li>Treat each class as a separate problem, pick the max.</li>
</ul>
<p>Least square regression is sensitive to outliers, use logistic regression to solve this problem:</p>
<p><img src="https://s2.loli.net/2023/11/07/bdLjc4yTiRkGEI7.png" alt="image.png" style="zoom: 33%;" /></p>
<h3 id="Fisher’s-Linear-Discriminants-LDA"><a href="#Fisher’s-Linear-Discriminants-LDA" class="headerlink" title="Fisher’s Linear Discriminants(LDA)"></a>Fisher’s Linear Discriminants(LDA)</h3><p>See the <a href="https://github.com/GuTaoZi/CS329_Machine_Learning/blob/main/Lab_Materials/Lab06.Linear%20Discriminant%20Analysis/Lab6.Linear%20Discriminant%20Analysis.ipynb">course material for Lab06: LDA</a></p>
<p><img src="https://raw.githubusercontent.com/GuTaoZi/CS329_Machine_Learning/daad03239f0966cd39434cf8312ce640a226cb1f/Lab_Materials/Lab06.Linear%20Discriminant%20Analysis/images/example.png" style="zoom:50%;" /></p>
<h3 id="Perceptron"><a href="#Perceptron" class="headerlink" title="Perceptron"></a>Perceptron</h3><script type="math/tex; mode=display">
y(\mathbf x)=f(\mathbf w^\text T\phi(\mathbf x))\quad f(a) = \left\{\begin{matrix}+1,a\ge0 \\ -1, a<0\end{matrix}\right.</script><h4 id="Training"><a href="#Training" class="headerlink" title="Training"></a>Training</h4><p>Criterion:</p>
<script type="math/tex; mode=display">
E_P(\mathbf w)=-\sum\limits_{n\in\mathcal M}\mathbf w^\text T\phi_nt_n</script><p>where $t_n\in\{1,-1\}$ is the label. </p>
<script type="math/tex; mode=display">
\mathbf w^{(\tau+1)}=\mathbf w^\tau-\eta\nabla E_P(\mathbf w)=\mathbf w^\tau + \eta\phi_nt_n</script><p>where $\eta$ is the learning rate.</p>
<script type="math/tex; mode=display">
-\mathbf (w^{(\tau+1)})^\text T\phi_nt_n<-(w^{\tau})^\text T\phi_nt_n</script><p>indicating the convergence of perceptron training.</p>
<h4 id="Simplified-Training"><a href="#Simplified-Training" class="headerlink" title="Simplified Training"></a>Simplified Training</h4><script type="math/tex; mode=display">
\mathbf w^\text{new}=\mathbf w^\text{old}-0.5(y_n-t_n)x_n</script><ul>
<li>guaranteed to find a set of weights that gets the right answer on the whole training set if any such a set exists.</li>
<li>no need to choose a learning rate.</li>
</ul>
<h3 id="Probabilistic-Generative-Models"><a href="#Probabilistic-Generative-Models" class="headerlink" title="Probabilistic Generative Models"></a>Probabilistic Generative Models</h3><script type="math/tex; mode=display">
p(C_1\vert\mathbf x)=\frac{p(C_1)p(\mathbf x\vert C_1)}{p(\mathbf x)}=\frac{1}{1+e^{-z}}=\sigma(z)</script><p>where $z$ is called the logit</p>
<script type="math/tex; mode=display">
z=\ln\frac{p(C_1)p(x\vert C_1)}{\sum\limits_{i\neq 1}p(C_i)p(x\vert C_i)}=\ln \frac{p(C_1\vert \mathbf x)}{1-p(C_1\vert \mathbf x)}</script><h4 id="K-Case-Classification"><a href="#K-Case-Classification" class="headerlink" title="K-Case Classification"></a>K-Case Classification</h4><script type="math/tex; mode=display">
p(C_k\vert\mathbf x)=\frac{p(C_k)p(\mathbf x\vert C_k)}{\sum\limits_{i}p(C_i)p(x\vert C_i)}</script><h4 id="Generative-ML-Gaussian-Mixtures"><a href="#Generative-ML-Gaussian-Mixtures" class="headerlink" title="Generative: ML Gaussian Mixtures"></a>Generative: ML Gaussian Mixtures</h4><script type="math/tex; mode=display">
\begin{array}{l}
p(x, C_{1})=p(C_{1}) p(x \vert C_{1})=\pi \mathcal N(x \vert \mu_{1}, \Sigma) \\
p(x, C_{2})=p(C_{2}) p(x \vert C_{2})=(1-\pi) \mathcal N(x \vert \mu_{2}, \Sigma)
\end{array}</script><p>Likelihood $p\left(\boldsymbol{t}, \boldsymbol{X} \vert \pi, \mu_{1}, \mu_{2}, \Sigma\right)=\prod_{n=1}^{N}\left[\pi N\left(x_{n} \vert \mu_{1}, \Sigma\right)\right]^{t_{n}}\left[(1-\pi) N\left(x_{n} \vert \mu_{2}, \Sigma\right)\right]^{1-t_{n}}$</p>
<script type="math/tex; mode=display">
\begin{align*}
\pi_{M L}&=\frac{1}{N} \sum_{n=1}^{N} t_{n}=\frac{N_{1}}{N}=\frac{N_{1}}{N_{1}+N_{2}} \\
\mu_{1 \mathrm{ML}}&=\frac{1}{N_{1}} \sum_{n=1}^{N} t_{n} x_{n} \\ \mu_{2 \mathrm{ML}}&=\frac{1}{N_{2}} \sum_{n=1}^{N}\left(1-t_{n}\right) x_{n} \\
\Sigma&=\pi \Sigma_{1}+(1-\pi) \Sigma_{2} \\ \Sigma_{i \mathrm{ML}}&=\frac{1}{N_{i}} \sum_{x_{n} \in C_{i}}\left(x_{n}-\mu_{i}\right)\left(x_{n}-\mu_{i}\right)^{T} \quad \mathrm{i}=1,2
\end{align*}</script><p>这里各个参数的意义待补。</p>
<h4 id="Generative-MAP-Gaussian-Mixtures"><a href="#Generative-MAP-Gaussian-Mixtures" class="headerlink" title="Generative: MAP Gaussian Mixtures"></a>Generative: MAP Gaussian Mixtures</h4><script type="math/tex; mode=display">
\pi_0=\frac{N_{10}}{N_{10}+N_{20}}, x\in\mathcal C_i\sim(x\vert\mu_{i0},\Sigma_{i0})</script><script type="math/tex; mode=display">
\pi_\text{MAP} = \frac{N_1+N_{10}}{N+N_0}=\frac{N_1+N_{10}}{N_1+N_2+N_{10}+N_{20}}</script><script type="math/tex; mode=display">
\left\{\begin{align*}\Sigma_{i\text{MAP}}^{-1}&=\Sigma_{i\text{ML}}^{-1}+\Sigma_{i0}^{-1}\\\Sigma_{i\text{MAP}}^{-1}\mu_{i\text{MAP}}&=\Sigma_{i\text{ML}}^{-1}\mu_{i\text{ML}}+\Sigma_{i0}^{-1}\mu_{i0}\end{align*}\right.</script><p>这里各个参数的意义待补。</p>
<h3 id="Probabilistic-Discriminative-Models"><a href="#Probabilistic-Discriminative-Models" class="headerlink" title="Probabilistic Discriminative Models"></a>Probabilistic Discriminative Models</h3><h3 id="Bayesian-Information-Criterion"><a href="#Bayesian-Information-Criterion" class="headerlink" title="Bayesian Information Criterion"></a>Bayesian Information Criterion</h3>]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Artificial Intelligence</tag>
      </tags>
  </entry>
  <entry>
    <title>CS213 Project Report (lite)</title>
    <url>/2022/08/08/CS213%20Project%20Report%20(lite)/</url>
    <content><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="密码错误，请重试⚠" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">
  <script id="hbeData" type="hbeData" data-hmacdigest="50708acc4f1c0b12684af31658009d1dcb9b9e32e3351910470bba131d995b72">4107a32a960ffb4bf995ce54cf178313ab43e46880b39212ad942a6b68897125621005d92fa9a65212c12ef67a640dfcf22fb72db59d235152e702621f787b54ac776f96032515fc6918bf60e20be99fca403833689ba2ab7b26e76eb9c748606cc6277d38de6f406fbc382947c159d076a60e28de4da498b9dab1bf8d671c2fef6a297aa73fb59596ba38cc3825cd72446326b6a74edb26652f52b757034e150da159d95b91edcb4a2780120d9881d853e1a64cba722db634b3748b2975c0fcf7f3503b7d9172d192a0ea0642b60ec7732074978baf8be23a607f4edecda6eaf071574db8c64d0cffa377d56861b6fdb2dce2563552c7fe65535e19afd7310a63eaed98a96609f21c589adc22b8088427b99bf60286e9e32859d6c6a43f3d189264b27ef62fab3ae7f5caff0ad9cc5387c9fbe754b7a11f9b46812c805757ad0451bfd9de445d0e90ad8778026ac0330a2f022b1928b15e7d6dedb8ef503815155ebd331e9e4e50b8092c0a7e7bf6fd2b1a2af626dbfff58db3de887e994a9eed6321368af0a5f757f22566cd23e4745e6aafa58ed2eb05dde0933c1eab119e50294ee845a1cf12c94e326c45902f83c509101d51ef726132ee0734d38fe05310c657a4f0509b6837b6cf1e675ad54b939b114858df02d13405a8a375f5685b4bf7f2ef803201d9f66f665272f83a6b084a2a0a216656fe4a7dbc5e05b3b76805f493dfe30881ad296b18a8ec31441195a8ae7893bc6dba9a2e62677051849a130316dfab94ef946273db1801e5d0768d0592a4718cbe75f5809270e1d5a81fb8e1b7b3f377318d2b8a46ba85241cce078f245b250626a5068ecb8a6abf7b12e225dac0d395ad048ed9679f091df0bd391adf3f90e5c3cab1287e441d1a61b518015aaccdeb3a9d04e76869eeec971e18d0a88f2d853f8b930cd86f606bde5735d3460d6a8fd05ddc4b92acac0619a7ed43dc084bb11c5337ab0bd35521fc7cdf2e895f532aa234ddcfc92f9ea313bbd14602e51249f7ff5145602fc797659e4e8c887849042214ae21c0db95b1c228a9fbcecba7db5a736c050cbc2f239dd2f4692d3bac37df0bcca451957aaa804ba3b22cae59d79ef80ce5ca86ac511103576e0a2127dd3bcb24b3969826b1c374180cc4c71048641f9993bf1c477181168fe5abc9061a9760d2c08ed0d6fe56105480d304d370e55c80fdb2c092493d0e8df4ec637329b145b9dfbf6c184aabfc6650db40524d0d3a95004c89d74972b499deb4cb2163a55d6ca0761c0a95cce851f24701b366e4c937aa66d952755a1c2023895cbee9194ed8472e626cbf8f0f3c6ad9da2afc545f03da8701e801df5a9584779bb080c70ab44588c9668968a39cdc1c2899a934f42ea8db15070910b62e94b76af3002df561a019cbac93c367442ac76ba283f8dbea0b8160a8d2dc7f9bdd7f2b26ed6f42bd3ca2f94a0d9f4f047ce579a86ff2f61fb826b34d079376307c38954182149d691a653a14d9b8a557a6645a60b3cdb23939dd01eefa11a469cd0607698922ee230f15066e6fdd21914948ee084d0cbd658b788a9c11b7708254f5c6dbe1d5997202f641595867436b66c7536c8ccbfdc08c95a764f567cb4df08ce98bc9ba37763d5716794e083f64f4a97c8b71379671f472f7e6a0e6112de57405bbfabf59506f3f80c09653d1765a2e650eac5759d92815d97222539d587d5e16d01a34da1de213946c251fb0d080bf8f236c9eeabfc2f236fed1d78f2017dad8e8e92732529afb977593e71cc6728b75754ca055601cbde24f2789fb915c0bfe23559030e3aeb03f11487748577a179b8269eb07a591f01f9c93c3c47bdad7d2d119f6c8993d473330f4b96a161b34cba144cd95ef8e97dd471be92e822319e5cbb95537d42d89df4004ff35140f73664347828d863575c7488e36c6988d905ce5b0ee688010a6a0f18fd732957e6316f0619ae583d5fcc248cfe03f267dd9fc0c68895fecd28fb636db491959c08752be4e42e3e631e6a2635fda289ee235aa36f2033c008ec0d887248a30e722e28bb22bfaec6db4381eb8060bba4589d967800493e01f8ecced6bd0ecaeae816463d6ddd5898971431001a8f53c06070d13ce45861468bc8be7f8b34722aa6cc97b7c417adefc7853b40133cc9d8c760108f9ac23e45e873a3592f6d66ab4037a3a48ff249ca5a274a40ff1a95eff16889b92ee3ab476f5b55dc9e455be8efbd39bb6571d9812f0c7fc6bece871f3114d3d6e1fab8d52786fa312afe395834c67a19f3d1e2cc4f9e47f74e8c38b857c260163c2434451deba84e8d5ed0a91692007aec2d19212621f00503d6489bcf1fffabc2d3be0951439c606a0310e80b282367f3e1e445af88a4fd13c7ae8b0105b1991327eb96b956df4aa8be131046b7f9bd692628f3d425b051a0a274d467ca01a382f6594a420558fd8e2aef2bb187e77ef3a4fb6bfe958da336f218428e63af378292a87e6a3cd6b3d2a46c361df8bb96104e60137202f6f1c87e122dd263cdc5cee3078ac8b8d4e71d7c5f61aa2d8f17b24ed6b15302916ce95fa66d1b779fbec593350eefcf38a5ebbe36d6da3aa1f2c9a8e8eb4e61b4433f2b6b6d0216e312f6d59491f6a94b564b3406bff47d7e0b16a15635d4f89c451bd6dfbb0d00072fb75345f1adad0a558460fef6bd74edff5f3ea3c85ec588c032d0fe3d43f6d86c36183728049ec2231a55ebdf043d2db80f7e7d8d891cb6346c9948ad16014ae282e928aab5ea6501b505005e3ecc68388e5e285180d0cb2d5b9374c17ec015e16b9059968e2ddb25a70705f1257c4fed2b52c07268b43688f5925be8dd8a9ebd08b8949a1af3f273383e68a78261e888fceea679183db9eef80a245fd419ece5368551cfd7b1ffd1564379e431a9b9228910754685e79fde26cab9b86f6a236d5d612581b775663bb8e47a2b271bdfaf857736dbcd1deb6a75727873762849e8eba16726b87e0c22ab7e2fd10d29a8eb79a47dd0f4c1f9e4f759675a1fd82b76ea9211a8573806a370e8900617aacfba7fb5c211ec2a02c1636a09aad4df418ca55179d5d1174bce30462d27685fc2f9c2240f042fc4742bd9fc2d864c72f0351b52769e05a324a4249920a5f4f3ea4bce546aa3472b915e2c57432df834b25a9b779b5b4a8c3b0d6d4bb4ee3b87bb67f856780cdd7123324bde756149efc3c8227b86f6e50e1c89b71a15a5ca0e0c05229a4b9b29c6c352fec9b775297f606e84f0a869201d5083c5d3c523485b8a290946c9c9b7eb1a0ee9d443c75ccaeac666445cc32a8808c3d8a031164f45994068b3ff578e28675ccbe8c99b8a86583cc7a203d6205ec011a712844cabf42ab1396a4488a9b39f04b76c7e029ff9ab54ffdb016031c1d3b295c9675bda06c6c534400bc3a387774ff7064226c262675b5f62f3ce9310c67940851315e4c2cf4e396bf88279fb0f3c954ec8300b67bd46c63f04841d7227e945b84c367e9cd0d49a51bd0c6e35e99afdfbcc012b1429465bd8580fe4c0c9238063596b30ec83587f9b912e69c2e8ee4dfa3e6aee25d466e50532268bdab673ccf05c1fbacda6b75a0a1c19115feb62c793557ce58cdffe54523c8e5be96487baa14ce522ec9e3cb6cfbb2152c62bc417e64be30a0f15ed2ec07ed718a3e42ee4f7227353e930361e2cb609fe9ed7a5d9cfd366add11e8da93eb9cb73733987521352cccf13f65f178a71015730e94732cf102e743e233011a2b1a02f8054e2457bbb45227252054607da5ece347c073d1e16732caff9560621aa4ca81bfe1e715971e122465a9ccc6a9731e5673faf303c24fe8f03976a7957c4c9a0b0f49d24c2307265b5395bb88f36a63bc4930e88312851f6ea7995d94378b5a54b1d34f9cfd60bdf97a4d5871dac7579a98e082608dbbf0a554883379bf3fb2b4eca66fcd28ce6fec33e37d44aca2335c688208652a0400992200d5f121ae97946f038cd806c0387d0d0db4ca2db44f31fb3bc664582b122f7078e8cd94de1e54ca71c47e75cc86e368fbf1f1e07d95533ee70b1c2285cd1d0f073f6ccaf00053b8b858c414abcb71a1ad837c1d4dfd882f11782bb163f4c139f81ee40090b66981f82f504172f7ccfc7c85f44a9ae1ecb225fe3a18074af090209151b853b5a8da18c153085f425a01af74503ef935120f392fb4517aa0da84b1e6bb11cbf31978111a7b85b8acfff5e3770447243320ced6f557f8f78258509bd579d77d5ace07d85d5a09a0d9fa04ea15db664d6b5f99747827c6349a7d0ad7a601cda236bd5d9f466482142c17a4c0d799bc3afa883b5159deafc23a526e5d73af311ab11ba06d81a5ae71cdb4647a0d6d6c26cf1ca521984eb17f7eb18f33a52d1e6f7344b6ea9c5adeb04a5ab44137c7abbc327b7f68d268c09d9c7ae37c0ae85470c2caf5e38e71fe8d77bdfc5796b676c8e2852c9910f5f00f7282da54015b819110ba0a2112c579a5f7648ebaaedb6ab506e3b0963d2e9c3aad35304518894b168cd83f1f6d7c900463c8a4d745e4495c168eb03f29bef7cdf5bd70c846ea1a503bf111523d5bb20847716c0d16314ace0d34e9991de011e9dacc09e22d95739047177d0042d3cff687f58cff5a560429efbc8013bdbbc28f2b57ea7f2bdc9d84d3e3b2c98a9fec0ab429f3c296966673d57d1420f8b96e2eb1254ed31a53128eb2c6156f475c295661c7df95ac6ef70c456a8eb7359525476b49385561e2cb97ada02d0bfcc50f539f6af472e1348867b6cfc2359889c4c064d4e08b73070c3fccb0b4d84434de7effd20dfecf3a32ec7d91d079248c2fd6423a1fc85fd891ca19810aa63dcb6641e0f598fe636e173c6b231e8a9624902c6453091131801f3938efc583e9d6d3ba4bf8a1435756733a1844315bdb47acb10c51d3b393227b6fc9636c257f8a4ded726524f77f8fdf99534e67937295a38fe4f2131737577afda4762464759cfd6807c590f2defc356bb419958d14628485fe4b5edd30d3df0eb44836947a40f13eaa864f5b21b601d3966fdb3f79489187c51d82dce599595cc28fbd79211c8ae6f98f092e631b105b87d33dd9895c4ca33870b0408f64dd7085f6257b7b9ef0c56cc73093b1cb992c2dd8c4609ad7429f9b09875397e0b17743aa0bc7696f6ca6a8842923e47bb425b2a631358832ce1490990894dd0d536b9e4f587687cc995be8118fdbc03a68ed597b20b778e9a5c8484849fdf1d486e59d279283883a6b086e1c8f836cf0a3670c18297754d7c56d987f70aa5e50b040c8bcd799ac4fa999d09960ce19121f64169333d5c459bd9aeea7f394eb148ee518ec960f7b1359ad26169ed4c5a68b7022810117844f4f4347d40019e1b6b7da965850a45305b075abc8e007e6f75309e391130f308c5884799e3262e1ef259fb77afd0fbaff148dc17aec3cd3c3ba89a83120d949d3318936ec0323df6f9652bef74f53dcec7a7df066a153b24aa551463896ec73638889a723b3b5ce2f37558816b7df9075a2b17b06d1ab3dfc089d27ad1ed52fa79520de0304da5c3cb134f53ba50c58b04617e43b0a0db90c08713eb85dd934dac58ff960c1be1d2c14e3ff4c71173231e3c09ca1058b3a703ef86e799ce1a70b9ef867dab0106d3a966462e1e3f5108ce191b399e1289538bdc21a4df09151e7acd4b761460df59c2d9be3889601a492b0681afa5371083c314241cb3eba8e82e12a245d77478615f090ce5b1306aba21cebe5c942e721c472da2ce705356b68f05f91a2e55a4baa9449778c8e5d18c166c95d8d1dbcc0ddbba2a7a7bc6f561bdbc3df165748745be82760de3f4dfd45394abb0c9d600aeb1bd2b6f1a52325041b814cba8d42b39a2f202bf061dc97cd6139a47b20a69eb96772ac32eb22009b7eba8b87c5efa887af9e652854c6359d9eecd9f17ca1cab0aaf58c29790df7878fb3e30998e1ea3d62f66890ef056a530439398c60b81a988d4556e42fdb85793866c2f254a53d0c01bc81cf555d4698ea7b9d81351ea55631b1c6853206ed00b61cf1db9ee3f6f13a6cf23652cf1d916e50d8ad491575dc71413ce52160a749470958bc7a98895aa629dd315c4307e4f69eb174968cc1a7555b0f9475a9cacd6779988fdd48f1ca3580e67042709d6b03af8d1a8c21aefd334a1583e330ea7ae3b78e3167f3c5e95ba7140dab090b22fab2aee4d910f4205bfb70a263ea01956dd2bab0bfb931daf6d80e2c16e293c2c951e800442291d2f07be6cdf80d4ead35be70bc6ae3fbb8147961997d003ce131c9a7bc83234d8084675de76406d224d30a4b849bf9728b25759d2bec0edcf80ce5507ccbda6f3feb03a0ce8f2af7c72f90f25e4b7338ce70466d91ce9e0f753711dc4b514a118afa3b10967dcd9d0f2b24cf5f6addbff7b8bb9a2c1fd741f9b496daf6daef8e4a80e58d396a60745b6293622b1c7aeea1e87da670998830c21e67a4df43e0302f877f4f543b9d1e88f78320cf911ebe3bf618d3a679fa69be6480f7275bcd3b70d035120e2261fab0a8cdc2bbcc1bb1b7e24a4bf905929edfad562819574dbede995802667212f768cd1d70bfcbed861ad0fc5878d33e1a7c499acec272a20284ace252778dc80a14c20a490bba9b1e8d110d41a0dce5dea989b06bb857a7706513bfb577a59b2910985fdfdb415b2750d72fd8ba9f8051a73d43094a7487739cc51bc0a7b9d56794f17e139e0bbe70c6d5e7aebabda4014b2efab09b531764d0a5b08d56ae9fe29a9ca9b3c745f2143090a7706450b14d808cece6ee71ebcbb40ba11c41d5bf16fd8a43036671edd74a8cf54ac9daf569b1cdf71a238057ef42763aef307dcde425c96e28a1f8fbafd8fb6523b2ec5a9bc29c6c8465df42231eea1ef5f170dce3e9a3e6d399dabf862a8d92e33975d71cec1263569e701aa6f1f4bfcab4573956517f29d5ab39c6bc16407bac35c474330b12f8dfe7ff0e45003648b405082ca93d269cb564365f2b71030064895767501d62e73aeec432216d386dee0545a17515d257f7672b30d91402ad3c1e7b97dc70a2731b6818886fa474e4ef3ab318bafa060590f898dd9e74caddd1ecc3b669bfe13863ef936f23b9259c76cb02199660c934d5956552298845e0ff24dc6160deb3f962305d7356f80513ba10c14df96815eae6541a8e25e7bc0b6b84a49e5b686d36e91de39d38b67216b66014e9ddb5981a2d82018ffd40825834ec02729b02b7a543595dc0b5d075bc46aabc2b811145b8f86c2f1df0443f1269913090bc10c8650adfa5cd9ed9aac0b5bd4ebbb72e9f5f368cbef41abb14dc85472f8a02c4b9285c4cf4ccfb826ea2f5f10cb0e5c6fd00e5888cc302a476367df041d610bdb62168536bca6e43fc663bb1048dd9a13d6527f19dc7680a22ec00bea2564c103ba2534bb5c8139a2c21f1294bf722ea640e3e5af155cb54ac8249f5717e27acefb573819ec4fc2b98bd980b8affb84d936aaaafcda25b51b6a1123b56d1ebb7c6c3db26f21611c62be4d99e0b0bf9b0a2d6d250163089695def20478449103255511aaa14bdfb4b0d9dbeedb7a54d5ddbd8b49a4638a3ed767f290d114de0c8b5046b203ad4411346472647fe210ccb4d2f7f71f0fa0f3fbf7e16fa1b44fa04017f381f1fd0e94f8df6b592babcc6ee72d39d74c17fb9644f23888797db88b3dd20842aca0e76b8349cd91d63f24175d1358bd20a4d5a515e690112db163e12fd50a425fffc78a99d33bf9b51928a2de5dee39a9080550032e693054a7c0e089f20e6375cc2dc37fcbda9b873ef11bd32e8e7c641e31aea8d537c573c42091c946336be8cbec7307fcfff731b159e62c8fa383667092a78d06072c14a4c870d4bb439133f990db735416ca4eba0b71a3591b79491fef21788a9f7e6a1d1ac6fb8e1d90b61156bc2947c16b64c92f43506f4601828af6f9080bcc2abf68794f9827b1744e571149a19f4163986b7e4520236999a73f66cfd57b8b20be346e1eac6781f9fe32cf484d1ccf6fe3403fb3440f3b774c22efbbe187bd14627873e7624f865dc48c5b69dd5dc08c03b986e1f85163e76b80e33ff3a7305dd7da7a98ad93528dba1b23c2a701a152a120a5209cd07aa80ff96b0f972fef4d6f5947f8f84536445bfbbedf0350f5145030f797dc70109baab079f79a22a17f90ab13c801a37189e28806684abf42ea99c819ac09cfefef7a14f0fe786d88ee43cbe8152c2c09425ed2ba5688542098aa2942766ed8cc9d4bd71f842e0e9721cb3271a23b447d73d49447ae3844a2d93182600fb3721cb1203f7e24a1b49d6d320b892865f8c8a431423521a11fcb565581363eba96179dc0b6012e69f3b5062e0919c2fdffb5508cc5c653e91249a3e8d4abd224dcf026083a59eb5fbb3eee2182667b704f0eece14afd4e688ce6dc302adcfbe8190cb23a44bca3f58995a08e64e3941d4e91574d4347c28ad823c3b2aa523119fd53949af0a70d0c3d6e0983728061a706ca463cfaeec3a4406d0a447b8fd2983789e20a56c0b521c159e87202045045824588c94fb4c7f80103f97fef79ff1c6dd7d5059501eb11b01233c60a12400fdc325730f6655f0aa43961ff8863abeec24fcd338d80746e456900abe34b208c019d8b31f06978c0357ea5c164bd8fd9f2b6722810a985ea0283df1fa2f387777f316147545c7b9506d623f0b52ae3021708de52995a60a917e143b18fe57dc97a32aa89acf4140293210350eebfe25f039210edb86382aa2d6f18952ffba0420e60fc1d2101515361a0c4dac9b584f263a0b637f40bc4406bc449d6b2649ce4cb1dd15361534bc3c01542305a728db4733d8e3092caac59059580ef2e9cb2b988145aa404300fd51cabcc0eb15683415f1f44e15e136f5a9be582e85f94f7cd6af8e31a5fb6599a838aef40bd7a22ae7a6748621cb3516e0fba7ecdb79eb14e100aaef77cf4d138968c04c954127833bfe01717da3ecc17c4406db2693504ec160148b53b597b4ceb741a0d041668bea1d4fd81777c0509c643c635427cd95520a5bc080e230c31a01ad5326d5d097b3eea8f22a37d935ba7a88cd3d60bf2c8db56fa963b36542defe47f0e35be0381915af8d399ab594ccc3d98c656f9e0b83612d6caf3bbed0534db18467210b9f067572722f520ea1b35ed6af831ed3e7c637eba7f304039cb83d49009fd4b79f52c56c42a3e9861b84d8f30f8011f0aad89a84cd304b65c35d526897573695ebd9bfcc0cee3137149ffc3aadac1f918ea798a9ff837e384b133d860aeb6d51ce8d129108c6919ddf4d7c9bd964125d20f72ef323685ebce7e863ed46a27427571f197fdf3b74ae5dc8a410b29c0439af0770fae4a109ab4e82fc29ae0f5f81440ef9679586a7d05c0bc452c823cb3911b559aa7da391d452abc4b39aeee5539f21e58cc25ed20aece2b7cb168252e352aa8a83976b62a4bad985e50ec58de19c765a940590ccebe846e8af28d8025843205fcfea8fdb10f1be78f3a2579a18aad3900eaebc5500e9fb0192f1562d4c6eacbe931e1035bd7bee9210697b5bda8882269d9a94a1febd4140983a01db0d8fddff98da104189ea00727ea892586a3f63e4c5d37117f050457f5768185f31e0173b158ba0aeb7f03d70b0593ea14780138894376f4f516a1b0f30a02b70ab19d42e1f72b3bb69481aa202a8a6b0126133327e897698326482c1b83227604c5129a4e6bd598b5d310eea0937d18c63a511b6f7d4073f262ad70f8d76549e7f92b2ed9ea53bcb43583dc39b8b065c400cb41430afba2706ba203fdb7c8fcecfd81e1263c7fdaf429523ab4669496f23bb4f3e91c9dab3c9775b53602d16b58a9b59ca8f9825f4d7ebf23d792a3f41df2433748ce0e329b0b1b3b7e7c3103bf474af7bd07c2ca2282f5747c6186d1b01dbb51e80d1d256252ac2284d31fe883585a9c1e85e3a4d1cdfacaccecffc44cba1e697e78a423d93293ca1331dc8e0bf237c07e6eb3cc7794ef9934fbd36541ca7a85eb77c2b75eb61361b747fce44ed0f3f41d2b42cfbe6057bea3f7344b1fd0d24af2cb634889a82bde2a26a622cc7b44557ce6b0dc3edaa73c2820b07bc5b5812abfc36e9fdeb38626045784897ad2f7549aaacb2ee439d9734211a3204809ea66e94fcd63cf7eccb997ffc675956fcb0982e29506a56219a17256a14c631c6d5c7a6343e4dfab5466a36d762dedf30fb7c65734886892bb10b2420b6486a6c6de80b464ab0b515ec8c2cd609a019003cde6e0550a2cbc39f478f71e29ea00edba9d2c0a2238690a069cf188568ed352e66767a2cca15dda3bd5eb8fcd8794d0e10caffb6ac6078a80086e31599df618c257d6c6f794756ee161782bdc5bc3df2da8375a66d2ebd73e2f8e2a143bc7bf2bdc1d004c8a6b3b767417e93162ba34257ee5266cdb313d6ef675ac1121f29ea2b00e1a889d198d279f44a7d8d00229c1222c5e5390c29358f9418eef6e5e9cad2144ca14749a53b83fa78759d7b368b60feca9202505c72522a0c1c746ce2c55c37aa931b4291921ff930cb960e3dcd31995c9855f9433434cd0441c98c086364ee020c32a96583e4d973d43ed597436c6ab3c82c4c0fb25bd9ad4bfa1cb9c4ab2c7c42d3345d0e397cc82d69c5b39f30f92b755064e88da3c449653809897f342c0c9b0852484ae1fce01dac178f81fdf0b791099c03758b3611871231c10d98542708669060b5339c8f4ec60a95b22222c8ad1a881105ed77eec47d7a78cf4cbf76d13dd84c77432f4a359af4276ba0e583a02a69889f0d357bf7e1fcf2c41e8e5b95fe40a1378572bf7b0926027620e9087acb4294a58568104da34f690aefe2edcd4794719651926d5a546c7f299d88cbd4c1a6c5fdbfbff0c0ac8e26b4276c6aa42dde4d71160920f82eac3bf0c25bf2b1f716900d9e3622062380ffe99e4cf8b1ca04d886adcb69171970b25c95c55865f09ac86251c744e10d19e202f69659c1894d9bfdae20746e0d66928f62fb11c6ebd6d5a4efcd38f8c7f2296aad9b3ace752e2ba9d52436347a038507500d159d6a0591d0b7e4ff18110a8bd7994f5672cad3ff62c9e57475d968f071f10bbc5ccdf959c708dc347b5208c6b50507aa0c2da9cef9a7752412b5437fec6a18d617b6843c22765811452d9f91078e9f738afdfc9765df3d48d923a3b8fe19bff6b9e67d98710fdea2342f167038ba3a3ec31f9a95261f6442046f30cee22ec96838a984c980a2ba655bc67dab366789ac62ffe9ee26b2579c6f5336c742790a22979ec0fc4c62b83541dbc74831d982df9cc641dd5e9e18aca70ba3a41e0f23496a6fa08ffb574f055b5b3d7b6018eb05826639184e1fb57409549c043ee79be96391f7aa38099468c6e5c50e852e915e669b935f420b064fb658e05437799063cbbff0453517ac8b8ef655df4a1291d2511c01460075207590d0b61f0e0c056df5d9ecf88702797ed22012bd848d6b50f57d90ab1481693fd02a8cbcf9f23345567dc837a9ad705800bae1bbfc6c6fa6e7f788bd16abf5af84fc5ace4de6f1ea32e9a32cb53d6a2f89b9c9a74042552b01b68ca55d582575e1085aa62ea97150a5c9f913ae81d8bbdf4136131bee9d940d0866e68f9b47557a1c5f7a3731128b3adcb204dabebca821bae98b6385029e8328bf665919881b90d18f43a19712f082eb2f30fcbc7c56bca68defd3de41b15026644bbf2f002b6ab33bf201b7adf2a7a373c15280c08ea623daf889b8167b39c594ad92d31229c7d7dfb4c84cd93dee7f29a7f157de56721ca87155fdca837c92f04e47a6886b027788cdf12906dd0bda50a714088c68241e422f2a640d8894ab3e5a1567aa53fcdd1d77519a31db0f3ad47384e124c73ed27111407af19e00ac25b94d00efcfbc12e204a6f2125213cfe98799e40325fc26bddd7c01c5238dbcb968964e1a74b7201c48a5098cfcdca67eacdf053687cf76dacfe7cbc8fe61292b6377269281da3a05e8778243ddde42263cc03e2ad315149ca4579dd59d0a442a5e942947d50e6c3bacdf8342cc0bc11f389c47891093edc036289c8f805123baf47cfe7a299508a9f2fa6a412b5b2116806f77acb6a607f639ff1d03c1174d75ef1b7375fea069393806d97daedfbdd58c36ec485ca1c67819db0fd55fd53dfe4ca8b964a35b8754694ff46b31b02d98f6702e3248370b54b9eb7cc1308554cb763fa35a7fa85e3a08af8e7ad21f261c50e1b3be5d83aa1e5052001acfdfe72286d8a8d28367f576a62d5b0bf62297a50b2e3b6b93271fc50cf43f749d20a0b01e50189bdd16e5f811fc17efe18bcb1a9c294715f2289e064ab51d566c377a48d6da2dbd663c54efede71e569501e8a7ffa8c4abf3b30a9a0066376a12f13b68aba70b6863e1211ef76ed35ed9aa34802855b0eac1f3c83178b240ee5d5d1ac39e45223e45ca27dca2a6630dbc6ad5e1aeadcffe7bdbd2d942a7cbad3981468aad40b6162894c9c371769454fb36ce169d024abf3cea63c47e51fc8ebc60e42a64fb97a29be17034e0bdb93b6efee7f15732c12d31a2c29d68face038328d0e8269cdc639fbd1883e3ffd7a3ef5f9ec4ca094d6cfdfe6ea1d765a426d4818c9aab2e550ca96ac0a9d2543577e5f7b5e91088897a2a904fdea71b664de65557c1b391365408b2ed80a16c49970e923c0ea61cfcc8cc5bb9a8e49018cd7f23ffa86e251390fef01c125da326e1fb063edf1d33522b21c46f40e4a3bd60a8e3ca1ff1fd7c0b264ccce922c77b01895ce6f0795711270a8c389191295900db7be03a37f0497b1706fb7f98eaf9ae6917c0a36c9c3d6e67f6184951feb88ba2f41074d61841f445b380fe1bac886aecfe57939d65ef2afa64ea3a2fd118e363e2e23504283dbc3f3a11aaa62f7cfcf6cdc80e7f0a2c5d49fa3594a1c04d44967fd9fa3ff9cd90b40e922ec0751bc9c9be1b4da8f48bfb6746a75d4f3ccfe5c86f41859050674fa3eb3fd6aececef59f008bbca9cfdb93ccb0496975116773e11c0344b8c91bac8dc4cb81a036fedea705d126e476bdf32a197400aa0d88b6c76af91ee74443c41d4a6ea922f84ff95670c18a8cf7324ef69c581c429e3e1ab9d85a5aa0d4ab8e92d483f9cc97a9d25f2dc273403691381540cb36e2657882a386ecdd5326a9c9e224b703cea66ab5931597faec048d9501808218461991150b96c9824eadaf29fb4591d6a31c98d72d1c6c6aae15c166f2824a7a59b7b537b61e33eb2e84acb736460b659a3d33f082b85b00311bd75ed008a188526022d3eca6f8147f9d8e59534688792e0407ba3dd66f63d1a07c6b1c07ab6db2284ce7aae636785bd2792ee5454256a2fab86b6b3bf10e477382235f1b47de2cd7b2c7c012183adbffdfa11cb0259f17b5c6a2a33b0154c40a449ede77d6959987263743cbfc49425d6bccb35b5b084d35d977da3efc0b82f065a2a5a7fc2fa70530de372de5e0566e1d9a154010db944c08c1fb2cb57945788e61e6787ed58a7afe22e9c14b9af38a5b06d9540ebb42b24c27c1aaa4eddedd1fad073bd537fd6705ce99ce93ed5a01596d0065e115735ac73836d583eb3cca63978b6bbe7df4d1b1c21172dcf6ec2dc2890af23d8b0fa9e64103f1a25ed1b85fc74e62126971f01cc8498895b03143e3e16b385eaab26ba42a2274c9be8bdd472888a0819404c13390a5d13a5829b4c2e3d1219f98abfc2e498bf4f5cf9af87d1bea92f43e7b11b3985134e8a32227116589f5186b0674db0fbaa44a6dad09b349bfd590daee62651a7382b01b15fed946a6fa9a403e87562db729c8900a9534fdade764be3ad08c2c56794492217f47eda145b4fa91c917b1989357873364dd18aef86f9948494953b98df18fde307cd2d56b6850ece5ddf85faa48e62e7fd482602634948994822f9ba5d7a885bf493735cb6ef2de91509b5c341901fc9ecaf2dd398975c821e5613fb63cfcd0996a0c4acf29b92f6f4d7f31da1251ef698bcf6cb82d2d9e898428d14db3ccceea80169c124fb8aa2e25e09b33b8d124783275ea8f0ca0aebc73443843987b2863dbc2a0bbf0b14b1d73ad62d9e864ca9ae862becbbdaee67fda4d081dc283472284e8a6a89473ef9a385ca8ee2d945c1059ee679bdd3c90fa4ed407b974c6cf6e5c9d2da4d0d0a4825691504e9931fd25f32f2af75476bc0afd8341fb1a879643ba814ce28bd9a505064aad6b60e19fcbb69e62c71250fad8461c03f4736b77a4ba9ade1d7d08d0771a74b51f2d09b1016f85e526ad61eb3aa3676489cb42f28bb0afa8989bc5bbfbec9f4583441861c5e7a7f5a0bf642d482fad6cc8eb9f8fa6926946fb7394f6b6c02f84d65a140467f809b552d7c71c2d92965edf65fb9c11531356e72f02bbc0ace46bf764292734db365d47050fee695899f52796ead182f537481dadd052f3b34d3e518ee7e329bf8ca84cb3c7eb92a1f90441c90f65bc38694d7a2e85ec1eaf5f95ac050f4088ee47332bc84863f61235a0e990aabee7716ef5401e8d57c114903dd05791ed58c4349432f8166a30b26eb388e2260a79e9bf0ce4a06269588d47e6a85e44ef6a4cdccc6eb35b7978b6815da73f7ceb737daaf069150c3687a672f4fdebb69ce842f4f5073489857b213b509c623bb64420f3981eb6c1b015b9ba087e3ac3c799a57e1893676deffa7f8b6a33c0aae5c1168122b3966f60261599dfb9e77c9d7a271e986982afcf886b46aaca509ea8598983671954111d93650a7b948e3d87d50826d1a213acb55e75e5c10816a9fbbd97ec794cf437820153013a1351042923a458ae12bdaa75d070a58bb7c338b664c8dd4fdd60857ca2d9d540595cf17bb701ea297941709d213255701da4c08671425d785ca57c981a1646597695e060b65d78eeb161bbe441e27d1fcf8ffbd9cf5234b253985f23ed98a1b1b1ef732b5416a9764d507a3768efd505f9e09fb145f4dd14a6c6ad1cf7fd535e81883bc85dd99c4042d42ad39be52c76dbedbb5f795a845a1535a81b4f54d56a49678397d436395fcc65a02a6117b957cec03876247d0c31c5368e6c2eadfb30918328a4b81bb7d63f819223c5a8ed407055d28760d64ea77ae6fadf1a916fd15b52ec771fe55130221929ebd948d14296f61e2e3bea36c4db124cddf9a016e0938b8a1c5bc120639b0456a25e998113b55a93edab8943df337d68238193ff9dbf7ae502f04e187e8542895bf33c690a47a6beef9d36d9a5e2ed77a6cf11493b05b024db622eeb996112646c70583b810ae7bb4db31dec113c49ab2abd83e73aba674ad52a9426ec09119d322810fa506e7df94b9ade6afa559c7c76f985b317431569df6e705091d3ed3f5bfe0706879438cd3e459370623fd3551d8d58e67ace04bdcd9aa513c22600ed90f349dbef72f92727c2977a4c0b577a40656ad78230221c796b70c73ff76e9e067418ea331c56f1fd4d5513001560ab2adadc2d9f90391191ade09471a508a5fe6557d7cdd3135a677aefa27b8f91884a0dd7957d40678c134d87b2849cb0a3b1a1b912a59a2be27d090896e36bd0f2a6f4848f163527ab39c87971e5b9a85fbc40b78cdade493de2ba2e55b0c4d429b16319253bdb9ca464995a33dff6999bb742a128206e75181894701195cf617952c99d05ca25ad7a2aea49f8fdb7355a4b38d18d23849982d3880deb3e4fc81c617163425e06c11f9b232ec13b2747bb7151524b71ae602f7eaad04bf40165b03221329ee858af5f2ecd293e650c27492a8fcc1ceeb29928c3b9690e6727411dc1fa7ceb1348592830ae78090d0b49df98e2c6beb8e6851461aeab005f64f2e7c85f343a42a3e8cbde82f6563db46bf31872b884348091ac232ec4962983f30c40b2fca1688543d400823c8758f6bc869a9a5e5b8aa562c055e0e9a68d81dbd38d872d50f22c68477e07158de756c5e06621a9076a0a628b133ea2ff2a3dcae3f5e65d3e6811e831dec2c077a1ab203eef673cd1f948e06e8b99a0b697d68a5301358920aad316b6a3814d824d379ba7b59db475c86a25dd05cf020f7570eae8783ffd87897a320efb0c6bf9a9542852e59077d0dac9e3bc07bdc7e0880a83bfff658d50d67b328ad8ea04dd17ac210f892813b66e5f868106bc320e14344dc7417c0f93f1a736d8bb1ad5f68806a8cd62bbfe7e9f6dfb665b0cf2608b2ff913fd989877c4d606e044ec5eaf7e85ab6a624366863c9fd62580b337f85c7cccc4ce0722deb6adff778098966ec59dc84968114b21298a54003cb3003ab5a4de0ba79121747d0f49aae25be88c9f0364e10fd8b776d6ece6c533fff985de17a76a134fa5ff1526dcc2691a967edc97047914a30025df59650cacecccac9f56f53f87098092f1f9d5de2f16db164afc22aa0cb3179a37f8eaee6ed0de7d77cba5ef6ed70363f3bc045052ae77d059fffedd68efc7b76ca88dbb9145a07ffc4678415e2e0c1e3b12688eeb5cd8ad488ada807146a2a45e1833f8e49e7491262f44b5ff6e00432bc0c946fcce677ab939efa2f3f6117cfe946d436b58b0a0503fd78f24d7f384c97834aac203029ad23f87c3c2269af02713b7806e31ce8ecc48b3159c9988cf47570f853769d618ef95d2a855f5f6e21a2c0937cfb0163b7e3104bbb2d7b72458aea402458fb2441cfc5a1ed6ff3d57f0e72357a506352c63cb44350862e40a7b3fd0cfc869f839d8c2b80c9ff313515afe67df950adc8fa4929c9bbaf96107a7eff91ac896c1577c63522a62d7ba3c9229ecb92165192eddca23f3b46254141a6354a56face32a8a7230d60ce542459a69c5e3603b2c44a69345f90c61f649a1b5eb1c3b4a11acd974b9d1474ab3a9d1300fe7a09d5e2243d14703aec811381b95ae6cfb26bfd52e384c18883167abea02ce21cba374f47e5e020f6b2796a5662e73ce44f6902ca76ea370e234a83ad8cb419cec4e38cc0498cc03ccd21eec9b20a3f88b4c84ead00d57b75742d894089f5434b55a35437ae3c87cb4b0d8ee741229263a31ecb3d7a4697fa467db10fbe5081326c3fd459ef8e10fc36b8546df64f9385d6074af4288757b94eca28fcd667c34b447bbf949ec6b65287c1ab69df5bd1895596ec5df2e1a56f1421912a75c0d9002f4298c3c86baf10efa98d125a8cd9acf71580d232988d6c856974dc761ab6ccb710e3903c11238b7f9c6a3f3b1274ea9b0ee16084165641a98c789218865c830db34f5e085076076a753b1078025cf9ec86bf246e51329d4883ae97961a4fe71c2b8d927ce1bc35df8bfe655a48d8cf56f26cdfc10a5150cb92d29b06d371f55b28e96fc80374e0ff10fc8de87c7534b6f757f8d3fc62b7cbd8f2f58c17514cdd3a54ba885249084877d0779def676aa7097bbde944650c52eee8a30fcd52636f19171c515c9124f327ff994c935f05900a46d66dd7fed25121e2fa40d7447130d01dbdc9f5d2d604ef4a6a54f2b5cab8a191d58044a9080c4a3f78ec8a6893ceb2cc9ef17bceb2b9f781287135a723d5a821488fa3db31a3252bef977a109c47d6d818f16a665900d2a71293a8a56500b10061364091c211a22653dc304b818c25b55a1ac30155454452721909a8ee0dba90285ecd6a561f841a53d93ab96fdb8d2f5e373774300aab20d1e8842e56df695399421c1749b28f1e714164f7404574edb5b0f60ec6008704178e51c0b0bb38c074efdb5d64d49e736728bc496f5aaee35903d362df159e685ff84fbca6a6ca65ef199845fec7959194ca01cf158ee51dd3f036e5768575e960f31f079186563facf0c02c4edefb4b75222a9ef16e5becb734e86a50310750d4f89a92560d97aa3dca82dfd4c13a1e193b40679a5727f1c8001cae7ace93099b7e04c8ead2f5ec4b16f68617aa1c4b02f5995178e757dff4d202752bae1ecd2267136e6866a7b673d8199ac3d0416facde140aa9c1550af595526659545047e5a0ecc1d3e060df01fc35a587bc48c889d1e9a35e2e0118bf592152e135e06af962ff281f65bb0727445d379b4dbc958367fda3c1c5c859a7bcb58adcdf7a586e5677cb7e2ee82aedd7f4ea6cdb04d6b84c4c782076541ef95f3b49891b62ec153c466fad61677ad0a51c0b20d1820d82fc7f18bdba5d82b6cbe92f81b3705815600447ac81908f7fd173f887a451fda217f7325f64732837de29623cd0aff875b65d0b9bd6760bdef36f368a8000d0270cd35d94f78b6badf3483f7998c807244f848e97e285c5f27b36adf8322d22986f3e7a969c32c4a671cda80e3e0541072412c4712d35894860ecaf2047d797b3e2085937466379b62f672f976a907aad803c7e08adae0729ae476b848433f4b2cc9aec1b99f127c210b70789acdac84fb9d1b17c6da4e2be842ea2c02282b180ad4d54c7a8ef610e413ed422bd02f25781ac5dce326a91f3ea018038635383c8de4c1c4a8ec11553accef42cd1fbac262e41a3d77ef5bbd794d19b25cb1c16e21209985bfa13cf4fa973e3840c977e8c164d5c27efbb2cb71380774f22d50b8acf29aa352467e99036ea0e9fcc48a40228f431dfe7fca5fa78ab26d6492f35492f32cea4646b5dcf23c7529a0453dcc44f42b75c3285ec56b4ac09ebfd1bc9896a459138a3d72c426b7f564650b417fe83903519605c2b92ee722b8ab1ca24244ad25787591cd313b858f29e934d3853f03df3c87822c200f45651336b5746c18910980d4d41c61d1e9f555e66a2b90ae513968fb657e09a8580e380fbbf7fa09b2f61910791e9baa1aef4076722cedd0a0d259dc1c193f7bd65c8ee821c10c182e4e0ac6f50f528ed80de88a09611f7d72ce463fd3acb516aa08a1f5619187844e1d2c973f69a06ad779b304bc5a6cf349a00567dd97fcfc25a5054a2b769d2a6013caa5403dc113a93980103754702d39c5dc5a44d29b26178a3451e699fff919fb6c152f6d299122bb4b309ba6d084b60057ea4264187891b7989e65ae3ba9298857ac7247c73187734c6cb04ad36778cf72dd252c991c07d729f50b913a944c064aea2d75b8301b9de2999c2c09740210fa34971d01fb082907e402253a5d6e60909985d2771ece324a4559acab8af72fb9ace4ce9595e42bb90384f2b6178b7812971689ce3aa0534daeff28085784d5e40eae2b58e6c90ea556112f2bf3a50172214a8dc5d91761009002ffcca70c78d10f3244d19cc452451b45a8300a2dacc19060cff97f19fdcc34806e7493087e81a0e1e5d68353072fc5c6180023129a6922c03f98c63944885467d1eb608d074166e03b9b0d351c8b0d53ec2cd23130b63f4a12bdf172963f5a24db8e442b5dec38ad9f0164333d3cee7e72ea968a1047c39ee2408fe3f6c2a74dd0847fb24c8c60630c1e40968bc3d68f8d3bbabf077c51aa5bd2a2c6e9ca888441b3ca10936c62ac0c08e35974ea1e56d8c2460586c4ba553ffc3e58123ad222f7f4e4fb4f87449a40dc6be5587bbeb8419493b62439e9ce5ee73d8ac96d80dfe4e84b94004c3d14d7ca0017f6897b1549a40dc0f59935bdaf28115eae0521cb195e93b9e2483049bdf490d8f53509797b6760f199ac67da93019d5ccba70f100f64faecfdda0b3ecac605bd69a7746c760c4660d1cc22724215c1da0d1842aec3f1c4a2b22508715677c51d83d64242d003248f085587bcd410e9b0a3aa07a46b51d7f33b69e0f2d6d1f83a92725e7af5df3e0587d6fb096d77736b4fa183b4996c3241a403452d7ddd1e4f3e8c5d1a88dcc46606eb288a76b60168074b6ab9bca00846086e96e6cbf548244756fd154533b7c9023a04f20e8d475e332f2ff20c20a0f060eea3bcc38884b9df756f70119990558776d69cf1c2c996987fcf834f48f6c90f6eb67cc225fa95fce877e3420aeb8dd61a453af051e47c2e6d113c1b70192e780527056947c50ee2a3a70841067524d380a21ac30524a5a8e86bef209903a9d0aa62ee7f4adbea41a9dd1e04fab7a4daad1303850090ab908826c16a05630a763de9d643e0ba601b6a1eab71e9c2c26fd0801817b2dc91abf23f65afee0f52001a13bee442417da3df7eec2938cb6fa18074d63e8e5574701b34c2b829ac0190f12ccf0bfb3c0daf8d690b819025b76bfb634e3e1dd428ffe01bf04777536922da8f0a45b7814e02fb78002b33a7e27db1c552d17a568c023ecf2f0f53ec195f55c35b453666406ee67486020b6269253c688485488f4c912ec27cb707071b562d97206eec82113b80ce8e17c2e24cc492f20758d20ca3d6001c3de6af90a7dac6e7a25bbdd1240b5ab7b83cbed9afbb8c193a9066b3e8e56682eccdfe805cf020ccd551db817d25882c4ff41a1de7ae9efa5b6a1fd6bb820c8365f88257f394d7c06492423dd0522ff8f1d4ea916e20493d181c869b2776bb3e7a55a3320a04a7b8d76c40f0f93a36ab919d8b50224631e813b2214d97bcf9c026573508f81e31eeecc137e6896b253febbc0ca0582bbb1c110cac57397dfa3886ba9576be810a948f1607eb7ccfb901f7e635074583abe06de73a5fb260b8681791d240b963d7a444c18dbe5563acc8c53be38b2bb1cd6e04efbd65cd8128c979cf8d578706f46202733e4aabc51967791ad830eb2db0629ab003f0afa34fe2410a1b7ef91640dabf81c9aa1989dc09f50b31e24561d11c98d2f1ee66514aa06e87c688a438e05eb566338da6565a28aeede2ccf4a8deb0e6ec3cbab70c5f4b43b2fe1b711a4997d53a5c1928133b1030e2f62778adeb1191ffef7b0244ef0452ee355ad3a539869676c98f5fdc54c3326f4a54196b7bbb85dd87cbd416bebd46cced1a562ba6ebb559ea547a5049f2a87a92038561e89bd428b26761443c0c5f1a4203e4f58cf06c95331b0d1a13820e4a92ffd362f36fddd81e57523cfe87e067235e06991a604402b0f5e6c4402714737408578f44b6bcba196126145b2f94e047617a65b8bb8c01a02aa760f803a1ed642a07403a147439eb18724a84c101e89e8fd3ebe3e8b457e4d5a75b771f49348245ca2271042a3afa57f425b11a7107951aca25820cefc7abfcb4691aefefcbf292abc6499f0e19011da13b51716c7ec9fe5af217852743ba38d1944d74b9802dd614e2d5fc3f0c38e2e70adda2e1ad5bc406b1b9fcae728ed542d9eea0aa63d9cbd1c1cd98dfd97a71c610ee40e9329bc9db02d3f4c08e8758bd85238ca2b26d84b20be937b8d0667ea518f628d5d4d50577ce4711db61cdd8555e7331da4a3dad4384b8b63a2ae4cbd6070a7992e876cfcf35faf6512632c31b7d003ffedcd60a6b3fbd4aacc6f1c1293896cb0ab7e672694c277b801d535ef15446c376866103b8ac293488358ab8ca671aaa9af3ab70b0488d5d8ee2c4b05c8d6250ac143878c1f08926c287561832e8a834d57c5cef4b346e806cfe93f1bee61dab0b8b492859cd0725f3afa6249a96348bcbf018d1d4e2e9715f686131570281d071716b054321561c3c3252610daac787a0cdc8710c10f7989e69aea6dbb34bef48173c8f319e7baa138337795e082d05b8dd61cbaee1e787eb1226514585ec0dc89ad3bddd09641301ec2782307b4aa57c873ceabdc9210b8d36df8e55c6e7fde4deb2f2e01a4515838392fb0da3ac426702465f12ef8bc735d790c7ab0de462bd5a7e074470aef9ec981b5b80fc7433982e2f3d93f8b9a817834ca2c6973d9091b181536b3badf5ae5c02952a9e4082d1ee929c0653ec4cad43247f0673c23a75ca14a33a47a0dbf148dab83b4b230fcb67a78a60bfb9eb70f806ac97909be73889b7ae5294a6996643a60cfe13c76e2d93d042cd0defa14decf8c95a2d834affe49211752985e72d749b737932574b125b214aac5446d8a47dbca93e5d4f8b573973e0c975b52499ed899de629e6fe7ae578273e59b3713dad7fbc9c1df0bccfaeb79240e60f74ef9a392b708397fdc907ae34bd67772652b260d2d8ba5d9de8707600c17459197a701e131784b8212829c95f145e7b2200e32f759ba8ec69a152bfabd82ae468e44880735ee06e55d396466d756b967405904f43e20a8513de0a378a80a4e21047d1dc43a2484abaaf7324887cb2d3e32b1cded86bacaf47a256a0c2a5770c40ff31182a5837382f84c1f24a21893619bb68181cc9581941deb32cf8e639c706bcb1a1877be2cffc6d3319591e353fcada302d500477bf6ffd88016e0932fe0c3e4348ead01923479f365a04d7f3e57ea8bef904d1644dc79838237063de2c401d47e5e261bd75c6afbfce4f943e504073c047bd42fef2c45359ecef9626220e69f1446ca4254f7cb6d245b0d2a6e24173d2ec166f2490110c0aa97835fe0a8727521aab9d87262e6ec677a197e70fdc08df056064bfda01595de17f9f095d92af0a38c6b80df9c08e963188a98417f4ab08076c2965525a28893c285617449a806edada22a525a024d8b08ffe55402b0fed37f5eb6b30090f1a0efec146f7551557af46b2e3b16c1e584106bbc55ecb8be245faa9fe40fc776ae63e420f1d73b1b572f057cda8561b252560ebbd730815b066aae43afa7cffa4483f0304f3709be22326feacdb7795c4232c1a9c8c7a2675ea10d3262bd924a82033bfdc3b00df40a1a79ad6ec12d26347886c8c3313706a8deb6f7802f32e362ae16bb7131f2afadd29e6e926dd472ef1ee7ae2abe2bbfb3b80877919654caff0cf6df7d169daea4455dd4a3123dcd47635648a48392eaf13458dabb9ec51af6ecce10c8336b81550fd83204f7b79fd67b7906dd801ddbddee4f7bf63567d9a987ccfd68acdb50488525eed71200e60d6dc44f05d0a5bd6d66cdbbc4ea589fc1b17336fd526034560d53dd275b895b13164521b577cc409dbaf86e46efde90f7108ba65865d54dd9e4241d203ab63bc4222b3cc840e1857c191a2da61c077bb33cb60e101d610a13f0dbe05ae6b5927a67f547c668cd68242a9e633a73caea86beb101557440fb45a899221952e33433c94567668eca248cb7636baf12094e2dadab044bd2fc0d165bfb5fd61045c8c94b4fed15ad979aa204fc96833530bbe55c3b1020bfc9f1ee549320683055df79ceafc89dd3a716d9df2bb3d67140cbe61c59a239d6336c4b2c362d327eae7f2fb295542d208ed4595bd3b81161b0e3fc08efdc937472fc4b9b12c68a5d92e566f325cbab3de2cf1c8524b19b6a262d8d3c094f96252414ab23251affa2c078e5b1ab87c5851702b4056c61ca8ace99d0f2ebf9d131fcfb808046e43d9247be373c327f57787ad906715906273921ec1bde901da06e2a757b8aa7feb8cf35b9e7be7a490da5f1d2c05541eec1b686dc3b0638ffe9dd782ac67d4059ae0da390be665add617568bfccca590855543d49479fe9a4286f48f0890d86642d86cd7ee62878b6b8c9ba4f676e254e9aeb8c0bc560cbb36cc9aea88eb1c52bb0be7c13c529e54028523dccc8be2d3d0cb12d1eee67d6729e516d4ea6d9bee4eb8d2a1eb90d7ad1aa7019750a005694d25b94283bec9bc33c51ca1f505bff34e81f523c5f500570669fe4bc62999c1be0fb5a9bb9d47fdedf0c337d2ca5338d975d78e547a2d854d55638854fed75e25a8cae6c16b0bd9e938b3abf68bcea0a47aa124e38c349f160417e2e636751e605daec1b2e7aeef665933a2b421403c991a86be837cdf6b4db0388a8d4c7d44d98a7dd1d8b333a546a9180144433387550e47ec2ad149798fe08069d54dad41a2a462955f4dac3595805b96dbcc7bfea1419ba02b7925ae2c21f2214adff3dbd107e5ba8118698371f95b9435660d7001294f20a369a3ad9202704866b892708d9807937d6da11688682eb357130312d6aa3264d05bdd3a658c2e636a68b36f1cd0d1ba3aba37cdb95f08c91f5e3bdb09a1fd5af66f18d275ad384fef1e1e5c0dc33f8b274bf8239eb03367b941b1fce566ceb80af6a930e53b6d420451dc12e390048103ff96c887e14b8003e8249fd8ada5432045ea9f4e34ee13db0628408491be859694180f4b946c05ce71f1e29cbfe57e9f1d665ab37ea9bf24f78eba0040455e18a0f289e8874e91377d77281fab4fa4e4e981d9cc2619e8b472e607f2c1879f74c5faefa16135f7faab5f3077089c79bb8c55906f4769c42b1c9489ffff8f01bfd91690829d20e3d81db068540b74774a25f0c29702924fb37ca8613de2335894d36953534a9c45198ebf70aa94742e43e84cc39dbd8fbc9c244a7dc08ba95ee4d9a7e822f26c96d8a1d21955809ba38ac239d257304b6046346eaf3f981300234347808b82e1675f8570ee2898113fed3336bc5c7f38172ed7fb39eab2e52b4acf85c7a80869eff6cbf254721d75cde4a36122082d5c363cdc92fd29de9d81163ac661f1e7bf825cf32d818802c4806c0773e51fb270dbe869d6d98d6fe113d659e984d34e5eb989b9d58a87d6ea4eb631d00ffe2beed3834ff7a11ccd79b18425db4f70b33e745b9f6a9b5243a5e9274cc33074e3134b41b685675298bb145b339a5fd925cc3e1c3ddd3bdcd34dfefe61193b79325a8be26a505301acbec52f3c568f249e157c743b4905e28e552352fdeebc063d92e07295b48556b4dfbca9905f95ed96ccf39c00db705d9ebd0575f7c6056b0067a9036280c86730bc472c42963168ecb9a7ce349f3867cc774672499113261935e1e6d02045b44fd2509727a1b44d40423ecfa48319219ac33cb9987ae681478b617415798e8699172e0c9f401fc57c684c50d3e7ddb45df02b28eb348588a3cd5c86abc860df7c1ab6441593dd0f5da7de9e7503d0486f560d604df70b4cda06d5e8fe1fc910b256fe1d06b8a631692c72dae39399599123852421c9e439083a9cbbb9ced582a69b946156c5ff60aaa8e6ad4b84b8d196fa4978076c0a4960011f16d3c2b6165e42bd1ce6215e454f23d0a7d552caea26d25f6c828673b3a1ba48d9382f25c7214d9e41a2c2b05a737e5646c53e9ac295237a71e01ae69aa326ea5e0128bb7fbfad0eea70eb6792d06cf8859da9fb4f57251846e69606aa6420b17df58a453dea02c6cc249b668d55e31bdd4c64a848c484969b5b3235aa6068840b315d795ea6d36e76ff647190acca77efe5774d5981bd174e7008c1c724774bd704b23e36059a30858ef89963e20b4429d5f8c61645f1a8b875a2a83ac55397140316455084e8b9578bcdec58b0dc61dcd5463306c0af5894ef1199aa088d9a422d64f8327bacdc430b6b7636fade1e09bf78201484fe739d36bbbe4c25112c523370768dbd5cdaeade2a2a4b7e96e40c9e9906c7c30b0a50c405c81959b870ac7efdfecd0d696bf0c82bf4f691c94fe2aeff681b59ba5a993ff1d5dcd1388db37e9a50930e15828d56bc1be5288a1ca507fc0d507806f47b0ef932a677177bad53e0792137b29af5e3bafcdd548bbc26fd41a497a7e15db7c44279dd8dff9edbc7e8188fef262e6d9ce27f695e228a4f2b3a89ef8af84356fff830bfef29e2709988efe5e9fa44d7e89808e8ace4af6cd13b608d13332e9e0290d1cce38677fc54798b2f431972e4b37b498fed7920af03776ee5449d0d8cc607a7adde4a1979042300f5bed5f135c662b3edc09fba8ccc04587b1fc5cff646b29492b1f5df8624bab1ddfd78ef2f160940f4ae94ddc2f24b9c23ac6baf86f0938522522c1bb80ffe64b3f0d2ff6a64ba9ea0151550b118e878a89ad58bdb2f1ae9215dae8d911c1dcdc72cb7ec8302b99e51ad8146bca347ec29402f51176dea23cb6c7888808157121256268bfc8a8b85d5ac0edcd2dee7ff951b02c4b8357ef5e9b95a52c66b0844a3111d3d108a9c7b86011e2801d01c5bcbbcfe566deca09fa4a7069facc6944317a1a3098792a8140048547ee1d090d09d5b2cd3b0814d2efc6b9d9edf206ab42d2d9da6d19558f84f9cc34d4e01a2e7c786e9779dfdf14a5108f3e38f1c6378d99243b220e175534f923e493ed634be837cfff5087fed4cd0d38a3612b5144885f9cf73ebd9e6bda48473373b159eba531971473ae6b6b348781f90f71382869bc9111163736ffc7d8f49fd8921210193e3ff847361793d3d6323eb20a6bb02b0ad6716ea32ecac427ace4d528be8e0c7bb7105baf6b90028558ec476bcaddcba1c7f54854f82fe8357ab1fc968ba600b40fc0a8a14730f466c5fa37391adac1c07b2053e7caede5e30c939ce2a93760ac4404195b6d03e1f89aeaf894952db47822c9eb70d8beabf48559dd6735c9b634681e6035d288ba40aa1f10e4f7dbd4ef120be62eafd430a7bcf928a3d38359e45847d25cd30e0fced3ae6c035ac6401d6891dc7654101181bf38b0591e2beb1bdcfc92c5ed4ea4668634f00c5d982a54f5166190b87443078ceaa8db58830ade35a365329c8926745dba6d0b5d45951fff865245109201c372498b21a21e2da7daf298050d18744d6b2a2b066746c36c3507558df46b4599df70662d995276a26cb32a34f400295614ab47e5bdd0071c6fce6854c0ea4c4e9cfb92d5911d48069c92ae4cbe39eb579ff963dd8390c58c8f6ceecfb87642dcd31686d7f68fa33301817cf9fbec738c1f3f86ea265c8bef61b922534b68197d545014541d2897c70220c69115dd5730f72d625738495ff5dfcaf6b8ca614365bdf42e3796e332da10298438bc19edda1c383523164331d0b6fe40842ab6a78efa20260e5c1858ca838d388e05850c0d8ba77c9414983e7e66f7ccc35f0c5be3bcd7da099d86f8d04448020bb4b8e7c323924db35615c6af2e6847b00fc55bc0f8194385d28f6f2fb8140b64a8e8a54333acece487351a0fc3c34869b7b099506bf0f172b3c683e52b468fc8bd2a0e731a9575e615ec3685216049ac9ea39cfa19a0c64d6f33bbc2ee300108005409022d21abfdc3c67ea435e18d6b8869fb4af1dcfe7fa8504a04c8e1fceb44663704093d5ea03340d427e006635973bd6aa6b0eb8707a17bbcbe4137bf8a6960f5cc01c52088913538abbb82f2475512b42568afdf9299dad04282f2d1b09d7d587a164120e7a9b71069a97dcb396c892ca394f0c728335bc5852a16023d20a83aea988b8e5a485f2ff68ef8a7bb7c10f4ecd9cd2cb5cf4e1992b27c82a6103d41803074aef4add3d3b3adea2ef8e7f7ecd0a6b3c71aebded4fc7364bdc018c71a99966459a4c0a08abb5865772ab6e194f6084e5916bc5b825c877e3274a29b858b237f147fbd39ccd2b2908c70aa42c8ce95c95fda5b030b417fbb655cb5aef912f52595084f97cc84d6d36cdf2d9bef9c53df8e4c28331efe6a8e8f210e38f6ab36da344f32abfb7ae2c60b4a22adf4b9a883875b9f46ff1ab8534189603e8033d3bac2c7e27eabd80df966b5d4517f45fda0bbee0d8c85de558ffef784f21dd8a8893ae0939a4a0aa06735c4da2d0c68367b34eafdee3e9de4c65053e7d9122644b52e7522906d37b125e6e6d47cabbc4067f4dee26ba5ac10cd3ff4167b5cf099936ae21c4599843afc40f6deea63f72b7fdaa43c0711efacf2b6b794e344c746ebbce4e53b6ac7c96b82921b5e69fb155da72ad51cd743457f520c28cbe9ae0a14871fec7dfa2ad02a0488ea5e44894a9d78d663014d278c2cf359ea0704a954c2e27be97db4891b75bd0ea489d1d80b313be8391ce8e8f9641a9e12f40eb4392d724c93867a9a6d603d0092b989d9d2db795245b9fd5112678ea6650e7340000ace266eb26ef0e622e627278353252488c4b0597dfff670b023c73628e6d2822278aafc9c76b093e9678892044a7cb9b0ebb09956158569fc2131fdfc82234e2b59141062b56cf7fe2facc94d715c56207555c6008e444d0420a1630430649d63381ee7ca96e269cda24a0380f8901be4a75926e7a592b3f2df84b3147ea63bc066551b9942494d5a8672e0a3d0feb7483b85f51f157103a61cb6de6cfb3651f9338667ca28bf344dd2edb91b2dd66bf927e0e00606fb614a390088c10b4b4606fba3d1c052a9c131ba2aba5d3b506dfba99bc21ed4ec514979ab841a216a94ce2cddca5c296e4cf35aad9cdffdc97804f23af42b8eb9cc45ef97dabb955b9bcf928941eec19555c112e3ac8b6bb55c4b940504eb2821d08489ac99916f46dc13fd921c0a9ec9eb22754dfc3c5cfdb4a50b95f02d9799e8f45ffef04aa47655f115037f49eb03f2c819d02443384ab1d192c1f67708f7513b9f55894b5b05f16168ff43e268001ca11404ecfd07da908d90eafe4a2bc1a55cfb4502c777e6a596c89fabe8504a648ba797911733ea1132ba071bd02e145fbf8ba0826befc89f8977726ce3a352cb9182d3bbcd75111fce69f14fd466e63c56909f9294da27aae3eb280f12f5ebc597a163a6636de600a6c81452219f307f8ccdda26e48e249e001ab2d3d16989928c0d8aa331db775f8367a9bc8f2b07f2b62cbb7e49a284d4ec1aa44ca8c4c3f654a0636274762d310d5b52bda17e5162af9c7a273d290b3989bda51d0211c5202d9b62f2e9ba39a7706ff6adcb2974ef94aadcf8549ab57b967eef3019e2f1be144d9575909ca032d64936362d4179ceaac44316a8e57f3673b166614468f38e2a2ebe46d40fa3ccfcc8b54d497fc146047be982e3227c4a96c8a6ea9fdc73b7957e5dbbeb5efae2326da6b9e8e0cdba3f276756cba0e9d6d519b628a893fb1de9621b86899c1814588f95563a2e7ec44ae0d39625e412d68d83bfb7e5f41360a0bcf5148bd9bf471a07275d495fe34666cdea916b7bf4f9ec4a71f9b1fbb401b72bad3c357f1f993ecb5d82fc9dd018417d8ea54889c49cb907239e154048151b9c4a3f793afa0e05afcc7a583716a13fb892e612b4881cc0321b5223fc1f0f1eaef90d88ae5bddcbe7dc1620de8cfe82595362012d3f12005d5a3bce870c428941465d39ae1d80c25768b2d1ac8d23bf2159c0281ef2d3dfc47d4e3dea437622b048246d6183d4ab1805f6742ccb825905f476005e8d1e9c0c0e218101a8b46ca1f1cf9464f06f68fc9d6b3acb2e877b7ece698f9977a6776e2e22b5ce9514b548610d30d31ba70ecd3dcb1575dde4afb20274196fce91c5b55677a19088ad6281aca0bcfdb7788687cfed59dbe8b92de72ed07d2568bede73c6ddf7455645f4d1a247a86984ac0bdc88e9e73ad9aafc5f005e875a758739fdc1108288670c0083e3bdcf6a7b72756e4a6d1c7cad09078b1c88dd2d8e04b8bb9a61376d8d1c909e551ea8d031f9af5a9ee33e9d0f03470e54e575fa1099592c6f7e9019b1b5b5d78d7b4573b3ab85ba3d1f2385e86bf7e9ce11198547b453d329e1cef92de9094b34437078457aa528251446ef8ac7a15d406adb6755f7525071cec32f815a3695b00417cd0d644a9e228e92b7abc19d054231f860039e51b897386652c332b2eee8e0af57f6d5bf71150f91bede00c5b4e0979e5336b431b4c849092bb8d4b58f9d0878bb8a583a7563e265b9fa86fb79b277821d9245b5cf99b669402537fa253b672e63e3437b2bb57d7c1f8f5933ff3123ddd202c7d90128e6547da6d1b1cad7969923c81fed6faa8cc1b74da991b91fbc0e80aca74377f3fa1000688aab121a0ffad01b21f9a52cd94ffacf004e63588a9baae5fc126f7ccfc584bdd9ac12ae13a478401febf681fdc6b4965d49a4a54cc79a79b0841e3b27fb984123a4b3afaa64c2ae1f51f027e2aae31242077f58306fe532a6f33474e2d9c405de762881a8f6d3480949855e51ec2258d9a3ef50a6fa2afa280a39be2a6928c567bc5a1ecd7fbf56652c4a3f65b9717ad1c59193865822322efd2bea81456ede54f570d0519e4666130b66deeebe93f6235ffe1e084a6892fcebcfde12850a40c290c3ee8bf7d66b7f80ba1bba6425fd56412d5aad47141581a1df801c28b7a500bf7f2f8f568973e824caa7b8f42f3dd049af8c7c950a7b14e0be9f59f931c8111ec206598766a19cd0822d03aa3ba9eab89c0cb03ecf241522fbc5d8b8845f8cbc53919abbdbe1cf6a62d650b26e31cf5209a04088e6898f1790508fce42389701c3f97304b2a40ff52adbee6fdd522a50f18c3c5150f52e9ff898162dcbf0b887ca19a1cc1556dedf82f7fb224f54927faaf8180ab6a44d1c5746cfd4cdb101c6a2553ed975f84aa6bdf7b6737f5dcbbd41e2d8c0349b9330748b4f34c07a57d2af66312c751b904ab8a20b7e798750800d02108d9660812d79471914d863e8b322517b77366e80d8bf6c031fad612210a1fcf83a443048efaa2b397ce45c69f2e40742b993a96d90d06ffddebd5a1612874928277dbbd4c4fc0808eea70e37612d232d6462706e7e2f831e7f5c377e3f0c6e40fd1ba6bc1063359e6f0b8e0c81a2fa4616c5c5d976b765a92fe11f6b02d047c06d3b927eb6ad17adfdaf608717314fcc9930068a15188900e6e01fc2cabdcc7fe69901e72a37b12323c262d7dbadac78bef75525ee6dd8088166d3705d196fbac34dd67cdb52e3ee46b505260a8316ab0fad85535266ad4ba1b2fcd20fb8c9bd93a47427b8ebd6797b94e89f18ec2f91404cc46236804375617af90fab913fe1f018b69fdbd11226a532da74d0184bbd5df75beae5302905928907667c64eb640f7b00d019d2e8c6efaf7883114069342c57dbfdcc2d23acdf1abb27c5975f7003497c3451f6abfdafaa99656c489b864861673df603739325ff0c5dc33e81e14ef6b33cf1ebfac679fbde7e6518004918950c8bf1b5abbd6fca019e4111420a66fa4ea3581f7428279152623b52a149e47435bd544241f6381b8ce0a28b48109aa00ca9c2f7654ea859740f5899c137c4d48afccb1e45679d913ec18223387c82d49414967583acb67686e54efb69b23cec1e4271d17e02dc8e223688a390f8593495fba2bb743ce197a07cee90dd716d6a857558d1ea5ff31ca88b4abcc32e05c75b3404dd2406632831434f939164bcd440b82fb1626b05e1fe65ad679e51fed212b9b3040e2a951f05a8b96d179d673a64b2643083b5537eec340b1fa7ce5f5988bf5c7fa451773be8c8dc27594c9f3ac6c81cc19e167f7b04487a2e2feeb99e786d051ea86ff11e5886bf392a51b760e6e1d9861e583d80d2a3bc556c559de83913b91f0408f9775b1190b8667e7f899cc7c2ab408dbbdd86f66a39f70eac3f751dffe405489673c1fffbd273768371eefed8762b858422fe6cf60e051dba66a30be69e5adcfab9d14182fa1f9fef6bac0bf62b4a2eca1cb1f68cf02320c711d24fba3999d16cb9b806a99cf5e1f096703fa5311bfbab998e4726c2004a84b160c716352aac26124c1c2c77f51c84452c30ff8b6502fe2d07292fa1042d1f95f4a0dd01cfdede82199e89e890f9202d031721f14f1909160edeea7361e7b1b03be968d337d2b47bfafca6f75e34c24b4951041655b96b17e44ba9f534fefa502249a7d8af5ea092f450200710169eb03acc721009f35c115be2484bcd15025101c102da7979c54502a8d39c87e153d351f9734f4b3788a686feb97df7d08b68ce46906209fbe8d5e68e83be59c3d31c686a21c2034ac4839befc92e5e6a8ff35e9c904ba6d284dc921c129ba8927ec5248bc421d77f1ce3c7e3f5df23ad4aeb56709065aa1a8a2ff3488a05cb8cb32e120c7368f651709e0ca65b54b8e01880095b3f42ba9aea178e258d8563e96f0204e7e2e50cbfa637715b8d1a97a908d4c938e378c65b898785bd9895634e9d5d6598471237aeffc9b49ddc52576f9d918403391a49e4b738510b58aa9349e0ca1aadf9ef07322f15caf8e6a332f7381548e75c26c9728e2c574a63e3371084d2e329fa75bbdc6e5c051172faf5d5f7a2fff8b0335615e851f8853896521fe076b51cf715a1031cab8ed748fbbb1dca8c772d375ad559788c1761a90d9fea36b56b134d2a67852669d69e5d00b2c35882324b6c84c8e02f0da29c62a45ae1bcf3170a0ac29325be0dc2e3d94e0feb8efce4f659bc882c911d18c880a64d236cacb0122f814ba0660e45b06172e72e482c7464aaaadb16eb663231d42a4bf4bac35587665b5ab218faefef0c9219c11e937ff2b14f6ac4c29db4a5bff528156a9e741a93ce70e6f9b49a7492e9a6528d8b408e28ccb2456f38da38278110b49b6ae98469ea3a80fec210b680220c44bb053817b7be6f6b89ee147ab5b3802d452d552f9aa028b6fbcd7ccf7a7a730b47388bd849555a69e3d8a9be862578f458691f17db845a1a28595da2be17dcfc3dcb082ad8c04798672c64603382ef8877641b46604131d40200d56cefd3d957f44e9ccb302cb8fd3eb56be58e751df1246e80b0e3dcfdcf0bb40bd730d0995e14336c9f6a5750e0e60b3a9e8de5d2d9584b39e8f2a9d135d6072e6a325a7d86ef08fc52846e76d29778d566a3198a52b91daf17ece4ffeea07333637b013480877f36ccf9c646dc52baea50293465c134813e4bb00b5ad65a11760765991fb83ce565d8cbb063120b8e730eaea8a2baf75e62c85534f31c28d517df1fd45c8b1094753475aa58d0e3dfd9163c11d09a17f0e1700a93dbd4d4f5dbe0c673cc15142f0aeba652622aa795e1e2a6626f8511ef53a5deb4559fcfccbcb3b16d20d029b7989000dc2c5c02be8a6b3a30570d70766da0d68abd9ad409831924d12d812c4c43899b6643e6fc3a044ef57227ece5146cd375b4be08e9563703aa6d60923ac1bb7312564658b45e62ed19f1ec22cd168fd8d680a4dc68f85cc637704d46fe5794c587b3e56957d3f0be84393baf7b84509bdb1578d6047a73ff6ed5bc79f78b219bb11c58d8737b3b05840e4a4ac1f11e6167d77d6ad36d81efc48e7130186d3e1392a01f8db6fcedb9a04bdb93d41a0f085ac83b091cf002f943cde8ef32d8c39ea3d5913d8710309b1a1b395b8b0847d051bc223b7a8d0cefb163b5ddc691c691bd0f608a7e2b24b09cf70eadddc7478c8c40d79cab4dbff4b88e394b92874d7dce7efbb758cf6529f140337fb7ef1fc7dab51da4775754a67d074d39ff29e369ac290ea97d6990a3664ed542a39154ddefc80ba2eb07db181733e3bf36b48a05cb86fe45452a431e7476fdff0318d09ab5985769d26a17258c8a641b437dbac8ad01818d010e20d6cbb4afd177c3e8815b82d50fc115a5f034aa2eb70a1d4f03ace2ebf6fa9e11461d4e6a00df2780b4bfccd6d35e750fa3576bfcf4f1335f342b3dfc2e395fd0b0f3ac9eac447802c718c25ffe0db0115ffc3b571bf203edc7a6f553e77f3f87714b61c27aa25ccf85fec4de7f03e06cb67ba0ec6fdae476c7b0e039a4833ce62929c21cc748f05b02393f580f88362d0864c1bfdcae0db3c97de0cb168210fd38286147d946f4063c0158e7d5c2a113ba4986b2775fb74b0714d43852d4491dd79a896bb1ef46bf4ff586bc9fdc8741ddec17c7a85a4aa46ff1400ba0b745c117479d4347533db7de0a69830a3701ec4b88d0bf1cf1cd5b1586aa822ea9618e57bb2e807436d7bf8ea762de041a71afc1c75617f59f008fd9dba989401144872d2dde467c1bdae22e71af7c36173f4198a3764bd00cd7ac82340520de5084eafabc2fcd90fea46b6e74889cf4b81593a0b6cb91dca0fd0fe462bc7d7d3bda376f9e42c063926731a7bff5bea7aba3f4b44bf5e70c7d918c1437750fa476c29f6116651b1a02ba7e63681889d41232b5026c7184ea829c60dc76db3d29acbc87e1353e625e45170321e7547f3dddc8e866c0c3e2d8fd1a1008c534506485bb025338e073bb8d03a34d895a89130e337a1b0cf55fa923d62c2cbfe5131eadc359e6608bdbdb9d05a244393b9b37a708892ba967759a42aef81051560d82ea5eec65a59418e27a7b739a4bbe7288c6a2bed95eb2782fc47b2da5ea2d99ca5f291a00cb37a1295a744985b40c8ed3a5a9e7456dbf18bdab8035a5191b661bbf252de5f6e72a6fa048e8c7344c68a0dce3b7c3d61937e709be21e9547a062be0135b30c84e11a907c4c47436a01e6414281a0d55c17c601f30879e8de12feed9e7d81d9c0a19f504260717153aa1008d69d938d13463afa41a22792b6f6017a9bd6ac15123520d54b46492b98305d3511fe29e077f969744bc33a10895099f8661ce231187f95659232e3f228fa08d925b1577fb410ab8f40f9694e354b8e7187858fe175f1e7bb05f15f2b08fbac30d60f93b8d5d61cd0e80e463f3d6c527727468ec60f940520e5f299c7c7b4b5d71455dce62582706e23bde24f935e89d46d49e71a847a77518c8f337816c59885853f26ba216ababce598a60386bf218486c06388b4c8326d2974f91d24bc5a77519fbea8264c592775514e85397a05e3b72577fe4234b110e1490f75b54c9fefc35dcba6c9b1b0c5632e5400d0a704dc176b8d7b8b40b6e468ff0babd1efcf13368a9ca6beb601f74255ce263c79d60577a7325b5d595ccaf941d6a70cc2afce27f2cf5830119eaca348e9ec51c06555396d95d55e0bc88a34271c9969f099fe237f75782bff55426daf0e2b1b10dfcf93ae4aad387f0653c78201066dc3cd7b5b6687651313cfe346926853b45d36abed3441d44d40ac6fb1fba9af89e02392257b08fd64a3232093aa894fde2e73cec0259fc78ff96780ef85015da025aeeed01c7d9c2c2ea90f6766454b3e01ebdb59b08747b725e9bc47ae7d6d21f505763f10695ec30d1d7d1fd301a331e5bb4ec568163c0640da74f26a99a0d49b1779581a4e3f5891fa523b83bff5042477b529a3966e81eb97a01de97e3514cc0b5283d36f0037139aa76a6cd99fe3a97893114ad8ff421f3e36f601cc10a333f32049a301ba91ceff00140a01bc3173e039117f48ce35ccd0df9f05afe1358a06349d7e0c0273f162845ff5e9506704804030fbdc358b8a48e9a52129884206348fa0de1ed5affd11134aa32cb5278de5b3a3d3f8f915aa11daac6f8e90af1e6552d7858f9fb3127eaa9889485f0eb4194877171e67f46fbfe1d6603bf209c7cb3551821f74903427acb71f3b39c945affc1df01194c09105fac701de2dc253b2878f0e607489b6d2bc91c74db4a82eef79a1bdf5a3db2a9f380c263ea36300931fedca145261f8e4a77b9bbe1e2f5e120ee5f84b32ab6828946de02c14324434a825768a63b0833d33c6918424bd3645283dd0e7fb67dcae0e52d5388b2343c33ce8813836cca3b6d6bcd02a9fe45bf43038a49da7a6239dbaf6256b5973d71acc1ec049482e71a69d6b71bc06bd93538a176657ecc726a792cb3dc3f1fdc62fff26656c69af32801419e2b3c78d865c10f89c397ae321803171b39a8a8fa55d46a3eb07819064429c45ef72739a7673f706244679bb8cfa3574bc6a71012b4ffe068bdcda8b778628f0d2a1e2c54e2861e6117187d6006e8fb4f9c26f4ca92561da3df2042e6ea41aa7a92c1ffb94d38f522077e8b2b654f769b6f5714950e193c77a103799ac24fb5da4bf81b5c90c155b00adfc0e40d7fdd31b360f4da17c6583d032297eb626b430c4f314e0ce3c230b939e8b6f1efac834a15872d6c5a06c41bde18f3b39196ff606faafb780c579bd80667f576ecfa8991c260627df427e2303f24af6f14ef9408b6d616057f50e841179bc00b4042499e16dcbe0c057a98635febcd131c51367252b090115c48565c1594186e847a557cab827e8e76de3e444518feea3ae74ebeccedf83ef2c2b5007f2a504496685c52eb6b3291caa6e0aef12efeb2017e427c5c949a4e24f15272902fc3180f2d8387714d8d64fd336e9f5a92ab3b13aa46787215abd8f2d9e5e2175961ee1286a02c55a96701d5b42d43d2bc628f9b4570c0b2c2817c4f989c8d8ab99138e8dfb254509d2df6f215d2daf0da45f3b312d034ef296b14832c3210a6cf75d6f953a5785a213a7630a5e64327c3e7fbe93f18ca94c4cfbd5e2d23a9adee2b36b29f06942312b35a6d771792de44fde61bcd7d81e06e36bdf3a9ecf5af9f6d4776239f4274bfe0d606b229cc16c35c5ec23cbf42e6ed60ab451e36e6b444a3c275fbfc12118f0d6883d8f0ce82d50c7e4a90e6c52beafbf29eea37a964ccca7dc53b339a6cafee56a07845389d8478908bde0ea27cf8520f7d7141d6e61c4df69585dc44539dd4b1200b72a2c5df3d38a1a6697f0e4bdbd04fcf42db6f594bdacb3519284f8eb3ee59fe7bc9384618c521fe008bf120f3b576edc0843e98a78653b3e7074047914b108f5e88e6cd251ae061a450add9f7eae624b08b53f99ed7aa893b4fd06f3ffd13639a74af52f1cd8d8e459ae6bee0c0b7d271afa4b2998150bbe839d8fceb2193a98574ff42865bfddb05c275dfa2505bfb931ec2ab20f397c59ae85cba736b8738f91eb89b3bca4376cf9724646d1123d0adf8308ea3f5c50bd35ecd7ba24454f863bfcc54af423e648d2698d4fee84eb642fbb4c8f677c2f6160336dd8d5a87841d094fe2681a0c9edfe0702a4ff2206448fe981b60a6597315e3b802cca8c479465c68c51dc71c52511f0f0e8c15a9ad31c70dd61ff710aabf310780ccce06724d8a3d3655e74c04ac5940690dad7ade8fd151ecf6feafbc85ea7237b55cf7202a60938fcf728b6209338a59681f0bcd4c40c05d6e22814e4ee37d2bed752f438b9082744eeb3c1ae23f27d13c4b050d04cec05598d5f28344716dc92c46f4805a1ac5735e9416f6d5cc6422cde4ac0e88851b8c55d5e2d28ea96a95d9c13e9d9728bc8e3176adae75367e339a7c843f6f55fb20405332bb2583ca0ddea57ade7fe0f4007cbcd301727c10b40b7354ef8a6bc476856a0d6e44f8fb1ca0038aca4736011410bf413e737570d5a1cf2658e492f95948dbd5e1e3dc849330d41e8a53dcadda4e735b0e990de75567fb0ecaa32f1be9699c74c4f34918059d6d8768b0f3645c5de2ebb56e5fa9d0816d030578c52f9a151e977c5633f2703f0a406f4d7846ecaff864f44ec9f9b5c616dd43bda57c38a497e7782475fedb6b2dcf110a022193be2d7f76280faa674e7a5bd39508f5ba7331d82a334da21058b831d28147d40cf8057418de65fc1579cfa9e02c2953049fbb880ac2797c968e87ede4dd9e296180f337c96e300ee2160bb788e4bf1620549feb4c44042791d7bf2d98ecac9ef0c0f0f64eb8c0891231568ee79302a0d6e317fa763e1c8b67df5ee7b94f0dff4c15bd8222816e783de19609ac1d7ef7386d977affcda77db7bb932eb2b026ed78a3a75f67e8f89708535ea6e73d8b42eeb7b66f1e1b043567cda12cab57d907a96e05da79e44dc222efae1535fde210fcec8299137fe3d741ddeb46c1fedac326e03e9f99b0aedb443593411b4642b81886360dae4fefa8989290f19630f7600536f90bb76514c293db77a0677918e7974ad0e69fcc668a5b3ddcd36c2e19c1806eb63671d7d1d80d021c0472fd4017aca8dd14b39c149e963e0ac87b2fa740036d5ff103e9d0dc0b86338e65687bf12cccdd1b95fcbb531b95d53e532e6bd9859dfea560dd86670056b8663db0a5d1cb2f3d5a9bab05e11e86db765285e358eb119dde24ad3b549c0bca2df14ecdaef1fabee31a73aad679e2ff40fb445fbefcd725942409415ea58dd22f2423e2ca6cee5b3196f167d0212dcd6f7f5cc1f2b6bb6ebdc2a589124eaa76ea99a24746d40525d3003e28b4c642f89a1def66dbd64676381b161d8c9a40209a70460b7e5b7031d3ace8e6648a90951e4efc62c545e93b9490249736f68ce63a3873a6dbc9368000baf814630669a8254ca7451032cbe9f02fcae4a7c2fbcde083da3d3a2125bda44e79b87eca39d303d88ef1e555073a967dc8e8f2d854366c06abcf601d40e6fd33dbe605165f7755ad1f274c0d2e5836e7e98e34a111b4b2ad164402d31faa0075e78fe2f5ea4f65c0600d099e0111f54b98573cd83f1f52412eac9962830407afe8bab8194dbb06183bcef3e1464556f947fba8694d51ecbd81b4f11e882fbe5f3608e59588e44c1ee7a64b60cf98002ca978744da7aa8b8b338b19975e8d224e5d95123693855fa7b478b5197d9048cb3f01b2722d5a755ee2b4c1212f34e960627fcb2906d7b63d48555c2724dbbcc12d430693f903cbe9ba73b6301c84a3e6266a3e563d8b34d0436c1dad6068d2f786c40f2c3bf7d73329d6f77031773cc0d353cc4be4329ab9e1866276393a1d9243c612a50c159b7f46a07ac5a243ea84140cd4d01cc7bc0448d447edb721675a10bcd282f7adcebf72303fb82303fee090ea4d947fd541a630933f7aff792e8af11aa3a6ff634f281dae5323570f63436f927cd16245f5b86ced52f37748d99a7e572547d751c5f5d58028cfbda41ee9729a8a6759954270d9d183d807072de8242d2dcd2ec35dfd254f0bb9b3de93ded80213e43e10022a54578ae7e05a42318a493b7adff750f2f222ef3cbcbd0b5d625b159c2c52dbdd9f84dfa72d22090cddb16b4db81f9bd1eeab8ed62c45349633cb4842758763c359c9d55a82ec1fa71ad6218b6751058f966e536e374adbfa8cde86380be09d0349f4a114792fddac392849a19128035942d3ee42b1430ca7d805b32f361130a4a3049f3facd6ab3f68aa21f6d5c521e5dbfec408e1a503234e6b0eb6fbb9c545e006fe079bb3cfe763a328f072504ceec9b733829063307e746652db20bcc7047e80a0f3240ecf48ddf379aaf7fc9a3d8c4f4a1808b7d3871dc2174211066a5dc0aa1e62ef1d6b225df3c6611ae1dbd66a1657a51125bf9f4a581137cececf38834305eae5675bfe4e4affa8e0f1b26386fac3b43e2f928978e2d961455260505e7ceb2b9a9fce4e88f52bb0b4e42b20cdf9415a1804c1dc557f5b75405e1a97aa8cccf954d83a77267c09df031d81db4c97e40254a66223db741cb045487f33e9937045256de42ed5b03416e731904829a433c4675da47498f90571705a42f3de0f28a4d0a84a4c12ce9a6e044995f5040519e04387fdee08c360ae5e832a2149f5ce458401778a72102114779ce713f79a3e3628a8f3038feab240185c92c5977e2eb1b0acd43b058245fb1e35b8bcb66aa908f3c8271c8a775371e768d95d4e7e67d5bae9748db200cef210b18d9d2caf6108f0f05c44ba1d674b75d285cd486502f39bcf41358346b8368850dbc18fec0e0fbf7c331f7348047135e967d1ed740f73713256b9fda46d126c49d4faa38b8f020d0609564e651ffcfb74e25d848f917a260c898903294267394bcb20421605b42624e4c42e47dc85f593409276e2c34b0f624ecc052692d08c0491c7fb151a5f1770eb92b42e7ca200a8f59e4eef6615a4ab0b5f691c866d47d513e5c1947d6c71349c3edac3ef199f03a4dcaeac60e157240c0224e67973d6ce68252704f0441fef881e04bd67473cc61a87709a8245468ea8220b7dc5f7078d1cf50e6692bcf30f16c71b1a7791fd6f1caa28ef00a17807aa5d7a1496b0f7c26868a4623cc6711e92c747b88302d5853c1a9b19474dbd597c32afcca93ff086f761c7711453f835e0a80d60bf30fbeb6f889330842921686f62a96a357291c624ee17ea880e1057ff47f4f5ed15e17b7b01ddda333374b5f8bfd6b5a54b2e7f002b239df097026249073c20ceeaaf1df213ee0a39dd7bbf5e2603247674799db5450575eac92062a3aa21c8c71bae7c3bd2fc9fd634450883cab8adb6e295f2e9b02a84b3437cbc95094ef27946e01f6cb1bcd7c0552189a815d950590e5548f363791f8ddce78a5693b665fed552e6c118fe022df833a46f5d015592d78c8f9a202476a65f67c0baa8eed3d8ddb4d8086be880741805e34f52fcda4a2ef3517b7f15ae41263f6b348058025e51f09cc4cb04ccdc7f696e7a729a9d059c20127078e8d03462f2ccb3f8d1789aea86c3a7093f66baeb1d8d808e825ffaa28bd49bc5dd58abdfb0e1891d30d957eee110aeef1ef6e4773d6f6a50ee51a2945c0fda8fd2f1c45677b03f1c718d78815ecd35c2117171a98d5b63ec81b6a981e14309664cb4a0249f1e2399f6b93b5808f0688d00ce373ba448ce8775e21d83a3e11960183770acfabfaf86b3d12125a7b1028d53d4d2c4193eb47d4d4bdd9d69c9d5a9a76b96b3aeba2370a87e18aa3eaa394bc27c649c650e7fade08a6f2a5f88a6ad9186ced5490e591bf782097234fc930e67dd03f335f1b7fda59cbcc7e5cc50149574f6f7221c94ec112c96744b0d2325c4f2d1af5bcd9fd3ffee77ad81d7e6972bca9e9ae70ef0cc5ce27d2f1b0e6eacfe96e199cecc5437ec67c132d1ee888ea0b4a53f1b2b44d08862eb69bf3e3f53fd02073248de10566fbe62f7757f7160108584e83b5702dd96fcc4599a8eaca050bb08e185729a38ea22b4562439899631cba8e063658fb6b4fa05f5c9a245e50f1a79e7545b79f47db013a4562302e073322bc26ce9a7faa9596f4be6666bb7d8bf07749998bf48634e488ef48a2ce0230ff94e820a758ef84193cf8df0245a9f69ca7def97a03ae5626cec848576627c21b53da25879f0d5f380321e4571d22219aa5acec46fc64469c6441a36c83ddb578133cfece6e86a2204924204876dc880660060ac239b72b10757369eae121e9b669d1bd0d54e2b584ef4935c22d08140f69ec7d24849e45e99befde989573d63e16dd7012da17f9dda7be832eb3f4c124f2807b4a58ca3cf8c37e95c7a31a43ac08c4a032890b2f9e04152413eea30984e686667a9165b1611b409da117fc519be12361aa8119c2abd04028380fb7c973b1b32e8da55a9aab703fd481a5569f9683187998903db950d7afdf7e39597a479acd3992d951df2b43179185a468e724d447f789e4fab781ccdec4a109f05860a0412d1bc27ccd69b1f9116c6b432965bc9a08a3538a915297c7e191124470706b99a5733e7091c44487ba2cb77fef5b04777dfda59a43a57cb4ca61301430e1ee1bad86d7a82ea5936106a8fa6803f3867b012069e26688989ce5c7b18f63ca2263d31a9101f120bef4697e1e29f72eca42372a728de98793dd4e31fdf3c66277ddba9762deb240a6855d6a04d9e1bd33facde0b7c3e5ef772c76e348d6da16430c7223f1dc3bb8aa1011549a726b5ddf0905032f4d8b76c2eefef7f460e8280adf6d42e2427baa67dff797648c98de53c2e5fcf526bb523efcb96f0a8baac6c7450486ec7311522e6746adef4beb76114a2c2f1d79c583512230f4d797fbe21d425e22a94a244994e10ac0695d06fe56c6e1654a33535ead72d2f078bcf24ddcb167503e64273f035adda3b28331ef645744de9fdc4ec04fe6c7f4aac1f8b81845ccbb493b88057c679bccf812224108a569c9a27eb4ee8a068f613f3c1eaf82bd2218d7c0956206085b558c8cf92ed65f58aafb4b85d06e112ac1547f7663061448031f814fbf8e96e9d0748ce09c301e7172ef8b0d1621d622983e9b7e03ce41786e167c58b3bae8ee450f54d8849b8d8e02f53a4b57a3af9c37476acba2ba1222f85ac0f1394c71247232c8e507995b25f12db7f528c5cb2a1c0bd06ece1ae69886c14fb02b425e241898e37fd96f15a1d1d0301376144b3529c0f20b42b2ada8f598813d0e09da5417dfe5707e38442ac04afeb366b87314491228fcfb98bc5936266cc2fc13ec904a268b739cfecb1ae1e13fc4a4fe0cfadd803d8ba1b1e1b74f181e5d1562283a42bb350f4d255e3aa856556ae2d541824f939c7898df845414928d4a21a1b2a435f1c276f7c218b046a10b1be4f7d8f265b549fab609bd1177583862a331a389269051921787eb1bab0c4fdda7ac3d02ebc86dee6f36fa3d9502b5f16ece1115ff9d88aa80138513958648a5febe9e645ac8c62b84780cf4d41781e19756dcca46b14199fd65ee81e4102da02b0f0611debc4bea276c2b1f22f5a3f1350a853fcc10910af65d3472bb4bf5e0f4e2370ffb7e761eee4c957811d0435e43a8ca6ba321d11af0281db522ee58ea7151c55f76ab9581c11f06729a2a754a6988693bbb68cb13f688dac7861ff97f4acdfcaf930e91b7d6f93d523c3b5411159d61f10a18168545087f9f105c9013514fa70d203952717a6e7039f78f7fc6dd9752e9a5c1f724ec3c043ee2adb774314387075a8b15d928b9e14ca23bb23feb01fa54798234142d5e1227d0b5821174dc46d54247f442bd1a99276087d502dc656c51e682d61287666e8a6a1ccf866d84cd2eb8f96d3ebbdac159e473bbb8f66c0c4da03033da195b05f2d980449eb8a99031f6235b174ab804567c395eaf8dc5cc8f02570e4523c53ac26b972161e28fef219453eb605391a09c2f3cf15cb255a3e0ae9f8912746e086645ee0934eb13ea0d85bb6bbe45ac2762a32f1c54d89afec854217124c73f3f3e1c338fd913220f0f40ef7252185d2fb90218af63364f87f008811399673a1270161cb115cfff813cddd3cd5a45fc8fd35ff809659ac7ca83c23a4a2080af54d9c38db30a4c70dace39403924f9f32787d80abc5394fc227711631b66e72750e436f3617ce336aaad776c1e1d42d2e2f6d498586ceac16a02c163ece453df9b0a5d061bbeb8cc46d3f9e5a7fcc8308830bf596629826e30819344d60d1fba11a5a7b36243f5884575cd0bc35e5a040706a6f1aa861356a264da9d15137f0dbacf0b8ca1db6132e40493086260d2c0cd446f94bc2ff0cb1afd296f832d343089a4b695342576833e09c3d0a57828e78c408c7b9de9cd2a3176096bc3704121ca6d4b8abd0f4e11d4742c6c2de7d04599f924616f6f81da46e865118fa0575fd01dc72969b8723a5717ad0de0ae31e85f2e8517a8d844be3a7ff25873a3bda59bb0adc6e6043a71efb260f64198f18816396162e9f69ce414a077a85cb8c3a4277532fd0eaed9195d37296dbe1b529205e2a1463374d83317a86f8cc3316bb3610dffc4fcd9cf762b40c99a03da9045648947145f1124d7f3881329fe9f08064c1c3791a1783ecbf3991c8018abf981efffeba0b140cb28a73d77baae2657fcace76d47a3d6d85852c36b6d8fe8651216174dc892fcec7e6e71c71c97a580a1051a2771cfb5dd2642a6d846a7e4bc40a1301ce2e5435e1ae61d09e6dfd68def74e56b34058eb20ce3605a9190b75e3724f161afc23bf143bfb292e7c248cb7c90277bf259793f9c70f74e21f75252db5c24321c5a51f0a2cea79373a0cf6dce5ca84837e81533184e54d60014b84db6311e9347d78157f8701319b970b38661fabe8a408bbecd528ae5cfed2b645cfa0f762c3ea7ef03787cd9a7a38e0776cca0c0682a1b294ee88542e8ab41bda40dd05ba8a22e365febbff1d8f83fcf50dba7b4c3f905ad3740571699f0627f9652d7ce8c5f47bbc10520aa73e7cee155ddd15ffe23f43f4188e8f7ca9297644165c58af90fd031e7627e938ee3b9a12500a0a3218e4aa9ab0bdf4ff7e2a89d4a8d8e8218ee200a24ae713a800dff97b13991dc0a9541d54ad721603201f60ecab2428f25950b6cc09bfd3ccbaed784d2918822539c9ac3eac1061351b8b24be767c167c976826d9a8f5fa22240dafd25bc2635d1b67158c5ec3016ee5e355ec6285b436ee647002fd01d45a0aea1de6f1d446457ca787efdf47beaf5510e7c3e54f7d78753501b6e58cefc73f7f1e807fb4a597e8d51c5aa452de99bfaa14a52fb7cf43f535f20fa8a1208bb9088a8172afc4434dcb498b9b00af316d842f2fa411ac6751c26d9253cc545bc17778086d9f930d1d0a1ab70e046094f5a19216d2772d22514e160fe9a19535bdff09e1252b2fa5565eddd3102e2e75f074d2c705437278db1f69c68eae5d219541dc6e7cf2fa264bc4b65a5cbf14996faab3b4770107c2b8d0a310e5314517c7c93d5dcc55eb2faada811ca8f1257785b4c2403a3daaaef1c29058cb12e8109b88adcb2a9e322eb3471962be8f6ed08262e52af119df1106960bd0d67518efddea8adf4c23b30a183c006b3c29fa41c90d72a8246c12e49b8f61c15ee8374ff5a1ff6a2e4f517a40458d168dbfea5ac5f28b689bdc98720ab5fa6bb3b30e9b1e798b03d4ecfd1921277ce53121ae5e9bbe25f1b0a9171c1b0aaf8991412022489bbf218e6fea2eabe9a0869bc1c97b7acaf8964dc1aa9d6dfe09dbc2d7d542d7cf5db9ea1cac6cf23eb8e99d271e09fa162b90a4fcb74b4b5e7b6272a9784693f3262a5ccc3d8a52484fb630845fafb89b6078268021d9512137bb72567ce714a77f330d669f383971dfcf82a8d01d49d51b6e516a6349ff134c71d91ed59b7020fca61227556ea5775b9d35da1af02b9be7ed7106dea91ce0f515e1d14f39c94833475eb33c93555a1fbccc436427906771beaa6c33353c430d83ef0f4252b366019d8d9657d811167eba7976125b7992b4b5f6b25dd4c5a1f451b5dedda7e0c79dfae666c305087d9847fefeb70ae9223362bebc752da2b3bf043c6ddaa3cd7ff7fbd579411cefdb17264a729ee47107e97d96711b0dedb4440586843439196e1f66b69234c1269b6238c14d455e68cabee1b521b900f91e1d92e8f01c1494057e0b7f77998f9bf25b3a97cc1522361d02f9a4ab8f2fe8c50d45fe94893174c08d0bef451ebbd1abf74f34821b4dd05a312c6a61c893fd6568ba98a2a691ebdd4c1344176828e974d8935c4171175c4057d547ee9965ee5a2c7a926df1ada0027969050fc74091feaef6d25d91780966fe7553ab9e883a1fe9497eb28d28a5418238c3751a69c966431cf62735884a35b01614d897c2816c9537e9d81e879b2a450c5b9a1c76b431ffe3d5e94fc2ccd00e9c3aa971295221b9f101f4defaa21b7929e09f038dffbcc15bf6bc92a9e3ac703ddc58b51be7068045b15484db883e19c65b7fb2f95bededb04017585d24d31b788da0e472529b973458412a396824bc92d165940d11486c04ba1e115605cc4e603db71dc42421cc1d04d4aae39dbd21d971074feb8c1fb81aa806cef6c2a45809b759e64bd5c074f6993dba739d256423a37fd5f76b751ce49e1f9f5c00050442c80d10a9ea60cd492934a497cc4fda10963d372b923fef2f583dcfa027c44ee52f7d6c592b923c723f945442832a41419824c60ebb21bf9166d0c51d68452f7672c5ea4e135341af9d13bc05ed752f7225822b5b64d467f44eede7811cd380351281f1c8e80f3d60442d4b8fb99cff19cd38db461c917abee08df098784d07d3dea944dee42ba2d6250992452ba2f558c4ca04708496ef873185bd1adeb95e20464ec3635135476a0232ff3b075d788a8e1b42375ca3a535563cf920d7de32d57910acd809f41648c10f704af4d39ae2cf92a5bcacc0e5e1be9e3535fbfeddb500347b422ec982fc4735c96621e3096eeb001cf5c4486c28f7e770543c2ac388b751079cdc2500c1032dc7c6989c0562c07d3805ed0feb74b1f9651ace4dfb8dab237e260132ab1d45e8e459f324555a0718fb7b392220e18c2e18986490c63c6fc578ebe3a0b5e4c037aa45dd2ed477557d6f9a5e3797a07c377c4471f4242a8e3a60fba0d3af609b021fc8cd8baee1ff974589bc041eb9c002da9f6d3623774b1b15de6698b7869d386d778ffd69bf3b8a701253d5096222e48c39ecf8a2474d59e9d8d11df8609580d0a1b747aabc67dc98249067e18a51d584fd42073538da89afcbf91bf0ecdf34a89ed2654e87afc4828b6577453223236609215627d8be8a34bd2529c8250b9a65f7d835898c60027f08d9999ee6589820c6eb9ad151924a1abfd896976e276f77f05aa61500aa910c53ca17c523042ce8b46b97e36e7ddd81d5a0ad84a65fac39583cc75dfb7b15aec7c25058b17add640fbd954740022da992a222ba7111b130c727b953e1982407fe23e9644404255139f801534a4603411e0020126640c61a551756302d8d316033af5ffe3173e23b4a6d205d2ecc75fe83ac6dfae8c1fac87098f35bfdadd2e4100ec2b4f629fdd6b7c50079115d38e3a0d2277c1e2c0876eca379fe4a49eb896d836d3bf05f083f8d0443053782354c8727752368bcbbdd0007adff447c73c339c8f2411bf2a45edc54ce6c93edbcbc299996dc3730a6dd0fe9b3fa0594f26f5a73320dcc92ad1056a01cdc35020edf965e997e32872cf46f3091a2d87a1a07a08c33eb40681557d42f12e3a17d59a26a9beb477cdde1068c1d5d81783821610be500e62029a51a787b90af92e50a99f8d81f208d51a123d0c4d381b52b94dc69f15781e37fd392af97a13beb8b783debc7714f869ee155cc6ae4acc2ec515b30723849993b4bd9122d920d132e4448ca4346bb40d0b3756b8743a336510f678b24226bdd15235a82fc4e78c1a4cd504afa2ca8a496b0e6657377d1b9a6f8baa94b24eb60456aae78b177aa5bd2c0a9a116e8dd8c81c8db1541c139cddf4a06669c5213258c3f4e729cfabc934b468c2ab1f276a82c4aaed66bde3945fb02b80490af0f44c545ce529a1abaa92228529d7a0baa9a5b955b1aecee9ee7b6341aa77604b3a7c60aa9a579a72014ea72ba06f19b3d2cf2f8cb99b7800eb9d034dd3cc824448fb7cd5e53de0ebd6692cb1789fdd7e6d6d280e58186eabcd24014551aff543194aae398608a4514f3866689242701dc2fce5e4786579cb41c668053727be79f652be8a6cb45a6dbea97aeeb24a272758423025e8ac6cfdbee415081fcfa9ef4f0d443f21c9cd78fb6cdeb582ca4bdf778e6bc937e6bb4894860e20b8685842ee6bd5ef15c089f6b9cfb5b793739c3aa945292c2ef9b438b06408236b53e1aca2a95a77c42928ef78cbaf432ea3a0fb2d63e143fad93b8ac933b5143fc993b07a8a8b229039d5137b0b2376bb30630cf30398902d6ea6e234750d3a40a9585e9e5455199abaaf575ca7bd84917c3ed486a1f851cc9c36115c88b0caa30af177fba213fa1475ada4b184975cf8dbe2eee47ac723fb2c30dc14fa1ab071150690cf7d8d8437f0acaeca63eeda821e4dc2d5bd63d83d09bfc709921500d31f8101b6c5e5568404cd9fae2a5c22532c4b251c06558d8c0b5d71887485a7a3b3eeda66e1745f654fbf679a46cab4d20141cd310dd8f1d9e837723874f289a0801303d63f1bda95932d4fc4e2735cc98e14542a6135c75119deb1dfd324f916678c6a579793adfab94da2511b1708afe954f351cb7aa791fac38cfcba66af8a46f21e78e886ab476378d7120a846d4a1e01b2698107f441150eb26a9e695d4c9a54b294c5e91e1e479cfe1607c80d75c1a67511094feed9cb233f6f7b2cbab02d1fc3cdf5d0263f51b4b32fc30c26de3f9593a90657408636a47cad756b1a1513c7ef953de267fa34f7f883d14fd958c0edc2633001391deaaa3f7455ad453dfd60e120cdfbbe41f98d33b45b5cb8fecd3531580fed9cbf86b4fbb8cb3962b0ae61514b12cb778cc801acfc45a198a26981a18c748b7bf5f39f763f83d22ccae85a78df8f1cd80c9b07b12ee59c30ded364a7b52209b23b014078e4c4f05554191cdd35573810dfaf1795df2a5f4494614f35145f36e9495567d6e3aa69910dbaaf8e133cce58ad0fbeedf5aa0bc82dea590ee5f093aea12d605ff61bbe75fae670cd5722b8dfbbd6d88cd3b22236134b983a327e1507eb43abb705e12534229cd8dc0f6fddca583d3da4451002362a02b5bc2fd6aded44a9e587ae8b112737c528c471a00b4462f24b0c504791690ec86e6c088d2553f6bc9dc957a59bc34f429c13cb70ff37b360fc9fb7b9f6c7dfdeec2c3927b4bb385367ca2756c66e4c3c688fc9bbcee134ed43ac6c7b4167044f00b8a0502e5868a606a4dc877da94c1771ed55993d28100baa9b2a153e719a59000639289e1781cf33478de01dc833d327ea22f914a09ec6259656e4bdba4bb347ed75135485712b39530e4d888c004dfdc8339177b558e686ffdbec5e7c4940376cd78b2d15b1b315821709d2e44c6a53889f652bf29c3e47de18eedd26ba82fd5b03e20a8790af6f793796e7f2aecda7acdd8e58fa04eb2ba19ad7e1f8629524718039c39736872073b33fb1ecc0383f98c4d963a94aef7bf64f300f133aa8051bb32628486024a7c41a6bcaf70bdc9555098c5b4ba73c1626fca043c98b042d1fb9f6d94e3ef820660988da5fcef6fddf9b59309dadce3ce436a9ac3621b80e787781cc13ae2f566aaa43b4bc2efeddb1ad8a66ff250e77eda104af8825dfa52eeb8d22d4355f5364ea542ea5ea481915249188b8c2082be5cf0901fbb60cd8040e9d0666784a08cd1b2ddc30b28fc7bbbe5d94db88d2dd510a3cd1480886ec175436661d2e92c8d96f380f5a244fadab9eaa60106f84d032a2f25be42ccc029f1bbe8e3eacd7b06e5b35eda0fa80b637e229ca7c917223eac352c3153c97b75ecc500d48a8f5dabcaa89099d4cd770c30e392e62f87f5244b31d27d700ec36a238d2eae2e31909c06eda8481f1cda430ebd1e34d0f62fecb4db41cd12fb57d27b6ffbfd9497896f5813fac287209def6d9ed3804314e8c6a9a2ac724118f3176ac1973359baa61b9fd0f523b86db8382b25f9ccaff47dd337339c9831e5b26f7d16ba45365b25b1fc47397e75260bad203659ed58d39305d9cf1203504cb4d6119db319c9fa29a2d664e8ec9fba776979e06b01a00a963ff58f47d7c2b034a31a9ba346ae8b5c1adba1ca35afcbe0a814521bff9dcceb7a6f072fc76898d7fcbddd06716296dc076f2b3cd91598060772b0813407a33e03310cc16c08830496139d431ac375a3adb3319be3674c0b9f632a33b65d85af6e94a80fc0713df0cd4cee2faaf4886fa142ad71aad26f0eda2049e7856a99510c0f36d97e5b3a0528224a84c8dca74b19a72a956191ddbd64f8e42d55e26a10d963318c2c2b4b1e863b4a1529e7ec94d709d9fb1884f4d632f0d3df5dfbfa2c4c162d8deb09add00e474d5ddbac01e6d9f09545e524b1766587c52b09a93c47ec97def64a0805eb012f2a664c48dafeb551a30e124d818946c98685036e7fd3370767fe6471212727b82fc25f16493152c118351c00dfb370ccc86f6768f5f2b200ce0c4ecea5cab1b3c5526adf4b2aa0a935e9b85feaa6eb4cc2585b191db6f876b6f549e5e2ad157ac8ecdbe408460467fb8b6874c83191ff17e981722721491ace26fdc51b98285875530642a372840ed86e5470c2a652127e38ceef5aabacb6a374f1a4c8fdb908970648bc3a283c6df97f7c6dfb689a68de6e8fcf82586d45360db6d4f3194546c406f85926f67f18437f32a4c03b827c248e2dc7548260b663d488266b396f1f3436c521933460f30397077d389787280e357bdf375545986b1534d682e58b214755b9601e4d880fb623f285516a55857514feb5c48e869dda1ea27f5571aadd609007cb9c84f2c889e52cb58f892348aadfd7bada1bb1ae116973a73c02d76ba9e202f51e147d2bb5f7a2bea2ef27196e45355735da373170d13e841e0c7911681f8fbc6d6d373a3419d221d953ce859946d61b1e5aa6c57f481830afa55cf2bdaa7d257f1dbeb066b6150e170ae5019517dcc5edb7418d16a02a98db3e154c315fc11137a10e4b8019576bafe58d3cdf90c7c8138fe6463b334740a6393f687d8778648063351d28d980fa32f6305d805724804ea6471afcab7d294313154d0e07dba87bf095ace23cea95083f25c1cbaf146de57c17e70a8825f372d8f376d825ff7595b8cb1fcf4e43f6e40caef656a230b2d6ff683ca32f439ccd4825d37125d286c9f8b7a84d9ef76fb9e19e1e910d2d550abe787973139f70fcfe2d2a23eca5d6b5ae25f4deb3deedf62f6e3148c5a329c63d192995ed921dcc2fe4882de095cffd881dc42aec18477e9c459c20265c6e22dab1e079aede59378348ddadc1df042e41294843abb78c64afc13cdb3b94994fd36eb6f49a995e675bfcbc80a7854fb677fa90d77f2ac107005d6cd623fa24eace268578b365878d16cd5e8563f1a2134f57fce3d15beadf8a533f83340da88cf730c910986ce5b5cae85ddcb771d7afeabc9f83c786c5596015ddac7ac54491e2558a7c00f5da828ed8b41d412d6e344b06c06aeb8bb8fc1fbc2d7c03cb331459952139144c34914c9a7f891579cb8b731d7af00f11f4de1c9c485479bb94329caf6b415ae772ebd53039b417d291af0f354d91e61a8fd7d0a583308dcfc160a7dabe80426c107784913455cc910a0e684c017dc2f3ffc387efba1a6f4ef8c5648302ca92e6407f15fb4e1306de56686599230680090e31921aa2fca14c055f87c70c7b1a5ca1a4b1c29bd123460133d84b244908352fb051d3b63f557473e33644965ce0e07da411210be2ad3f507291c25651e5e99b0a71fa9a4ba13befe0b06c8544f55d5d2ccb62ea497e83aa07bfb87096432ea95c478f882732e4f3f905f60644440b7c2e9bfa89a74b31128ccdaa703786e450196c22564afb56f0680460dfe31539f9efb2340ebef469df5b177cfe421237dfddb1665b062fe7f2b6a79349ca11cb9bc28e4f18c51dae01d377555f1013a5ea0a1326bb31888767e5c3b1d2a0b6bc57e532454dc98c3c164f849ec75d88aa9e4b4957950280f9d47173c4b3f8658fe720db6fc23a40d00fbed47b0e8e159913f966721eef62511016cfbf4d40c8b1ea1ab1f2cce8e2260729a91bb0ceaec2705bb998565634ed4bb3e63982e18b68eacadd8b8dd77ebaf1f16647692d0cb8f2b7d13ec82a2e6a05d2c89b6c39cd8e0d369227aa5039358b50425dd697483ed4bde9cfbe04d8acf2725f2258caccc29bb63ea4f9c85969de263383dcb5fbc132640b4f11876f751b9564c2b04fe2f8fd4b121d08e68b3a7afb9b9544f59f3f6e35dc9055e611499fadf135c325bee79ad234d8dcd8df882db6175e4e0e6a45c049026858e851962d01e338d3228f3488b5b1e4a64ec6011b727946a3f6de81ef12800dbb2e99fcfafaa2d48c3c5bbac12193b08fa906c9379ff667f2cbe8335988d5628cf29713b9e10d292d7af8aea04a501770ffeb84b6173f65fa5cb765db099357cca6b8252da8f5f536caee8574b7fca85e4daadb862a4d2f30396959dec99d4403b20dd8e71cd5c7aeefda5be4b5adc11b1ce7b14e1dd774d06b634c482a972b2d8271cb4c4315664cb7ac9677d0df093b23c95e84fea14909dc519f09579e4baad2d5514c48d0375dd42ce9864f1aa17e3db820ca140270e58712b98fd762c1e7bbd546e59b806deeb3244c463c8457cc883e76b959e3c3a35f7ffe85fbd67798cd8ebeb92686da368c5359d6d12f78b0191c51a96789eca0ded0d4e41d7145727d8eb48aba9c06c98144b4f5a6cca117a0df22dca42df7a76890d27e5130a2c8615987bc6896ce52e6332be32629d27d1174d90ae915b6e8ddbfd7a81cb82c0ef0bcf038030a36c79120b68cd5e7dc646717465b256ca620507a006f75474bc888c93f762e1bc1163ef047030469bb64343eadfc39e307f88bb74fb9a621e923f3887983788e9788982655cdeed62fab21effc8829d26de206b7a07b8204328029ecc0b41eaca13ff8f8fa2d6feec11def7eb1a63731352774d067df25e5cfea0b0b00863a55b6d221e8185bdf8b300aea3f5fbb9bb45e95c33b9771e348202bdfd2b3c7a8af86a16f75dc6833ddc0353c5c41024f973a023ed4cfe16c647fd5510cf3d6b7b22d29655372a6209c1a73f81b04680c65685760e0fd688e3d97008b55302e127e64d9d9dfb833188ceb834d7e91a182127f6154ba378ec66b36f534a2a20f50ab8d9475fee1bdd7cf2997e2a2f38f7843a15d6cb28c5bdb006d3b904d4cf7a7b73863ad92e83d464fdf858daeec2d3857af2a8b0bc97326526c44965fbd1eb6924f3327e5da5d7b2b53cbdf51a5a2fb123ddc763e5a9879db2bca8a59c1ea5bcd284932e7b3b03f0553627b30171c60462a85de919b61a02706233d895791cf16059c5279412bee209be815944ec692addd5928c83df45dd27dba6a2e88680aae173bfa9872a1adefb48f8e9f131df86c3a7580a6f80122bfdb7603cf1a69312df1d2324e7ab806f8e8643e5349ef063138b6d7f07058035bdfc03d74474dcb47a4462e274799ea14507889d1b1832fd6bf27ec5ba8107cc75e83a9ad22f1ff88318923442cedff303a4d1705a0da658c32926b94b6ad584720fa156a67386ea6324e971c4dc67da4b0318851d8c1e7978398b292d54addabc88a1bf06c2d1cb159b838eaedf432e22cac1c101d45bcd4532b882a85e1c13595fe52eab82fb3abe7a99b849b9ecafaef7075df889eca2ba4b25388d62315482600ae25f42557c1ca68fdd3782ec25ea734520b574cd4e162fe37c9852436f03487a03ddcce97eb736dfc2b7b91fe8e30772418c144a85071e52bd588fae75895134453de8a42a6c155d9856195f6b3a5fbd1895160806178b2dfdd6cd7ee638c94578404b17269508ae465a590220b72e311c7f992d12c18d3ece5011188a5dc652556ff39e813f05dfc4e292c797b538977d99bee9a109b0f42833089441736040817cbf67f7fdb9d430ddf8bf34229abe14fedad8212392bc30e242fbf3bbb75069905e88243f42c321883febf6b0a2a170b059ba6f1a82c373cf9904b42cd91000c88de27e8a17b2d66ca942d96e37f436f10de1f3c094e95a9cca3d134ee0396c9ac91cb38b9ae0897996e21d12fc0eb7035261f21ec9e2c9529a8149739b382208469b9f5ca8f78ceae9e7d187b97908c753d5b37285ae724853e5a03c1c58f3ff02d7b232e3da142b1c95a9cfde659d8c43327aeee2cd040f084ebd484d075f7154f4d8d9fc260b30caf19404ce13db9ae03756702d3e16974d02e91f1eb355d2de765de7141934358479c5e6bb180c47e8c88f238da542d18ce46fc808bbd904bbb13534cf2a08494c9248875b91448d3e1973b3103a068265ff1304b9c7dc0ced16ac23c3db2038fca633a9f7596f68018b8212423f4f7a0e472615ba559b1b474975b337756753f120d8545829f2112f837606330a022e44a54ef6ddabea9bdd9cd4da1ef6930ade87611d7700cb6138737fa3f59e355391a0f64955d7e14c27165ddd8e745db4e5e159427da2dd5a6ae3ff4b0485802232d89e687f90f0d2f3dfb90372a04b412d5b3e0938a6fe87963ac36d1542bf8eb5e1f62d1ab7d61b42003f98e58a92c75f91e794d964dedc28374e6cc42a80b81793eaebc7a196a0653a5aba32ef7bef41e94521ac32071af4e5a95325a53b98ed7decc2faf6d1f99076b45102f734b9a64996679fd8b69cfb7d37eb05853bb0d5f1c71000b5d386a20550143f6a2c1b386654c947bab4b1e42b27d188e4faeaaf2a422f205b23059a61d73e1f97eadbf005ac2a97bb3333bd7e27977a6edb9ed2e33ec0dff8b29bea07d3fad5616e33781dc16aa8c8e64f309f38168c647014b43d55cd46248fcaedfcea8089a60d6b708a038a0f1f4633d36f51a1c51abb6fe32163a1875749813d0cf0767ca1142e57c8a0ed38e8240003589a80de4e29c289538f1125ddb88bd12e8e1c2a3e88c93ffd8790881fe79d9242c35c7a6f090df83694cf46debb8d8dda3b395bee11b13d126bbef958ad82f4b5471d3fbac652308bf9802dbf7abc205623ece3fb104b8b21330d041795d9e207b2206b397e39ec923ff900e2280f4729ed9172e215d586b159e71f4919617ddcba383e91453def7e0452067f1ceb6d0b48f85ea0af1fbb786ef293d84c1f9f63580a6534892cc0db97e4e9d5245a80ee739054a3c3ba33758ae82cdc333855a60bdcc998c5f03a57b64bafd0dd205d6e6f6d4dae2abc4843c9471eacb4c6d07bc8c2c1d862822bcb5362284a9f1ff4b787a1215bfcea3800337a6da7561b278c7db9d505f58b0d94bef15f3e78b13f657d8931a67c5677a11d6d0401e33ea1146de8601f07eaf3ef7a1c7fe9d0b85da4ffbe771eff8bd5438d3659aa46a502e6a657f49f0ff500c442663643a4061579b1ea37ab719085aab1a06a59bac290201de9a4ca644a726d4ec803bf85b55fc2e00e8d0763ce6086a383081445182a0fa9dfe06a605e2b97409ad4d96ea6d7b1c4b9f9786e53eb3e6eec0aaa64aa087f154c685fe434c954179c5a5c99de905086427561d40c0bfd2ff17bd79d182d230537a1003a961764855b2b882c8de4f39b4eedc8ccb9d6493574b28bd710e7b75d513f86da092ed390f9dbd84d52da5c084ac20e40a465b3f6de928e69f41fd9868bb8dadec76d0809b3423a63207a9b2e0c8130485577d8e584fb9784e80ef7f2f7b55a48ed8725b7dccc38933b5087b085f689a90440021e895a38bb472dafbb4fae7dba407a42db4a70f9025dcb0a968137a80b2ab308b1f9e3434db46ef27bbf32acbcc66de8fc92096cfe2df14c8839f206bc94434e460b93fec04cb3221f2c4b09969660a96b78155e402c97cc883260d8c14972279b0191309380795d6f4652116105912b85f4e88f4aaf518ffd19c63bc6312e4034ba9e02cf3818d1ed7f2b97a28ced17c80062537a12ffe9d6a4b5d8558182920dc2f5acadfb7ae0d091d1714fe5447db1e0571785ef99de69b9429f5ab67b22c871bb5826a7cb269628f69e50383d595b13d911a55087087fa25a9e29edb06ac50b8e3278d7227d3ac1673d1f76b4459227ec003043975e2a4406122fd2a4ab0f84746e6cc230c3828a3b1572c9236a9ed87cea5eafbd731c10b296c52d73ab7c9a40228a9a50b551612345e28e4bcde5d0a2b2312d43affda650c8252b7b1395d531f00d5c43b9ed00cfb69278e900fff57b21554b4de0eda11637ba7cb0eb6de46670adb4c2544d049c5472867e9a8a58b86740978277b5c2bf32fc19be927a898531e46538b4e4f0bdc5d2b33d259426313fb3abcebc5110bb755f1a6dbfd65d303662da1513fe93abee5009383931e2795b9d104e6ae47459538faa0f89727bacf920b0b5dedc2b4ca76599b63c709c0fa8dd1312577ce2f42bf69d3f2c4429b1a9f747bd3e678eba8809d48af1c4ba61cf78024b7ba40047dc52f64f5313c39647f5d9e8fc5f3b0c3f1f8b44e3a0ef9aa0ada3b54bf9a29dc653b3df4fa7cbef8265711b35ed6243b9b458dcdee760bf9ff8799a8d9e65a6d845ac6521eaffa75abf5d836107db95fe8a9638b2fda5b40e7827f03cfa0f5e29998e470b4800635cf84166337529c2725874fe98a1858178c1a8dc263542523191b404077bfaa0efd409221b56af0999bbba1e8300a7740b80140832968d80d6bb340927ae685c2dcef7089df391e09a6cec9f3b45b2eb6f2ee051ac447d9090995e37cd0dbe258debc63fa97fa0df2b3bc0169a9e1a2d8529c28a2b42ef6821e58e09dda66301db23284f391a2ab4676cabe968a4d76be34b75235df9b88a949b490f1ceb73397534ce15e228955c0fd6373abbdb447892b08a8d0edd9f9d136b1bd1c106ed1330aa10882ebb19384eaa6c310e6c0f37e391c3db3b527b805c369a170865597d042f9647c366d774705fe3781ff77d19592e8795fc56277440c3bd9395a7ca371bf21a856fc72a6f965478b61f9fef0121649e7ffb111a4d8e88109a5ff56848804b65e99c8ca870eafab9ea2981b6a053b9f895b2b9813c45937596ad47db4456af9811c20503d85f253738f62e2c137955220835fa4eb5578795960bd11438afad064392ba08eb05c1eab6708161d208a007389fb0d8570c4d38a430294b5ec97e2d15af0ff8ccb1cd356a8b085e0e7160bb8bb0ade0b9c20f14b727b3290e6dbac2162c0784dbb0d9b517ca6a3f00f117ffd77f43761121ac8085157d7fd6eb65b3bb281f0d29bc3708cb02f99f9bcb6ca9fd17f7ea92999a93a6872c4b29be8a476f777f0132442da8834403547792ee26dddbfe61d5facbf380372c15209040fe0851d4ced157d890d293f26a7beeae645800e2c05b5df6fa05506e46c36b3fafbd6aa9e66973acd1ee813bd2570ddff2c2e9db4417deb5a8730120bd101ae39f18c67bb4e3924a8369dfea1c8b9a0390e92f8d64bba360cbd9c4d484232e70a842603e2c07d21bc2586337839287814d687380613b5468c431a5a7f6d2f0aa9d2b73b1f2547cef5d731d0d8b1220952686d7e72d08a616675d037bcaf3ffb593b3ff111e7095e46e7f9816c7dcf943b1c571eb3121fbc9841abe055ed3af1172d470a0ecd306205cc92df9d479af6092b2f251d17d9c033220013dd4a10a68f9a631a561e5cb536d4866725370545f2c01ad20771208b580a6d1f850c608d03b7aa2f6282ac9d0002113f964fc651c2bee6621f9e7a952b0b6e4b77090a4e7279c512bcf3ff19e1a28059460038aed5a68e51f11b87cb27f5dca090222dfe6e49be67e66dca82c60cbb73cb4df8f1168655e2dbaecf1d704d6793ca59d933676620c082c96766b1c9f79e2302b6bee376e883737797e3afacec30fed85156269dd1e4db4e3fa0e6b4a7b8ef88838444d3c9a499cfdb1149a0908204ade1af74a80cb3a948315dd4277cfa0b89c842b2cb4b44d5d0767c949c478247999bf01545a19e44635a3300e66d0567d9dbea762c9427d9a2106b8bb7ae6841e58c4a2d7da7ad00f2dd9881e2f25c79b527a50565ea77afa96c15eef988128fdfc56e2263dd211cd04cfe5a9a4a881b90a76ce9b1ec46ed70d6793a0f589b5e9ee4c0d04ff47d4595a099ba19101f5cde178b644f061ddddba26bcc9dba2d407d599395d40a2698f32bc40fd0c6317229ce30bdcce36413059cd042eac9f1fa4d3446b0af2687d47b6f761b89032f1847041a1190df160abf31509efc7d29834527ef62a87b5d7cd9991f784f4fb0ec2f4bb5ddaceb5793f34daf524cbf7fc635f89427f1055915cdce335a6ef96b42f052b040cd8c4d16b38ed59fe94301605ccd9c650d777c8a1d4648c3e3bb5b817e1f131d256ba6e4306185b64766a960c91209093067410ed2ac7e97849fa7bae06ca5c6758d13677036a2a68c27fe3cda2d23b5778bea69ef23b0ad90bd61ab4d3eb6a2b66a277e5e409367f7c41704fe48ae427bd1ffe08d5b51090a5bb4f1ae2f3205d4270bdb481b901c6449f37318cc969e351631dd6a727a1c593b9eaa0a3b3b534451db984881b7a58d0795a8cea44eff6eadf4998b478c47f02fd4cc44c3722bbaeb301674874d28936f16f7585bfba542ed7f26ea468265877adf2e08081627bd19024dc57aeace112150dc7bfa341b4f094876897fc1b76428a631e8af9a66c2c2b328e14511e38141a17c329f9b843bd35e16b7b83e2c5d7201c9e63884a6e51231acb884343ad94131d6eacdfb0db4d86059e115f4ad31e15f9ecf61a4df72ce17a5ddd81500e7a8140ea75263fac5991d370d07e91c059cc00f8dd00376686f91dfff9644c409279c37528522b61002a3a3613997ee6a7b5615d96ec34958f9b8c015773ea04b46f64f053420dd6c0bb29c9a8b1049eafde01ed96be6b6876bf13d5b0b3ba8a1df4336f5691f1b326481d0c75cbb6faf4cac76e508d0609148326fd748ead0300f4e141cc7d6b1a0a0cd93f53d03da54e397ecf8dae2199b905b261f39d416f8d227c1f0004754d1cfd4828f8b349aae210582d0021251585d42f1296ba86333da61eabb2cb76e45f483324ef42d86c87515414a6a28138891f65fa8d333983a97c768daaf6124cf689b9d6fa471efb6bd5cebfc807f98684daa6ee87ae010c3b9938503d69507f0783cb152e9786b7698de354c0c6591379e41d5869e203df4801661a1e6260b2f260a820e410079d7a0d74d7b356f7a923ce65bb957d37f27c8074f9de80c2295e1463c38c74db8b67a75ae142bccfe7ca40bdbb8b5b01551a2bffd43c6420690125d02a495a3c76f0572b33064fb5c16edafe71869f632d647a7cb1b84f8814eba835f76c3870b3950e66224530a8e7a866b2e914e954c98d57b568690224f5b7d78d47a4f500ff1eca2db35184282face15540fbb18cfddcd30fb2b8c2c14e2ed6515ae3431f26d8294fafb704b2f5785f910b7046cc61cd29af21a0d4990e886f8dd4bb0564855ab4346344d728cfb001e78822b554e2ff83c4e9262a9772facf37cf2b67159fd0bac852871d7f9665492c798d6f0e82c6ef28dff2f79040a3918133231149a4524fbb9ed1c364b8e41c69f1bd2bc83724c8a92c997e6970bcf3b2a8621a19ef9dd8cb2d509530ac24ee3447e1a08cc6736542fe271b76591d01bef62b9f9ba74954dd2950c8d35350359fc11ad7bf74de4a20384c37c34c9bb03ed8a184c48c965e914f35d656b1f1289529c26a2b96e58da77134bdd1acc7612c1b2a3ac4c46108b777487d1730ce8119590e9d660cf757a4c34886b03012512621528a1b34d19ba2886ee816d379ce730eceaee4caf4d83550790a4ad0d32df52b7a7ec61b4377961cab4f838b5ce5364d24f8e3f69947431572c6c91d025d24811ad80cfd4b693ae5e986fb1db0a00072b707c0fd4be93ad7fe52c5f8fa63558c75e99b117b2dbc62c4112efd30d1f3176069a666e187ff629c9b28cc8eec4dc822da6e7e19888954ecf8ead7f3bbdfbbe7ddcf134199f597c178dd0bcbf31f4fadad06eb8b55ae8c25eb1a75d733ff885c52a3009619fa5ca130746b762b04405592037d44a0380944882e5dd79690e09a779ddfbe8988751616fe65af23280e441025b8d0f2c8cb415503a5778a2fb326dcf89d0c46866663d5cfb00faabea7cff6491d66c6eeb76b6f9189abb7fddbf4d5ce82fa08a987e45afa6423306f050b73186f4cda9011372133f0c08ad866d04ea8f95ce904031bc88debadbc8cd10cbc004ecdf455b6555add2cfe23e5be7fc49a53c664d75c6632ffe794aa80d7ae523e0961099af750418b533085bf7a476b943b5619b591e6d893ebda0d36725d26d9c08965d78f96658d8fee8e2cf166465599764d52e0cc5c0f74b82ed8ee2be80c375b4736dd1644f863459f6dec85fe5d4b3b03afdab36894e655e50eb4bf533fdc4b5f290c4663af0cbceff968413da10b83f5df065a574ad9a4e84a8516e3054823abd6b484d4635b698df129d6f39b89c2180d4bbc1c42726cf1a8f7388a738e9f636cb7dcfaba6cc286ef2a13b46cba86b733d160495bf372b25db76ff4bad923dfbd126ccb5ccc2f6cadd3b74e5a7b875855e60598a636ad6aaac0f1735adc8de11a27514eefaecbb96a0c1713f1a7377b16e6702fcf603689562e543088d04a767a3aa406adb6c17ea6b4068879bb52fa012acec0ac20b8754e499bc4643dcd7fd030a80eb5dc8d99a270932d8596e2d3b668f50cc4f6161397a6fe272e1f8f3be427caad198b01a3a8f5d5ba80f4ac50bdecf4b9e301227ff15e64966290b6680e4a4d031724163b9301e2843e05df73a5fafb386717bd2f4253efea6f1df35dd7b016adbba5220721da9dd092ef20fe2204aef31946f093f9bae570c853b35605086134def4c3381f09d64be2c17add11f3a58cd57eae95670ac0a8ead2d895f20f45d5ee14e9a951d849634f50459327d4ccdcb73bcebdf29df1657f00df38d852160982a85056ccaad4aab7fef9c1d26448acdc4f4e3f17f8d3d1c12fc1d66e0a0daa513073ce5263f9f0e170521b724d1a0d6f2b357b4786498e6c4604ab789440537a67d195f185ab5c66dfcfafae0ad11d9f6ca2871bbf09bf80385c6d5e95b895697012e72aa86596c35593b076ad515c791c9eb9c347e5e002eed88a625453a5127811d2eca49ca82830ad1857a82a20c3e14c6e30e8da952852f5682ac5f129aa41541e175dd72a2f449d0d56736395b6ecb062df0b479d0bf6da57573b3ccea8fbbe6b48f56aae555d13509a78d8f3b459f99745cf30381812ebafa66b50e95fcda6ed96ca48e93cb5c7a9b4fb9ca0fa6ae2dd1c20a5a72b07b3af0f1f62c3ba14f1cb6f8261cd1c246eec9e7487b1e79e3e7bd29e7067a89255813ed6988ebdc94c43ac690e9998230d212e0db9730844edeb697511cd6e32edc884ef72462e64557d8b53e0933fbeccc62eb6ab8c3add402548e06f8c2f5737faecbf9db6d07784e5d9f500612006c773bde2fb730bd7498f941601ada32ed290bef165a776e0641a11bdc96c9f61c1a5e1ad5542ee1a9c7dd1beef46db26a9a2380dcd6fe37281da68e7066a14500710693277b80901d9d30a40a2a01a566d2045f970be4d6c0071c6886d2f15a189a4c7b1fdf87bb1c69b8f63c594f67d4165aef41f20a3fb99fccf28ae6fa357113380e4abe007c1077818dd7cf629b38735535ecb7bfe09e8ee57b0010f39f9591687fb37b736551eae5fea0849ff549a0a1e08ba677954346ead3c179dc2817be2ae519d0b9d3394416af98e46f8897c4d7cfd7d266c0aedd80ffc8c29a7a94152cc4953c11933ab8e980b19bf565199282181b03933a1b976dbd0336b6f20a3da7d2da5941ab1a96d4426065ea4ca9d6aacca6342afdd62fa883f93a1124efee39844a2a878d6475831aa6848d079be611df5e588090c60b10d73095212697967f368bbc30829bf9f750119b03a28d4c558364f883f240a37eeacd74f5fcc5af176c23f38d7a358f30db69bc44a730f3413a15267a8b5c95508af26541f608f01d4162da8c4bdb64c17370a41dbc5c01039b72f97616e69fdb6e57e914d13016fbaf525d8449e4ccfdf8cbc83cd4e65ab166be88ca69ef1e59fb7c323d26ab6824c2d7458c951daf939364bdcc051ea2ac4bc7fae8f0c28b85e9767efe92f758b520752743f02a7527e36f3fd905932c91d321716fccb262cfab0ac76db894cb6d5253bdeae49acf0ee0c55a0be2361bd80762af1566caf6890652d7bd2dc4bebe86d9f4c7716d25407a34c1e1cfa81cdffcc32da375dd25c129ef3f893b45679bdb750e1a765330a057da1395065112309dd80b18b458297c7b46372b260aaf98c41692308ed3fecc74985751b8ae7b205b4ebb9aa2fa4e8902b67da09923c3f9da6fe1d78a2bdbd3f90ac68809c184eea4f78719dbcccc65f198ff94511e4da20ae25e29284c215c04f8625650b4733c99343527322d9324cbf0eabc933777d582dc2a2ad32ea0b2098be3dfdd190275d3acdbaab7a6eca5ecf3b37b5158b816753b560514291b705131843b744cef3507382bfe5f3b58e0e83e2409ed46295f4502c5bc438c3eeb4c9112e43fba5d1024961d62942c2ff69ebb0839b6ee7a14ad9a810a90c38b45cd5bf8d9cd364b08854e52665dce113dbcf460f7d3564e1c6528ba9424ab3b1579fbedd94d2daaca75baed65ace31fc2860b2bcb8c53cfae69c49638593243d3e5b4f5860b9e477664b4e5fd8109b7c2c1190dca729b93fe6f3f6166fbad7d24904032b1beebcce1633527414bc736ce7d964e56ebb0812ba9b2aef970da77b56c9dc209f4b31a31da4826cf618003bfa10427d6ee69e284a14b0d8418fde3254278a67de1119d47a7c319bfd4208c83b43406840f80936917dc2caa36f0619fb96195299c4b7eea219de5111ffaf63fb294b5fbc9cd76309c25a9888239a435bb5deeb90b1a10169518037a1c6cb336e55beac07b7e2865795c769a62424d1db118738925da5f8c6155777d591fcba0bf732c7d6f13a0eed4111ce24f86f354916437b30ff6d9cf17dafd2f7ee42b6c671a3f33ad3225107b06efe70d75efad5e2263b69c9169ab0d89e66decf35fce41f7ad7632066f30636c40ab58ce923d6d6e8bb5b49dd462fd95c125372a1790d18421d8c7e7465cf0f457d569bff13b1ab3203062c350d19b3d9dbde4bad6ae8476a88f8168902a1e521bbace240bd7493a942c76ced28ee9e53d8a9dca53cecc9252b647bbaf27d482978a232e6aa427e148d177d701f65ed106db33840126ac683656eed15f2a9959f866e889767bb1c3824bdcac8ad8d60d30b3cb6a3a58431e4a003fa76efa312dd52f38e74268b4d5b5c772a255c7e32f10538dcb48b6ce87e57b3588cfa6e5d7d4d0f066332fef86530f440ad5d00d03b14194ef206b0e7f1a372982a1e6db5b4d2f41f5a527bed04141224885178a202cec66a9f1fda005c463929251a31d4dc821e0fd8a804c5fe37cfb0ef9004b984bd504fd810d1f137ee02efe47168426f82319806d1fc5d18db665c451c44df2d299a121dc14b19c29185176c33464b3ef9e7ab22b92586e9580ca70957093edb83bb7d501db5a7f71d092a01308feb7f05f72a6bb8f73dc83d634452c778019bf3ecad11b8b95d65fa3b9e913f88e642c7aff27da1808a9109e707bd00b43630dd8492ce69c4bac2ee40f4bd7fc0c48bcecae90418cee0d76ded69c4964cc8f36dfa8f8c68604018de7a569057dd49af3042016a4ef25173095b5e506b64c23ce3b7514253af8bf3147f10e5222e10142299fc9e120024dbc7f0f0c542cad6fa574eeb869d46b29e70010416bf84e611ec016b835f7f9b8abc5ae778d15348efce515a8dbf0467f00645d4c69dfaaffbe3546bb55e580f0217933a7a224344c7d45c901535795bcdc5af950b26f2476a2fef7b280bd41fa4b648299ec233f9eb3b3be01168fedac6c98ef1f84dbbba3777a6479b2c79eab88c42654cf2378ca1e8bd75853eff2bb96164555bfb2788987f3e5b3d9bd2a70a4e328a5af3fbbd76de49d37cf8fc8995c7d8d845d4329a080cfcf3e0c38de9f68f27e808ca684598ce6916942fd130a2862d8830b39a0f27fcb24a58e60fac3cc99f68f36a40aa348603841b70be9738042ac93c1fa2b781dd7033f5f7a5d60011c64e31edb3d933ad4dd52ab5c4903e2924d8c6efe8bd89a12527d269e338ec4b2752b9e8ca1eb932c52bb0e79a7aed752f89423b6efb5d23d9482118e7b797c8e6ba41d98e6130b96ddc57be432063e13eaec0bbd17ef103a578f9313d725d907b855f9e9cf74f7675ec67faa5f701c54b96a8ae7308d854483b7ef691b233cf19a340b77863e66e4c0cecec22cf7dd26d73f72b5976fb95e6bc051f8c5d30871a1fd0bc0d665babb57fb1822e5004fa728927c66a9a06de9e09463eb18825f315c8b6ef499cd04953cd6021a912859421b4de7f7f1293d9660f231c7a4f0ba6342154cab23262f3f261d511a02efa1e404a2082b94acb7c22645290ba11e1d1ff49f9ac43d0c3f0264870502121692f203608980ed1dbfdfb2fdcadeb55465ee37e9192c9e538eeaf8668a28e9a36cef3a57256bc60c72e4585742036a7fb32737ae056a8c43b69ea6262c864503238f385a9e49f86695820fc578e219b6099cf381a34210147aff4067ef891027de74b0ef0cdeb2fccb67be702fc785c7109c5357bd7006b25cce1cb009385ec8fc35ae247e4c94692b821dcbe95f2d4ba39e99497f3345265f52bd0ede4969db4d63e2b1a29c35a992dfbb269b48da4973235a9097a351c32df8a2c227f7a3e619356561bb8d4fa91e0b4c0a29a77a1f0ff784e428dedf4fb5f5f725a4e21200454b8fe77a0d97285693cece4f3ea1d046e91b370ceddeadfb944cd17b5a8ed00c63d355a4b91d50121b7c41d6881a5629247081f4fa00451e28f621a3de8b0f2988504484ffad85cc4564641667c2280125b387b8aea36b490a5f2ea188c9faf8300dd099706ef92ecbf0bfde8e0981f00cccbba075be79a853a82d9a605d37a9c6c8b0ccd2ecbb0b6b579656e136f4c154f2fc75838124dd96ba03795b8510bb45d104a2dd87bfb027ba0270fc2f6266975cbfbf288f843c9f65f26a15af8ce353f86995c740b17a1803c0d59ca2edf8e474c63389a3299e1116e7ddf77b70a1d7cf71913f4c049c3595263be8e39edb6619379468e0e9503db9b2120ca4db3ea41c3f22e8eedf75d4a185d425318b0f311da920601c5b27f7815e45aadc11078cbc7ae7672d7e3dd7407c69568806e4609cd3bce14ffece22568f2c2200d17d370482786358c5b54cf1535768b276cf80ae0d69a540ea6b30172305f5364db9545a679d042243755f2876ca68b58c97145299bb2276b8a743355242e2e4426a8665c24169577e794c1cd3dacaa6ea26c44fc97438a2de3c6f54fba96d6f702739e861295aa91668d1f6a0bad2c14e94d12b266017f0959ea90a067be243e6061c7bf0b710fdb9801f4d06e5ad2b5da22ce979927771f16ca45250de7d45928c227dea94807f05902122f76659b9b9aa264633ce793a81925a4e4d8eb0b3617be2f782835cee504eda5ca8eaefde44d3a2d65a0db60a54e18089b4c333412288d7550b062d4233b7f78605cbe477567b1759309dac33a8ff1b836259be91a951f14229e7aa4ad5c3e8ce4b3934709d4ed07f485b283853d6c34913745f4cce2344d7a3a53f76cb0812f3f85625d443e4d8f339a7e37273d38b5bbe051e46b2a27c1355700df5e1f8463ba2135d823ea281a4e5aa3bba6944661a6254819dc66fb8921acd90bd9002627d257e7a6b39af7fae28323ea9bfae49ba80b81420e6de692779e2a449ea759efeb98654c8e6ac3dbbd27ce09c9dfbae440b2319fa4f159b9bd8a24109d9076c3495cf349cb33ef09587bbd4d8b86cf9ada752e2b55c2c6585b40c5843021c7d2ea388b4d1f90a910b04a00ff30d42faa7963b27ac0632dbc396a3a88e92b734400a1d676c9f6e274312e805418a1c6a77db91e96c9322672d6f3ce3b55001772830554907422fec2bbbfd6f75bcd6fa8df271a2f46609283918802ee91012c603e6c8fc59be7e106db46bd721180412e3398ca4321728eafd9804ef3e427af0fba44aa08396787826111982a5e4774a34b0c2691c173dccb8e2e3407b3c863fb883838b79b36f1156d1de5c6271b1ad87683b3556218f638ff84cc3b802a02f811963fcdda25797e81829edca53b5cedfed99457fda569836701dc2c8e7db8ba72db5952127129951567233fccb5ac8dbac1b130c92873c8a10e2dd031af0e638c1130590d8881754df144d8f12fecccbe6ede45af46dbf6a6c1b0aa91fd0041525f8913a431e73062df0c75decd7dcfefaef4092dd333cd87036174ce38bb71e65c639600a18705ff9621ca50d903e0c2cddef16291abaf11f6edc2dd9d15b9dd3c25cf9b3386dd3ab62e00c89fc1824039cf243c20c682a16b4fdff587cdeac27d89c9603cbcc61e3285647356416afcb81d14a1f18d7c29da2ff0ea5df846b1db18993b949a17341a0a489d15dc82bdd6b4eedcfe20bb3affc126281d3bd754e02ac56a2d5178fc526020bd79b0c82f51fbfdceea67a003f8a80119e70b33f55e1178d136a7b3d87b6347ddd8a34bffb003ce3df714e7694dbfb5e0cfa4f5baf243d47b2373b9cfdd9cdb9a8a4fe619a4e9ae3129310631acac800e8efce2ba716b998635f1e81e1dc6841d416018ef120f2897098e7bd130c27c94f8bb36382d16c9d6a41dfc23533ea9287798e9bed39631f51947c76e1871ae23909de31b7550061cdcffc48ae9f611b05be69098f0e8b93ba82b33bd68eada15a26d3d5a51c7bd1c07d6aa31c5f8d95627c12074fce150173c78d01802051f866ece03109406155197d1ca172a26c22e9afa1aef2f936ad594589c39ec86dc6744d3a082d8ac3845c30a385b836a1f374b7200026d34db37417303cbcf162cf5f7ed599774b731f61a8d5d4a1e7e4806d9af32f295cc89273d3e1d4d1fa4915f912b42214a178ab3b21fd5a29acf9ca765c8363d61aa59672d26b3ab065853119e6a86f15108b3d1efffe175197a27d2b212797fbd7fb09ef2ba95bd77f010771fbbb16052668705f3388d8159ff573a962b5df8ca31807f0b0a50948be8f359058839d29fd78c860f9dea7a030b90e67caf7bac38d68dcfc85090ff100853abaf927d53ac6eed487524b22278e84fce37e724a80f7e23b6533529c068fd30ac91e0b0ab00bafcfc5994ccf284872d8f590018be412c1bac931e883dc9ddceb3a2ebf8b5c5464ad0144a6df74280e5be6405e67c1c48ff07094e16f75c2fb08a097e22ea7246a807e9a76420b2c19f5533115137e8c7c9130e5219e8d843ad1ec851e12b71fa42408d0363a3beeda5876b24d187422f24adc32754a62597e2120b89d0c3e0417b52e0932e2ba2bb04173b17f63b347a4f7746f084921647f49c38dd75c3c87331541ef77e3b1f41025e3b4fbcde62028f5d7dc47d84d2e2f8aeec6da3843aeabd3b34cf65d69d9df23697101d758ac3a7a470eb669f683e2fe8d786a01a165b258d734c921876d4272c6ebfa29250cc26eaa376b16a399dd90fab9843a68dd0c7bf8fe397f921a41e3f4222657aa78ac03cc2e21bb2baec001da31c12f4037d861186640432fa07e0273955373637fe5fa235b23954321c29a02d476aa57e0e5332cf28ab62fa9f521f56dc36e741307397a4b1d3658773e233b5338150f0c85d609c0334aea53f2570705e3d5d018af9c1cda3bc1ffdee51f5a70fb6f00d2e9146409f08143a3922077b0efb42b49b149fa7765cb45bb9d1d6cc1dd4b5b9423aeb0105acebaf2725b85686d12ecfbe68c7fb98f3844cfce8916370467eae6c2e0a719ef843fa26557690b50fadece73c9ef73d2e5e91f04f39825c95fb04ebe741fd7612c0d66d5623ab655a566640ae41cb1f2e9d25f3bc910b946af80246d83f4857aeaf246c09f8f25baeffd2aa5ab2fe3f08c34d937a19fbc2974f6ce10cedd21edd93ba00c373cf5e51e1723397a5b9853d0811d5cd90b37ced3c3584b9091e3598882bba4fdd6145693c30892d7623f27469e5873e6423ff9202d3f98ef4765902d067ed23a1a27298326767a23c30d040f32067587ca6266978c0a43bc84221a9d0d45f1c96c577c2aeec3973e56ac5b5120c36265a12dd7a8931f51d487c2487a85a50fdc6d635a143a9faeb484356c3ba5fcd257346f160a4ed167f0c2569930142511f20641ac03edc372313af96eef83c85f73d8f442eb15b1c5ffb603871457c76edd17b16444e263d2be732b5b061aff9effd18a77ea97d35b3781affec7a9dee6d3c0ed313d9e5cc68f9fb1ae3324d35810312146b5e939ae8265f029786692f3dcc3607aabb37c2842965250be18b900b726f81516a23abe575510afc73af900b718b34daec78eeda53fb4ae52eb24810e27a38a469eca8227b70794dedea848a5c29299ea8288d080534737bb54d72f239ce373333e732f01d603a6bb21858d2674bf8d564598da002ea132c99c70061445441804e586028f344bcad06c1a7b642344d4821169c0d0a7b6e6e11604bee3e0886114e91846efabba99cec8baf7775aa507a0781aa9980e6ef678dcf7266f0562999a9e31a917560c41160bc7cda22369a277788f7268d0add9f12d0dcab679dc93d22e21058387662e9ce8523b373b25f43459e72c6b5a294e4cabd56f5831c5596bbc638389a22ec929468cb5ddaf6bd69b3636253168d2a887ceaa493966e32b6c9baa9d227190d3ae1f83e7efd6d085984ce18c33c172c3c44d640891fae7366ee864a5a80533c0f8568a18ab68891214722b87cf393940006ae2e8b2a3e84390a9027316c571f8de39d3e948170318d43da500da1a5b9eb8d506739a1e1fa5865c6bfd391fed12cf41da60e0bafc894872bc22787e6bff3556ccde51044d48c8d31083a185d759a452798062e8e415c75b530e60c3b81c259769e6b20df4286fc6340f9607070fd6c622696bd9f3e2df92933c824b8fd9bec820926d120d8f7676b12382edc02f038b52960d180edd7141470614e26fb72f1c43f35b11d009df64898058d0fc0181974cd5cf5f0caa04ba6e3b804e83130438c8dcab399266974c029a5cf1dc9491226355bde84b858356c734774488b3b1b28f3fe7adc64ab89caa51552042117f5e872f91eccb843562da61e794b6d9716bfad37c88580672cb8c6720c0a1fed43157f295b20d4e71cb2f5ed156ef4717116159c5a4e9ad241a015fd3dfd704be1e24db443ea7e86cbcf8cfaece00788cdfd5eccdfae27cae6e50218252c9b94edab807f96048079a279538f0215f60167d5519aca476a21ba3810bb15ccabec181ca16c18b7e3654ddc916d1583c4240bc1879fada6c36cedf8b642dcf8f253584090a0fa897403d1ca0e2c391ad7808e9ff7cedd42bb485adb4f2414e2f438f0588805872dfa2c8326ff5467f0d08cbb0a8f415d5ca8bf4723627c6a736f1362d08baf33fbfc1e271993f9d749064fa01093de4587012119a6cb9d53f4cd98e093c26eb6c4c55d4ac7509be0f85a37379906f8e3f9d4f0790a3ead485f889e5fb5f07b54eebebcd1ffc04dbaffb8c18b12423284ca235188f318f6f115b62e8f0b095849308dbb27c83491eae07cfa0903ec1140953d86189d368859f6ce14ae4a3a149c3184f349073c9f076e160175a88feb670558b59c9905e33082965fec53c87039c0ee5d9ddd1230b788fc6c4e8bf6ed257491fa41b864f97c6578a86b20579535fba2119f075d215ae74499a864e427716977f681fc1f9a8e7bf6fea3893c8dd90cd41c84cf33abb6844cadcac5a02f2d8f8825842f2f814adc0131c5d4184b1e2008eee413df7b95f49645035864a66ec8163a397a09ea43243894038a6afd9dfe3901aa3836ea0d9a355166a8656371fb2033fb2f0c1d1f7ea01ff8257e386e692ab421e1bff1331a326c877edb59d103a6f65e76eb921de002e0857a2b62d5c7ff6cf79c885ffaa0f9d028d8dcc2cec5dd4c44d23ecaec595d4c158a081297c791dfeb4a9e55f71840802cecd54f9f283696259749d38069206a63e43d846b867db915f900edbb44f70b91c1ccfa07ccf5b71e437f5d1a967dd4a124d7c1bc2404a305e0662a040ac5d0bb5cfb9cc4437a97448d65a64c3cbf8bf54e6f4eb38f196c6b7a7dd9438862b40968223d577ae26102a87bf4428646cdbfd9a9f5b06cfcb993c98d279d208103612470b8fe74fb7b9264e7640b462a3c2b9645a2afaa1d35b8ded93d6f97193032b3e376b254f350a3abf1f0449d01b2d9bfc7393e256ab139c30770405978939babc6ca33e715684d59352233b56ea3456e9080e91ad41f0ad4a75aedc43b340338fd9455078aafd03083576437adf5b31b9fd01a868aaa2ffe25fff3c4d3145bd750daf976f19fab888fb27d9ed77d83b148f46c29c2f297eb8e0f47a426c70fb4c6a7d4793285a2ac23266a6b4d4ef76ed72755d4ecc03090afb291be91c4e644b06dabcd17ca9f295d81b9c06254a81ba78b174553035e725285c6ecb98bafe2d4b4ad0ebce35624c8c11440d80430646011630886b0a2e02d398b37cba9ac5dc64a29420dd768f76b3ecda11ba2bb4c8b4c714fccee717a206a308d4ede498d936e9c21ca9a056ec658b2bdb313e04eb21512dd18611ed0da330c17cdb846d305df4fde0267087adc12b0e3077cca7e0872941c875624c0c5b485e09828ea619406b850e274c1cb4a17d89730c7b045385e38832a333663c7e7b6347d8d85a1311620c1dc036c56cf442bc6c8722afc90004241d015e08b999c7cbe29a53fc3f2c138618656f49dff1da01a2ebe3399ccb73cdb32369864cd703744771fca9a2bcb90293d4d6d887207e6de95567638bbb618670c1346533c7b9c089e7664c685f57098503823c48f24fac9fad5ab56a3e346eefd42387818aeacff8226e2c99a83eb32d50d6311f72e7a5664d7fce45894af3cf66eada01d21f29c66020fd2cd0df4c2b17365c22d51407958ee8cee3e8560fbe2cbcba0e1eae3a99deafc5e625ebf0c1dd213e525fd42da994ad765de8ebc130ee0d5992fff2992a71c623abc9219d1c0c58661c9e3869d3f8a11f80b47f65ec29f89395bcfda79966b3c75ca512c79211b31b5de8743a9d17497526b0b3b98f158a293673cf229b0b0bdd722da65fe22f109ea65f87d8151af272af0ab98bf16ee1f0e45f2a5a80e87deeba6dbf7bde2f73ba2b3284b1c0960f28dde8b55a6201ad92cad3ce2c3344c55ecb792a7b16f7b5a5e8d5e6e3c8ff1f856357c4a2d33f0c058c646e15c0101dabf8bc71aeeaeb681fb8183eda749f065586a5ba6f63cb18edc722407b776422b29ca3e72617ad9bfe970a3a75904781b01e72aecd82e5dd408e1e130058cbc90801de92cceba73b9d578c616198d4ecefcd44043b0890ac8121c86a4cadb01cc862b3ea910c4317491cfb736e2197d4bfd704c8f7d54ead5cb24a3d5818d31de508cc4bd4888b77676299851c39f9b76b94ede047ece94575e739205d6fa373211c7a19296983f8a453adeac24c9723b34b4077b4eac2d4ca152a522b1b7aeaa6cb745b65ce2ab59c4b39f0d61e79d73a485dc64124fb5549ab7fd50bca36a91fdd3d85379fdb93f8ffef055e757c44526494c8b3c4613eaa57b3ac1e514118ad1383a2a8395db663a8505d4755e26a74d0155e9af88b734d823a00576c2115f26c66afe22f0363b6358d5b525f399ab07231a8e5d79257b2937a8384abc66c0b3e988f9bdf769834823f5b51ee66afcb91ca766c8cd809dd2048744b57b0e7f3fa0e6a87c0bb9231faa9a2a327134464cd87fd239b8fd19160022d10747ae4ce1ca0fadac23c6375361dc37b8d3a077296ced652a5aa85e3eaf1d2bb3ff514eb06e7503edc455692b41964a737a016407d04678b4e8199633c0fbaaa73fec80f0bffad16399d5162357574a3f108f256d25df6dd34d38c155fcf59d2a7db077c538b930231a9278f8710fa85370cbda0cf038d2c0c33e90851b6276e8852f4e104c86d9d67fc60d5fed6bbcbf7e985a1cacfa00aa38bee893a37dbe1c095ffe1eff3dec788ffc757d2074e40cb7cf4485464cef79bddc4683592fc5715fa678ef20bd71afe8beca4ff963364afa9fa76b528411caf919a500d62b42ac740683641d12dcec58f35948b9d3538fe3ef2c7affa237e82306a68497c8b3232e4e2396ae2263505256e8b23fa0445320274ffbc1bc7aa6bc837d3c30c38965d41218f55653f9da5e11bcbf3c7c32147a429bec3885ea965abc7dd57e91ababcaed056bc22a2a08c8eb35f8b31676fb6388a4664db1312c182a8b55fdad2086cd971044d3dd5fbeb3d14093b8ba83d0fbe63c271a0ad32cfe0785e2ccf26974bf26ca47745d04378b20b7ad9604fbeb6cd3884d2573c22ed7672cb013591734404c4772e37316b8bef2b6abe563a82663c019c22904b8d71f4c5b3c81090180a0191b975ea7ae43dc7d85ac0700e112f211a1d838973b0e2a92243c2667baffe4d68aed7138e2c8a0f2c690a0d397e5f62432990d89388fec98fbc5b913332864573826f5db0db9058309c72a09b4f7e8a83528011f22f1f580b02e793319d8390d281d86d00fc000a8dd97bb04ea0c0f67659bc15eaf0d2baa85839299cd3e579f62ca1e4d8de3efc6af1d39f3520761b19b61dd5a7bfafc2bcc8bc0503869a71f9f432f1bbd8ef193e3c6bbffa23f492508328b274bca0842cce7970d9535214484245d99fb943c3ba325983762ade62c1f9d2b378d552e209961a059fc8b0a178e53fcc85bc0b34695e1843d750c798c856d0c88dcd4a903eb5ee3d7463d05909f8ad7897d67826fcf6f5efe0f8ccbb60465a16caa0be6c0a1c01f9bebfb67db80dc85d2c650cdb95f4e5761c89bfb1b9d0b686711231b093e7f349d2c45603844cdf59ed6afc4e496bf4bd89fcad05e6566de1d4e81da4b0245e344fbae0ea1564344e8aeb2025940170fb5ca238d31cc9fe29334750927599b657d050d8637ec3fdc3f83e54f2c76bb2d7e4cee2dce6f0c109fd0ce5c2318b488a772ea3cf05ff54cfd9bc7d85009515add6c75635b16eb993cb6c319c1904bfee27c27436a64c53d94acbc885fc8142f4a99cd34a55f87cb130f5cb4515a83d74ed945693d470f756b7007990592960822f0ab59593e726f48a1954ed734d0c9115bb2c2e8c419dd24e0af4b0f8873112b28f6db4cc3c63bc98e7e683c7f1134fa428e6223ecec59675a4e247e4357aa627d8ac8c065d13644a436b4fd0264dd7c62fac5af0d8f084023dc90b37a2edefa911f33b6a0a5d1bd73faf011b6232ed0b7c20c192b7b430fbd85f94ae7b92428bcb8cafe4d94fcdf88e54fd4f33ac12ad7c46275fd80ed3e802e0d2ad385ecbbf0ae585f8db705ae96e263800f13faa8f1f552878ce6c38cb7b9cf945f8427942688d14705471ea492860c93530bc59b71c7170e691d0936872ef838e9d13cfa6ea7550be0e66384d44cb99a46f8ad33f9443d1adda8694e3fe660296071f60e02d3a478f6839e67d3b10845c194f44a3799708308617449e75dc4a62640ded49ce9ec9ced730b4da17337e497577ba727da4044fbc61082b55c140c81edc7012939db1dd581bbddb25384cde2112372fedf6c335bf881c1b4d2ca6d935e69eab0a6f1a00ea4ba66bf5a35ff0fac9f0f5709c7407465b0a150b4e72d3a575ba69e0461a51aef10d22eee1ba81e08a190ebb4bcdde537e0d059ea30d3342fea953793f0d52b4a0f871f1febd39ab9f440c5b64e04c5244a872ca2f62e27eac80cb725a19529b8527d17863f422e0da63f9aedb831c50937e75df71a5c601b14e4ea657254639d96bfb6a568ed3fbc09dfce7561d3d5b2d6ca97720b6d72799343048041541f68ef9e7a53e1fa92fe2bb761f713ee77fd9b34e07e219d2a509810a780efe3cd604cad4b90686fad0c0d8498d9cc82ece1298a208219dcd41ca0c5f4c719afcde2ecd6db4ee45d86f30c59e989b1e3eb0920fac870dab5ef69856d925d13e3c3991a8283fd089bf6fa769301950bfb8eb1e5305645367c7510b831a06c3d29e9e10bb9b6cbd83fb6a4e91c5fd3e105fcb1debd07d1f7ccf4dbaa1dd87fbd6369019fe094793df57d9543a9d19bc48079b53df389fb532469ce74a9bd6341dfd186b0bbd132001e6f413256ce11c0b577dd403058ebb62ee76e077feb03bd5516d6f5647b8964f04101e50895795baf196350360db899106b88255e6349eb56d855aa9ead0b5021d9c280540af1b82783d11a0e68accb9b274f4637cf8c5f03d7b1cb9d47a24ed66263ef0f9d7b25910eff3eb80ea97196e03f47620150b3aeca408dbddcc0df73c5dda0cf884fc2a6e770be945133821f5ff8ab6a1c6420b41cdc6d43426f67256f81377a3555fb27a0e14e8ad47d66cc87e402c0d7aae66aacc5e997fa465e1d90e323ff6abb1bbce341da2a3d14ed5c4746d138933b4933a1cbbe93bc5e2f9774b9e9ca0701ef4efc44dd8331e4675adc3af3b5777f171b673ff953759381cd1ebb87c902e312a85665a0d72e40b4f179d7916bcaff54670dee06b3968673356c17d0ef7761a56f3ab7ccd1295b21ae0a2fa31d33559f091a48cb3b457e728b58cef4dbb62e70fc6da8919e7c6c9b4d19ab9639e007869aa152c5bf0b71de16917a72092f7b785140afca8eecd42d85d6172399509fcaf6f3189627c1b93acf5ec695516a06dd4760d103e136f650ef90e83408aa999353ac3c1ff067cb60a4a3ca3ed150d15803218769a98b93f68a4dbef0e2f3a66c51d3fa82d73ed804209da5fe8098c97c52831fd69411287376616eb2f7486f29ed755d5b407cd9ded906ac41a4193f1288dc1976d82dfada407ef604c0524e090b9e5517c4306e5ffea70283ee667ef599a0c94eb36ab3ae0698753818b117233d444674e3cb2d27cb0276d0b6ca1bfad13a1573008dc0b4c16745c63bbea195769d050c1f53c2f5dbec92179a18a552b1a6653febfc6ea571f3919ee860b47ffc89eb5b3b63b337424e9791334bf62cb32afb776a1dbcc07258c0ba10764ea9af3c7ad9d52069430e1e3423cd932effa6c988334ed7217ecd5c7afcd9bb84bf23d1f51c48d99825dffabfd28a7ba98c070c810b9dfd6b84cadc54da4e4b4e13c1dd5c33783247ddbab111f2ad630d927e2f13cda49234ae6214cc1e94951c675d2edffdaf650b6d6f6a5c67c6609fbb0e17840bc93ce273a7d38b4cdf3f96db25d44b1889e46f3c95a712898ace29b649fd37b43e99a57137bdac4906ce9c3228e502f83932897979396c319c9a603ada975b9b4c8474341a14a3a7b503f510972e90f6746964f586d41952618103550cfc86ae393d5b90b18b832bfe20a46731067808f3e4c6fea1ef5d6886c9aa7bde1e9e582aefdead245482de5a441d4716a7c08e598ee65cb79f626498aa1377a75d7af90ba326593d8a9399dc01db47a7697429073e466be6602691f53db0ac4b78271010bba207edcc2d00635a5ecc561c4a838ba8fe5f5aad29a6d4bc316ec8ba8fb01985ebb0e314dcf5e1f5f9c38b59a47f8bf92fa1b8f7b4fa7313c09547ca10b9fea70464b37eeeecbd2974516e07dc9dc07d579d7a1082eb74f550367438deb94c8b65eef734162909b39ebf4f7f8545177deee06120bf4f5dc2940dcf009c6c2f88ce1ef550af7d1a3f4081aa021adb1f5cb222c839c7c33e74cdade3d4c972bead991dd77d3c3c5d6a6f885af91c33990cbe966f502ccdd3672061bcf01b36cc968468648bb701206ce0ceedcf24398f39a9deb4a29c6f33952507c8a38009426c39afb4504f5c77e5fd0a8fdd3409153143d21ef75c69e5b4d387eee8c0bec48b432fcd134d5db34148b86b98b40f6f2c6f3b4559cb3c163080a82937a3bebf2f8cdab02de67efb1b420adafadc47c658e40bd667fa05f6d6a78ed3ef64351c14b7d896f7a181a5fd411676397e35a9a51d7c15a8e37246c3e931237682c83bc6bf45a2a17cc90bee0f5b6b8838e40beae8c3580f7a808b10f14608e25e425635574c48697a80ea0cee276b9a3ad564201e1693ba467f9e48bbeb6305b2c8e9302121ed0a587f11bc4c8ad07c3772353c12c81cf5f3dfe77aebbe234450de74333a21454c6a0911fa81cd3746338db31b9c760d7fbb589887165932b3ea80b0516efd5ae5e2a46e62c24b6304487e967a632f2523d7b95f9e650154f8d995043ab55b6f3d6ab65a41e012bef3ef9d01dc911ce4c1b24982ec5415a12612fb3b207d357f18281ffaf3ee3aeb6b503e0e9dcec630b054af6f6007cca2db5ca26c04e9545ccea8639d73d861b0f8a26abbc1d9676734049396b08f34643d6c2938203a521dc1d5927f4dbf0d5f6c8359255ebb53623fb2076d544cd00a3172f0518fab2f89433d5b81c1434177728fdad6a0973892c0a92c38494399fc866705040dbc6aceee1738ad827747ded11c5ff642916b5f12ff5553119ec979156225f058df1701cc7e4c97e1ed5ae71fc9abbdc13529bf184f8e0e8cf93791e276466dde31f95afd8511153c0c37acd399acd86fd1be693a237b1802eb9f1e08e7408bb23679b7c8fdabd655b357360636b3683bac53f70cc909c297422c639a604eef66a8fe006ce49372d1e0d5a6b03bf52debd365c3c05947e4eed9136bae410d9a8769f719a4cc35bd60143af5f57c4bc1458eb06c56435f88aa109e0722d76ff04d01f3b206ea8f36efeb7f5619898c935582a32d1c5b0fa5a6dd956325c1489bc2e4bc6ce5601ccbc8a1690f8335086b1f3de5e31a52ce4e4087d5c455d8347ca7fe42a1c406a83f336fae5822501a6ef295e58930562fe223ced88670665c641b82028287d840fb4b506015ba2a274021073dc1dec532b2b052565c720d8501c66629bdc371cb7f1225db23678d3cee02325847268bc7ad026c00fb86b22eaba3ac1b72b1ac288292da22527954d717a189523114518501f7bde9c3f4c84ed77b04f244e24a7505dfeb5ba221a74d53cad535179bd158be5723c38c5dccc1bae1c78e4d95033dd1c3f5e01de7a374111bc37b4c5fc0caaec857b93126ce5026e45644e9cdf46b93427b7c195035569974c03185898ea3007cce777a21f9f0b72956365edebdce93e895f8cd80fffda55bc49209f3f861c8b4b2a24989b84f20e82a806347493898bc1be5a84400b9ecb61af5cc712f4edd1c6002f137079e92399422a1978864d8f5ed5cf83251580730529382f13fdbd865db51fcd4f065950cf9153bff9ffa73b3ba1ff82a2e058b11ae148d090dc68e812a5904841442f506218899c8762cd5986b2f708f4722b1b27d3e0c571ba73a9ab9ba447f0fc03ac63f9309d3a66c7e36e4b87fa67a0928d5f2d8132c5fc7cba4751a009d8621c3b0c95f94f616f8d1c4cc820c1f74f3d2eca1f3b651493b539cf1aba9f59dfe84438c5669897476df79a94d6b053eb1bf74f932e7b7c249c468098bbe55f1c59f</script>
  <div class="hbe hbe-content">
    <div class="hbe hbe-input hbe-input-default">
      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">
      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">
        <span class="hbe hbe-input-label-content hbe-input-label-content-default">CS213使用的数据源是？</span>
      </label>
    </div>
  </div>
</div>
<script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Database</tag>
      </tags>
  </entry>
  <entry>
    <title>CS323 Compilers Notes</title>
    <url>/2023/09/12/CS323_Notes/</url>
    <content><![CDATA[<h2 id="Outline"><a href="#Outline" class="headerlink" title="Outline"></a>Outline</h2><ol>
<li>Introduction</li>
<li>Lexical Analysis</li>
<li>Finite Automata</li>
<li>Syntax Analysis</li>
<li>Syntax-Directed Translation</li>
<li>Intermediate-Code Generation</li>
</ol>
<h2 id="Lecture-1-Introduction"><a href="#Lecture-1-Introduction" class="headerlink" title="Lecture 1 - Introduction"></a>Lecture 1 - Introduction</h2><blockquote>
<p>To be continued</p>
</blockquote>
<h2 id="Lecture-2-Lexical-Analysis"><a href="#Lecture-2-Lexical-Analysis" class="headerlink" title="Lecture 2 - Lexical Analysis"></a>Lecture 2 - Lexical Analysis</h2><h3 id="The-Role-of-Lexical-Analyzer"><a href="#The-Role-of-Lexical-Analyzer" class="headerlink" title="The Role of Lexical Analyzer"></a>The Role of Lexical Analyzer</h3><ul>
<li>Read the input characters of the source program</li>
<li>Group them into lexemes</li>
<li><p>Produce a sequence of tokens</p>
</li>
<li><p>Add lexemes into the symbol table when necessary</p>
</li>
</ul>
<p><img src="https://s2.loli.net/2023/09/18/SGh7Y2mHFJ8bM63.png" alt="image.png"></p>
<p><strong>lexeme</strong>: a string of characters that is a lowest-level syntactic unit in programming languages</p>
<p><strong>token</strong>: a syntactic category representing a class of lexemes. Formally, it is a pair <em><token name, attribute value></em></p>
<ul>
<li><strong>Token name</strong> (compulsory): an abstract symbol representing the kind of the token</li>
<li><strong>Attribute value</strong> (optional): points to the symbol table</li>
</ul>
<p><strong>pattern</strong>:  a description of the form that the lexemes of the token may take</p>
<p>e.g.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;CS%d&quot;</span>,course_id);</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>Lexeme</th>
<th><code>printf</code></th>
<th><code>course_id</code></th>
<th><code>&quot;CS%d&quot;</code></th>
<th><code>(</code></th>
<th>…</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Token</strong></td>
<td>id</td>
<td>id</td>
<td>literal</td>
<td>left_parenthesis</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<p>An <code>id</code> token is associated with:</p>
<ol>
<li>its lexeme</li>
<li>type</li>
<li>the declaration location(where first found)</li>
</ol>
<blockquote>
<p>Q: function?</p>
</blockquote>
<p>Token attributes are stored in the <strong>symbol table</strong>.</p>
<p><strong>Lexical error</strong>: none of the patterns for tokens match any prefix of the remaining input.</p>
<h3 id="Specification-of-Tokens-Regex"><a href="#Specification-of-Tokens-Regex" class="headerlink" title="Specification of Tokens (Regex)"></a>Specification of Tokens (Regex)</h3><p><strong>Alphabet</strong>: any <u>finite</u> set of symbols</p>
<p><strong>String</strong>: (defined over an alphabet) a <u>finite</u> sequence of symbols drawn from an alphabet</p>
<p><strong>Prefix, Proper Prefix, Suffix, Proper Suffix</strong>: n+1, n-1, n+1, n-1</p>
<p><strong>Substring, Proper Substring, Subsequences</strong>: n(n+1)/2+1, n(n+1)/2-1, 2^n</p>
<p><strong>String Operations</strong></p>
<ul>
<li><strong>Concatenation</strong>: $x$=butter, $y$=fly, $xy$=butterfly</li>
<li><strong>Exponentiation</strong>: $s^0=\epsilon, s^1=s, s^i=s^{i-1}s$</li>
</ul>
<p><strong>Language</strong>: any <strong>countable set</strong>$^1$ of strings over some fixed alphabet</p>
<p>✅The set containing only the empty string $\{\epsilon\}$ is a language, denoted $\emptyset$.</p>
<p>✅The set of all grammatically correct English sentences</p>
<p>✅The set of all syntactically well-formed C programs</p>
<blockquote>
<p>$^1$A countable set is a set with the same cardinality (number of elements) as some subset of the set of natural numbers.</p>
</blockquote>
<p><strong>Operations on Languages</strong></p>
<ul>
<li>Union $L\bigcup M=\{s|s \text{ is in } L\text{ or }s \text{ is in }M\}$</li>
<li>Concatenation $LM=\{s|s \text{ is in } L\text{ and }s \text{ is in }M\}$</li>
<li>Kleene closure $L^\star=\bigcup_{i=0}^{\infty}L^i$</li>
<li>Positive closure $L^+=\bigcup_{i=1}^{\infty}L^i$</li>
</ul>
<p><strong>Regex</strong> over an alphabet $\Sigma$</p>
<ul>
<li><p><strong>BASIS</strong></p>
<ul>
<li>$\epsilon$ is a regex, $L(\epsilon)=\{\epsilon\}$</li>
<li>If $a$ is a symbol in $\Sigma$, then $a$ is a regex, $L(a)=\{a\}$</li>
</ul>
</li>
<li><p><strong>INDUCTION</strong>: Regex $r$ and $s$ denote the languages $L(r)$ and $L(s)$</p>
<script type="math/tex; mode=display">
\begin{align*}
&(r)|(s) &\rightarrow &\quad L(r)\bigcup L(s)\\
&(r)(s) &\rightarrow &\quad L(r)L(s)\\
&(r)^\star &\rightarrow &\quad (L(r))^\star\\
&(r) &\rightarrow &\quad L(r)
\end{align*}</script></li>
</ul>
<p><strong>Precedence</strong>: closure $^\star$ &gt; concatenation &gt; union $|$</p>
<p><strong>Associativity</strong>: left associative</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>LAW</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>$r\vert s=s\vert r$</td>
<td>$\vert $ is commutative</td>
</tr>
<tr>
<td>$r\vert (s\vert t)=(r\vert s)\vert t$</td>
<td>$\vert $ is associative</td>
</tr>
<tr>
<td>$r(st)=(rs)t$</td>
<td>Concatenation is associative</td>
</tr>
<tr>
<td>$r(s\vert t)=rs\vert rt;\ (s\vert t)r=sr\vert tr$</td>
<td>Concatenation distributes over $\vert $</td>
</tr>
<tr>
<td>$r=\epsilon r=r\epsilon$</td>
<td>$\epsilon$ is the identity for concatenation</td>
</tr>
<tr>
<td>$r^\star=(r\vert \epsilon)^\star$</td>
<td>$\epsilon$ is guaranteed in a closure</td>
</tr>
<tr>
<td>$r^\star=r^{\star\star}$</td>
<td>$^\star$ is idempotent</td>
</tr>
</tbody>
</table>
</div>
<p>e.g. Regex for C identifiers</p>
<p>$id\rightarrow letter_(letter_|digit)^\star$</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(A|B|...|Z|a|b|...|z|_)((A|B|...|Z|a|b|...|z|_)|(0|1|</span><br><span class="line">...|9))*</span><br></pre></td></tr></table></figure>
<p><strong>Regular Definitions</strong>: For notational convenience, we can give names to certain regexes and use those names in subsequent expressions.</p>
<p><strong>Notational extensions</strong></p>
<ul>
<li>$r^+=rr^\star,\ r^\star=r^+|\epsilon$</li>
<li>$r?=r|\epsilon$</li>
<li>$[a_1a_2…a_n]=a_1|a_2|…|a_n$, $[a-e]=a|b|c|d|e$</li>
</ul>
<h3 id="Recognition-of-Tokens-Transition-Diagrams"><a href="#Recognition-of-Tokens-Transition-Diagrams" class="headerlink" title="Recognition of Tokens (Transition Diagrams)"></a>Recognition of Tokens (Transition Diagrams)</h3><p><strong>whitespace token</strong>: ws→ (blank | tab | newline)$^+$</p>
<p>The lexical analyzer restarts from the next character when recognizing a whitespace token.</p>
<p><strong>Transition Diagrams</strong></p>
<p><img src="https://s2.loli.net/2023/09/18/5u4hoNQi9xWJHtz.png" alt="image.png"></p>
<p><strong>States</strong></p>
<ul>
<li>conditions that could occur during the process of scanning</li>
<li>start state: indicated by starting edge</li>
<li>accepting states(final): double circles </li>
</ul>
<p><strong>The Retract Action</strong></p>
<p>Retract the <code>forward</code> pointer when falling into $\star$ states. </p>
<p><strong>Edges</strong>: from one state to another</p>
<p><strong>Handling Reserved Words</strong></p>
<blockquote>
<p>Problem: the transition diagram that searches for identifiers can also recognize reserved words</p>
</blockquote>
<ul>
<li><p>Pre-install strategy</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span>(<span class="built_in">getToken</span>(),<span class="built_in">installID</span>())</span><br></pre></td></tr></table></figure>
</li>
<li><p>Multi-state transition diagrams strategy</p>
<p>Create a separate transition diagram with a <u>high priority</u> for each keyword</p>
</li>
</ul>
<p><strong>Building the Entire Lexical Analyzer</strong></p>
<ul>
<li>Try the transition diagram for each type of token sequentially</li>
<li>Run transition diagrams in parallel</li>
<li>Combining all transition diagrams into one</li>
</ul>
<h2 id="Lecture-3-Finite-Automata"><a href="#Lecture-3-Finite-Automata" class="headerlink" title="Lecture 3 - Finite Automata"></a>Lecture 3 - Finite Automata</h2><h3 id="Automata"><a href="#Automata" class="headerlink" title="Automata"></a>Automata</h3><p>Finite automata are graphs simply saying “yes” or “no” about each possible input string(pattern match).</p>
<ul>
<li><p>Nondeterministic finite automata</p>
<blockquote>
<p>A symbol can label several edges out of the same state (allowing multiple target states), and the empty string ! is a possible label.</p>
</blockquote>
</li>
<li><p>Deterministic finite automata</p>
<blockquote>
<p>For each state and for each symbol in the input alphabet, there is exactly one edge with that symbol leaving that state.</p>
</blockquote>
</li>
</ul>
<p><strong>Nondeterministic Finite Automata</strong>: 5-tuple</p>
<ol>
<li>A finite set of states $S$</li>
<li>A set of input symbols $\Sigma$, the <strong>input alphabet</strong>. We assume that the empty string $\epsilon$ is never a member of $\Sigma$ </li>
<li>A <strong>transition function</strong> that gives, for each state, and for each symbol in $\Sigma\cup\{\epsilon\}$ <u>a set of next states</u> </li>
<li>A <strong>start state</strong> (or initial state) $s_0$ from $S$ </li>
<li>A set of <strong>accepting states</strong> (or final states) $F$, a subset of $S$</li>
</ol>
<p><strong>Transition Table</strong></p>
<p><img src="https://s2.loli.net/2023/09/25/3sFkCmprPOjaqN7.png" alt="image.png" style="zoom:50%;" /></p>
<p><strong>Acceptance of Input Strings</strong></p>
<p>An NFA accepts an input string $x$ <strong>if and only if</strong>:</p>
<p>There is a path in the transition graph from the start state to one accepting state, such that the symbols along the path form $x$ ($\epsilon$ labels are ignored).</p>
<p>The language defined or accepted by an NFA: </p>
<p>The set of strings labelling some path from the start state to an accepting state.</p>
<p><strong>Deterministic Finite Automata</strong>: special NFA s.t.</p>
<ul>
<li>There are no moves on input $\epsilon$</li>
<li>For each state $s$ and input symbol $a$, there is exactly one edge out of $s$ labeled $a$ (i.e., exactly one target state)</li>
</ul>
<h3 id="From-Regex-to-Automata"><a href="#From-Regex-to-Automata" class="headerlink" title="From Regex to Automata"></a>From Regex to Automata</h3><p>Regex→NFA→DFA</p>
<p>Algorithms: Thompson’s construction + subset construction</p>
<h4 id="Subset-construction"><a href="#Subset-construction" class="headerlink" title="Subset construction"></a>Subset construction</h4><p>Each state of the constructed DFA corresponds to a set of NFA states</p>
<p>The algorithm simulates “in parallel” all possible moves an NFA can make on a given input string to map a set of NFA states to a DFA state.</p>
<p><strong>Operations</strong></p>
<ul>
<li><p>$\epsilon$-closure($s$)</p>
<p>Set of NFA states reachable from NFA state s on $\epsilon$- transitions alone.</p>
<p>(Computed by DFS/BFS)</p>
</li>
<li><p>$\epsilon$-closure($T$)</p>
<p>Set of NFA states reachable from some NFA state $s$ in set $T$ on $\epsilon$-transitions alone</p>
</li>
<li><p>move($T, a$)</p>
<p>Set of NFA states to which there is a transition on input symbol $a$ from some state $s$ in $T$ (i.e., the target states of those states in $T$ when seeing $a$)</p>
</li>
</ul>
<p><strong>Dstates &amp; Dtran</strong></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">while(there is an unmarked state T in Dstates)</span><br><span class="line">&#123;</span><br><span class="line">	mark T;</span><br><span class="line">	for(each input symbol a)</span><br><span class="line">	&#123;</span><br><span class="line">		U=epsilon-closure(move(T,a));</span><br><span class="line">		if(U is not in Dstates)</span><br><span class="line">		&#123;</span><br><span class="line">			add U as an unmarked state to Dstates;</span><br><span class="line">		&#125;</span><br><span class="line">		Dtran[T,a]=U;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Thompson’s-Construction"><a href="#Thompson’s-Construction" class="headerlink" title="Thompson’s Construction"></a>Thompson’s Construction</h4><p>The algorithm works recursively by splitting a regex into subexpressions, from which the NFA will be constructed using the following rules:</p>
<ul>
<li><p>Two basis rules: handle subexpressions with no operators</p>
<p><img src="https://s2.loli.net/2023/09/25/pMlOHkGaq45ifB2.png" alt="image.png" style="zoom: 33%;" /></p>
</li>
<li><p>Three inductive rules: construct larger NFA’s from the smaller NFA’s for subexpressions</p>
<ul>
<li><p>Union</p>
<p><img src="https://s2.loli.net/2023/09/25/dGVNmClnbRIA8PJ.png" alt="image.png" style="zoom: 33%;" /></p>
</li>
<li><p>Concatenation</p>
<p><img src="https://s2.loli.net/2023/09/25/aLXCdiM1eEKwOZ9.png" alt="image.png" style="zoom:33%;" /></p>
</li>
<li><p>Kleene Closure</p>
<p><img src="https://s2.loli.net/2023/09/25/nDjpL8lB63obcd7.png" alt="image.png" style="zoom:33%;" /></p>
</li>
</ul>
</li>
</ul>
<h3 id="DFA’s-for-Lexical-Analyzers"><a href="#DFA’s-for-Lexical-Analyzers" class="headerlink" title="DFA’s for Lexical Analyzers"></a>DFA’s for Lexical Analyzers</h3><p><strong>Combining NFA’s</strong></p>
<ul>
<li><p>Why?</p>
<p>A single automaton to recognize lexemes matching any pattern (in the lex program)</p>
</li>
<li><p>How?</p>
<p>Introduce a new start state with $\epsilon$-transitions to each of the start states of the NFA’s for pattern $p_i$</p>
</li>
</ul>
<p>The languages of big NFA is the <strong>union</strong> of the languages of small NFA’s.</p>
<p>Different <strong>accepting states</strong> correspond to different <strong>patterns</strong>.</p>
<p><strong>DFA’s for Lexical Analyzers</strong></p>
<ul>
<li>Convert the NFA for all the patterns into an equivalent DFA</li>
<li>An accepting state of the DFA corresponds to a subset of the NFA states, in which at least one is an accepting NFA state<ul>
<li>If there are multiple accepting NFA states, this means that <strong>conflicts</strong> arise (the prefix of the input string matches multiple patterns)</li>
<li>Solution for conflicts: pattern priority</li>
</ul>
</li>
</ul>
<h2 id="Lecture-4-Syntax-Analysis"><a href="#Lecture-4-Syntax-Analysis" class="headerlink" title="Lecture 4 - Syntax Analysis"></a>Lecture 4 - Syntax Analysis</h2><h3 id="Introduction-Syntax-and-Parsers"><a href="#Introduction-Syntax-and-Parsers" class="headerlink" title="Introduction: Syntax and Parsers"></a>Introduction: Syntax and Parsers</h3><h4 id="Syntax"><a href="#Syntax" class="headerlink" title="Syntax"></a>Syntax</h4><p>The syntax can be specified by <strong>context-free grammars</strong></p>
<ul>
<li>Grammar gives syntactic specification of a programming language, defining its structure.</li>
<li>For certain grammars, we can automatically construct an efficient parser</li>
<li>A good grammar helps <strong>translate source programs</strong> into correct object code and <strong>detect errors</strong>.</li>
</ul>
<h4 id="Parsers’-Roles"><a href="#Parsers’-Roles" class="headerlink" title="Parsers’ Roles"></a>Parsers’ Roles</h4><ul>
<li>Obtain a string of tokens from the lexical analyzer</li>
<li>Verify that the string of token names can be generated by the grammar for the source language</li>
</ul>
<h4 id="Classification-of-Parsers"><a href="#Classification-of-Parsers" class="headerlink" title="Classification of Parsers"></a>Classification of Parsers</h4><ul>
<li>Universal parsers<ul>
<li>Some methods (e.g., Earley’s algorithm) can parse any grammar</li>
<li>too inefficient to be used in practice</li>
</ul>
</li>
<li>Top-down parsers<ul>
<li>Construct parse trees from the top (root) to the bottom (leaves)</li>
</ul>
</li>
<li>Bottom-up parsers<ul>
<li>Construct parse trees from the bottom (leaves) to the top (root)</li>
</ul>
</li>
</ul>
<h3 id="Context-Free-Grammars"><a href="#Context-Free-Grammars" class="headerlink" title="Context-Free Grammars"></a>Context-Free Grammars</h3><h4 id="Formal-definition-of-CFG"><a href="#Formal-definition-of-CFG" class="headerlink" title="Formal definition of CFG"></a>Formal definition of CFG</h4><p>4 components of a CFG:</p>
<ul>
<li><strong>Terminals</strong>: Basic symbols token names</li>
<li><strong>Nonterminals</strong>: Syntactic variables that denote sets of strings</li>
<li><strong>Start symbol(nonterminal)</strong>: The set of strings denoted by the start symbol is the language generated by the CFG</li>
<li><strong>Productions</strong>: Specify how the terminals and nonterminals can be combined to form strings<ul>
<li>Format: $\text{head}\rightarrow\text{body}$</li>
<li>head must be a nonterminal; body consists of zero or more terminals/nonterminals</li>
</ul>
</li>
</ul>
<h4 id="Derivation-and-parse-tree"><a href="#Derivation-and-parse-tree" class="headerlink" title="Derivation and parse tree"></a>Derivation and parse tree</h4><p><strong>Derivation</strong>: Starting with the start symbol, nonterminals are rewritten using productions until only terminals remain.</p>
<p><strong>Examples.</strong></p>
<p>CFG: $E\rightarrow -E\ \vert\ E+E\ \vert\ E\times E\ \vert\ (E)\ \vert\ \ \textbf{id}$</p>
<p><strong>Derivation Notations</strong></p>
<ul>
<li>$\Rightarrow$ means “derives in one step”</li>
<li>$\mathop{\Rightarrow}\limits^{\star}$ means “derives in zero or more steps”</li>
<li>$\mathop{\Rightarrow}\limits^{+}$ means “derives in one or more steps”</li>
</ul>
<p><strong>Terminologies</strong></p>
<ul>
<li>For the start symbol $S$ of a grammar $G$, $\alpha$ is a <strong>sentential form</strong> of $G$ if $S\mathop{\Rightarrow}\limits^{\star}\alpha$.</li>
<li>A sentential form without nonterminals is a <strong>sentence</strong>.</li>
<li>The <strong>language</strong> generated by a grammar is its set of <strong>sentences</strong>.</li>
</ul>
<p><strong>Leftmost/Rightmost Derivations</strong></p>
<p>The leftmost/rightmost nonterminal in each sentential form is always chosen to be replaced.</p>
<p><strong>Parse Trees</strong></p>
<ul>
<li>Root node: start symbol</li>
<li>Leaf node: terminal symbol</li>
<li>Interior node: nonterminal symbol, represents the application of a production</li>
</ul>
<p>The leaves, from left to right, constitute a sentential form of the grammar, which is called the <strong>yield/frontier</strong> of the tree.</p>
<p>Many-to-one: derivations→parse trees</p>
<p>One-to-one: leftmost/rightmost derivations→parse trees</p>
<h4 id="Ambiguity"><a href="#Ambiguity" class="headerlink" title="Ambiguity"></a>Ambiguity</h4><p>Given a grammar, if there are <strong>more than one parse tree for some sentence</strong>, it is ambiguous.</p>
<p>The grammar of a programming language needs to be unambiguous. Otherwise, there will be multiple ways to interpret a program</p>
<p>In some cases, it is convenient to use carefully chosen ambiguous grammars, together with disambiguating rules to discard undesirable parse trees</p>
<h4 id="CFG-vs-regexp"><a href="#CFG-vs-regexp" class="headerlink" title="CFG vs. regexp"></a>CFG vs. regexp</h4><p>CFGs are more expressive than regular expressions.</p>
<ol>
<li>$\forall L$ expressible by  a regex can also be expressed by a grammar.</li>
<li>$\exists L$ expressible by  a grammar can not be expressed by any regex.</li>
</ol>
<p><strong>Construct CFG from a Regex</strong></p>
<ul>
<li>State of NFA → nonterminal symbol</li>
<li>State transition on input $a$ → production $A_i\rightarrow a A_j$</li>
<li>State transition on input $\epsilon$ → production $A_i\rightarrow A_j$</li>
<li>Accepting state → $A_i\rightarrow \epsilon$</li>
<li>Start state → start symbol</li>
</ul>
<p><strong>A Context-free Language Fails Regex</strong></p>
<script type="math/tex; mode=display">
L=\{a^nb^n\vert n>0\}</script><p>CFG: $S\rightarrow aSb\vert ab$</p>
<p>$L$  cannot be described by regular expressions. No DFA accepts $L$.</p>
<p><strong>Proof by Contradiction</strong></p>
<ul>
<li>Suppose there is a DFA $D$ with $k$ states and accepts $L$.</li>
<li>For a string $a^{k+1}b^{k+1}$ of $L$, when processing $a^{k+1}$, $D$ must enter a state $s$ more than once.</li>
<li>Assume that $D$ enters state $s$ after reading the $i^\text{th}$ and $j^\text{th}$ $a$ ($i\ne j, i\le k+1,j\le k+1$).</li>
<li>$D$ also accepts $a^jb^j$, there exists a path labeled $b^j$ from $s$ to an accepting state.</li>
<li>The path labeled $a^i$ reaches $s$, then reaches an accepting state along path labeled $b^j$, so $D$ accepts $a^ib^j$. Contradiction.</li>
</ul>
<h3 id="Overview-of-Parsing-Techniques"><a href="#Overview-of-Parsing-Techniques" class="headerlink" title="Overview of Parsing Techniques"></a>Overview of Parsing Techniques</h3><p>Parsing: whether the string of token names can be generated by the grammar.</p>
<p><strong>Top-Down Parsing</strong></p>
<p>Constructing a parse tree for the input string, starting from the root and creating the nodes of the parse tree in preorder (depth-first).</p>
<ol>
<li><strong>Predict</strong>: At each step of parsing, determine the production to be applied for the leftmost nonterminal.</li>
<li><strong>Match</strong>: Match the terminals in the chosen production’s body with the input string.</li>
</ol>
<ul>
<li>Equivalent to finding a leftmost derivation.</li>
<li>At each step, the frontier of the tree is a left-sentential form.</li>
</ul>
<blockquote>
<p>Key decision: Which production to apply at each step?</p>
</blockquote>
<p><strong>Bottom-Up Parsing</strong></p>
<p>Constructing a parse tree for an input string beginning at the leaves (terminals) and working up towards the root (start symbol of the grammar)</p>
<ol>
<li><strong>Shift</strong>: Move an input symbol onto the stack</li>
<li><strong>Reduce</strong>: Replace a string at the stack top with a nonterminal that can produce the string (the reverse of a rewrite step in a derivation)</li>
</ol>
<ul>
<li>Equivalent to finding a rightmost derivation.</li>
<li>At each step, stack + remaining input is a right-sentential form.</li>
</ul>
<blockquote>
<p>Key decision: When to shift/reduce? Which production to apply when reducing?</p>
</blockquote>
<h3 id="Top-Down-Parsing"><a href="#Top-Down-Parsing" class="headerlink" title="Top-Down Parsing"></a>Top-Down Parsing</h3><h4 id="Recursive-Descent-Parsing"><a href="#Recursive-Descent-Parsing" class="headerlink" title="Recursive-Descent Parsing"></a>Recursive-Descent Parsing</h4><p>One procedure for each nonterminal, handling a substring of the input.</p>
<p><strong>Naive procedure</strong></p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">A</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Choose an A-production, A → X[<span class="number">1</span>-k];</span><br><span class="line">    <span class="keyword">for</span> i = <span class="number">1</span> to k</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(X[i] is a nonterminal)</span><br><span class="line">        &#123;</span><br><span class="line">            call procedure X[i]();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(X[i] equals the current input symbol a)</span><br><span class="line">        &#123;</span><br><span class="line">            advance the input too the next symbol;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">/* Failed to match using A-production A→X[1-k] */</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Backtracking</strong></p>
<p>General recursive-descent parsing may require repeated scans over the input (backtracking).</p>
<ul>
<li>Try each possible production in some order.</li>
<li>When failure occurs, return, reset the input pointer and try another A-production.</li>
</ul>
<h4 id="Looking-Ahead"><a href="#Looking-Ahead" class="headerlink" title="Looking Ahead"></a><strong>Looking Ahead</strong></h4><p>Left recursion in a CFG traps the recursive-descent parser into an infinite loop.</p>
<p>Looking ahead, checking the next character avoids bad choices.</p>
<p><strong>Computing $\text{FIRST}(X)$</strong></p>
<p>$\text{FIRST}(X)$ denotes the set of beginning terminals of strings derived from $X$.</p>
<ul>
<li>If $X$ is a terminal, $\text{FIRST}(X)=\{X\}$</li>
<li>If $X$ is a nonterminal and $X\rightarrow \epsilon$, then add $\epsilon$ to $\text{FIRST}(X)$.</li>
<li>If $X$ is a nonterminal and $X\rightarrow Y_1Y_2\cdots Y_k\ \ (k\ge1)$ is a production<ul>
<li>If for some $i$, $a\in \text{FIRST}(Y_i)$ and $\epsilon \in \text{FIRST}(Y_1),\cdots,\text{FIRST}(Y_{i-1})$, then add $a$ to $\text{FIRST}(X)$.</li>
<li>If $\epsilon\in \text{FIRST}(Y_1),\cdots,\text{FIRST}(Y_k)$, then add $\epsilon$ to $\text{FIRST}(X)$.</li>
</ul>
</li>
</ul>
<p><strong>Computing $\text{FIRST}(X_1X_2\cdots X_n)$</strong></p>
<ul>
<li>Add all non-$\epsilon$ symbols of $\text{FIRST}(X_1)$ to $\text{FIRST}(X_1X_2\cdots X_n)$.</li>
<li>If for some $i$, $\epsilon\in \text{FIRST}(X_1),\cdots,\text{FIRST}(X_{i-1})$, then add  all non-$\epsilon$ symbols of $\text{FIRST}(X_i)$ to $\text{FIRST}(X_1X_2\cdots X_n)$.</li>
<li>If $\forall i,\ \epsilon\in \text{FIRST}(X_i)$, then add $\epsilon$ to $\text{FIRST}(X_1X_2\cdots X_n)$.</li>
</ul>
<p><strong>Computing $\text{FOLLOW}$</strong></p>
<p>Whether to choose: $A\rightarrow \alpha,\ \epsilon\in\text{FIRST}(\alpha)$?</p>
<ul>
<li>For start symbol $S$, add right endmarker $$$ to $\text{FOLLOW}(S)$.</li>
<li>Apply the rules below, until all $\text{FOLLOW}$ sets do not change:<ul>
<li>For production $A\rightarrow \alpha B\beta$, add $\text{FIRST}(\beta)/\epsilon$ to $\text{FOLLOW}(B)$</li>
<li>For production $A\rightarrow \alpha B$ (or $\epsilon\in \text{FIRST}(\beta)$), then add $\text{FOLLOW}(A)$ to $\text{FOLLOW}(B)$.</li>
</ul>
</li>
</ul>
<blockquote>
<p>By definition, $\epsilon$ will not appear in any $\text{FOLLOW}$ set.</p>
</blockquote>
<p>If the next input symbol is in $\text{FIRST(body)}$, the production $\text{head}\rightarrow \text{body}$ may be a good choice.</p>
<p>If the next input symbol is in $\text{FOLLOW(head)}$, the production $\text{head}\rightarrow\epsilon$ may be a good choice.</p>
<h4 id="LL-1-Grammars"><a href="#LL-1-Grammars" class="headerlink" title="LL(1) Grammars"></a><strong>LL(1) Grammars</strong></h4><p>No backtracking recursive-descent parser can be constructed for LL(1)</p>
<ul>
<li>scanning the input from left to right.</li>
<li>producing a leftmost derivation (top-down parsing).</li>
<li>using one input symbol of lookahead each step to make parsing decision.</li>
</ul>
<p>A grammar $G$ is LL(1) IFF for any two distinct productions $A\rightarrow \alpha\vert\beta$:</p>
<ul>
<li>$\text{FIRST}(\alpha)\bigcap\text{FIRST}(\beta)=\emptyset$</li>
<li>If $\epsilon\in\text{FIRST}(\beta)$, then $\text{FIRST}(\alpha)\bigcap\text{FOLLOW}(A)=\emptyset$ and vice versa.</li>
</ul>
<blockquote>
<p>There is a unique choice of production at each step by looking ahead.</p>
</blockquote>
<h4 id="Parsing-Table"><a href="#Parsing-Table" class="headerlink" title="Parsing Table"></a>Parsing Table</h4><p>For a nonterminal $A$ and a symbol $a$ on its input stream, determines which production the parser should choose.</p>
<p>The parsing table of an LL(1) parser has no entries with multiple productions.</p>
<p>For each production $A\rightarrow\alpha$ of grammar $G$, do the following:</p>
<ol>
<li>For each terminal $a$ in $\text{FIRST}(\alpha)$, add $A\rightarrow\alpha$ to $M[A,a]$</li>
<li>If $\epsilon\in\text{FIRST}(\alpha)$, then for each terminal $b$ (including the right endmarker $) in $\text{FOLLOW}(A)$, add $A\rightarrow\alpha$ to $M[A,b]$</li>
<li>Set all empty entries in the table to <strong>error</strong>.</li>
</ol>
<h4 id="Non-Recursive-Predictive-Parsing"><a href="#Non-Recursive-Predictive-Parsing" class="headerlink" title="Non-Recursive Predictive Parsing"></a>Non-Recursive Predictive Parsing</h4><p>A non-recursive predictive parser can be built by explicitly maintaining a stack.</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line">let a be the first symbol of w;</span><br><span class="line">let X be the top stack symbol;</span><br><span class="line"><span class="keyword">while</span> ( X ≠ $ )</span><br><span class="line">&#123; <span class="comment">/* stack is not empty */</span></span><br><span class="line">    <span class="keyword">if</span> ( X = a ) pop the stack <span class="keyword">and</span> let a be the next symbol of w;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( X is a terminal) <span class="built_in">error</span>(); <span class="comment">/* X can only match a, cannot be another terminal */</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( M[X, a] is an error entry ) <span class="built_in">error</span>();</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> ( M[X, a] = X -&gt; Y[<span class="number">1.</span>..k])</span><br><span class="line">    &#123;</span><br><span class="line">        output the production X -&gt; Y[<span class="number">1.</span>..k];</span><br><span class="line">        pop the stack;</span><br><span class="line">        push Y[k..<span class="number">.1</span>] onto the stack, with Y[<span class="number">1</span>] on top; <span class="comment">/* order is critical */</span></span><br><span class="line">    &#125;</span><br><span class="line">    let X be the top stack symbol;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Bottom-Up-Parsing"><a href="#Bottom-Up-Parsing" class="headerlink" title="Bottom-Up Parsing"></a>Bottom-Up Parsing</h3><h4 id="Simple-LR-SLR"><a href="#Simple-LR-SLR" class="headerlink" title="Simple LR(SLR)"></a>Simple LR(SLR)</h4><h5 id="Shift-Reduce-Parsing"><a href="#Shift-Reduce-Parsing" class="headerlink" title="Shift-Reduce Parsing"></a>Shift-Reduce Parsing</h5><ol>
<li>Shift zero or more input symbols onto the stack, until it is ready to reduce a string $\beta$ on top of the stack</li>
<li>Reduce $\beta$ to the head of the appropriate production</li>
</ol>
<h5 id="LR-k-Parsers"><a href="#LR-k-Parsers" class="headerlink" title="LR(k) Parsers"></a>LR(k) Parsers</h5><ul>
<li>left-to-right scan of the input</li>
<li>construct a rightmost derivation in reverse</li>
<li>use $k$ input symbols of lookahead in making parsing decisions</li>
</ul>
<p>An LR parser makes shift-reduce decisions by maintaining <strong>states</strong> to keep track of what have been seen during parsing.</p>
<h5 id="LR-0-Items"><a href="#LR-0-Items" class="headerlink" title="LR(0) Items"></a>LR(0) Items</h5><p>An <strong>item</strong> is a production with a dot, indicating how much we have seen at a given time point in the parsing process.</p>
<p>The production $A\rightarrow \epsilon$ generates only $A\rightarrow \cdot$</p>
<p><strong>States</strong>: sets of LR(0) items</p>
<p><strong>Canonical LR(0) collection</strong>:</p>
<p>One collection of states, provides <u>the basis for constructing a DFA</u> to make parsing decisions.</p>
<h5 id="Augmented-Grammar"><a href="#Augmented-Grammar" class="headerlink" title="Augmented Grammar"></a>Augmented Grammar</h5><p>Add a new production $S^\prime\rightarrow S$ to introduce a new start symbol $S^\prime$.</p>
<script type="math/tex; mode=display">
L(G)=L(G^\prime)</script><p>Acceptance occurs IFF the parser is about to reduce by $S^\prime\rightarrow S$.</p>
<h5 id="Closure-of-Item-Sets"><a href="#Closure-of-Item-Sets" class="headerlink" title="Closure of Item Sets"></a>Closure of Item Sets</h5><p>Grammar $G$, set of items $I$</p>
<ol>
<li>Add every item in $I$ to $\text{CLOSURE} (I)$</li>
<li>If $A\rightarrow \alpha\cdot B\beta$ is in $\text{CLOSURE} (I)$ and $B\rightarrow \gamma$ is a production, then add the item $B\rightarrow\cdot \gamma$ to $\text{CLOSURE} (I)$. Repeat until no more new items can be added to $\text{CLOSURE} (I)$.</li>
</ol>
<h5 id="The-Function-GOTO"><a href="#The-Function-GOTO" class="headerlink" title="The Function GOTO"></a>The Function GOTO</h5><p>$\text{GOTO}(I,X)$ is defined to be the closure of the set of all items $[A\rightarrow \alpha X\cdot\beta]$, where $[A\rightarrow \alpha\cdot X\beta]$ is in $I$.</p>
<p><img src="https://s2.loli.net/2023/10/30/oQ9C7ZeFxlgnGVz.png" alt="image.png" style="zoom:50%;" /></p>
<h5 id="LR-0-Automaton"><a href="#LR-0-Automaton" class="headerlink" title="LR(0) Automaton"></a>LR(0) Automaton</h5><ul>
<li>states: item sets in canonical LR(0) collection</li>
<li>transitions: GOTO</li>
<li>start state: $\text{CLOSURE}(\{[S’\rightarrow \cdot S]\})$</li>
</ul>
<p><strong>Shift</strong> when the state has a transition on the incoming symbol.</p>
<p><strong>Reduce</strong> when there is no further move, push a new state into the stack corresponding to the reduced symbol.</p>
<h5 id="LR-Parser-Structure"><a href="#LR-Parser-Structure" class="headerlink" title="LR Parser Structure"></a>LR Parser Structure</h5><ul>
<li>input, output, stack, driver program, parsing table(ACTION+GOTO)</li>
<li>only the parsing table differs (depending on the parsing algorithm)</li>
<li>stack-top state + next input terminal → next action</li>
</ul>
<h5 id="ACTION-i-a"><a href="#ACTION-i-a" class="headerlink" title="ACTION$[i,a]$"></a>ACTION$[i,a]$</h5><ul>
<li>state $i$, terminal $a$</li>
<li>Shift $j$: shift input $a$ to the stack, use state $j$ to represent $a$.</li>
<li>Reduce $A\rightarrow \beta$: reduce stack-top $\beta$ to non-terminal $A$.</li>
<li>Accept: accept the input, finish parsing.</li>
<li>Error: syntax error detected.</li>
</ul>
<h5 id="LR-Parser-Configurations"><a href="#LR-Parser-Configurations" class="headerlink" title="LR Parser Configurations"></a>LR Parser Configurations</h5><p>Configuration: \<Stack contents, Remaining input\></p>
<p>By construction, each state (except $s_0$) in an LR parser corresponds to a set of items and a grammar symbol (the symbol that leads to the state transition)</p>
<p>Suppose $X_i$ is the grammar symbol for state $s_i$, then $X_0X_1\cdots X_ma_ia_{i+1}\cdots a_n$ is a right-sentential form (assume no errors).</p>
<p>ACTION$[s_m,a_i]$</p>
<ul>
<li>Shift $s$: $(s_0s_1\cdots s_ms,a_{i+1}\cdots a_n$)$</li>
<li>Reduce $A\rightarrow \beta$: $(s_0s_1\cdots s_{m-r}s,a_ia_{i+1}\cdots a_n$)$, where $r$ is the length of $\beta$, and $s=\text{GOTO}(s_{m-r},A)$</li>
</ul>
<h5 id="Constructing-SLR-Parsing-Tables"><a href="#Constructing-SLR-Parsing-Tables" class="headerlink" title="Constructing SLR-Parsing Tables"></a>Constructing SLR-Parsing Tables</h5><ol>
<li><p>Construct canonical LR(0) collection $\{I_0,\cdots,I_n\}$ for the augmented grammar $G^\prime$.</p>
</li>
<li><p>State $i$ is constructed from $I_i$. ACTION can be determined as follows:</p>
<p><img src="https://s2.loli.net/2023/10/30/Hzdupvr4iQgjnZ7.png" alt="image.png" style="zoom:50%;" /></p>
</li>
<li><p>The GOTO transitions for state $i$ are constructed for all nonterminals $A$ using the rule: If $\text{GOTO}(I_i,A)=I_j$, then $\text{GOTO}(i,A)=j$.</p>
</li>
<li><p>All entries not defined in steps 2 and 3 are set to “error”</p>
</li>
<li><p>Initial state is the one constructed from the item set containing $[S^\prime\rightarrow\cdot S]$</p>
</li>
</ol>
<p>If there is no conflict (i.e., multiple actions for a table entry), the grammar is <strong>SLR(1)</strong>.</p>
<h5 id="Weakness"><a href="#Weakness" class="headerlink" title="Weakness"></a>Weakness</h5><p>Stack-top reduction: $\beta\alpha\Rightarrow\beta A$ when $a\in\text{FOLLOW}(A)$, but <script type="math/tex">a\not\in\text{FOLLOW}(\beta A)</script>.</p>
<h4 id="Canonical-LR-CLR"><a href="#Canonical-LR-CLR" class="headerlink" title="Canonical LR(CLR)"></a>Canonical LR(CLR)</h4><h5 id="LR-1-Item-A-rightarrow-alpha-cdot-beta-a"><a href="#LR-1-Item-A-rightarrow-alpha-cdot-beta-a" class="headerlink" title="LR(1) Item: $[A\rightarrow \alpha\cdot\beta,a]$"></a>LR(1) Item: $[A\rightarrow \alpha\cdot\beta,a]$</h5><ul>
<li>$A\rightarrow \alpha\beta$ is a production, $a$ is a terminal or $$$.</li>
<li>1: length of the lookahead</li>
<li>The lookahead symbol only works if $\beta=\epsilon$.</li>
</ul>
<p>$[A\rightarrow\alpha\cdot,a]$ calls for a reduction by $A\rightarrow\alpha$ only if the next input symbol is $a$.</p>
<p>When calculating CLOSURE, generate a new item $[B\rightarrow \cdot\gamma,b]$ from $[A\rightarrow\alpha\cdot B\beta,a]$ if $b\in\text{FIRST}(\beta a)$.</p>
<p>\&lt;$\cdots\alpha\gamma,b\cdots$> → \&lt;$\cdots\alpha B,b\cdots$> → \&lt;$\cdots\alpha Bb,\cdots$></p>
<blockquote>
<p>$\beta=\epsilon, b=a ;\beta\not= \epsilon, b\in \text{FIRST}(\beta)\equiv b\in\text{FIRST}(\beta a)$</p>
</blockquote>
<h4 id="Look-ahead-LR-LALR"><a href="#Look-ahead-LR-LALR" class="headerlink" title="Look-ahead LR (LALR)"></a>Look-ahead LR (LALR)</h4><p>Merge sets of LR(1) items with the same <strong>core</strong>.</p>
<p>The core of an LR(1) item set is the set of the first components, a set of LR(0) items.</p>
<p>Merging states may cause reduce/reduce conflicts:</p>
<p><img src="https://s2.loli.net/2023/11/06/uoc1pBe6k59AlbW.png" alt="image.png" style="zoom:50%;" /></p>
<p>Merging states in LR(1) parsing table; If there is no reduce-reduce conflict, the grammar is LALR(1), otherwise not LALR(1).</p>
<h4 id="Comparisons-Among-LR-Parsers"><a href="#Comparisons-Among-LR-Parsers" class="headerlink" title="Comparisons Among LR Parsers"></a>Comparisons Among LR Parsers</h4><p>Languages/Grammars supported:$\text{CLR&gt;LALR&gt;SLR}$</p>
<p>number of states in the parsing table: $\text{CLR&gt;LALR=SLR}$</p>
<p>Driver programs: $\text{CLR=LALR=SLR}$</p>
<h2 id="Lecture-5-Syntax-Directed-Translation"><a href="#Lecture-5-Syntax-Directed-Translation" class="headerlink" title="Lecture 5 - Syntax-Directed Translation"></a>Lecture 5 - Syntax-Directed Translation</h2><h3 id="Syntax-Directed-Definitions"><a href="#Syntax-Directed-Definitions" class="headerlink" title="Syntax-Directed Definitions"></a>Syntax-Directed Definitions</h3><p><strong>Syntax-Directed Definitions</strong>: attributes + semantic rules</p>
<p><strong>Synthesized Attributes</strong>: value at a parse-tree node $N$ is only determined from attribute values at the children of $N$ and at $N$ itself</p>
<ul>
<li>can be evaluated during bottom-up traversal of a parse tree</li>
</ul>
<p><strong>Inherited attributes</strong> have their value at a parse-tree node determined from attribute values at the node <strong>itself</strong>, its <strong>parent</strong>, and its <strong>siblings</strong> in the parse tree</p>
<ul>
<li>Non-terminals in a parse tree may not correspond to proper language constructs</li>
</ul>
<p><img src="https://s2.loli.net/2023/11/13/BYo6XWehN9zCcI8.png" alt="image.png" style="zoom:50%;" /></p>
<h3 id="Evaluation-Orders-for-SDD’s"><a href="#Evaluation-Orders-for-SDD’s" class="headerlink" title="Evaluation Orders for SDD’s"></a>Evaluation Orders for SDD’s</h3><p>Dependency: $N.a = f(\{M_i.a_i\})$</p>
<p><strong>Dependency Graph</strong>: defines partial relations(order of computation) between attributes</p>
<ul>
<li>vertex: attribute instance</li>
<li>directed edge $a_1\rightarrow a_2$: $a_1$ is needed to compute $a_2$ </li>
<li>cycle: cyclic dependency, not computable</li>
</ul>
<p>Then compute the attributes in topo-sort order.</p>
<p>Hard to tell if an arbitrary SDD is computable (parse trees contain no cycles).</p>
<h4 id="S-Attributed-SDD"><a href="#S-Attributed-SDD" class="headerlink" title="S-Attributed SDD"></a>S-Attributed SDD</h4><p>Every attribute is <a href="#Syntax-Directed Definitions">synthesized</a>, always computable.</p>
<p>Edges are always from child to parent, any bottom-up order is valid, e.g., postorder traversal during bottom-up parsing.</p>
<h4 id="L-Attributed-SDD"><a href="#L-Attributed-SDD" class="headerlink" title="L-Attributed SDD"></a>L-Attributed SDD</h4><p>Every production $A\rightarrow X_1\dots X_n$, for each $j=1\dots n$, each inherited attribute of $X_j$ only depends on:</p>
<ul>
<li>the attributes of $X_1,\dots,X_{j-1}$</li>
<li>the inherited attributes of $A$</li>
</ul>
<p>Or each attribute is synthesized, therefore S-Attributed SDD $\subseteq$ L-Attributed SDD.</p>
<p>Edges are always from left to right, or from parent to child, computable.</p>
<ul>
<li>evaluate inherited attributes from parent node</li>
<li>evaluate child nodes from left to right</li>
<li>evaluate synthesized attributes from child nodes.</li>
</ul>
<h3 id="Syntax-Directed-Translation-Schemes"><a href="#Syntax-Directed-Translation-Schemes" class="headerlink" title="Syntax-Directed Translation Schemes"></a>Syntax-Directed Translation Schemes</h3><p>CFG with <strong>semantic actions</strong> embedded <strong>within production bodies</strong> </p>
<ul>
<li>Differ from the semantic rules in SDD’s </li>
<li>Semantic actions can appear anywhere within a production body</li>
</ul>
<script type="math/tex; mode=display">
B\rightarrow X\{a\} Y</script><p>If terminal $X$ is recognized, or all the terminals derived from nonterminal $X$ is recognized, action $a$ is done.</p>
<ul>
<li>bottom-up: perform $a$ as $X$ appears on the top of the parsing stack</li>
<li>top-down: perform $a$ before attempting to expand $Y$ (if $Y$ is a nonterminal) or check for $Y$ on the input (if $Y$ is a terminal)</li>
</ul>
<h4 id="SDT’s-Implementable-During-Parsing"><a href="#SDT’s-Implementable-During-Parsing" class="headerlink" title="SDT’s Implementable During Parsing"></a>SDT’s Implementable During Parsing</h4><ul>
<li>marker nonterminals $M\rightarrow \epsilon$ to replace embedded actions</li>
<li>grammar parse-able, then SDT can be implemented during parsing</li>
</ul>
<h2 id="Lecture-6-Intermediate-Code-Generation"><a href="#Lecture-6-Intermediate-Code-Generation" class="headerlink" title="Lecture 6 - Intermediate-Code Generation"></a>Lecture 6 - Intermediate-Code Generation</h2><p>Front-end: Parser, Static Checker, Intermediate Code Generator</p>
<p>Back-end: Code Generator</p>
<h3 id="Intermediate-Representation"><a href="#Intermediate-Representation" class="headerlink" title="Intermediate Representation"></a>Intermediate Representation</h3><p>$M$ languages, $N$ machines, with intermediate representations, $M+N$ compilers.</p>
<p>High-level IR like syntax trees are close to the source language</p>
<ul>
<li>machine-independent tasks</li>
</ul>
<p>Low-level IR are close to the target machines</p>
<ul>
<li>machine-dependent tasks</li>
</ul>
<p>On DAG, subexp appearing multiple times → subtree with multiple parents(node reuse)</p>
<h3 id="Three-Address-Code"><a href="#Three-Address-Code" class="headerlink" title="Three-Address Code"></a>Three-Address Code</h3><script type="math/tex; mode=display">
\text{x} = \text{y op z}</script><p>Only <strong>one</strong> operator on the rhs.</p>
<p>Operands(addresses) can be:</p>
<ul>
<li>Names</li>
<li>Constants</li>
<li>Temporary names</li>
</ul>
<h4 id="Instructions"><a href="#Instructions" class="headerlink" title="Instructions"></a>Instructions</h4><ol>
<li><p>Assignment</p>
<p>$\text{x} = \text{y op z}$</p>
<p>$\text{x} = \text{op y}$</p>
</li>
<li><p>Copy</p>
<p>$\text{x = y}$</p>
</li>
<li><p>Unconditional jump</p>
<p>$\text{goto L}$</p>
</li>
<li><p>Conditional jump</p>
<p>$\text{if <cond> goto L}$</p>
</li>
<li><p>Procedure calls/returns</p>
<p>$\text{param x}_{1\dots n}$</p>
<p>procedure call: $\text{call p, n}$</p>
<p>function call: $\text{y = call p, n}$</p>
<p>$\text{return y}$</p>
</li>
<li><p>Indexed copy</p>
<p>$\text{x = y[i]}$</p>
<p>$\text{x[i] = y}$</p>
</li>
<li><p>Address and pointer assignment</p>
<p>$\text{x = \&amp;y}$ (<code>x.rval</code> ← <code>y.lval</code>)</p>
<p>$\text{x = *y}$ (<code>x.rval</code> ← content stored at location indicated by <code>y.rval</code>)</p>
<p>$\text{*x = y}$ (content store at location indicated by <code>x.rval</code> ← <code>y.rval</code>)</p>
</li>
</ol>
<h4 id="Quadruples"><a href="#Quadruples" class="headerlink" title="Quadruples"></a>Quadruples</h4><script type="math/tex; mode=display">
\text{op}\quad \text{arg}_1\quad \text{arg}_2\quad \text{result}</script><p>Simple, straight forward.</p>
<p>Temporary names in <code>result</code>  field are space-consuming(symbol table entries).</p>
<h4 id="Triples"><a href="#Triples" class="headerlink" title="Triples"></a>Triples</h4><script type="math/tex; mode=display">
\text{op}\quad \text{arg}_1\quad \text{arg}_2</script><p>Refer to the results by positions, without generating temporary names.</p>
<p>Compiling optimization may <strong>swap instructions</strong>, leading to wrong results in triples.</p>
<h4 id="Indirect-Triples"><a href="#Indirect-Triples" class="headerlink" title="Indirect Triples"></a>Indirect Triples</h4><p>Consist of a list of pointers to triples.</p>
<p>An optimization can move an instruction by reordering the instruction list.</p>
<p><img src="https://s2.loli.net/2023/11/20/8D9WbjlcOyYTNVG.png" alt="image.png" style="zoom:50%;" /></p>
<h4 id="Static-Single-Assignment-Form"><a href="#Static-Single-Assignment-Form" class="headerlink" title="Static Single-Assignment Form"></a>Static Single-Assignment Form</h4><p>Each name receives a single assignment</p>
<p>combine definitions in different branches using $\phi$-function</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(flag)</span><br><span class="line">    x[<span class="number">1</span>] = <span class="number">-1</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    x[<span class="number">2</span>] = <span class="number">1</span>;</span><br><span class="line">x[<span class="number">3</span>] = phi(x[<span class="number">1</span>],x[<span class="number">2</span>]);</span><br><span class="line">y = x[<span class="number">3</span>] * a;</span><br></pre></td></tr></table></figure>
<h3 id="Type-and-Declarations"><a href="#Type-and-Declarations" class="headerlink" title="Type and Declarations"></a>Type and Declarations</h3><h4 id="Types-and-Type-Checking"><a href="#Types-and-Type-Checking" class="headerlink" title="Types and Type Checking"></a>Types and Type Checking</h4><p>Type info usages</p>
<ul>
<li>Find faults</li>
<li>Determine memory needed at runtime</li>
<li>Calculate addresses of array elements</li>
<li>Type conversions</li>
<li>Choose arithmetic operator</li>
</ul>
<p>Type checking: types of operands match the type expectation.</p>
<h4 id="Type-Expressions"><a href="#Type-Expressions" class="headerlink" title="Type Expressions"></a>Type Expressions</h4><ul>
<li>basic type: boolean, char, integer, float, void…</li>
<li>type name: name of a class</li>
<li><p>type constructor</p>
<ul>
<li>array(number, type expression)</li>
<li>record</li>
<li>function(type, type)→ return type</li>
</ul>
</li>
<li><p><strong>Name Equivalence</strong></p>
<p>names in type expressions are not replaced by the exact type expressions they define</p>
</li>
<li><p><strong>Structural Equivalence</strong></p>
<p>replace the names by the type expressions and recursively check the substituted trees</p>
</li>
</ul>
<h3 id="Translation-of-Expressions"><a href="#Translation-of-Expressions" class="headerlink" title="Translation of Expressions"></a>Translation of Expressions</h3><h4 id="SDD-for-Expression-Translation"><a href="#SDD-for-Expression-Translation" class="headerlink" title="SDD for Expression Translation"></a>SDD for Expression Translation</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">S</span><br><span class="line">| id = E;</span><br><span class="line">&#123;</span><br><span class="line">    S.code = E.code ||</span><br><span class="line">        gen(top.get(id.lexeme) <span class="string">&#x27;=&#x27;</span> E.addr);</span><br><span class="line">&#125;</span><br><span class="line">E</span><br><span class="line">| E1 + E2</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = new Temp();</span><br><span class="line">    E.code = E1.code || E2.code || </span><br><span class="line">        gen(E.addr <span class="string">&#x27;=&#x27;</span> E1.addr <span class="string">&#x27;+&#x27;</span> E2.addr);</span><br><span class="line">&#125;</span><br><span class="line">| - E1</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = new Temp();</span><br><span class="line">    E.code = E1.code || E2.code || </span><br><span class="line">        gen(E.addr <span class="string">&#x27;=&#x27;</span> <span class="string">&#x27;minus&#x27;</span> E1.addr);</span><br><span class="line">&#125;</span><br><span class="line">| (E1)</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = E1.addr;</span><br><span class="line">    E.code = E1.code;</span><br><span class="line">&#125;</span><br><span class="line">| id</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = top.get(id.lexeme);</span><br><span class="line">    E.code = <span class="string">&#x27;&#x27;;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Generate instructions when seeing operations, then concatenate instructions</p>
<ul>
<li>For <strong>id</strong>, check the symbol table and save its address</li>
<li>Use temporary name to hold intermediate values</li>
</ul>
<p><strong>Problem</strong></p>
<p><code>code</code> attributes may be too long. Redundant parts waste memory!</p>
<h4 id="Incremental-Translation-Scheme"><a href="#Incremental-Translation-Scheme" class="headerlink" title="Incremental Translation Scheme"></a>Incremental Translation Scheme</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">S</span><br><span class="line">| id = E;</span><br><span class="line">&#123;</span><br><span class="line">    gen(top.get(id.lexeme) <span class="string">&#x27;=&#x27;</span> E.addr);</span><br><span class="line">&#125;</span><br><span class="line">E</span><br><span class="line">| E1 + E2</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = new Temp();</span><br><span class="line">    gen(E.addr <span class="string">&#x27;=&#x27;</span> E1.addr <span class="string">&#x27;+&#x27;</span> E2.addr);</span><br><span class="line">&#125;</span><br><span class="line">| - E1</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = new Temp();</span><br><span class="line">    gen(E.addr <span class="string">&#x27;=&#x27;</span> <span class="string">&#x27;minus&#x27;</span> E1.addr);</span><br><span class="line">&#125;</span><br><span class="line">| (E1)</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = E1.addr;</span><br><span class="line">&#125;</span><br><span class="line">| id</span><br><span class="line">&#123;</span><br><span class="line">    E.addr = top.get(id.lexeme);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>gen</code> appends the new 3-addr instruction to the sequence of instructions.</p>
<p>This postfix SDT implemented in bottom-up parsing(semantic actions are executed upon reduction) guarantees that subexpressions are handled first.</p>
<h3 id="Control-Flow"><a href="#Control-Flow" class="headerlink" title="Control Flow"></a>Control Flow</h3><h4 id="Short-Circuit-Behavior"><a href="#Short-Circuit-Behavior" class="headerlink" title="Short Circuit Behavior"></a>Short Circuit Behavior</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> ( x &lt; y || x &gt; z &amp;&amp; x != w )</span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    if x &lt; y goto L2</span></span><br><span class="line"><span class="comment">    ifFalse x &gt; z goto L1</span></span><br><span class="line"><span class="comment">    ifFalse x != w goto L1</span></span><br><span class="line"><span class="comment">L2: x = 0</span></span><br><span class="line"><span class="comment">L1: </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h4 id="Flow-of-Control-Statements"><a href="#Flow-of-Control-Statements" class="headerlink" title="Flow-of-Control Statements"></a>Flow-of-Control Statements</h4><p><strong>Grammar</strong></p>
<ul>
<li>$S\rightarrow \textbf{if} (B)\ S_1$</li>
<li>$S\rightarrow \textbf{if} (B)\ S_1\ \textbf{else}\ S_2$</li>
<li>$S\rightarrow \textbf{while} (B)\ S_1$</li>
</ul>
<p><strong>Inherited attributes</strong></p>
<ul>
<li>$B.true$: the label to which control flows if $B$ is true.</li>
<li>$B.false$: the label to which control flows if $B$ is false.</li>
<li>$S.next$: the label for the instruction immediately after the code for $S$.</li>
</ul>
<ol>
<li><p>if</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">B.code  -&gt;	B.<span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line">B.<span class="literal">true</span>:		S1.code</span><br><span class="line">B.<span class="literal">false</span>:	...</span><br></pre></td></tr></table></figure>
</li>
<li><p>if-else</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">B.code  -&gt;	B.<span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line">B.<span class="literal">true</span>:		S1.code</span><br><span class="line">			<span class="keyword">goto</span> S.next</span><br><span class="line">B.<span class="literal">false</span>: 	S2.code</span><br><span class="line">S.next:		...</span><br></pre></td></tr></table></figure>
</li>
<li><p>while</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">begin:</span><br><span class="line">B.code  -&gt;	B.<span class="literal">true</span>/<span class="literal">false</span></span><br><span class="line">B.<span class="literal">true</span>:		S1.code</span><br><span class="line">			<span class="keyword">goto</span> begin</span><br><span class="line">B.<span class="literal">false</span>: 	...</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h4 id="Three-Address-Code-for-Booleans"><a href="#Three-Address-Code-for-Booleans" class="headerlink" title="Three-Address Code for Booleans"></a>Three-Address Code for Booleans</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">B</span><br><span class="line">| E1 rel E2</span><br><span class="line">&#123;</span><br><span class="line">    E.code = E1.code || E2.code</span><br><span class="line">        || gen(<span class="string">&#x27;if&#x27;</span> E1.addr rel.op E2.addr <span class="string">&#x27;goto&#x27;</span> B.<span class="literal">true</span>)</span><br><span class="line">        || gen(<span class="string">&#x27;goto&#x27;</span> B.<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line">| <span class="literal">true</span></span><br><span class="line">&#123;</span><br><span class="line">    B.code = gen(<span class="string">&#x27;goto&#x27;</span> B.<span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">| <span class="literal">false</span></span><br><span class="line">&#123;</span><br><span class="line">    B.code = gen(<span class="string">&#x27;goto&#x27;</span> B.<span class="literal">false</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line">B</span><br><span class="line">| B1 || B2</span><br><span class="line">&#123;</span><br><span class="line">    B1.<span class="literal">true</span> = B.<span class="literal">true</span>;</span><br><span class="line">    B1.<span class="literal">false</span> = newlabel();</span><br><span class="line">    B2.<span class="literal">true</span> = B.<span class="literal">true</span>;</span><br><span class="line">    B2.<span class="literal">false</span> = B.<span class="literal">false</span>;</span><br><span class="line">    B.code = B1.code || label(B1.<span class="literal">false</span>) || B2.code</span><br><span class="line">&#125;</span><br><span class="line">| B1 &amp;&amp; B2</span><br><span class="line">&#123;</span><br><span class="line">    B1.<span class="literal">true</span> = newlabel();</span><br><span class="line">    B1.<span class="literal">false</span> = B.<span class="literal">false</span>;</span><br><span class="line">    B2.<span class="literal">true</span> = B.<span class="literal">true</span>;</span><br><span class="line">    B2.<span class="literal">false</span> = B.<span class="literal">false</span>;</span><br><span class="line">    B.code = B1.code || label(B1.<span class="literal">false</span>) || B2.code</span><br><span class="line">&#125;</span><br><span class="line">| !B1</span><br><span class="line">&#123;</span><br><span class="line">    B1.<span class="literal">true</span> = B.<span class="literal">false</span>;</span><br><span class="line">    B1.<span class="literal">false</span> = B.<span class="literal">true</span>;</span><br><span class="line">    B.code = B1.code;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Compiler</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 Assignment Pandora Box</title>
    <url>/2023/11/02/CS205_Pandora_Box/</url>
    <content><![CDATA[<h3 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h3><p><img src="https://s2.loli.net/2023/11/03/c9SLXKhob4CVzwU.png" alt="_RKU5WY0KCJ8K_XMQ41U85G.png" style="zoom: 33%;" /></p>
<center><i><b><span style="color:#eb234b;">「奇迹ってのはタダじゃないんだ。希望を祈ればそれと同じ分だけの绝望が撒き散らされる。」</span></b></i></center>

<center><i><b><span style="color:#eb234b;">「そうやって差し引きを0にして 世の中のバランスは成り立ってるんだよ。」</span></b></i></center>

<h3 id="Description"><a href="#Description" class="headerlink" title="Description"></a>Description</h3><blockquote>
<p>This question is designed to examine your mastery of pointers using C for memory management. You can also use this question as an initial exploration of exception handling for your final project :)</p>
</blockquote>
<p>Still frustrated that you can only put the same type of data in an STL vector? Missing Python’s lists that can store any type of data? Now, try implementing a Pandora’s Box that can store anything of any type in C!</p>
<p><span style="color: rgb(51, 51, 51);">Ofcourse, GuTao is not so boring that letting everyone who is new to C write a complete Pandora’s Box from scratch, that would be too difficult. So GuTao decided to give you the blueprint of the Pandora’s Box, y</span>our task is just to implementseveral key operations to manage and interact with the <code>PandoraBox</code>structure.</p>
<p>The <code>PandoraBox</code> should provide the flexibility to append, write, and read data of different types, all stored within the same container.</p>
<p>In consideration of robustness, data written to the <code>PandoraBox</code> should be correctly handled even when its size doesn’t match the item size, including handling data padding and negative values.</p>
<p>The following operations should be supported by your <code>PandoraBox</code> :</p>
<ol>
<li><code>create</code>: Create an empty <code>PandoraBox</code> with specified item counts and their respective sizes.</li>
<li><code>append</code>: Extend the memory of the <code>PandoraBox</code> to append an item.</li>
<li><code>write</code>: Write data into a specific item within the <code>PandoraBox</code> .</li>
<li><code>read</code>: Copy the content of a particular item from the <code>PandoraBox</code> into newly allocated memory.</li>
<li><code>destroy</code>: Properly deallocate the memory associated with the <code>PandoraBox</code> and its data to prevent memory leaks.</li>
<li><code>printc</code>: Print bytes as characters in a given range, with proper handling of negative values.</li>
<li><code>printx</code>: Print bytes as a single hexadecimal value in a given range.</li>
<li><code>hex2byte</code>: Convert the given string to hexadecimal, and save it into the given address.</li>
</ol>
<p>Ofcourse, GuTao is not so boring that letting everyone who is new to C write a complete Pandora’s Box from scratch, that would be too difficult. So GuTao decided to give you the blueprint of the Pandora’s Box, and you only need to implement a few simple functions.</p>
<h3 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h3><p><del>Actually you don’t need to worry about this part because the main function is given by GuTao.</del></p>
<p>The first line contains an integer $T$, the number of operations.</p>
<p>Then the following $T$ lines are operations.</p>
<ul>
<li><code>C n a[0] a[1] ... a[n-1]</code>: create a Panbox with $n$ items, the sizes of items are $a[0]…a[n-1]$, split by spaces(All indices in this problem start from 0).</li>
<li><code>A l s</code>: append an item to the Panbox, where $l$ represents the length of a subsequent string, and $s$ represents the hexadecimal string, starting with “0x” and [a-f] in lowercase. For example, <code>A 9 0x514cafe</code>.</li>
<li><code>W i l s</code>: write the item with index $i$ with the value represented in the following hexadecimal string $s$ of length $l$.</li>
<li><code>R i o</code>: read the content of the item with index $i$. If $o$ is 1, then print the item in format of characters, otherwise in format of a single hexadecimal.</li>
<li><code>D</code>: Open the Pandora’s box and free everything, including HOPE.</li>
<li><code>Q</code>: Display the information of the current Panbox.</li>
</ul>
<h3 id="Output"><a href="#Output" class="headerlink" title="Output"></a>Output</h3><p><del>Actually you don’t need to worry about this part because the main function is given by GuTao.</del></p>
<ul>
<li>For <code>R</code> instructions, print the content of item[i] in the format given by $o$.</li>
<li>For <code>Q</code> instructions, if the Panbox pointer is NULL, output NULL in a single line; otherwise the number of the items in the Panbox in a single line, then print the size of every item in a new line.</li>
<li>For <code>D</code> instructions, print every item in character format, and in reverse order(FILO), then free the memory.</li>
</ul>
<h3 id="Sample-Input-1"><a href="#Sample-Input-1" class="headerlink" title="Sample Input #1"></a>Sample Input #1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">12</span><br><span class="line">C 1 4</span><br><span class="line">W 0 10 0x45504f48</span><br><span class="line">A 18 0x6e6f697469626d41</span><br><span class="line">A 24 0x6e6f6974697465706d6f43</span><br><span class="line">A 12 0x6465657247</span><br><span class="line">A 10 0x79766e45</span><br><span class="line">A 18 0x7973756f6c61654a</span><br><span class="line">A 14 0x646572746148</span><br><span class="line">A 20 0x6563697473756a6e49</span><br><span class="line">A 20 0x797265686361657254</span><br><span class="line">A 22 0x68746c6165682d6c6c49</span><br><span class="line">D</span><br></pre></td></tr></table></figure>
<h3 id="Sample-Output-1"><a href="#Sample-Output-1" class="headerlink" title="Sample Output #1"></a>Sample Output #1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">I l l - h e a l t h </span><br><span class="line">T r e a c h e r y </span><br><span class="line">I n j u s t i c e </span><br><span class="line">H a t r e d </span><br><span class="line">J e a l o u s y </span><br><span class="line">E n v y </span><br><span class="line">G r e e d </span><br><span class="line">C o m p e t i t i o n </span><br><span class="line">A m b i t i o n </span><br><span class="line">H O P E </span><br></pre></td></tr></table></figure>
<h3 id="Hint"><a href="#Hint" class="headerlink" title="Hint"></a>Hint</h3><p>To make this problem more interesting, <code>memcpy</code> and <code>memset</code>  of <code>&lt;string.h&gt;</code> are banned.</p>
<p>Try to implement them by your self!</p>
<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="type">void</span> *<span class="title function_">mycpy</span><span class="params">(<span class="type">void</span> *dst, <span class="type">const</span> <span class="type">void</span> *src, <span class="type">size_t</span> n)</span>;</span><br><span class="line"><span class="type">void</span> *<span class="title function_">myset</span><span class="params">(<span class="type">void</span> *dst, <span class="type">int</span> c, <span class="type">size_t</span> n)</span>;</span><br></pre></td></tr></table></figure>
<p>Also, this problem has NO Special Judge :)</p>
<h3 id="Template"><a href="#Template" class="headerlink" title="Template"></a>Template</h3><details>
    <summary>template code</summary>
    <figure class="highlight c"><div class="table-container"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">PandoraBox</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="type">int</span> item_count; <span class="comment">// Number of items stored in the PandoraBox.</span></span><br><span class="line">    <span class="type">int</span> *item_size; <span class="comment">// Array of item sizes in bytes.</span></span><br><span class="line">    <span class="type">void</span> *data;     <span class="comment">// A type-agnostic pointer to store data.</span></span><br><span class="line">} Panbox;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A PandoraBox capable of storing various data types within a continuous memory space.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- item_count: Number of items stored in this box.</span></span><br><span class="line"><span class="comment">- item_size: An array of integers; item_size[i] represents the size (in bytes) of the i-th item in the box.</span></span><br><span class="line"><span class="comment">- data: A type-agnostic pointer, enabling interpretation of different data types by reading segments with varying lengths.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*=+=+=+=+=+=+=+=+=+=+=Your code starts from here=+=+=+=+=+=+=+=+=+=+=*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">mycpy</span><span class="params">(<span class="type">void</span> *dst, <span class="type">const</span> <span class="type">void</span> *src, <span class="type">size_t</span> size)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: See memcpy in &lt;string.h&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- It is not a must to implement this function, but with it you can implement the following functions more easily.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">myset</span><span class="params">(<span class="type">void</span> *dst, <span class="type">int</span> n, <span class="type">size_t</span> size)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: See memset in &lt;string.h&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- It is not a must to implement this function, but with it you can implement the following functions more easily.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">Panbox *<span class="title function_">create</span><span class="params">(<span class="type">int</span> item_count, <span class="type">int</span> item_size[])</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Create an empty PandoraBox with specified item counts and their respective sizes.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- item_count: The number of items to be stored in the PandoraBox.</span></span><br><span class="line"><span class="comment">- item_size: An array specifying the size (in bytes) of each item.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Returns:</span></span><br><span class="line"><span class="comment">A pointer to the created PandoraBox.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Note:</span></span><br><span class="line"><span class="comment">- You CAN create a Panbox with no initial items, i.e., item_count=0 and item_size=NULL.</span></span><br><span class="line"><span class="comment">- However, negative item_count is not supported, and item_size should not be NULL when item_count is non-zero.</span></span><br><span class="line"><span class="comment">- The size of any item should be positive.</span></span><br><span class="line"><span class="comment">- Make sure that the memory newly allocated is filled with 0s.</span></span><br><span class="line"><span class="comment">- You should return NULL immediately if any failure happens.</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [item_size, item_size+item_count-1] is allocated in advance, unless item_size is NULL.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">append</span><span class="params">(Panbox *panbox, <span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Extend the memory of the PandoraBox to append an item.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox.</span></span><br><span class="line"><span class="comment">- value: A pointer to the data to be added to the PandoraBox.</span></span><br><span class="line"><span class="comment">- width: The size of the data in value (in bytes).</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Note:</span></span><br><span class="line"><span class="comment">- You should not append this item if any failure happens.</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">write</span><span class="params">(Panbox *panbox, <span class="type">int</span> item_id, <span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: COPY the data stored in 'value' into the segment of the item with index item_id in the PandoraBox.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox.</span></span><br><span class="line"><span class="comment">- item_id: The index of the item in the PandoraBox where data will be written.</span></span><br><span class="line"><span class="comment">- value: A pointer to the data that needs to be written to the PandoraBox.</span></span><br><span class="line"><span class="comment">- width: The size of the data in value (in bytes).</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- If 'item_id' is out of valid bounds, the data won't be written.</span></span><br><span class="line"><span class="comment">- If the item size cannot hold all data in value, the data won't be written.</span></span><br><span class="line"><span class="comment">- If the width of value is smaller than the item size, the data will be placed in the lower address and padded with the highest bit.</span></span><br><span class="line"><span class="comment">- Example: inserting a 1-byte value into a 2-byte item: (0x7f -&gt; 0x007f), (0xf7 -&gt; 0xfff7).</span></span><br><span class="line"><span class="comment">- The item_size should not change in this function.</span></span><br><span class="line"><span class="comment">- You should not write the item if any failure happens.</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">read</span><span class="params">(Panbox *panbox, <span class="type">int</span> item_id)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: COPY the item with index item_id from the PandoraBox into a newly allocated memory, and return a pointer to this memory.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox.</span></span><br><span class="line"><span class="comment">- item_id: The index of the item in the PandoraBox that should be read.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Returns:</span></span><br><span class="line"><span class="comment">A pointer to the newly allocated memory containing a copy of the specified item.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- You should return NULL immediately if any failure happens.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">destroy</span><span class="params">(Panbox *panbox)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Deallocate the memory associated with the PandoraBox and its data.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox that should be destroyed.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- This function should be used when the PandoraBox is no longer needed to prevent memory leak.</span></span><br><span class="line"><span class="comment">- You should check before freeing a pointer.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printc</span><span class="params">(<span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Print every 1 byte (char) in [value, value+width-1] as a character, split by a space.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">- If the value of the byte is in [0, 32] or equals to 127(Del), do not print anything(they are special characters).</span></span><br><span class="line"><span class="comment">- e.g., for an empty box with all 0, the destroy of this box will invoke printc(), but should not print anything.</span></span><br><span class="line"><span class="comment">- If the value of the byte is negative, print '-' instead.</span></span><br><span class="line"><span class="comment">- You should return immediately if any failure happens.</span></span><br><span class="line"><span class="comment">- Please print a `\n` before returning, unless you print nothing in this function.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printx</span><span class="params">(<span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Print the value in [value, value+width-1] as a single hexadecimal, in format of 0x12345678.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">- You should return immediately if any failure happens.</span></span><br><span class="line"><span class="comment">- If the highest byte is less than 0x10, please output a leading 0, e.g., 0x0514.</span></span><br><span class="line"><span class="comment">- Leading zeros are OK, if *(value) = 0x000f, width = 2, then print 0x000f. (print even number of characters)</span></span><br><span class="line"><span class="comment">- If the item is full of 0s, please still print it. E.g., 0x0000.</span></span><br><span class="line"><span class="comment">- Please print a `\n` before returning.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">hex2byte</span><span class="params">(<span class="type">void</span> *dst, <span class="type">char</span> *hex)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: For the given hex string "0x12345678", write 0x12345678 into dst.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- The length of hex might be ODD, make sure to put all data into dst. For example, "0xfff"(12 bits) should be stored using 2 bytes as 0x0fff(different from write(), just add a padding 0 here).</span></span><br><span class="line"><span class="comment">- You should return immediately if any failure happens.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*=+=+=+=+=+=+=+=+=+=+=Your code ends here=+=+=+=+=+=+=+=+=+=+=*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_info</span><span class="params">(Panbox *p)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p-&gt;item_count);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; p-&gt;item_count; i++)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d "</span>, p-&gt;item_size[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"NULL\n"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Display the basic information of given PandoraBox</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Implemented by GuTao.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">Panbox *p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">char</span> op;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;op);</span><br><span class="line">        <span class="keyword">switch</span> (op)</span><br><span class="line">        {</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'C'</span>: {</span><br><span class="line">            <span class="type">int</span> item_count;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_count);</span><br><span class="line">            <span class="type">int</span> *item_size = (<span class="type">int</span> *)<span class="built_in">malloc</span>(item_count * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; item_count; i++)</span><br><span class="line">            {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_size[i]);</span><br><span class="line">            }</span><br><span class="line">            p = create(item_count, item_size);</span><br><span class="line">            <span class="built_in">free</span>(item_size);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'D'</span>: {</span><br><span class="line">            <span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = p-&gt;item_count - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">                {</span><br><span class="line">                    <span class="type">void</span> *data = read(p, i);</span><br><span class="line">                    <span class="keyword">if</span> (data != <span class="literal">NULL</span>)</span><br><span class="line">                    {</span><br><span class="line">                        printc(data, p-&gt;item_size[i]);</span><br><span class="line">                        <span class="built_in">free</span>(data);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            destroy(p);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'A'</span>: {</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;len);</span><br><span class="line">            <span class="type">char</span> *hex_str = (<span class="type">char</span> *)<span class="built_in">malloc</span>(len + <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, hex_str);</span><br><span class="line">            <span class="type">int</span> num_of_byte = (<span class="built_in">strlen</span>(hex_str) - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">void</span> *data = (<span class="type">void</span> *)<span class="built_in">malloc</span>(num_of_byte);</span><br><span class="line">            hex2byte(data, hex_str);</span><br><span class="line">            append(p, data, num_of_byte);</span><br><span class="line">            <span class="built_in">free</span>(hex_str);</span><br><span class="line">            <span class="built_in">free</span>(data);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'W'</span>: {</span><br><span class="line">            <span class="type">int</span> item_id;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_id);</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;len);</span><br><span class="line">            <span class="type">char</span> *hex_str = (<span class="type">char</span> *)<span class="built_in">malloc</span>(len + <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, hex_str);</span><br><span class="line">            <span class="type">int</span> num_of_byte = (<span class="built_in">strlen</span>(hex_str) - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">void</span> *data = (<span class="type">void</span> *)<span class="built_in">malloc</span>(num_of_byte);</span><br><span class="line">            hex2byte(data, hex_str);</span><br><span class="line">            write(p, item_id, data, num_of_byte);</span><br><span class="line">            <span class="built_in">free</span>(hex_str);</span><br><span class="line">            <span class="built_in">free</span>(data);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'R'</span>: {</span><br><span class="line">            <span class="type">int</span> item_id;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_id);</span><br><span class="line">            <span class="type">int</span> is_printc;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;is_printc);</span><br><span class="line">            <span class="type">void</span> *data = read(p, item_id);</span><br><span class="line">            <span class="keyword">if</span> (data != <span class="literal">NULL</span>)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (is_printc)</span><br><span class="line">                {</span><br><span class="line">                    printc(data, p-&gt;item_size[item_id]);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                {</span><br><span class="line">                    printx(data, p-&gt;item_size[item_id]);</span><br><span class="line">                }</span><br><span class="line">                <span class="built_in">free</span>(data);</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Q'</span>: {</span><br><span class="line">            show_info(p);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">default</span>: {</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Main function implemented by GuTao, you cannot rewrite one for yourself.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- Just for you to understand how the functions you implement would be invoked.</span></span><br><span class="line"><span class="comment">- Not exact the main function to test on OJ, this one does not check your error handling.</span></span><br><span class="line"><span class="comment">- You can test your functions on your PC with your own main().</span></span><br><span class="line"><span class="comment">- You may want to hack with your own main function, but this won't help you AC :)</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></tbody></table></div></figure>
</details>

<h3 id="Test-cases"><a href="#Test-cases" class="headerlink" title="Test cases"></a>Test cases</h3><ol>
<li>NULL pointer handling for each function, create and destroy empty box.</li>
<li>Create, write items using data of exact lengths, read items, printc, destroy</li>
<li>Create, write items using data of exact lengths, read items, printc/x, destroy</li>
<li>Create, write items using data of random lengths, read items, printc, destroy, negative char</li>
<li>Create, write items using data of random lengths, read items, printc/x, destroy, negative char</li>
<li>Create, write items with invalid indices, append items, read items with invalid indices, printc, destroy</li>
<li>Create, write items with invalid indices, append items, read items with invalid indices, printc/x, destroy</li>
<li>Create, append items, write items, read items, printc/x, destroy, with full robustness</li>
<li>Memory leak check: (create, append items, destroy) *n</li>
<li>Large amount of create, append items, write items, read items, printc/x, destroy, with full robustness</li>
</ol>
<h3 id="Standard-Solution"><a href="#Standard-Solution" class="headerlink" title="Standard Solution"></a>Standard Solution</h3><details>
    <summary>std by GuTao</summary>
    <figure class="highlight c"><div class="table-container"><table><tbody><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Author: GuTao</span></span><br><span class="line"><span class="comment">Date:   2023-10-24</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Standard code for Assignment 2-1, CS205 C/C++ Program Design, 2023 Fall.</span></span><br><span class="line"><span class="comment">Although it is robust enough to pass this problem, there *must* be some bugs in this code.</span></span><br><span class="line"><span class="comment">Feel free to point them out in the QQ group!</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Sincere thanks to each of the you who worked hard challenging this question!</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">You may not get full marks on this problem, but at least you have a basic idea of how memory management and exception</span></span><br><span class="line"><span class="comment">handling works! Hope you enjoyed the process of exploring new ideas and debugging when challenging this problem.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Memory management is one of the eternal topics of learning C and C++, I hope that after this problem, you can always</span></span><br><span class="line"><span class="comment">pay attention to memory management and exception management in your future C/C++ development, whether it's an OJ problem</span></span><br><span class="line"><span class="comment">or a project.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Forgive me for the high level of robustness requirement for this assignment, after all, implementing a Pyhton-like list</span></span><br><span class="line"><span class="comment">in C is never a piece of cake, as the joke goes: A customer came to your bar, and ordered egg fried rice. I also hope</span></span><br><span class="line"><span class="comment">that you will do a good job of memory management and exception handling in your final project, which will be used as one</span></span><br><span class="line"><span class="comment">of the criteria for project evaluation.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Farewell, until we meet again at the final project :)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">GuTao</span></span><br><span class="line"><span class="comment">Nov. 19, 2023</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> memset main</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> memcpy main</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">PandoraBox</span></span></span><br><span class="line"><span class="class">{</span></span><br><span class="line">    <span class="type">int</span> item_count; <span class="comment">// Number of items stored in the PandoraBox.</span></span><br><span class="line">    <span class="type">int</span> *item_size; <span class="comment">// Array of item sizes in bytes.</span></span><br><span class="line">    <span class="type">void</span> *data;     <span class="comment">// A type-agnostic pointer to store data.</span></span><br><span class="line">} Panbox;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">A PandoraBox capable of storing various data types within a continuous memory space.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">- item_count: Number of items stored in this box.</span></span><br><span class="line"><span class="comment">- item_size: An array of integers; item_size[i] represents the size (in bytes) of the i-th item in the box.</span></span><br><span class="line"><span class="comment">- data: A type-agnostic pointer, enabling interpretation of different data types by reading segments with varying</span></span><br><span class="line"><span class="comment">lengths.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">memory_checker</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IFRET(cond, ret)                                                                                               \</span></span><br><span class="line"><span class="meta">    do                                                                                                                 \</span></span><br><span class="line"><span class="meta">    {                                                                                                                  \</span></span><br><span class="line"><span class="meta">        <span class="keyword">if</span> (cond)                                                                                                      \</span></span><br><span class="line"><span class="meta">        {                                                                                                              \</span></span><br><span class="line"><span class="meta">            return ret;                                                                                                \</span></span><br><span class="line"><span class="meta">        }                                                                                                              \</span></span><br><span class="line"><span class="meta">    } while (0)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> VIFRET(cond)                                                                                                   \</span></span><br><span class="line"><span class="meta">    do                                                                                                                 \</span></span><br><span class="line"><span class="meta">    {                                                                                                                  \</span></span><br><span class="line"><span class="meta">        <span class="keyword">if</span> (cond)                                                                                                      \</span></span><br><span class="line"><span class="meta">        {                                                                                                              \</span></span><br><span class="line"><span class="meta">            return;                                                                                                    \</span></span><br><span class="line"><span class="meta">        }                                                                                                              \</span></span><br><span class="line"><span class="meta">    } while (0)</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">mycpy</span><span class="params">(<span class="type">void</span> *dst, <span class="type">const</span> <span class="type">void</span> *src, <span class="type">size_t</span> size)</span></span><br><span class="line">{</span><br><span class="line"></span><br><span class="line">    IFRET(dst == <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    IFRET(src == <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="type">char</span> *psrc, *pdst;</span><br><span class="line">    <span class="keyword">if</span> ((src &lt; dst) &amp;&amp; (<span class="type">char</span> *)src + size &gt; (<span class="type">char</span> *)dst)</span><br><span class="line">    {</span><br><span class="line">        psrc = (<span class="type">char</span> *)src + size - <span class="number">1</span>;</span><br><span class="line">        pdst = (<span class="type">char</span> *)dst + size - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (size--)</span><br><span class="line">        {</span><br><span class="line">            *pdst-- = *psrc--;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        psrc = (<span class="type">char</span> *)src;</span><br><span class="line">        pdst = (<span class="type">char</span> *)dst;</span><br><span class="line">        <span class="keyword">while</span> (size--)</span><br><span class="line">        {</span><br><span class="line">            *pdst++ = *psrc++;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> pdst;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: See memcpy in &lt;string.h&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- It is not a must to implement this function, but with it you can implement the following functions more easily.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">myset</span><span class="params">(<span class="type">void</span> *dst, <span class="type">int</span> n, <span class="type">size_t</span> size)</span></span><br><span class="line">{</span><br><span class="line">    IFRET((dst == <span class="literal">NULL</span>), <span class="literal">NULL</span>);</span><br><span class="line">    <span class="type">char</span> *pdst = (<span class="type">char</span> *)dst;</span><br><span class="line">    <span class="keyword">while</span> (size--)</span><br><span class="line">    {</span><br><span class="line">        *pdst++ = n;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> dst;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: See memset in &lt;string.h&gt;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- It is not a must to implement this function, but with it you can implement the following functions more easily.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">Panbox *<span class="title function_">create</span><span class="params">(<span class="type">int</span> item_count, <span class="type">int</span> item_size[])</span></span><br><span class="line">{</span><br><span class="line">    IFRET(item_count &lt; <span class="number">0</span>, <span class="literal">NULL</span>);</span><br><span class="line">    IFRET(item_count &gt; <span class="number">0</span> &amp;&amp; item_size == <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    Panbox *p = (Panbox *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Panbox));</span><br><span class="line">    IFRET(p == <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    p-&gt;item_count = item_count;</span><br><span class="line">    p-&gt;item_size = (<span class="type">int</span> *)<span class="built_in">malloc</span>(item_count * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;item_size == <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">free</span>(p);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="type">size_t</span> data_size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; item_count; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="keyword">if</span> (item_size[i] &lt;= <span class="number">0</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">free</span>(p-&gt;item_size);</span><br><span class="line">            <span class="built_in">free</span>(p);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        }</span><br><span class="line">        p-&gt;item_size[i] = item_size[i];</span><br><span class="line">        data_size += item_size[i];</span><br><span class="line">    }</span><br><span class="line">    p-&gt;data = (<span class="type">void</span> *)<span class="built_in">malloc</span>(data_size);</span><br><span class="line">    myset(p-&gt;data, <span class="number">0</span>, data_size);</span><br><span class="line">    <span class="keyword">if</span> (p-&gt;data == <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">free</span>(p-&gt;item_size);</span><br><span class="line">        <span class="built_in">free</span>(p);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Create an empty PandoraBox with specified item counts and their respective sizes.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- item_count: The number of items to be stored in the PandoraBox.</span></span><br><span class="line"><span class="comment">- item_size: An array specifying the size (in bytes) of each item.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Returns:</span></span><br><span class="line"><span class="comment">A pointer to the created PandoraBox.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Note:</span></span><br><span class="line"><span class="comment">- You CAN create a Panbox with no initial items, i.e., item_count=0.</span></span><br><span class="line"><span class="comment">- However, negative item_count is not supported, and item_size should not be NULL when item_count is non-zero.</span></span><br><span class="line"><span class="comment">- The size of any item should be positive.</span></span><br><span class="line"><span class="comment">- Make sure that the memory newly allocated is filled with 0s.</span></span><br><span class="line"><span class="comment">- You should return NULL immediately if any failure happens.</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [item_size, item_size+item_count-1] is allocated in advance, unless item_size is</span></span><br><span class="line"><span class="comment">NULL.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">append</span><span class="params">(Panbox *panbox, <span class="type">const</span> <span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    VIFRET(panbox == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(panbox-&gt;data == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(panbox-&gt;item_size == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(panbox-&gt;item_count &lt; <span class="number">0</span>);</span><br><span class="line">    VIFRET(value == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(width &lt;= <span class="number">0</span>);</span><br><span class="line">    <span class="type">size_t</span> data_size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; panbox-&gt;item_count; i++)</span><br><span class="line">    {</span><br><span class="line">        data_size += panbox-&gt;item_size[i];</span><br><span class="line">    }</span><br><span class="line">    <span class="type">int</span> *new_size = (<span class="type">int</span> *)<span class="built_in">realloc</span>(panbox-&gt;item_size, <span class="keyword">sizeof</span>(<span class="type">int</span>) * (panbox-&gt;item_count + <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">if</span> (new_size == <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="comment">// item_size allocation failed</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="type">void</span> *new_data = (<span class="type">void</span> *)<span class="built_in">realloc</span>(panbox-&gt;data, data_size + width);</span><br><span class="line">        <span class="keyword">if</span> (new_data == <span class="literal">NULL</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="comment">// data allocation failed, undo item_size extension</span></span><br><span class="line">            <span class="type">int</span> *tmp_size;</span><br><span class="line">            <span class="keyword">do</span></span><br><span class="line">            {</span><br><span class="line">                tmp_size = (<span class="type">int</span> *)<span class="built_in">realloc</span>(new_size, <span class="keyword">sizeof</span>(<span class="type">int</span>) * (panbox-&gt;item_count));</span><br><span class="line">            } <span class="keyword">while</span> (tmp_size == <span class="literal">NULL</span>);</span><br><span class="line">            panbox-&gt;item_size = tmp_size;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            <span class="comment">// data allocation sucess</span></span><br><span class="line">            panbox-&gt;data = new_data;</span><br><span class="line">            panbox-&gt;item_count += <span class="number">1</span>;</span><br><span class="line">            panbox-&gt;item_size = new_size;</span><br><span class="line">            panbox-&gt;item_size[panbox-&gt;item_count - <span class="number">1</span>] = width;</span><br><span class="line">            mycpy(((<span class="type">char</span> *)panbox-&gt;data) + data_size, value, width);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Extend the memory of the PandoraBox to append an item.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox.</span></span><br><span class="line"><span class="comment">- value: A pointer to the data to be added to the PandoraBox.</span></span><br><span class="line"><span class="comment">- width: The size of the data in value (in bytes).</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Note:</span></span><br><span class="line"><span class="comment">- You should not append this item if any failure happens.</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">write</span><span class="params">(Panbox *panbox, <span class="type">int</span> item_id, <span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    VIFRET(panbox == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(value == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(width &lt;= <span class="number">0</span>);</span><br><span class="line">    VIFRET(item_id &lt; <span class="number">0</span> || item_id &gt;= panbox-&gt;item_count);</span><br><span class="line">    VIFRET(panbox-&gt;item_size[item_id] &lt; width);</span><br><span class="line">    <span class="type">size_t</span> data_size = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; item_id; i++)</span><br><span class="line">    {</span><br><span class="line">        data_size += panbox-&gt;item_size[i];</span><br><span class="line">    }</span><br><span class="line">    mycpy(((<span class="type">char</span> *)panbox-&gt;data) + data_size, value, width);</span><br><span class="line">    <span class="keyword">if</span> (width &lt; panbox-&gt;item_size[item_id])</span><br><span class="line">    {</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> c = ((*((<span class="type">unsigned</span> <span class="type">char</span> *)value + width - <span class="number">1</span>)) &gt; <span class="number">0x7f</span>) ? <span class="number">0xff</span> : <span class="number">0x00</span>;</span><br><span class="line">        myset(((<span class="type">char</span> *)panbox-&gt;data) + data_size + width, c, panbox-&gt;item_size[item_id] - width);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: COPY the data stored in 'value' into the segment of the item with index item_id in the PandoraBox.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox.</span></span><br><span class="line"><span class="comment">- item_id: The index of the item in the PandoraBox where data will be written.</span></span><br><span class="line"><span class="comment">- value: A pointer to the data that needs to be written to the PandoraBox.</span></span><br><span class="line"><span class="comment">- width: The size of the data in value (in bytes).</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- If 'item_id' is out of valid bounds, the data won't be written.</span></span><br><span class="line"><span class="comment">- If the item size cannot hold all data in value, the data won't be written.</span></span><br><span class="line"><span class="comment">- If the width of value is smaller than the item size, the data will be placed in the lower address and padded with the</span></span><br><span class="line"><span class="comment">highest bit.</span></span><br><span class="line"><span class="comment">- Example: inserting a 1-byte value into a 2-byte item: (0x7f -&gt; 0x007f), (0xf7 -&gt; 0xfff7).</span></span><br><span class="line"><span class="comment">- The item_size should not change in this function.</span></span><br><span class="line"><span class="comment">- You should not write the item if any failure happens.</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> *<span class="title function_">read</span><span class="params">(Panbox *panbox, <span class="type">int</span> item_id)</span></span><br><span class="line">{</span><br><span class="line">    IFRET(panbox == <span class="literal">NULL</span>, <span class="literal">NULL</span>);</span><br><span class="line">    IFRET(item_id &lt; <span class="number">0</span> || item_id &gt;= panbox-&gt;item_count, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="type">void</span> *data = (<span class="type">void</span> *)<span class="built_in">malloc</span>(panbox-&gt;item_size[item_id]);</span><br><span class="line">    <span class="keyword">if</span> (data != <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">char</span> *p = panbox-&gt;data;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; item_id; i++)</span><br><span class="line">        {</span><br><span class="line">            p = p + panbox-&gt;item_size[i];</span><br><span class="line">        }</span><br><span class="line">        mycpy(data, p, panbox-&gt;item_size[item_id]);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: COPY the item with index item_id from the PandoraBox into a newly allocated memory, and return a pointer to</span></span><br><span class="line"><span class="comment">this memory.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox.</span></span><br><span class="line"><span class="comment">- item_id: The index of the item in the PandoraBox that should be read.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Returns:</span></span><br><span class="line"><span class="comment">A pointer to the newly allocated memory containing a copy of the specified item.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- You should return NULL immediately if any failure happens.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">destroy</span><span class="params">(Panbox *panbox)</span></span><br><span class="line">{</span><br><span class="line">    VIFRET(panbox == <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">free</span>(panbox-&gt;data);</span><br><span class="line">    panbox-&gt;data = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(panbox-&gt;item_size);</span><br><span class="line">    panbox-&gt;item_size = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">free</span>(panbox);</span><br><span class="line">    panbox = <span class="literal">NULL</span>;</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Deallocate the memory associated with the PandoraBox and its data.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Parameters:</span></span><br><span class="line"><span class="comment">- panbox: A pointer to the PandoraBox that should be destroyed.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- This function should be used when the PandoraBox is no longer needed to prevent memory leak.</span></span><br><span class="line"><span class="comment">- You should check before freeing a pointer.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printc</span><span class="params">(<span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    VIFRET(value == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(width &lt;= <span class="number">0</span>);</span><br><span class="line">    <span class="type">int</span> printed = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; width; i++)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> c = ((<span class="type">unsigned</span> <span class="type">char</span> *)value)[i];</span><br><span class="line">        <span class="keyword">if</span> (c &gt;= <span class="number">33</span> &amp;&amp; c != <span class="number">127</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%c "</span>, (c &gt; <span class="number">127</span>) ? <span class="string">'-'</span> : c);</span><br><span class="line">            printed = <span class="number">1</span>;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">if</span> (printed)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Print every 1 byte (char) in [value, value+width-1] as a character, split by a space.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">- If the value of the byte is in [0, 32] or equals to 127(Del), do not print anything(they are special characters).</span></span><br><span class="line"><span class="comment">- e.g., for an empty box with all 0, the destroy of this box will invoke printc(), but should not print anything.</span></span><br><span class="line"><span class="comment">- If the value of the byte is negative, print '-' instead.</span></span><br><span class="line"><span class="comment">- You should return immediately if any failure happens.</span></span><br><span class="line"><span class="comment">- Please print a `\n` before returning, unless you print nothing in this function.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printx</span><span class="params">(<span class="type">void</span> *value, <span class="type">int</span> width)</span></span><br><span class="line">{</span><br><span class="line">    VIFRET(value == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(width &lt;= <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"0x"</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = width - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">unsigned</span> <span class="type">char</span> c = ((<span class="type">unsigned</span> <span class="type">char</span> *)value)[i];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%02x"</span>, c);</span><br><span class="line">    }</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: Print the value in [value, value+width-1] as a single hexadecimal, in format of 0x12345678.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- Good news: GuTao guarantees that [value, value+width-1] is allocated in advance, unless value is NULL.</span></span><br><span class="line"><span class="comment">- You should return immediately if any failure happens.</span></span><br><span class="line"><span class="comment">- If the highest byte is less than 0x10, please output a leading 0, e.g., 0x0514.</span></span><br><span class="line"><span class="comment">- Leading zeros are OK, if *(value) = 0x000f, width = 2, then print 0x000f. (print even number of characters)</span></span><br><span class="line"><span class="comment">- If the item is full of 0s, please still print it. E.g., 0x0000.</span></span><br><span class="line"><span class="comment">- Please print a `\n` before returning, unless failure happens in this function.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">hex2int</span><span class="params">(<span class="type">char</span> c)</span></span><br><span class="line">{</span><br><span class="line">    IFRET(<span class="string">'0'</span> &lt;= c &amp;&amp; c &lt;= <span class="string">'9'</span>, c - <span class="string">'0'</span>);</span><br><span class="line">    IFRET(<span class="string">'a'</span> &lt;= c &amp;&amp; c &lt;= <span class="string">'f'</span>, c - <span class="string">'a'</span> + <span class="number">10</span>);</span><br><span class="line">    IFRET(<span class="string">'A'</span> &lt;= c &amp;&amp; c &lt;= <span class="string">'F'</span>, c - <span class="string">'A'</span> + <span class="number">10</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">hex2byte</span><span class="params">(<span class="type">void</span> *dst, <span class="type">char</span> *hex)</span></span><br><span class="line">{</span><br><span class="line">    VIFRET(dst == <span class="literal">NULL</span>);</span><br><span class="line">    VIFRET(hex == <span class="literal">NULL</span>);</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *ptr = (<span class="type">unsigned</span> <span class="type">char</span> *)dst;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">strlen</span>(hex);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = len - <span class="number">1</span>; i &gt;= <span class="number">1</span>; i -= <span class="number">2</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">char</span> lo = hex[i];</span><br><span class="line">        <span class="type">char</span> hi = hex[i - <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (lo == <span class="string">'x'</span>)</span><br><span class="line">        {</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (hi == <span class="string">'x'</span>)</span><br><span class="line">        {</span><br><span class="line">            *(ptr) = hex2int(lo);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        {</span><br><span class="line">            *(ptr) = (hex2int(hi) &lt;&lt; <span class="number">4</span>) + hex2int(lo);</span><br><span class="line">        }</span><br><span class="line">        ptr++;</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">Function: For the given hex string "0x12345678", write 0x12345678 into dst.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Notes:</span></span><br><span class="line"><span class="comment">- The length of hex might be ODD, make sure to put all data into dst. For example, "0xfff"(12 bits) should be stored</span></span><br><span class="line"><span class="comment">using 2 bytes as 0x0fff(different from write(), just add a padding 0 here).</span></span><br><span class="line"><span class="comment">- You should return immediately if any failure happens.</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">show_info</span><span class="params">(Panbox *p)</span></span><br><span class="line">{</span><br><span class="line">    <span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p-&gt;item_count);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; p-&gt;item_count; i++)</span><br><span class="line">        {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d "</span>, p-&gt;item_size[i]);</span><br><span class="line">        }</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    {</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"NULL\n"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">Panbox *p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="comment">// freopen("./testcases/gift.in", "r", stdin);</span></span><br><span class="line">    <span class="comment">// freopen("./testcases/gift.out", "w", stdout);</span></span><br><span class="line">    <span class="type">int</span> T;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);</span><br><span class="line">    <span class="keyword">while</span> (T--)</span><br><span class="line">    {</span><br><span class="line">        <span class="type">char</span> op;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;op);</span><br><span class="line">        <span class="keyword">switch</span> (op)</span><br><span class="line">        {</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'C'</span>: {</span><br><span class="line">            <span class="type">int</span> item_count;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_count);</span><br><span class="line">            <span class="type">int</span> *item_size = (<span class="type">int</span> *)<span class="built_in">malloc</span>(item_count * <span class="keyword">sizeof</span>(<span class="type">int</span>));</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; item_count; i++)</span><br><span class="line">            {</span><br><span class="line">                <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_size[i]);</span><br><span class="line">            }</span><br><span class="line">            p = create(item_count, item_size);</span><br><span class="line">            <span class="built_in">free</span>(item_size);</span><br><span class="line">            item_size = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="comment">// show_info(p);</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'D'</span>: {</span><br><span class="line">            <span class="keyword">if</span> (p != <span class="literal">NULL</span>)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> i = p-&gt;item_count - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">                {</span><br><span class="line">                    <span class="type">void</span> *data = read(p, i);</span><br><span class="line">                    <span class="keyword">if</span> (data != <span class="literal">NULL</span>)</span><br><span class="line">                    {</span><br><span class="line">                        <span class="comment">// printf("%d th item:", i);</span></span><br><span class="line">                        printc(data, p-&gt;item_size[i]);</span><br><span class="line">                    }</span><br><span class="line">                    <span class="built_in">free</span>(data);</span><br><span class="line">                    data = <span class="literal">NULL</span>;</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            destroy(p);</span><br><span class="line">            p = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'A'</span>: {</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;len);</span><br><span class="line">            <span class="type">char</span> *hex_str = (<span class="type">char</span> *)<span class="built_in">malloc</span>(len + <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, hex_str);</span><br><span class="line">            <span class="type">int</span> num_of_byte = (<span class="built_in">strlen</span>(hex_str) - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">void</span> *data = (<span class="type">void</span> *)<span class="built_in">malloc</span>(num_of_byte * <span class="keyword">sizeof</span>(<span class="type">char</span>));</span><br><span class="line">            hex2byte(data, hex_str);</span><br><span class="line">            append(p, data, num_of_byte);</span><br><span class="line">            <span class="built_in">free</span>(hex_str);</span><br><span class="line">            hex_str = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="built_in">free</span>(data);</span><br><span class="line">            data = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="comment">// show_info(p);</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'W'</span>: {</span><br><span class="line">            <span class="type">int</span> item_id;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_id);</span><br><span class="line">            <span class="type">int</span> len;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;len);</span><br><span class="line">            <span class="type">char</span> *hex_str = (<span class="type">char</span> *)<span class="built_in">malloc</span>(len + <span class="number">1</span>);</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%s"</span>, hex_str);</span><br><span class="line">            <span class="type">int</span> num_of_byte = (<span class="built_in">strlen</span>(hex_str) - <span class="number">1</span>) / <span class="number">2</span>;</span><br><span class="line">            <span class="type">void</span> *data = (<span class="type">void</span> *)<span class="built_in">malloc</span>(num_of_byte * <span class="keyword">sizeof</span>(<span class="type">char</span>));</span><br><span class="line">            hex2byte(data, hex_str);</span><br><span class="line">            write(p, item_id, data, num_of_byte);</span><br><span class="line">            <span class="built_in">free</span>(hex_str);</span><br><span class="line">            hex_str = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="built_in">free</span>(data);</span><br><span class="line">            data = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="comment">// show_info(p);</span></span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'R'</span>: {</span><br><span class="line">            <span class="type">int</span> item_id;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;item_id);</span><br><span class="line">            <span class="type">int</span> is_printc;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;is_printc);</span><br><span class="line">            <span class="type">void</span> *data = read(p, item_id);</span><br><span class="line">            <span class="keyword">if</span> (data != <span class="literal">NULL</span>)</span><br><span class="line">            {</span><br><span class="line">                <span class="keyword">if</span> (is_printc)</span><br><span class="line">                {</span><br><span class="line">                    printc(data, p-&gt;item_size[item_id]);</span><br><span class="line">                }</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                {</span><br><span class="line">                    printx(data, p-&gt;item_size[item_id]);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">            <span class="built_in">free</span>(data);</span><br><span class="line">            data = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'Q'</span>: {</span><br><span class="line">            show_info(p);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">case</span> <span class="string">'M'</span>: {</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"check result: %d\n"</span>, memory_checker());</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">default</span>: {</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        }</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">    fclose(<span class="built_in">stdin</span>);</span><br><span class="line">    fclose(<span class="built_in">stdout</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">memory_checker</span><span class="params">()</span></span><br><span class="line">{</span><br><span class="line">    <span class="type">int</span> is[<span class="number">3</span>] = {<span class="number">10</span>, <span class="number">20</span>, <span class="number">0</span>};</span><br><span class="line">    <span class="type">char</span> val[<span class="number">5</span>] = {<span class="string">'G'</span>, <span class="string">'u'</span>, <span class="string">'T'</span>, <span class="string">'a'</span>, <span class="string">'o'</span>};</span><br><span class="line">    Panbox *u = <span class="literal">NULL</span>;</span><br><span class="line">    destroy(u);</span><br><span class="line">    u = create(<span class="number">-1</span>, is); <span class="comment">// negative item_count, non-null item_size, should fail</span></span><br><span class="line">    IFRET(u != <span class="literal">NULL</span>, <span class="number">1</span>);</span><br><span class="line">    u = create(<span class="number">1</span>, <span class="literal">NULL</span>); <span class="comment">// positive item_count, null item_size, should fail</span></span><br><span class="line">    IFRET(u != <span class="literal">NULL</span>, <span class="number">2</span>);</span><br><span class="line">    u = create(<span class="number">0</span>, <span class="literal">NULL</span>); <span class="comment">// empty box, should success</span></span><br><span class="line">    IFRET(u == <span class="literal">NULL</span>, <span class="number">3</span>);</span><br><span class="line">    destroy(u);        <span class="comment">// Normal destroy</span></span><br><span class="line">    u = create(<span class="number">3</span>, is); <span class="comment">// item_size[2] = 0, fail</span></span><br><span class="line">    IFRET(u != <span class="literal">NULL</span>, <span class="number">4</span>);</span><br><span class="line">    u = create(<span class="number">2</span>, is); <span class="comment">// Normal create, should success</span></span><br><span class="line">    IFRET(u == <span class="literal">NULL</span>, <span class="number">5</span>);</span><br><span class="line">    show_info(u);         <span class="comment">// 2 \n 10 20</span></span><br><span class="line">    append(<span class="literal">NULL</span>, val, <span class="number">5</span>); <span class="comment">// fail</span></span><br><span class="line">    append(u, <span class="literal">NULL</span>, <span class="number">5</span>);   <span class="comment">// fail</span></span><br><span class="line">    show_info(u);         <span class="comment">// 2 \n 10 20</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++)</span><br><span class="line">    {</span><br><span class="line">        append(u, val, <span class="number">5</span>); <span class="comment">// success</span></span><br><span class="line">    }</span><br><span class="line">    show_info(u);                   <span class="comment">// 1002 \n 10 20 5 ... 5</span></span><br><span class="line">    write(<span class="literal">NULL</span>, <span class="number">0</span>, val, <span class="number">5</span>);         <span class="comment">// fail</span></span><br><span class="line">    write(u, <span class="number">-1</span>, val, <span class="number">5</span>);           <span class="comment">// fail</span></span><br><span class="line">    write(u, <span class="number">0</span>, <span class="literal">NULL</span>, <span class="number">5</span>);           <span class="comment">// fail</span></span><br><span class="line">    write(u, <span class="number">0</span>, val, <span class="number">5</span>);            <span class="comment">// success</span></span><br><span class="line">    show_info(u);                   <span class="comment">// 1002 \n 10 20 5 ... 5</span></span><br><span class="line">    <span class="type">void</span> *read_out = read(<span class="literal">NULL</span>, <span class="number">0</span>); <span class="comment">// fail</span></span><br><span class="line">    IFRET(read_out != <span class="literal">NULL</span>, <span class="number">6</span>);</span><br><span class="line">    read_out = read(u, <span class="number">-1</span>); <span class="comment">// fail</span></span><br><span class="line">    IFRET(read_out != <span class="literal">NULL</span>, <span class="number">7</span>);</span><br><span class="line">    read_out = read(u, <span class="number">2</span>); <span class="comment">// success</span></span><br><span class="line">    IFRET(read_out == <span class="literal">NULL</span>, <span class="number">8</span>);</span><br><span class="line">    <span class="built_in">free</span>(read_out);        <span class="comment">// p-&gt;data should not be freed</span></span><br><span class="line">    read_out = read(u, <span class="number">0</span>); <span class="comment">// success</span></span><br><span class="line">    printc(<span class="literal">NULL</span>, <span class="number">1</span>);       <span class="comment">// fail, no output</span></span><br><span class="line">    printc(read_out, <span class="number">0</span>);   <span class="comment">// fail, no output</span></span><br><span class="line">    printc(read_out, <span class="number">5</span>);   <span class="comment">// G u T a o</span></span><br><span class="line">    printx(<span class="literal">NULL</span>, <span class="number">1</span>);       <span class="comment">// fail, no output</span></span><br><span class="line">    printx(read_out, <span class="number">0</span>);   <span class="comment">// fail, no output</span></span><br><span class="line">    printx(read_out, <span class="number">5</span>);   <span class="comment">// 0x6f61547547</span></span><br><span class="line">    <span class="built_in">free</span>(read_out);</span><br><span class="line">    read_out = <span class="literal">NULL</span>;</span><br><span class="line">    destroy(u);</span><br><span class="line">    u = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></div></figure>
</details>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS329 Machine Learning Quiz 1</title>
    <url>/2023/10/31/CS329_Quiz_1/</url>
    <content><![CDATA[<h2 id="CS329-Machine-Learning-H-Quiz-1"><a href="#CS329-Machine-Learning-H-Quiz-1" class="headerlink" title="CS329 Machine Learning(H) Quiz 1"></a>CS329 Machine Learning(H) Quiz 1</h2><p>樊斯特 12111624</p>
<h3 id="Question-1"><a href="#Question-1" class="headerlink" title="Question 1"></a>Question 1</h3><p>Given $x=u+v$, $u\sim\mathcal N(m_0,\Sigma_0)$,$v\sim\mathcal N(0,Q)$, $D=[x_1,\cdots,x_N]$</p>
<ol>
<li>$p(u\vert D,m_0,\Sigma_0,Q)$</li>
<li>$p(x\vert D,m_0,\Sigma_0,Q)$</li>
<li>evidence $p(D\vert m_0,\Sigma_0,Q)$</li>
</ol>
<h3 id="Solution-1-1"><a href="#Solution-1-1" class="headerlink" title="Solution 1.1"></a>Solution 1.1</h3><p>prior: $x\sim\mathcal N(m_0,\Sigma_0+Q)$</p>
<p>$p(u | D, m_0, \Sigma_0, Q) \propto p(D | m_0, \Sigma_0, Q) \cdot p(u | m_0, \Sigma_0).$</p>
<p>$p(D | m_0, \Sigma_0, Q)=\frac{1}{(2\pi (\Sigma_0+Q))^{N/2}}\exp\left\{-\frac{1}{2(\Sigma_0+Q)}\sum\limits_{n=1}^N (x_n-m_0)^2\right\}$</p>
<p>$p(u\vert m_0,\Sigma_0)=\frac{1}{(2\pi \Sigma_0)^{1/2}}\exp\left\{-\frac{1}{2\Sigma_0} (u-m_0)^2\right\}$</p>
<p>Hence Posterior Distribution $p(u | D, m_0, \Sigma_0, Q) \sim \mathcal N(m_u, \Sigma_u),$</p>
<p>where:</p>
<ul>
<li>$\Sigma_u^{-1} = NQ^{-1}+\Sigma_0^{-1}$</li>
<li>$\Sigma_u^{-1}m_u=Q^{-1}\sum\limits_{n=1}^Nx_n+\Sigma_0^{-1}m_0$</li>
</ul>
<h3 id="Solution-1-2"><a href="#Solution-1-2" class="headerlink" title="Solution 1.2"></a>Solution 1.2</h3><p>$x=u+v$</p>
<p>$p(x\vert D,m_0,\Sigma_0,Q)=\mathcal N(m_u,\Sigma_u+Q)$</p>
<h3 id="Solution-1-3"><a href="#Solution-1-3" class="headerlink" title="Solution 1.3"></a>Solution 1.3</h3><script type="math/tex; mode=display">
\begin{align*}
p(D\vert m_0,\Sigma_0,Q)&=\int p(D\vert u,Q)p(u\vert m_0,\Sigma_0) du\\
&=\frac{1}{(2\pi)^{N/2}\vert\Sigma_0\vert^{\frac 1 2}}\int \exp\left\{-\frac 1 2 \sum\limits_{n=1}^N(x_n-u)^\text TQ^{-1}(x_n-u)-\frac 1 2 \sum\limits_{n=1}^N(u-m_0)^\text T\Sigma_0^{-1}(u-m_0)\right\} du\\
&=\frac{1}{(2\pi)^{N/2}\vert\Sigma_0\vert^{\frac 1 2}}\int \exp\left\{\right\}
\end{align*}</script><h3 id="Question-2"><a href="#Question-2" class="headerlink" title="Question 2"></a>Question 2</h3><p>Given $y=Ax+v$, $x\sim\mathcal N(m_0,\Sigma_0)$,$v\sim\mathcal N(0,Q)$, $D=[y_1,\cdots,y_N]$</p>
<ol>
<li>$p(x\vert D,m_0,\Sigma_0,Q)$</li>
<li>$p(y\vert D,m_0,\Sigma_0,Q)$</li>
<li>evidence $p(D\vert m_0,\Sigma_0,Q)$</li>
</ol>
<h3 id="Solution-2-1"><a href="#Solution-2-1" class="headerlink" title="Solution 2.1"></a>Solution 2.1</h3><p>$p(x | D, m_0, \Sigma_0, Q) \propto p(D | m_0, \Sigma_0, Q) \cdot p(x | m_0, \Sigma_0).$</p>
<p>$p(D | m_0, \Sigma_0, Q) = \prod\limits_{n=1}^N p(x_n)=p(D | m_0, \Sigma_0, Q)= \frac{1}{(2\pi\Sigma_0)^{N/2}}\prod\limits_{n=1}^N   \exp\left\{-\frac{1}{2\Sigma_0}(x_n - m_0)^2\right\}.$</p>
<p>$p(x | m_0, \Sigma_0)=\mathcal N(m_0,\Sigma_0)$</p>
<p>Hence Posterior Distribution $p(x | D, m_0, \Sigma_0, Q) \sim \mathcal N(m_x, \Sigma_x),$</p>
<p>where:</p>
<ul>
<li><p>$\Sigma_x = \left(\Sigma_0^{-1} + NA^TQ^{-1}A\right)^{-1}$</p>
</li>
<li><p>$\Sigma_x^{-1}m_x=\sum\limits_{n=1}^NA^TQ^{-1}y_n+\Sigma_0^{-1}m_0$</p>
</li>
</ul>
<h3 id="Solution-2-2"><a href="#Solution-2-2" class="headerlink" title="Solution 2.2"></a>Solution 2.2</h3><p>$y=Ax+v$.</p>
<p>$p(y | D, m_0, \Sigma_0, Q) =\mathcal N(Am_x, A\Sigma_xA^T + Q)$</p>
<h3 id="Solution-2-3"><a href="#Solution-2-3" class="headerlink" title="Solution 2.3"></a>Solution 2.3</h3><h3 id="Review"><a href="#Review" class="headerlink" title="Review"></a>Review</h3><h4 id="Learning"><a href="#Learning" class="headerlink" title="Learning"></a>Learning</h4><script type="math/tex; mode=display">
p(\theta\vert\mathcal D)\propto p(\mathcal D\vert\theta)\cdot p(\theta)</script><h4 id="Prediction"><a href="#Prediction" class="headerlink" title="Prediction"></a>Prediction</h4><script type="math/tex; mode=display">
p(t\vert x,\mathcal D)=\int p(t\vert x,\mathcal \theta) \cdot p(\theta\vert\mathcal D) \text d \theta</script><h4 id="Evidence"><a href="#Evidence" class="headerlink" title="Evidence"></a>Evidence</h4><script type="math/tex; mode=display">
p(\mathcal D)=\int p(\mathcal D\vert\theta)\cdot p(\theta) \text d\theta</script><h2 id="Review-on-Nov-14"><a href="#Review-on-Nov-14" class="headerlink" title="Review on Nov. 14"></a>Review on Nov. 14</h2><p>$x\sim p(x\vert \mu,\Sigma)$, $x = [x_0,\dots,x_N]$, $\mu\sim p(\mu\vert m_0,\Sigma_0)$</p>
<p>posterior $p(\mu\vert x,m_0,\Sigma_0)\propto p(x\vert \mu) p(\mu)$</p>
<script type="math/tex; mode=display">
-\frac 1 2 (\mu-m_\text{MAP})^\text T \Sigma_\text{MAP}^{-1}(\mu-m_\text{MAP}) = -\sum\limits_{i=1}^N\frac 1 2 (x_i-\mu)^\text T \Sigma_\text{ML}^{-1}(x_i-\mu) - \frac 1 2 (\mu-m_0)^\text T \Sigma_0^{-1}(\mu-m_0)</script>]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Artificial Intelligence</tag>
      </tags>
  </entry>
  <entry>
    <title>CS329 Machine Learning Quiz 2</title>
    <url>/2023/11/14/CS329_Quiz_2/</url>
    <content><![CDATA[<h2 id="CS329-Machine-Learning-H-Quiz-2"><a href="#CS329-Machine-Learning-H-Quiz-2" class="headerlink" title="CS329 Machine Learning(H) Quiz 2"></a>CS329 Machine Learning(H) Quiz 2</h2><p>樊斯特 12111624</p>
<h3 id="Before-Quiz"><a href="#Before-Quiz" class="headerlink" title="Before Quiz"></a>Before Quiz</h3><script type="math/tex; mode=display">
\begin{align*}
&-(a_0-1)\ln\pi - (b_0-1)\ln(1-\pi) \quad &\text{prior of }\pi\\
&+\frac 1 2(\mu_1-m_{10})^\text T \Sigma_{10}^{-1}(\mu_1-m_{10}) \quad &\text{prior of }\mu_1\\
&+\frac 1 2(\mu_2-m_{20})^\text T \Sigma_{20}^{-1}(\mu_2-m_{20})\quad &\text{prior of }\mu_2\\
&+\sum\limits_{n=1}^N[t_n\ln\left(\pi\mathcal N (x\vert\mu_1,\Sigma_1)\right)+(1-t_n)\ln((1-\pi)\mathcal N (x\vert\mu_2,\Sigma_2))]\quad&\text{Likelihood}
\end{align*}</script><hr>
<h3 id="Question-1-Generative-Gaussian-Mixture"><a href="#Question-1-Generative-Gaussian-Mixture" class="headerlink" title="Question 1 Generative Gaussian Mixture"></a>Question 1 Generative Gaussian Mixture</h3><h4 id="Question-1-1"><a href="#Question-1-1" class="headerlink" title="Question 1.1"></a>Question 1.1</h4><p>$p(x)=\pi\mathcal N(x\vert\mu_1,\Sigma_1)+(1-\pi)\mathcal N(x\vert\mu_2,\Sigma_2)$</p>
<p>Given $\mathbf x=[x_1,\dots,x_N]$, $\mathbf t=[t_1,\dots,t_N]$</p>
<p>What’s the ML estimation of $\mu_1,\Sigma_1,\mu_2,\Sigma_2,\pi$?</p>
<h4 id="Solution-1-1"><a href="#Solution-1-1" class="headerlink" title="Solution 1.1"></a>Solution 1.1</h4><p>Derive log-likelihood function w.r.t. $\pi$,</p>
<script type="math/tex; mode=display">
\frac{\partial}{\partial \pi}L=\frac{\partial}{\partial \pi}\sum\limits_{n=1}^N \{t_n\ln\pi+(1-t_n)\ln(1-\pi)\}=\frac{N_1}{\pi}+\frac{N_2}{\pi-1}=0</script><p>Derive log-likelihood function w.r.t. $\mu_i$,</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial}{\partial \mu_1}L &= \frac{\partial}{\partial \mu_1} \sum\limits_{n=1}^N t_n\ln\mathcal N(x_n\vert,\mu_1,\Sigma_1)\\
&=\frac{\partial}{\partial \mu_1} -\frac 1 2 \sum\limits_{n=1}^N t_n(x_n-\mu_1)^\text T \Sigma_1^{-1}(x_n-\mu_1)\\
&=0\\
\frac{\partial}{\partial \mu_2}L &= \frac{\partial}{\partial \mu_2} \sum\limits_{n=1}^N (1-t_n)\ln\mathcal N(x_n\vert,\mu_2,\Sigma_2)\\
&=\frac{\partial}{\partial \mu_2} -\frac 1 2 \sum\limits_{n=1}^N (1-t_n)(x_n-\mu_2)^\text T \Sigma_1^{-1}(x_n-\mu_2)\\
&=0
\end{align*}</script><p>Derive log-likelihood function w.r.t. $\Sigma_i$,</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial}{\partial \Sigma_1} L &= \frac{\partial}{\partial \Sigma_1} \left(-\frac 1 2 \sum\limits_{n=1}^N t_n\ln |\Sigma_1|-\frac1 2 \sum\limits_{n=1}^N t_n(x_n-\mu_1)^\text T \Sigma_1^{-1}(x_n-\mu_1)\right)=0\\
\frac{\partial}{\partial \Sigma_2} L &= \frac{\partial}{\partial \Sigma_2} \left(-\frac 1 2 \sum\limits_{n=1}^N (1-t_n)\ln |\Sigma_2|-\frac1 2 \sum\limits_{n=1}^N (1-t_n)(x_n-\mu_2)^\text T \Sigma_2^{-1}(x_n-\mu_2)\right)=0
\end{align*}</script><p>Hence we have</p>
<script type="math/tex; mode=display">
\begin{align*}
\pi_\text{ML} &= \frac 1 N \sum\limits_{n=1}^N t_n =\frac{N_1}{N}=\frac{N_1}{N_1+N_2}\\
\mu_{1\text{ML}} &= \frac 1 {N_1}\sum\limits_{n=1}^Nt_n x_n\\
\mu_{2\text{ML}} &= \frac 1 {N_2}\sum\limits_{n=1}^N(1-t_n) x_n\\
\Sigma_{1\text{ML}} &=\frac 1 {N_1}\sum\limits_{x_n\in\mathcal C_1} (x_n-\mu_{1\text{ML}})(x_n-\mu_{1\text{ML}})^\text T\\
\Sigma_{2\text{ML}} &=\frac 1 {N_2}\sum\limits_{x_n\in\mathcal C_2} (x_n-\mu_{2\text{ML}})(x_n-\mu_{2\text{ML}})^\text T
\end{align*}</script><p>where</p>
<ul>
<li>$N_1$ is the number of data points in class 1,</li>
<li>$N_2$ is the number of data points in class 2.</li>
</ul>
<h4 id="Question-1-2"><a href="#Question-1-2" class="headerlink" title="Question 1.2"></a>Question 1.2</h4><p>$\pi\sim beta(a_0,b_0), p(\mu_i) = \mathcal N(m_{i0},\Sigma_{i0}), i=1,2$</p>
<p>Given $\mathbf x=[x_1,\dots,x_N]$, $\mathbf t=[t_1,\dots,t_N]$</p>
<p>What’s the MAP estimation of $\mu_1,\Sigma_1,\mu_2,\Sigma_2,\pi$?</p>
<h4 id="Solution-1-2"><a href="#Solution-1-2" class="headerlink" title="Solution 1.2"></a>Solution 1.2</h4><p>Posterior of $\pi$:</p>
<script type="math/tex; mode=display">
\begin{align*}
p(\pi|\mathbf{t}) &\propto p(\mathbf{t}|\pi) \cdot p(\pi)\\
&= \pi^{N_1} \cdot (1 - \pi)^{N_2} \cdot \pi^{a_0-1} \cdot (1-\pi)^{b_0-1}\\
&= \pi^{N_1 + a_0 - 1} \cdot (1 - \pi)^{N_2 + b_0 - 1}
\end{align*}</script><p>By using the property of product of Gaussian distributions, we obtain the MAP estimation of $\mu_i$ and $\Sigma_i$</p>
<script type="math/tex; mode=display">
\begin{align*}
\pi_\text{MAP} &= \frac{N_1+a_{0}-1}{N+a_0+b_0-2}=\frac{N_1+a_0-1}{N_1+N_2+a_0+b_0-2}\\
\Sigma_{1\text{MAP}} &=({\Sigma_{1\text{ML}}}^{-1}+{\Sigma_{10}}^{-1})^{-1}\\
\Sigma_{2\text{MAP}} &=({\Sigma_{2\text{ML}}}^{-1}+{\Sigma_{20}}^{-1})^{-1}\\
\mu_{1\text{MAP}} &= \Sigma_{1\text{MAP}}({\Sigma_{1\text{ML}}}^{-1}\mu_{1\text{ML}}+{\Sigma_{10}}^{-1}m_{10})\\
\mu_{2\text{MAP}} &= \Sigma_{2\text{MAP}}({\Sigma_{2\text{ML}}}^{-1}\mu_{2\text{ML}}+{\Sigma_{20}}^{-1}m_{20})\\
\end{align*}</script><h4 id="Question-1-3"><a href="#Question-1-3" class="headerlink" title="Question 1.3"></a>Question 1.3</h4><p>What’s $p(\mathcal C_1\vert x)$ for ML and MAP models respectively?</p>
<h4 id="Solution-1-3"><a href="#Solution-1-3" class="headerlink" title="Solution 1.3"></a>Solution 1.3</h4><p>By Bayes’ Theorem,</p>
<script type="math/tex; mode=display">
\begin{align*}
p_\text{ML}(\mathcal C_1\vert x)&=\frac{p_\text{ML}(x,\mathcal C_1)}{p_\text{ML}(x)}=\frac{\pi_\text{ML}\mathcal N(x\vert\mu_\text{1ML},\Sigma_\text{1ML})}{\pi_\text{ML}\mathcal N(x\vert\mu_\text{1ML},\Sigma_\text{1ML})+(1-\pi_\text{ML})\mathcal N(x\vert\mu_\text{2ML},\Sigma_\text{2ML})}\\
p_\text{MAP}(\mathcal C_1\vert x)&=\frac{p_\text{MAP}(x,\mathcal C_1)}{p_\text{MAP}(x)}=\frac{\pi_\text{MAP}\mathcal N(x\vert\mu_\text{1MAP},\Sigma_\text{1MAP})}{\pi_\text{MAP}\mathcal N(x\vert\mu_\text{1MAP},\Sigma_\text{1MAP})+(1-\pi_\text{MAP})\mathcal N(x\vert\mu_\text{2MAP},\Sigma_\text{2MAP})}
\end{align*}</script><hr>
<h3 id="Question-2-Discriminative-Logistic-Regression"><a href="#Question-2-Discriminative-Logistic-Regression" class="headerlink" title="Question 2 Discriminative Logistic Regression"></a>Question 2 Discriminative Logistic Regression</h3><h4 id="Question-2-1"><a href="#Question-2-1" class="headerlink" title="Question 2.1"></a>Question 2.1</h4><p>$y=\sigma(w^\text T\phi(x))$</p>
<p>Given $\mathbf x=[x_1,\dots,x_N]$, $\mathbf t=[t_1,\dots,t_N]$</p>
<p>What’s the ML estimation of $q(w)$?</p>
<h4 id="Solution-2-1"><a href="#Solution-2-1" class="headerlink" title="Solution 2.1"></a>Solution 2.1</h4><p>By Gauss-Newton iteration: $w^\text{new}=w^\text{old}-H^{-1}\nabla E(w)$, we obtain $w_\text{ML}$,</p>
<p>where</p>
<script type="math/tex; mode=display">
\begin{align*}
E(w) &= -\sum\limits_{n=1}^N  [t_n\ln y_n + (1-t_n)\ln(1-y_n)]\\
\nabla E(w) &= \sum\limits_{n=1}^N (y_n-t_n)\phi(x_n)\\
\text{step size}\quad H &= \nabla^2 E(w) = \sum\limits_{n=1}^N y_n(1-y_n)\phi(x_n)\phi(x_n)^\text T
\end{align*}</script><p>Hence</p>
<script type="math/tex; mode=display">
q(w) = \mathcal N(w\vert w_\text{ML}, H^{-1})</script><h4 id="Question-2-2"><a href="#Question-2-2" class="headerlink" title="Question 2.2"></a>Question 2.2</h4><p>$y=\sigma(w^\text T\phi(x))$, $p(w)\sim\mathcal N(m_0,\Sigma_0)$</p>
<p>Given $\mathbf x=[x_1,\dots,x_N]$, $\mathbf t=[t_1,\dots,t_N]$</p>
<p>What’s the MAP estimation of $q(w)$?</p>
<h4 id="Solution-2-2"><a href="#Solution-2-2" class="headerlink" title="Solution 2.2"></a>Solution 2.2</h4><p>By Gauss-Newton iteration: $w^\text{new}=w^\text{old}-H^{-1}\nabla E(w)$, we obtain $w_\text{ML}$,</p>
<p>where</p>
<script type="math/tex; mode=display">
\begin{align*}
E(w) &= \frac{1}{2} (w-m_0)^\text T\Sigma_0^{-1}(w-m_0)-\sum\limits_{n=1}^N  [t_n\ln y_n + (1-t_n)\ln(1-y_n)]\\
\nabla E(w) &=\Sigma_0^{-1}(w-m_0)+ \sum\limits_{n=1}^N (y_n-t_n)\phi(x_n)\\
\text{step size}\quad H &= \nabla^2 E(w) = \Sigma_0^{-1}+\sum\limits_{n=1}^N y_n(1-y_n)\phi(x_n)\phi(x_n)^\text T
\end{align*}</script><p>Hence </p>
<script type="math/tex; mode=display">
q(w) = \mathcal N(w\vert w_\text{MAP}, H^{-1})</script><h4 id="Question-2-3"><a href="#Question-2-3" class="headerlink" title="Question 2.3"></a>Question 2.3</h4><p>What’s $p(t\vert y(w,x))$ for ML and MAP estimation, respectively?</p>
<h4 id="Solution-2-3"><a href="#Solution-2-3" class="headerlink" title="Solution 2.3"></a>Solution 2.3</h4><p>Probability of $t=1$ w.r.t. ML and MAP estimations</p>
<script type="math/tex; mode=display">
\begin{align*}
p_\text{ML}(t=1\vert y(w_\text{ML},x)) &= \sigma(w_\text{ML}^\text T\phi(x)) = \frac{1}{1+\exp(-w_\text{ML}^\text T\phi(x))}\\
p_\text{MAP}(t=1\vert y(w_\text{MAP},x)) &= \sigma(w_\text{MAP}^\text T\phi(x))= \frac{1}{1+\exp(-w_\text{MAP}^\text T\phi(x))}\\
\end{align*}</script>]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Artificial Intelligence</tag>
      </tags>
  </entry>
  <entry>
    <title>CS205 C/C++ Project Audio Convertor</title>
    <url>/2023/11/25/CS205_Audio_Convertor/</url>
    <content><![CDATA[<p>Designer: <a href="https://github.com/Artanisax">Artanisax</a> and <a href="https://github.com/GuTaoZi">Gu Tao</a>.</p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>In this project, you need to implement a library in C/C++ that supports encoding conversion from .pcm raw audio files to <code>.wav</code> files and then to simple <code>.flac</code> files, as well as decoding wav and flac format files. Also you need to implement a <strong>Command Line Interface (CLI)</strong> to demonstrate your project.</p>
<h2 id="Audio-Formats"><a href="#Audio-Formats" class="headerlink" title="Audio Formats"></a>Audio Formats</h2><h3 id="PCM"><a href="#PCM" class="headerlink" title="PCM"></a><a href="https://en.wikipedia.org/wiki/Pulse-code_modulation">PCM</a></h3><p>A <a href="https://en.wikipedia.org/wiki/Raw_audio_format">raw audio file</a> is any file containing un-containerized and uncompressed audio. The data is stored as <strong>raw pulse-code modulation (PCM)</strong> values <strong>without any metadata header information</strong> (such as sampling rate, bit depth, endian, or number of channels).</p>
<h3 id="WAV"><a href="#WAV" class="headerlink" title="WAV"></a><a href="https://en.wikipedia.org/wiki/WAV">WAV</a></h3><p>WAV, known for WAVE (Waveform Audio File Format), is a subset of Microsoft’s Resource Interchange File Format (RIFF) specification for storing digital audio files. The format doesn’t apply any compression to the bitstream and stores the audio recordings with different sampling rates and bitrates. This format is of <strong>little-endian</strong>!</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">                           RIFF Header                         </span><br><span class="line">+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+</span><br><span class="line">| 0                          15 | 16                       31 |</span><br><span class="line">|=============================================================|</span><br><span class="line">|                    RIFF header identifier                   |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|                          Total Size                         |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|                          File type                          |</span><br><span class="line">+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+</span><br><span class="line"></span><br><span class="line">                          Format Chunk                         </span><br><span class="line">+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+</span><br><span class="line">| 0                          15 | 16                       31 |</span><br><span class="line">|=============================================================|</span><br><span class="line">|                    Format chunk identifier                  |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|                         Chunk Size                          |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|         audio format         |      number of channels      |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|                         Sample Rate                         |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|                          Byte Rate                          |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|          Block Align         |        Bits Per Sample       | </span><br><span class="line">+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+</span><br><span class="line"></span><br><span class="line">                           Data Chunk                          </span><br><span class="line">+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+</span><br><span class="line">| 0                          15 | 16                       31 |</span><br><span class="line">|=============================================================|</span><br><span class="line">|                     Data chunk identifier                   |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|                          Data Size                          |</span><br><span class="line">|-------------------------------------------------------------|</span><br><span class="line">|                         Sample Data                         |  </span><br><span class="line">+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+=+</span><br></pre></td></tr></table></figure>
<h3 id="FLAC"><a href="#FLAC" class="headerlink" title="FLAC"></a><a href="https://en.wikipedia.org/wiki/FLAC">FLAC</a></h3><p><strong>FLAC</strong> stands for <strong>Free Lossless Audio Codec</strong>, an audio format similar to MP3, but lossless, meaning that audio is compressed in FLAC without any loss in quality.</p>
<p>FLAC stands out as the fastest and most widely supported lossless audio codec, and the only one that at once is non-proprietary, is unencumbered by patents, has an open-source reference implementation, has a well documented format and API, and has several other independent implementations. This format is of <strong>big-endian</strong>!</p>
<p>More information like the FLAC format specification can be found on the <a href="https://xiph.org/flac/documentation.html">official documentation of FLAC</a>.</p>
<h2 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h2><p>The tasks below are listed in ascending order of difficulty to implement, and we recommend that you implement them in this order.</p>
<h3 id="Metadata-Display-amp-Edit-15-pts"><a href="#Metadata-Display-amp-Edit-15-pts" class="headerlink" title="Metadata Display &amp; Edit (15 pts)"></a>Metadata Display &amp; Edit (15 pts)</h3><p>In this part, you need to impement an executable file to display and edit the metadata of FLAC files. Given a <code>.flac</code> file, your program should be able to decode and display the information of metadata blocks of <strong>type 0 (STREAMINFO)</strong> and <strong>type 4 (VORBIS_COMMENT)</strong>.</p>
<p>A <code>.flac</code> file is given as the official testcase for this task.</p>
<h3 id="Encoder-RAW-→-WAV-→-FLAC-30-pts"><a href="#Encoder-RAW-→-WAV-→-FLAC-30-pts" class="headerlink" title="Encoder: RAW → WAV → FLAC (30 pts)"></a>Encoder: RAW → WAV → FLAC (30 pts)</h3><p>In this part, you need to implement a convertor from <code>.raw</code> to <code>.wav</code> (10 pts), and then to <code>.flac</code> (20 pts).</p>
<p>The first subtask is to convert a raw audio file to a <code>.wav</code> file. Since the raw audio file does not contain information like sample rate, bits per sample (depth), number of channel etc., when converting <code>.raw</code> to <code>.wav</code>, an additional JSON file is needed to provide extra information for the header. In official test cases, a <code>.json</code> file is given along with each <code>.raw</code> file.</p>
<p>The second subtask is to convert a <code>.wav</code> file into a <code>.flac</code> file. For basic requirement, the depth will only be <strong>16Bit int</strong> or <strong>24Bit int</strong>, and you only need to encode every subblock into a subframe using <strong><a href="https://xiph.org/flac/format.html#subframe_verbatim">verbatim predictor</a></strong> with channel assignment of <strong><a href="https://xiph.org/flac/format.html#frame_header">2 channels: left</a></strong>, with <strong><a href="https://xiph.org/flac/format.html#metadata_block_streaminfo">STREAMINFO</a></strong> and <strong><a href="https://xiph.org/flac/format.html#metadata_block_vorbis_comment">VORBIS_COMMENT</a></strong> metadata.</p>
<p>An important evaluation metric in this task is whether the audio files converted by your library can be played with commonly used media players.</p>
<p>A <code>.raw</code> file with <code>.json</code> is given as the official testcase for this task.</p>
<h3 id="Decoder-FLAC-→-WAV-→-RAW-30-pts"><a href="#Decoder-FLAC-→-WAV-→-RAW-30-pts" class="headerlink" title="Decoder: FLAC → WAV → RAW (30 pts)"></a>Decoder: FLAC → WAV → RAW (30 pts)</h3><p>For the third task, you are required to implement a decoder for your library, to convert a <code>.flac</code> file into <code>.wav</code> format (20 pts), and then to <code>.raw</code> format (10 pts).</p>
<p>Same as above, you only need to handle simple <code>.flac</code> files with <strong>STREAMINFO</strong> and <strong>VORBIS_COMMENT</strong> metadata and <strong>verbatim subframes</strong>.</p>
<p>You can choose the <code>.flac</code> file generated in the second task as the input (testcase) for this task, and check if the <code>.wav</code> and <code>.raw</code> files are the same as the input ones of the encoder.</p>
<p>No official testcase is given for this task.</p>
<h3 id="Possible-Bonus-Ideas-infty-pts"><a href="#Possible-Bonus-Ideas-infty-pts" class="headerlink" title="Possible Bonus Ideas ($\infty$ pts)"></a>Possible Bonus Ideas ($\infty$ pts)</h3><p>Here we offer some ideas about the possible bonus functions, with estimated difficulties. You are also encouraged to explore your own bonus ideas.</p>
<p>The tasks below are listed in ascending order of difficulty to implement.</p>
<ul>
<li><p>😊 <strong>Excellent Project Management:</strong><br>How to manage a project during development can be very easy, or very hard. Try to manage your project structure well, keep a changelog for revision control, write a user-friendly document, cooperate via GitHub, GitLab, Gitee, …</p>
<p>This should have been a basic requirement, but we set it as bonus to encourage you to learn how to manage a cooperating project well, which is an important skill that you can benefit from in future project development.</p>
<blockquote>
<p>Stop using QQ/Wechat to synchronize your project!<br>That’s too brutal!</p>
</blockquote>
</li>
<li><p>😊 <strong>More Metadata Block Types:</strong><br>Support (analyze, display and edit) additional metadata block types, like PADDING, SEEKTABLE, PICTURE etc.</p>
<ul>
<li><p>If a <strong>COMMENT</strong> block is followed by a <strong>PADDING</strong> block, the additional comments to be appended should overwright part of the <strong>PADDING</strong> block first rather than insert directly.</p>
</li>
<li><p>If an existing <strong>SEEKTABLE</strong> block (one .flac file has atmost one <strong>SEEKTABLE</strong> block) has placeholder seekpoints, the added ones are supposed to replace the placeholders. And if it’s followed by a <strong>PADDING</strong> block, do the same as the direction above.</p>
</li>
</ul>
</li>
<li><p>😊 <strong>Extreme Robustness:</strong><br>Although robustness is one of the basic requirements to obtain basic points, you can get bonus points if your library is excellent in terms of exception handling and memory management!</p>
<p>MD5 signiture and CRC check should also be covered in your decoder for this bonus.</p>
<p>However, to get this bonus part, you need to rethink what kind of robustness can be qualified as <strong>“extreme”</strong>.</p>
<blockquote>
<p>Oops! Why segmentation fault again!</p>
</blockquote>
</li>
<li><p>🤔 <strong>Interchannel Decorrelation</strong><br>Though the basic requirement for channel assignment is to store the left channel and the right channel seperately, there are more ways to deal with 2-channel audios, which can be helpful for compression. So try to support at least one of these <a href="https://xiph.org/flac/format.html#interchannel">speciall stereo assignments</a> (from $1000$ to $1010$) with your convertor.</p>
<ul>
<li>To implement this function, you may need to modify both the encoder and decoder, to adapt to different channel assignment.</li>
</ul>
</li>
<li><p>🤔 <strong>More Subframe Types</strong><br>Support additional subblock encoding patterns like <strong>SUBFRAME_CONSTANT</strong>, <strong>SUBFRAME_FIXED</strong>, <strong>SUBFRAME_LPC</strong>. You will learn the magic of lossless data compression during this bonus.</p>
<ul>
<li>When implementing this part, you are doing <strong>real lossless compression</strong>, the .flac file generated will reduce in size.</li>
<li>CONSTANT is recommended, the other two may need some pre-knowledge of signal processing.</li>
</ul>
<blockquote>
<p>My dad taught me that in Hawaii.</p>
</blockquote>
</li>
<li><p>🤔 <strong>GUI</strong><br>Implement a pretty GUI for your convertor! However, you should still focus on the main part of this project: your library.</p>
<blockquote>
<p>Gold needs to shine, too.</p>
</blockquote>
</li>
<li><p>😇 <strong>All-round Decoder</strong><br><a href="https://github.com/ietf-wg-cellar/flac-test-files">FLAC decoder testbench</a> provides a collection of FLAC files that can be used to test various FLAC decoder abilities. Improve your decoder to pass as many testcases as possible <a href="https://github.com/ietf-wg-cellar/flac-test-files/tree/main/subset">here</a>, the more robust your library is, the more bonus points you get.</p>
<blockquote>
<p>It’s a hexagonal warrior.</p>
</blockquote>
</li>
<li><p>😇 <strong>More Audio Formats</strong></p>
<p>Modify your library to make it work for more audio formats. A recommended challenge for those who are familiar with the audio file encoding formats.</p>
<blockquote>
<p>No pain, no gain.</p>
</blockquote>
</li>
<li><p><strong>Anything You Regard as “Bonus”</strong></p>
<p>Your team is encouraged to come up with your own ideas, we will grade your bonus according to your workload and implementation.</p>
</li>
</ul>
<p>Please describe your bonus clearly in your report, so that inspectors can fully understand and grade your bonus ideas.</p>
<h3 id="Self-Prepared-Testcases-5-pts"><a href="#Self-Prepared-Testcases-5-pts" class="headerlink" title="Self-Prepared Testcases (5 pts)"></a>Self-Prepared Testcases (5 pts)</h3><p>You are required to prepare at least 1 testcase for each basic function.</p>
<p>For your bonus part, you should prepare at least 1 testcase for each bonus function, otherwise the bonus is invalid.</p>
<p>Good news: any valid testcases that check the full usability of your library will obtain all of the 5 points.</p>
<h3 id="Report-10-pts"><a href="#Report-10-pts" class="headerlink" title="Report (10 pts)"></a>Report (10 pts)</h3><p>The report should be in <strong>PDF</strong> format, easy to understand and provide a clear description of the project, especially the <strong>highlights</strong>. <u>Notice that your report should contain everything that a good README has.</u></p>
<p>The report should also includes a detailed description of each team member’s contribution, and contribution rated as</p>
<ul>
<li>A (significant contribution)</li>
<li>B (moderate contribution)</li>
<li>C (little contribution)</li>
<li>D (free rider).</li>
</ul>
<p>Reports that meaninglessly pile up pages will result in lower scores. Please be as concise and brief as possible and just show the highlights. Please avoid pasting too much code in your report. Any non-technical detail should be discarded, that’s a waste of time for both your team and the inspectors.</p>
<p>You are encouraged to use IEEE, ACM, or any other elegant templates, however this will not affect your score, just to ease the veins of inspectors.</p>
<h2 id="Grading-Policy"><a href="#Grading-Policy" class="headerlink" title="Grading Policy"></a>Grading Policy</h2><p>The maximum of this project is 110 points, consists of:</p>
<ul>
<li>basic functions (75)</li>
<li>report (10)</li>
<li>self-prepared testcases (5)</li>
<li>bonus functions (20 + overflow to make up for basic requirements)</li>
</ul>
<ol>
<li><p>Your library need to support basic functions, including metadata display and editing, encoding and decoding, and pass all official testcases.<br> After implementing the basic part, the <strong>upper bound</strong> of your basic score will reach 65, failure to pass the basic usability test will make your upper bound less than 65.</p>
</li>
<li><p>If your bonus part gains over 20 points, the overflow part can fill the basic part loss.</p>
</li>
<li><p>Be careful of the memory management and exception handling! Your library should be robust enough for basic use. Bad memory management will reduce your score.</p>
</li>
<li><p>Attention should be paid to code style. Adequate time is given for code to be written correctly and with good style. Deductions on the score will be made for poor code style. Code style guides, such as the <a href="http://google.github.io/styleguide/cppguide.html">Google C++ Style Guide</a>, can be used as a reference.</p>
</li>
</ol>
<h2 id="Rules"><a href="#Rules" class="headerlink" title="Rules"></a>Rules</h2><ol>
<li><p>To make this project more interesting, you are not allowed to use libFLAC, libFLAC++, ffmpeg, or any other library making it TOO easy to implement your convertor. Since your workload will be evaluated for grading.</p>
</li>
<li><p>The project files must be submitted before the deadline. Any submission after the deadline (even by 1 second) will result in a score of 0. The deadline is 23:59, on the Sunday of week 18.</p>
</li>
</ol>
<h2 id="Utilities"><a href="#Utilities" class="headerlink" title="Utilities"></a>Utilities</h2><p>Heres some useful tools to help you understand the formats and file streams. Notice that you may <strong>NOT</strong> invoke them in your own source code.</p>
<ul>
<li><p><a href="https://xiph.org/flac/documentation_tools.html">FLAC</a><br>The official command-line tools, which contains two sub programs. <code>flac</code> is an encoder as well as a decoder, while <code>metaflac</code> is a metadata editor. Your project may imitate the CLI of this official tool.</p>
<p>We highly recommend you to check the format of .flac files using <code>flac -a</code> rather than reading the file in hexadecimal when debugging.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">flac input.wav      # encode WAVE into FLAC</span><br><span class="line">flac -d input.flac  # decode FLAC into WAVE</span><br><span class="line">flac -a input.flac  # analyze audio frames</span><br></pre></td></tr></table></figure>
<p><img src="https://s2.loli.net/2023/11/26/lZD8UhqR17aQeSk.png" alt=""></p>
</li>
<li><p><a href="https://sourceforge.net/projects/sox/">Sound eXchange</a><br>SoX is the Swiss Army Knife of sound processing utilities. It can convert audio files to other popular audio file types and also apply sound effects and filters during the conversion.</p>
<p>You may check if your convertor generates the same result as SoX does.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sox -i input.wav        # show WAVE header info</span><br><span class="line">sox input.wav -t raw output.raw  # decode WAVE into RAW</span><br><span class="line">sox -t raw -c 2 -e signed-integer -b 16 -r 44100 name.raw name.wav</span><br><span class="line">  # add headers for RAW and then encode them into WAVE</span><br></pre></td></tr></table></figure>
</li>
<li><p><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.hexeditor">Hex Editor</a><br>A custom editor extension for Visual Studio Code which provides a hex editor for viewing and manipulating files in their raw hexadecimal representation.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2></li>
</ul>
<p><a href="https://en.wikipedia.org/wiki/WAV">Wikipedia: Waveform Audio File Format</a></p>
<p><a href="https://en.wikipedia.org/wiki/FLAC">Wikipedia: Free Lossless Audio Codec</a></p>
<p><a href="https://xiph.org/flac/index.html">FLAC Official Webpage</a></p>
<p><a href="https://github.com/xiph/flac">GitHub: xiph/flac</a></p>
<p><a href="https://github.com/ietf-wg-cellar/flac-test-files">FLAC decoder testbench</a></p>
]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title>CS329 Machine Learning Quiz 3</title>
    <url>/2023/11/28/CS329_Quiz_3/</url>
    <content><![CDATA[<h2 id="CS329-Machine-Learning-H-Quiz-3"><a href="#CS329-Machine-Learning-H-Quiz-3" class="headerlink" title="CS329 Machine Learning(H) Quiz 3"></a>CS329 Machine Learning(H) Quiz 3</h2><p>樊斯特 12111624</p>
<h3 id="Before-Quiz"><a href="#Before-Quiz" class="headerlink" title="Before Quiz"></a>Before Quiz</h3><ol>
<li><p>Learning </p>
<p>$p(\theta\vert\mathcal D)$</p>
<ul>
<li>$p(\mathcal D\vert \theta)p(\theta)$ closed-form solution</li>
<li>$L(\theta)$<ul>
<li>$b=\nabla_\theta L(\theta)$</li>
<li>$H=\nabla^2_\theta L(\theta)$</li>
</ul>
</li>
</ul>
<p>$\theta^+\leftarrow \theta - H^{-1}b$</p>
<p>$p(\theta\vert\mathcal D)= \mathcal N(\theta_\text{MAP},H_\text{MAP}^{-1})$</p>
</li>
<li><p>Prediction</p>
<script type="math/tex; mode=display">
p(t_{N+1}\vert x_{N+1},\mathcal D) = \int p(t_{N+1},\theta\vert x_{N+1},\mathcal D) \text d \theta = \int p(t_{N+1}\vert x_{N+1},\theta)p(\theta\vert\mathcal D)\text d \theta</script><ul>
<li><p>$t_{N+1} = y(x_{N+1},\theta)+v$, $v\sim \mathcal N(0,\beta^{-1})$</p>
<p>$p(t_{N+1}\vert x_{N+1},\mathcal D) =\mathcal N(y(x_{N+1},\theta_\text{MAP})+\bar q_\text{MAP}^\text{T}H^{-1}_\text{MAP}\bar q_\text{MAP})$</p>
</li>
<li><p>$y(x_{N+1},\theta)=\delta?(\Phi^\text T(x_{N+1})\theta)$</p>
<p>$p(t_{N+1}\vert x_{N+1},\mathcal D) =p(t_{N+1}\vert x_{N+1},\mathcal \theta_\text{MAP}) =(y(x_{N+1},\theta_\text{MAP}))^{t_{N+1}}(1-y(x_{N+1},\theta_\text{MAP}))^{1-t_{N+1}}$</p>
</li>
</ul>
</li>
<li><p>Evaluation</p>
<script type="math/tex; mode=display">
\begin{align*}
p(\mathcal D) &= \int p(\mathcal D\vert\theta)p(\theta)\text d \theta\\
-\ln p(\mathcal D) &=\int- \ln p(\mathcal D\vert \theta)-\ln p(\theta)\text d\theta
\\ &= -\ln p(\mathcal D\vert \theta_\text{MAP})-\ln p(\theta_\text{MAP})+\int\frac 1 2 (\theta-\theta_\text{MAP})^\text T H^{-1}_\text{MAP}(\theta-\theta_\text{MAP})\text d\theta\\
&=-\ln p(\mathcal D\vert \theta_\text{MAP})-\ln p(\theta_\text{MAP})-\frac M 2 \ln(2\pi)+\frac M 2 \ln\vert H_\text{MAP} \vert
\end{align*}</script></li>
</ol>
<hr>
<h3 id="Question-1-Neural-Networks-without-Prior"><a href="#Question-1-Neural-Networks-without-Prior" class="headerlink" title="Question 1 Neural Networks without Prior"></a>Question 1 Neural Networks without Prior</h3><p><img src="https://s2.loli.net/2023/11/28/b7tYKeFscGjp6Dw.png" alt="image.png" style="zoom:50%;" /></p>
<h4 id="Question-1-1"><a href="#Question-1-1" class="headerlink" title="Question 1.1"></a>Question 1.1</h4><p>What are the gradients of $\frac{\partial y_k}{\partial w_{kj}}$, $\frac{\partial y_k}{\partial w_{ji}}$ for regression and classification, respectively?</p>
<h4 id="Solution-1-1"><a href="#Solution-1-1" class="headerlink" title="Solution 1.1"></a>Solution 1.1</h4><ol>
<li><p>Regression</p>
<script type="math/tex; mode=display">
\begin{align*}
y_k&=a_k\\
\frac{\partial y_k}{\partial w_{kj}}&=\frac{\partial a_k}{\partial w_{kj}}=z_j\\
z_j&=h(a_j), \frac{\partial a_j}{\partial w_{ji}}=z_i\\
\frac{\partial y_k}{\partial w_{ji}}&=\frac{\partial a_k}{\partial z_j}\frac{\partial z_j}{\partial a_j}\frac{\partial a_j}{\partial w_{ij}}=w_{kj} h'(a_j)z_i
\end{align*}</script></li>
<li><p>Classification</p>
<script type="math/tex; mode=display">
\begin{align*}
y_k&=\sigma(a_k)\\
\frac{\partial y_k}{\partial w_{kj}}&=\frac{\partial y_k}{\partial a_k}\frac{\partial a_k}{\partial w_{kj}}=\sigma'(a_k)z_j=y_k(1-y_k)z_j\\
z_j&=h(a_j), \frac{\partial a_j}{\partial w_{ji}}=z_i\\
\frac{\partial y_k}{\partial w_{ji}}&=\frac{\partial y_k}{\partial a_k}\frac{\partial a_k}{\partial z_j}\frac{\partial z_j}{\partial a_j}\frac{\partial a_j}{\partial w_{ij}}=y_k(1-y_k)w_{kj} h'(a_j)z_i
\end{align*}</script></li>
</ol>
<h4 id="Question-1-2"><a href="#Question-1-2" class="headerlink" title="Question 1.2"></a>Question 1.2</h4><p>What are the gradients of $\frac{\partial E_n}{\partial w_{kj}}$, $\frac{\partial E_n}{\partial w_{ji}}$ for regression and classification, respectively?</p>
<h4 id="Solution-1-2"><a href="#Solution-1-2" class="headerlink" title="Solution 1.2"></a>Solution 1.2</h4><script type="math/tex; mode=display">
\begin{align*}
\delta_k &\equiv y_k-t_k \\
\delta_j &\equiv \sum\limits_{k=1}^K\frac{\partial E_n}{\partial a_k}\frac{\partial a_k}{\partial a_j} =  h'(a_j) \sum\limits_{k=1}^K w_{kj}\delta_k \\
\end{align*}</script><ol>
<li><p>Regression</p>
<script type="math/tex; mode=display">
\begin{align*}
E_n &= \frac 1 2 \sum\limits_{k=1}^K (y_k-t_k)^2\\
\frac{\partial E_n}{\partial w_{kj}} &=\frac{\partial E_n}{\partial y_k}\frac{\partial y_k}{\partial w_{kj}} =(y_k-t_k)z_j =\delta_kz_j\\
\frac{\partial E_n}{\partial w_{ji}} &= \frac{\partial E_n}{\partial a_j}\frac{\partial a_j}{\partial w_{kj}} =h'(a_j)\sum\limits_{k=1}^N w_{kj}\delta_k z_i =\delta_jz_i
\end{align*}</script></li>
<li><p>Classification</p>
<script type="math/tex; mode=display">
\begin{align*}
E_n &= -\sum\limits_{k=1}^K t_k\ln y_k + (1-t_k)\ln (1-y_k)\\
\frac{\partial E_n}{\partial w_{kj}} &=\frac{\partial E_n}{\partial y_k}\frac{\partial y_k}{\partial a_k}\frac{\partial a_k}{\partial w_{kj}} = (y_k-t_k)z_j = \delta_kz_j\\
\frac{\partial E_n}{\partial w_{ji}} &= \frac{\partial E_n}{\partial a_j}\frac{\partial a_j}{\partial w_{kj}} = h'(a_j)\sum\limits_{k=1}^N w_{kj}\delta_k z_i = \delta_jz_i
\end{align*}</script></li>
</ol>
<h4 id="Question-1-3"><a href="#Question-1-3" class="headerlink" title="Question 1.3"></a>Question 1.3</h4><p>What’s the gradients of $\frac{\partial y_k}{\partial z_i}$ for regression and classification, respectively?</p>
<h4 id="Solution-1-3"><a href="#Solution-1-3" class="headerlink" title="Solution 1.3"></a>Solution 1.3</h4><ol>
<li><p>Regression</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial y_k}{\partial z_i} = \frac{\partial y_k}{\partial a_k}\frac{\partial a_k}{\partial z_j}\frac{\partial z_j}{\partial a_j}\frac{\partial a_j}{\partial z_i} = w_{kj}h'(a_j)w_{ji}
\end{align*}</script></li>
<li><p>Classification</p>
<script type="math/tex; mode=display">
\begin{align*}
\frac{\partial y_k}{\partial z_i} = \frac{\partial y_k}{\partial a_k}\frac{\partial a_k}{\partial z_j}\frac{\partial z_j}{\partial a_j}\frac{\partial a_j}{\partial z_i} = y_k(1-y_k)w_{kj}h'(a_j)w_{ji}
\end{align*}</script></li>
</ol>
<h3 id="Question-2-Neural-Networks-with-Prior"><a href="#Question-2-Neural-Networks-with-Prior" class="headerlink" title="Question 2 Neural Networks with Prior"></a>Question 2 Neural Networks with Prior</h3><p>If the prior of $w\sim \mathcal N(m_0,\Sigma_0^{-1})$ for both regression and classification, then</p>
<h4 id="Question-2-1"><a href="#Question-2-1" class="headerlink" title="Question 2.1"></a>Question 2.1</h4><p>What are the MAP solutions of $w,p(w\vert\mathcal D)$ for both cases?</p>
<h4 id="Solution-2-1"><a href="#Solution-2-1" class="headerlink" title="Solution 2.1"></a>Solution 2.1</h4><p>By iterating $w^\text {new}=w^\text {old}-A^{-1}\nabla E(w)$, we obtain $w_\text{MAP}$.</p>
<ol>
<li><p>Regression</p>
<script type="math/tex; mode=display">
\begin{align*}
E(w) &= -\ln p(w\vert \mathbf t) = \frac\alpha 2 w^\text Tw +\frac\beta 2 \sum\limits_{n=1}^N [y(x_n,w)-t_n]^2 + C\\
\nabla E(w) &=\alpha w + \beta \sum\limits_{n=1}^N (y_n-t_n)\mathbf g_n\\
\mathbf g &= \nabla_{w} y(\mathbf x,w)\vert_{w=w_\text{MAP}}\\
A&=\nabla^2 E(w) = \alpha\mathbf I + \beta \mathbf H
\end{align*}</script></li>
<li><p>Classification</p>
<script type="math/tex; mode=display">
\begin{align*}
E(w) &= -\ln p(w\vert \mathbf t) = \frac\alpha 2 w^\text Tw -\sum\limits_{n=1}^N [t_n\ln y_n + (1-t_n)\ln(1-y_n)]\\
\nabla E(w) &=\alpha w + \sum\limits_{n=1}^N (y_n-t_n)\mathbf g_n\\
\mathbf g &= \nabla_{w} y(\mathbf x,w)\vert_{w=w_\text{MAP}}\\
A&=\nabla^2 E(w) = \alpha\mathbf I + \mathbf H
\end{align*}</script></li>
</ol>
<p>where $\mathbf H$ is the Hessian matrix of the sum of error function.</p>
<p>Hence we have $p(w_\text{MAP}\vert \mathcal D) = \mathcal N(w\vert w_\text{MAP},A^{-1})$.</p>
<h4 id="Question-2-2"><a href="#Question-2-2" class="headerlink" title="Question 2.2"></a>Question 2.2</h4><p>What are the predictive distributions of a new data input $x_{N+1}$ and label $t_{N+1}$ for both cases?</p>
<h4 id="Solution-2-2"><a href="#Solution-2-2" class="headerlink" title="Solution 2.2"></a>Solution 2.2</h4><ol>
<li><p>Regression</p>
<script type="math/tex; mode=display">
p(t_{N+1}\vert x_{N+1}, \mathcal{D}) = \mathcal N(y(x,w_\text{MAP}),\beta^{-1}+g^\text T Ag)</script><script type="math/tex; mode=display">
p(t_{N+1}\vert x_{N+1},\mathcal D) =\mathcal N(y(x_{N+1},\theta_\text{MAP})+\bar q_\text{MAP}^\text{T}H^{-1}_\text{MAP}\bar q_\text{MAP})</script></li>
</ol>
<ol>
<li><p>Classification</p>
<script type="math/tex; mode=display">
p(t_{N+1} \vert{x_{N+1}}, \mathcal{D})=\sigma\left(\kappa\left(\sigma_{a}^{2}\right) a_{M A P}\right)</script></li>
</ol>
<script type="math/tex; mode=display">
p(t_{N+1}\vert x_{N+1},\mathcal D) =p(t_{N+1}\vert x_{N+1},\mathcal \theta_\text{MAP}) =(y(x_{N+1},\theta_\text{MAP}))^{t_{N+1}}(1-y(x_{N+1},\theta_\text{MAP}))^{1-t_{N+1}}</script>]]></content>
      <categories>
        <category>CS</category>
      </categories>
      <tags>
        <tag>Machine Learning</tag>
        <tag>Artificial Intelligence</tag>
      </tags>
  </entry>
</search>
